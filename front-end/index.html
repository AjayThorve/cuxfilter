<head>
  </head>
  
  <body>
    <form action="" id="formContent" method="post" enctype="multipart/form-data" >
            <input  type="file" name="file"  required id="upload">
            <button class="submitI" >Upload csv</button> 
   </form>
   <div id="myDiv"><!-- Plotly chart will be drawn inside this DIV --></div>

   <button id='gen-plot'>generate plot</button>


   <!-- Plotly.js -->
   <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    <script>
    $("#formContent").submit(function(e){
            e.preventDefault();
            var formdata = new FormData(this);

            $.ajax({
                url: "http://localhost:3000/upload",
                type: "POST",
                data: formdata,
                mimeTypes:"multipart/form-data",
                contentType: false,
                cache: false,
                processData: false,
                success: function(res){
                    data = JSON.parse(res);
                    alert("file successfully submitted");
                    genPlot(data);
                },error: function(){
                    alert("okey");
                }
            });
        });
     
    function genPlot(data){
        console.log(data['A']);
        var d = [{
            x: data['B'],
            y: data['A'],
            type: 'histogram'
        }
        ]
       Plotly.newPlot('myDiv', d);
    }
    </script>
  </body>