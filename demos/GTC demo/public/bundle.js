!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=246)}([function(t,e,n){t.exports=n(252)()},function(t,e,n){"use strict";t.exports=n(248)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return r})},function(t,e,n){var r=n(137),i=n(288),o=n(289),a=n(69),s=n(116),u=n(41),l=Object.prototype.hasOwnProperty,c=o(function(t,e){if(s(e)||a(e))i(e,u(e),t);else for(var n in e)l.call(e,n)&&r(t,n,e[n])});t.exports=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},function(t,e,n){var r=n(138),i=n(93),o=n(114),a=n(180),s=Object.prototype,u=s.hasOwnProperty,l=r(function(t,e){t=Object(t);var n=-1,r=e.length,l=r>2?e[2]:void 0;for(l&&o(e[0],e[1],l)&&(r=1);++n<r;)for(var c=e[n],f=a(c),p=-1,h=f.length;++p<h;){var d=f[p],y=t[d];(void 0===y||i(y,s[d])&&!u.call(t,d))&&(t[d]=c[d])}return t});t.exports=l},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";var r=n(96),i=n(29);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.b.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),o=-1!==n.indexOf("Trident/");return r||o}var a=n(6),s={};function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";s[t]=s[t]||1;var e=s[t]++;return"".concat(t,"-").concat(e)}function l(t){return Object(a.a)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function c(t){var e=!0;for(var n in t){e=!1;break}return e}var f=n(49);function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isInteger,r=void 0!==n&&n;if(Array.isArray(t)||ArrayBuffer.isView(t))return function(t,e){for(var n=e.maxElts,r=void 0===n?16:n,i=e.size,o=void 0===i?1:i,a="[",s=0;s<t.length&&s<r;++s)s>0&&(a+=",".concat(s%o==0?" ":"")),a+=p(t[s],e);var u=t.length>r?"...":"]";return"".concat(a).concat(u)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return r?"0":"0.";if(r)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function h(t,e,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach(function(t){o.methodName||(o[t]=function(){throw f.a.removed("Calling removed method ".concat(e,".").concat(t,": "),i),new Error(t)})})}n.d(e,"c",function(){return r.a}),n.d(e,"e",function(){return o}),n.d(e,"i",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"g",function(){return f.a}),n.d(e,"b",function(){return p}),n.d(e,"a",function(){return a.a}),n.d(e,"h",function(){return h})},function(t,e,n){"use strict";var r=n(80),i=n(39),o=n(10),a=n(38),s="Failed to create WebGL context in Node.js, headless gl not available",u="Failed to create WebGL context in Node.js, headless gl returned null";var l,c=n(8),f=c.c&&"undefined"!=typeof document,p=f&&"complete"===document.readyState;function h(){return l||(l=f?new Promise(function(t,e){if(f&&"complete"===document.readyState)return p=!0,void t(document);window.onload=function(){p=!0,t(document)}}):Promise.resolve({})),l}function d(t){var e=t.width,n=void 0===e?800:e,r=t.height,i=void 0===r?600:r,o=t.id,a=void 0===o?"gl-canvas":o,s=t.insert,u=void 0===s||s,l=document.createElement("canvas");if(l.id=a,l.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",l.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",u){var c=document.body;c.insertBefore(l,c.firstChild)}return l}var y=n(82),v=n(4),g=n(29);function m(t){return t.luma=t.luma||{},t.luma}function b(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debug;return null===t?null:void 0===e||e?function(t){if(null===t)return null;if(!g.a.WebGLDebug)return c.g.warn('WebGL debug mode not activated. import "luma.gl/debug" to enable.')(),t;var e=m(t);if(e.realContext)return t;if(e.debugContext)return e.debugContext;var n=g.a.WebGLDebug.makeDebugContext(t,x,w);return Object.assign(function t(){Object(v.a)(this,t)}.prototype,n),e.debugContext=n,n.debug=!0,n.gl=t,c.g.info("debug context actived."),n}(t):function(t){if(null===t)return null;var e=m(t);return e.realContext?e.realContext:t}(t)}function _(t,e){var n=g.a.WebGLDebug.glFunctionArgsToString(t,e);return n="".concat(n.slice(0,100)).concat(n.length>100?"...":""),"gl.".concat(t,"(").concat(n,")")}function x(t,e,n){var r=g.a.WebGLDebug.glEnumToString(t),i=g.a.WebGLDebug.glFunctionArgsToString(e,n),o="".concat(r," in gl.").concat(e,"(").concat(i,")");if(c.g.throw)throw new Error(o);c.g.error(o)()}function w(t,e){var n;if(c.g.priority>=4&&(n=_(t,e),c.g.log(4,n)()),c.g.break){n=n||_(t,e);c.g.break&&c.g.break.every(function(t){return-1!==n.indexOf(t)})}var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){if(void 0===a.value){if(n=n||_(t,e),c.g.throw)throw new Error("Undefined argument: ".concat(n));c.g.error("Undefined argument: ".concat(n))}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}var E,O=n(2);E={},Object(O.a)(E,33902,{gl1:new Float32Array([1,1])}),Object(O.a)(E,33901,{gl1:new Float32Array([1,1])}),Object(O.a)(E,3379,{gl1:64,gl2:2048}),Object(O.a)(E,34076,{gl1:16}),Object(O.a)(E,34930,{gl1:8}),Object(O.a)(E,35661,{gl1:8}),Object(O.a)(E,35660,{gl1:0}),Object(O.a)(E,34024,{gl1:1}),Object(O.a)(E,36348,{gl1:8}),Object(O.a)(E,34921,{gl1:8}),Object(O.a)(E,36347,{gl1:128}),Object(O.a)(E,36349,{gl1:16}),Object(O.a)(E,3386,{gl1:new Int32Array([0,0])}),Object(O.a)(E,32883,{gl1:0,gl2:256}),Object(O.a)(E,35071,{gl1:0,gl2:256}),Object(O.a)(E,37447,{gl1:0,gl2:0}),Object(O.a)(E,36063,{gl1:0,gl2:4}),Object(O.a)(E,35379,{gl1:0,gl2:0}),Object(O.a)(E,35374,{gl1:0,gl2:0}),Object(O.a)(E,35377,{gl1:0,gl2:0}),Object(O.a)(E,34852,{gl1:0,gl2:4}),Object(O.a)(E,36203,{gl1:0,gl2:0}),Object(O.a)(E,33001,{gl1:0,gl2:0}),Object(O.a)(E,33e3,{gl1:0,gl2:0}),Object(O.a)(E,37157,{gl1:0,gl2:0}),Object(O.a)(E,35373,{gl1:0,gl2:0}),Object(O.a)(E,35657,{gl1:0,gl2:0}),Object(O.a)(E,36183,{gl1:0,gl2:0}),Object(O.a)(E,37137,{gl1:0,gl2:0}),Object(O.a)(E,34045,{gl1:0,gl2:0}),Object(O.a)(E,35978,{gl1:0,gl2:0}),Object(O.a)(E,35979,{gl1:0,gl2:0}),Object(O.a)(E,35968,{gl1:0,gl2:0}),Object(O.a)(E,35376,{gl1:0,gl2:0}),Object(O.a)(E,35375,{gl1:0,gl2:0}),Object(O.a)(E,35659,{gl1:0,gl2:0}),Object(O.a)(E,37154,{gl1:0,gl2:0}),Object(O.a)(E,35371,{gl1:0,gl2:0}),Object(O.a)(E,35658,{gl1:0,gl2:0}),Object(O.a)(E,35076,{gl1:0,gl2:-8,negative:!0}),Object(O.a)(E,35077,{gl1:0,gl2:7}),Object(O.a)(E,35380,{gl1:0,gl2:0});var S=n(7),P=function(t){return t},C=new(function(){function t(){Object(v.a)(this,t),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return Object(S.a)(t,[{key:"poll",value:function(t){this.cancelInvalidQueries(t);var e=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(a.isResultAvailable()){var s=a.getResult();this.resolveQuery(a,s)}}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function(t){var e=t.queryType,n=t.errorMessage,r=t.checkInvalid;this.invalidQueryType=e,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P;this.cancelInvalidQueries(t.gl),this.cancelQuery(t);var r={};return t.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),Object.assign(t.promise,r),this.pendingQueries.add(t),t.promise.then(e).catch(n)}},{key:"resolveQuery",value:function(t,e){this.pendingQueries.delete(t),t.promise.resolve(e)}},{key:"rejectQuery",value:function(t,e){this.pendingQueries.delete(t),t.promise&&t.promise.reject(new Error(e))}},{key:"deleteQuery",value:function(t){return this.rejectQuery(t,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(t){return this.rejectQuery(t,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(t){t instanceof this.invalidQueryType&&this.rejectQuery(t,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(t){if(this.checkInvalid(t)){var e=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.invalidateQuery(a)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}}]),t}()),T=n(6),k=32874;function A(t){return Boolean(t&&(t instanceof o.a||t.TEXTURE_BINDING_3D===k))}var M={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function j(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e=Object.assign({},M,e),r=n.canvas,i=n.width,o=n.height,l=n.throwOnError,f=n.manageState,h=n.debug;function v(t){if(l)throw new Error(t);return null}c.c?t=function(t){var e=t.canvas,n=t.opts,r=void 0===n?{}:n,i=t.onError,o=void 0===i?function(t){return null}:i;function a(t){o("WebGL context: ".concat(t.statusMessage||"Unknown error"))}e.addEventListener("webglcontextcreationerror",a,!1);var s=r.webgl1,u=void 0===s||s,l=r.webgl2,c=void 0===l||l,f=null;return c&&(f=(f=f||e.getContext("webgl2",r))||e.getContext("experimental-webgl2",r)),u&&(f=(f=f||e.getContext("webgl",r))||e.getContext("experimental-webgl",r)),e.removeEventListener("webglcontextcreationerror",a,!1),f||o("Failed to create ".concat(c&&!u?"WebGL2":"WebGL"," context"))}({canvas:function(t){var e,n=t.canvas,r=t.width,i=t.height,o=t.onError,a=void 0===o?function(){}:o;return"string"==typeof n?(p||a("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):e=n||d({id:"lumagl-canvas",width:r,height:i,onError:a}),e}({canvas:r,width:i,height:o,onError:v}),opts:e}):t=function(t){var e=t.width,n=t.height,r=t.opts,i=t.onError,o=r.webgl1;if(r.webgl2&&!o)return i("headless-gl does not support WebGL2");if(!a.d)return i(s);var l=Object(a.d)(e,n,r);return l||i(u)}({width:i,height:o,opts:e,onError:v});return t?(f&&Object(y.a)(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.g.log.apply(c.g,[1].concat(e))()}}),c.c&&h&&(t=b(t,{debug:h}),c.g.priority=Math.max(c.g.priority,1)),function(t){var e=A(t)?"WebGL2":"WebGL1",n=function(t){return function(t){var e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t)}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";c.g.once(0,"".concat(e).concat(i," context ").concat(r))()}(t),t):null}var R=n(26),I={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},L={};Object.keys(I).forEach(function(t){L[t]=t});function D(t,e){var n=I[e];Object(T.a)(n,e);var r=Object(o.n)(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return Object(T.a)(!1===i||!0===i),i}function F(t,e){return N(t,e)}function N(t,e){return(e=Array.isArray(e)?e:[e]).every(function(e){return D(t,e)})}var B=n(25),z=n(13),U=n(11),V=n(14),G=n(32),W="Shader: GLSL source code must be a JavaScript string",q=35632,H=35633,X=function(t){function e(t,n){var r;Object(v.a)(this,e),Object(o.e)(t),Object(T.a)("string"==typeof n.source,W);var i=Object(o.k)(n.source,null)||n.id||Object(c.i)("unnamed ".concat(e.getTypeName(n.shaderType)));return(r=Object(z.a)(this,Object(U.a)(e).call(this,t,{id:i}))).shaderType=n.shaderType,r.source=n.source,r.initialize(n),r}return Object(V.a)(e,t),Object(S.a)(e,null,[{key:"getTypeName",value:function(t){switch(t){case H:return"vertex-shader";case q:return"fragment-shader";default:return Object(T.a)(!1),"unknown"}}}]),Object(S.a)(e,[{key:"initialize",value:function(t){var e=t.source,n=Object(o.k)(e,null);n&&(this.id=Object(c.i)(n)),this._compile(e)}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this.handle,t)}},{key:"toString",value:function(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return Object(o.k)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var t=this.gl.getShaderInfoLog(this.handle),e=Object(o.o)(t,this.source,this.shaderType,this.id),n=e.shaderName,r=e.errors,i=e.warnings;throw c.g.error("GLSL compilation errors in ".concat(n,"\n").concat(r))(),c.g.warn("GLSL compilation warnings in ".concat(n,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(n))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),e}(G.a),Z=function(t){function e(t,n){return Object(v.a)(this,e),"string"==typeof n&&(c.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),n={source:n}),Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({},n,{shaderType:H})))}return Object(V.a)(e,t),Object(S.a)(e,[{key:"_createHandle",value:function(){return this.gl.createShader(H)}}]),e}(X),Y=function(t){function e(t,n){return Object(v.a)(this,e),"string"==typeof n&&(c.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),n={source:n}),Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({},n,{shaderType:q})))}return Object(V.a)(e,t),Object(S.a)(e,[{key:"_createHandle",value:function(){return this.gl.createShader(q)}}]),e}(X);function K(t,e,n){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(U.a)(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var J,Q=n(19),$=n(56),tt=n(20),et=n(62),nt="EXT_color_buffer_float",rt=(J={},Object(O.a)(J,33189,{}),Object(O.a)(J,33190,{gl2:!0}),Object(O.a)(J,36012,{gl2:!0}),Object(O.a)(J,36168,{}),Object(O.a)(J,34041,{}),Object(O.a)(J,35056,{gl2:!0}),Object(O.a)(J,36013,{gl2:!0}),Object(O.a)(J,32854,{}),Object(O.a)(J,36194,{}),Object(O.a)(J,32855,{}),Object(O.a)(J,33321,{gl2:!0}),Object(O.a)(J,33330,{gl2:!0}),Object(O.a)(J,33329,{gl2:!0}),Object(O.a)(J,33332,{gl2:!0}),Object(O.a)(J,33331,{gl2:!0}),Object(O.a)(J,33334,{gl2:!0}),Object(O.a)(J,33333,{gl2:!0}),Object(O.a)(J,33323,{gl2:!0}),Object(O.a)(J,33336,{gl2:!0}),Object(O.a)(J,33335,{gl2:!0}),Object(O.a)(J,33338,{gl2:!0}),Object(O.a)(J,33337,{gl2:!0}),Object(O.a)(J,33340,{gl2:!0}),Object(O.a)(J,33339,{gl2:!0}),Object(O.a)(J,32849,{gl2:!0}),Object(O.a)(J,32856,{gl2:!0}),Object(O.a)(J,32857,{gl2:!0}),Object(O.a)(J,36220,{gl2:!0}),Object(O.a)(J,36238,{gl2:!0}),Object(O.a)(J,36975,{gl2:!0}),Object(O.a)(J,36214,{gl2:!0}),Object(O.a)(J,36232,{gl2:!0}),Object(O.a)(J,36226,{gl2:!0}),Object(O.a)(J,36208,{gl2:!0}),Object(O.a)(J,33325,{gl2:nt}),Object(O.a)(J,33327,{gl2:nt}),Object(O.a)(J,34842,{gl2:nt}),Object(O.a)(J,33326,{gl2:nt}),Object(O.a)(J,33328,{gl2:nt}),Object(O.a)(J,34836,{gl2:nt}),Object(O.a)(J,35898,{gl2:nt}),J);var it=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.a)(this,e),(n=Object(z.a)(this,Object(U.a)(e).call(this,t,r))).initialize(r),Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(S.a)(e,null,[{key:"isSupported",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!e||function(t,e,n){var r=n[e];if(!r)return!1;var i=Object(o.n)(t)&&r.gl2||r.gl1;return"string"==typeof i?t.getExtension(i):i}(t,e,rt)}},{key:"getSamplesForFormat",value:function(t,e){var n=e.format;return t.getInternalformatParameter(36161,n,32937)}}]),Object(S.a)(e,[{key:"initialize",value:function(t){var e=t.format,n=t.width,r=void 0===n?1:n,i=t.height,a=void 0===i?1:i,s=t.samples,u=void 0===s?0:s;return Object(T.a)(e,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==u&&Object(o.n)(this.gl)?this.gl.renderbufferStorageMultisample(36161,u,e,r,a):this.gl.renderbufferStorage(36161,e,r,a),this.format=e,this.width=r,this.height=a,this.samples=u,this}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindRenderbuffer(36161,t)}},{key:"_syncHandle",value:function(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}]),e}(G.a),ot=256,at=1024,st=16384,ut=6144,lt=6145,ct=6146,ft=34041,pt="clear: bad arguments";function ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,i=e.color,o=void 0===i?null:i,a=e.depth,s=void 0===a?null:a,u=e.stencil,l=void 0===u?null:u,c={};r&&(c.framebuffer=r);var f=0;o&&(f|=st,!0!==o&&(c.clearColor=o)),s&&(f|=ot,!0!==s&&(c.clearDepth=s)),l&&(f|=at,!0!==s&&(c.clearStencil=s)),Object(T.a)(0!==f,pt),Object(R.c)(t,c,function(){t.clear(f)})}var dt=n(48);function yt(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(T.a)(!1),0}}var vt=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.a)(this,e),(n=Object(z.a)(this,Object(U.a)(e).call(this,t,r))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.initialize(r),Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(S.a)(e,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.colorBufferFloat,r=e.colorBufferHalfFloat;return n&&t.getExtension(Object(o.n)(t)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),r&&t.getExtension(Object(o.n)(t)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new e(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}}]),Object(S.a)(e,[{key:"initialize",value:function(t){var e=t.width,n=void 0===e?1:e,r=t.height,i=void 0===r?1:r,o=t.attachments,a=void 0===o?null:o,s=t.color,u=void 0===s||s,l=t.depth,c=void 0===l||l,f=t.stencil,p=void 0!==f&&f,h=t.check,d=void 0===h||h,y=t.readBuffer,v=t.drawBuffers;if(Object(T.a)(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(var g in a){var m=a[g];(Array.isArray(m)?m[0]:m).resize({width:n,height:i})}else a=this._createDefaultAttachments({color:u,depth:c,stencil:p,width:n,height:i});this.update({clearAttachments:!0,attachments:a,readBuffer:y,drawBuffers:v}),a&&d&&this.checkStatus()}},{key:"update",value:function(t){var e=t.attachments,n=void 0===e?{}:e,r=t.readBuffer,i=t.drawBuffers,o=t.clearAttachments,a=void 0!==o&&o;this.attach(n,{clearAttachments:a});var s=this.gl,u=s.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,u||null),this}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.height;if(null===this.handle)return Object(T.a)(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&c.g.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n)),this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}},{key:"attach",value:function(t){var e=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clearAttachments,r={};void 0!==n&&n&&Object.keys(this.attachments).forEach(function(t){r[t]=null}),Object.assign(r,t);var i=this.gl.bindFramebuffer(36160,this.handle);for(var o in r){Object(T.a)(void 0!==o,"Misspelled framebuffer binding point?");var a=Number(o),s=r[a],u=s;if(u)if(u instanceof it)this._attachRenderbuffer({attachment:a,renderbuffer:u});else if(Array.isArray(s)){var l=Object(tt.a)(s,3),c=l[0],f=l[1],p=void 0===f?0:f,h=l[2],d=void 0===h?0:h;u=c,this._attachTexture({attachment:a,texture:c,layer:p,level:d})}else this._attachTexture({attachment:a,texture:u,layer:0,level:0});else this._unattach({attachment:a});u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(function(t){return!e.attachments[t]}).forEach(function(t){delete e.attachments[t]})}},{key:"checkStatus",value:function(){var t=this.gl,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);if(t.bindFramebuffer(36160,e||null),36053!==n)throw new Error(function(t){return(vt.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.depth,r=t.stencil,i=t.drawBuffers,a=void 0===i?[]:i,s=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&ht(this.gl,{color:e,depth:n,stencil:r}),a.forEach(function(t,e){!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,i=e.buffer,a=void 0===i?ut:i,s=e.drawBuffer,u=void 0===s?0:s,l=e.value,c=void 0===l?[0,0,0,0]:l;Object(o.d)(t),Object(R.c)(t,{framebuffer:r},function(){switch(a){case ut:switch(c.constructor){case Int32Array:t.clearBufferiv(a,u,c);break;case Uint32Array:t.clearBufferuiv(a,u,c);break;case Float32Array:default:t.clearBufferfv(a,u,c)}break;case lt:t.clearBufferfv(lt,0,[c]);break;case ct:t.clearBufferiv(ct,0,[c]);break;case ft:var e=Object(tt.a)(c,2),n=e[0],r=e[1];t.clearBufferfi(ft,0,n,r);break;default:Object(T.a)(!1,pt)}})}({drawBuffer:e,value:t})}),this.gl.bindFramebuffer(36160,s||null),this}},{key:"readPixels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=void 0===o?this.width:o,s=t.height,u=void 0===s?this.height:s,l=t.format,c=void 0===l?6408:l,f=t.type,p=t.pixelArray,h=void 0===p?null:p,d=t.attachment,y=void 0===d?36064:d;this.gl;if(36064===y&&null===this.handle&&(y=1028),Object(T.a)(this.attachments[y]),f=f||this.attachments[y].type,!h){f=f||5121;var v=Object(dt.c)(f,{clamped:!1}),g=yt(c);h=h||new v(a*u*g)}f=f||Object(dt.b)(h);var m=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(n,i,a,u,c,f,h),this.gl.bindFramebuffer(36160,m||null),h}},{key:"readPixelsToBuffer",value:function(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,a=t.width,s=void 0===a?this.width:a,u=t.height,l=void 0===u?this.height:u,c=t.format,f=void 0===c?6408:c,p=t.type,h=t.buffer,d=void 0===h?null:h,y=t.byteOffset,v=void 0===y?0:y,g=this.gl;if(Object(o.d)(g),p=p||(d?d.type:5121),!d){var m=yt(f),b=function(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(T.a)(!1),0}}(p),_=v+s*l*m*b;d=new B.a(g,{bytes:_,type:p,size:m})}return d.bind({target:35051}),Object(R.c)(g,{framebuffer:this},function(){g.readPixels(n,i,s,l,f,p,v)}),d.unbind({target:35051}),d}},{key:"copyToDataUrl",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.attachment,n=void 0===e?36064:e,r=t.maxHeight,i=void 0===r?Number.MAX_SAFE_INTEGER:r,a=this.readPixels({attachment:n}),s=this.width,u=this.height;u>i;){var l=Object(o.q)({data:a,width:s,height:u});a=l.data,s=l.width,u=l.height}Object(o.h)({data:a,width:s,height:u});var c=document.createElement("canvas");c.width=s,c.height=u;var f=c.getContext("2d"),p=f.createImageData(s,u);return p.data.set(a),f.putImageData(p,0,0),c.toDataURL()}},{key:"copyToImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.image,n=void 0===e?null:e,r=t.attachment,i=void 0===r?36064:r,o=t.maxHeight,a=(void 0===o&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return(n=n||new Image).src=a,n}},{key:"copyToTexture",value:function(t){var e=t.texture,n=t.target,r=t.xoffset,i=void 0===r?0:r,o=t.yoffset,a=void 0===o?0:o,s=t.zoffset,u=void 0===s?0:s,l=t.mipmapLevel,c=void 0===l?0:l,f=t.attachment,p=void 0===f?36064:f,h=t.x,d=void 0===h?0:h,y=t.y,v=void 0===y?0:y,g=t.width,m=t.height,b=this.gl,_=b.bindFramebuffer(36160,this.handle),x=b.readBuffer(p);switch(g=Number.isFinite(g)?g:e.width,m=Number.isFinite(m)?m:e.height,e.target){case 3553:case 34067:b.copyTexSubImage2D(n||e.target,c,i,a,d,v,g,m);break;case 35866:case 32879:b.copyTexSubImage3D(n||e.target,c,i,a,u,d,v,g,m)}return b.readBuffer(x),b.bindFramebuffer(36160,_||null),e}},{key:"blit",value:function(t){var e=t.srcFramebuffer,n=t.attachment,r=void 0===n?36064:n,i=t.srcX0,a=void 0===i?0:i,s=t.srcY0,u=void 0===s?0:s,l=t.srcX1,c=t.srcY1,f=t.dstX0,p=void 0===f?0:f,h=t.dstY0,d=void 0===h?0:h,y=t.dstX1,v=t.dstY1,g=t.color,m=void 0===g||g,b=t.depth,_=void 0!==b&&b,x=t.stencil,w=void 0!==x&&x,E=t.mask,O=void 0===E?0:E,S=t.filter,P=void 0===S?9728:S,C=this.gl;Object(o.d)(C),e.handle||36064!==r||(r=1028),m&&(O|=16384),_&&(O|=256),w&&(O|=1024),Object(T.a)(O),l=void 0===l?e.width:l,c=void 0===c?e.height:c,y=void 0===y?this.width:y,v=void 0===v?this.height:v;var k=C.bindFramebuffer(36009,this.handle),A=C.bindFramebuffer(36008,e.handle);return C.readBuffer(r),C.blitFramebuffer(a,u,l,c,p,d,y,v,O,P),C.readBuffer(this.readBuffer),C.bindFramebuffer(36008,A||null),C.bindFramebuffer(36009,k||null),this}},{key:"invalidate",value:function(t){var e=t.attachments,n=void 0===e?[]:e,r=t.x,i=void 0===r?0:r,a=t.y,s=void 0===a?0:a,u=t.width,l=t.height,c=this.gl;Object(o.d)(c);var f=c.bindFramebuffer(36008,this.handle);return 0===i&&0===s&&void 0===u&&void 0===l?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,i,s,u,l),c.bindFramebuffer(36008,f),this}},{key:"getAttachmentParameter",value:function(t,e,n){var r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(i.c)(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},o=!0,a=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;r[e?Object(i.c)(this.gl,c):c]=this.getAttachmentParameter(t,c,e)}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}return r}},{key:"getParameters",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object.keys(this.attachments),n={},r=0;r<e.length;r++){var o=e[r],a=Number(o);n[t?Object(i.c)(this.gl,a):a]=this.getAttachmentParameters(a,t)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>c.g.priority||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);var n=this.copyToDataUrl({maxHeight:100});return c.g.image({priority:t,message:e,image:n},e)(),this}},{key:"bind",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,e=void 0===t?36160:t;return this.gl.bindFramebuffer(e,this.handle),this}},{key:"unbind",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,e=void 0===t?36160:t;return this.gl.bindFramebuffer(e,null),this}},{key:"_createDefaultAttachments",value:function(t){var e,n=t.color,r=t.depth,i=t.stencil,o=t.width,a=t.height,s=null;n&&((s=s||{})[36064]=new et.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:o,height:a,mipmaps:!1,parameters:(e={},Object(O.a)(e,10241,9728),Object(O.a)(e,10240,9728),Object(O.a)(e,10242,33071),Object(O.a)(e,10243,33071),e)}));return r&&i?(s=s||{})[33306]=new it(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:o,height:111}):r?(s=s||{})[36096]=new it(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:o,height:a}):i&&Object(T.a)(!1),s}},{key:"_unattach",value:function(t){var e=t.attachment;this.gl.bindRenderbuffer(36161,this.handle),this.gl.framebufferRenderbuffer(36160,e,36161,null),delete this.attachments[e]}},{key:"_attachRenderbuffer",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.texture,i=t.layer,o=t.level,a=this.gl;switch(a.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:a.framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:var s=function(t){return t<34069?t+34069:t}(i);a.framebufferTexture2D(36160,n,s,r.handle,o);break;case 3553:a.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:Object(T.a)(!1,"Illegal texture type")}a.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(t,e){Object(o.n)(t)?t.readBuffer(e):Object(T.a)(36064===e||1029===e,"Multiple render targets not supported"),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(t,e){if(Object(o.n)(t))t.drawBuffers(e);else{var n=t.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(e):Object(T.a)(1===e.length&&(36064===e[0]||1029===e[0]),"Multiple render targets not supported")}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(t){var e=function(t){if(t.luma=t.luma||{},!t.luma.caps)for(var e in t.luma.caps={},t.luma.caps.webgl2=Object(o.n)(t),I)t.luma.caps[e]=D(t,e);return t.luma.caps}(this.gl);switch(t){case 36052:return e.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.webgl2?null:8;case 33297:return e.webgl2?null:5125;case 33296:return e.webgl2||e.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(t){return this.gl.bindFramebuffer(36160,t)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),e}(G.a);vt.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var gt,mt=function(t){function e(t,n){var r;return Object(v.a)(this,e),Object(o.d)(t),r=Object(z.a)(this,Object(U.a)(e).call(this,t,n)),Object.seal(Object(Q.a)(Object(Q.a)(r))),r}return Object(V.a)(e,t),Object(S.a)(e,null,[{key:"isSupported",value:function(t){return Object(o.n)(t)}}]),Object(S.a)(e,[{key:"bind",value:function(t){return this.gl.bindSampler(t,this.handle),this}},{key:"unbind",value:function(t){return this.gl.bindSampler(t,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(t){return this.gl.getSamplerParameter(this.handle,t)}},{key:"_setParameter",value:function(t,e){switch(t){case 33082:case 33083:this.gl.samplerParameterf(this.handle,t,e);break;default:this.gl.samplerParameteri(this.handle,t,e)}return this}}]),e}(G.a),bt=(gt={},Object(O.a)(gt,5126,function(t,e,n){return t.uniform1fv(e,St(n,1))}),Object(O.a)(gt,35664,function(t,e,n){return t.uniform2fv(e,St(n,2))}),Object(O.a)(gt,35665,function(t,e,n){return t.uniform3fv(e,St(n,3))}),Object(O.a)(gt,35666,function(t,e,n){return t.uniform4fv(e,St(n,4))}),Object(O.a)(gt,5124,function(t,e,n){return t.uniform1iv(e,Pt(n,1))}),Object(O.a)(gt,35667,function(t,e,n){return t.uniform2iv(e,Pt(n,2))}),Object(O.a)(gt,35668,function(t,e,n){return t.uniform3iv(e,Pt(n,3))}),Object(O.a)(gt,35669,function(t,e,n){return t.uniform4iv(e,Pt(n,4))}),Object(O.a)(gt,35670,function(t,e,n){return t.uniform1iv(e,Pt(n,1))}),Object(O.a)(gt,35671,function(t,e,n){return t.uniform2iv(e,Pt(n,2))}),Object(O.a)(gt,35672,function(t,e,n){return t.uniform3iv(e,Pt(n,3))}),Object(O.a)(gt,35673,function(t,e,n){return t.uniform4iv(e,Pt(n,4))}),Object(O.a)(gt,35674,function(t,e,n){return t.uniformMatrix2fv(e,!1,St(n,4))}),Object(O.a)(gt,35675,function(t,e,n){return t.uniformMatrix3fv(e,!1,St(n,9))}),Object(O.a)(gt,35676,function(t,e,n){return t.uniformMatrix4fv(e,!1,St(n,16))}),Object(O.a)(gt,35678,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,35680,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,5125,function(t,e,n){return t.uniform1uiv(e,Ct(n,1))}),Object(O.a)(gt,36294,function(t,e,n){return t.uniform2uiv(e,Ct(n,2))}),Object(O.a)(gt,36295,function(t,e,n){return t.uniform3uiv(e,Ct(n,3))}),Object(O.a)(gt,36296,function(t,e,n){return t.uniform4uiv(e,Ct(n,4))}),Object(O.a)(gt,35685,function(t,e,n){return t.uniformMatrix2x3fv(e,!1,St(n,6))}),Object(O.a)(gt,35686,function(t,e,n){return t.uniformMatrix2x4fv(e,!1,St(n,8))}),Object(O.a)(gt,35687,function(t,e,n){return t.uniformMatrix3x2fv(e,!1,St(n,6))}),Object(O.a)(gt,35688,function(t,e,n){return t.uniformMatrix3x4fv(e,!1,St(n,12))}),Object(O.a)(gt,35689,function(t,e,n){return t.uniformMatrix4x2fv(e,!1,St(n,8))}),Object(O.a)(gt,35690,function(t,e,n){return t.uniformMatrix4x3fv(e,!1,St(n,12))}),Object(O.a)(gt,35679,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,35682,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36289,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36292,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36293,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36298,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36299,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36300,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36303,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36306,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36307,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36308,function(t,e,n){return t.uniform1i(e,n)}),Object(O.a)(gt,36311,function(t,e,n){return t.uniform1i(e,n)}),gt),_t={},xt={},wt={},Et=[0];function Ot(t,e,n,r){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(Et[0]=t,t=Et);var i=t.length;if(i%e&&c.g.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;var o=r[i];o||(o=new n(i),r[i]=o);for(var a=0;a<i;a++)o[a]=t[a];return o}function St(t,e){return Ot(t,e,Float32Array,_t)}function Pt(t,e){return Ot(t,e,Int32Array,xt)}function Ct(t,e){return Ot(t,e,Uint32Array,wt)}function Tt(t){var e=t.match(/([^\[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function kt(t,e,n){var r=bt[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r.bind(null,t,e)}function At(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof $.a||t instanceof mt||(t instanceof it||t instanceof vt&&Boolean(t.texture))))}function Mt(t,e){if(Array.isArray(t)||ArrayBuffer.isView(t)){if(!e)return!1;var n=t.length;if(e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return t===e}var jt,Rt=n(54),It=5120,Lt=5121,Dt=5122,Ft=5123,Nt=0,Bt=1,zt=2,Ut=3,Vt=4,Gt=5,Wt=6,qt=5126,Ht=(jt={},Object(O.a)(jt,qt,[qt,1,"float"]),Object(O.a)(jt,35664,[qt,2,"vec2"]),Object(O.a)(jt,35665,[qt,3,"vec3"]),Object(O.a)(jt,35666,[qt,4,"vec4"]),Object(O.a)(jt,5124,[5124,1,"int"]),Object(O.a)(jt,35667,[5124,2,"ivec2"]),Object(O.a)(jt,35668,[5124,3,"ivec3"]),Object(O.a)(jt,35669,[5124,4,"ivec4"]),Object(O.a)(jt,5125,[5125,1,"uint"]),Object(O.a)(jt,36294,[5125,2,"uvec2"]),Object(O.a)(jt,36295,[5125,3,"uvec3"]),Object(O.a)(jt,36296,[5125,4,"uvec4"]),Object(O.a)(jt,35670,[qt,1,"bool"]),Object(O.a)(jt,35671,[qt,2,"bvec2"]),Object(O.a)(jt,35672,[qt,3,"bvec3"]),Object(O.a)(jt,35673,[qt,4,"bvec4"]),Object(O.a)(jt,35674,[qt,8,"mat2"]),Object(O.a)(jt,35685,[qt,8,"mat2x3"]),Object(O.a)(jt,35686,[qt,8,"mat2x4"]),Object(O.a)(jt,35675,[qt,12,"mat3"]),Object(O.a)(jt,35687,[qt,12,"mat3x2"]),Object(O.a)(jt,35688,[qt,12,"mat3x4"]),Object(O.a)(jt,35676,[qt,16,"mat4"]),Object(O.a)(jt,35689,[qt,16,"mat4x2"]),Object(O.a)(jt,35690,[qt,16,"mat4x3"]),jt);function Xt(t){switch(t){case Nt:return Nt;case Bt:case Ut:case zt:return Bt;case Vt:case Gt:case Wt:return Vt;default:return Object(T.a)(!1),0}}function Zt(t){var e=Ht[t];if(!e)return null;var n=Object(tt.a)(e,2);return{type:n[0],components:n[1]}}function Yt(t,e){switch(t){case It:case Lt:case Dt:case Ft:t=qt}for(var n in Ht){var r=Object(tt.a)(Ht[n],3),i=r[0],o=r[1],a=r[2];if(i===t&&o===e)return{glType:n,name:a}}return null}var Kt=function(){function t(e){Object(v.a)(this,t),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return Object(S.a)(t,[{key:"getAttributeInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfos[e]:this.attributeInfosByName[t]||null}},{key:"getAttributeLocation",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:"getAttributeAccessor",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:"getVaryingInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:"getVaryingIndex",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:"getVaryingAccessor",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:"_readAttributesFromProgram",value:function(t){for(var e=t.gl,n=e.getProgramParameter(t.handle,35721),r=0;r<n;r++){var i=e.getActiveAttrib(t.handle,r),o=i.name,a=i.type,s=i.size,u=e.getAttribLocation(t.handle,o);this._addAttribute(u,o,a,s)}this.attributeInfos.sort(function(t,e){return t.location-e.location})}},{key:"_readVaryingsFromProgram",value:function(t){var e=t.gl;if(Object(o.n)(e)){for(var n=e.getProgramParameter(t.handle,35971),r=0;r<n;r++){var i=e.getTransformFeedbackVarying(t.handle,r),a=i.name,s=i.type,u=i.size;this._addVarying(r,a,s,u)}this.varyingInfos.sort(function(t,e){return t.location-e.location})}}},{key:"_addAttribute",value:function(t,e,n,r){var i=Zt(n),o={type:i.type,size:r*i.components};this._inferProperties(t,e,o);var a={location:t,name:e,accessor:new Rt.a(o)};this.attributeInfos.push(a),this.attributeInfosByName[a.name]=a}},{key:"_inferProperties",value:function(t,e,n){/instance/i.test(e)&&(n.divisor=1)}},{key:"_addVarying",value:function(t,e,n,r){var i=Zt(n),o=i.type,a=i.components,s={location:t,name:e,accessor:new Rt.a({type:o,size:r*a})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),t}(),Jt=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.a)(this,e),(n=Object(z.a)(this,Object(U.a)(e).call(this,t,r))).stubRemovedMethods("Program","v6.0",["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"]),n._isCached=!1,n.initialize(r),Object.seal(Object(Q.a)(Object(Q.a)(n))),n._setId(r.id),n}return Object(V.a)(e,t),Object(S.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vs,n=t.fs,r=t.varyings,i=t.bufferMode,a=void 0===i?35981:i;return this.vs="string"==typeof e?new Z(this.gl,{id:"".concat(t.id,"-vs"),source:e}):e,this.fs="string"==typeof n?new Y(this.gl,{id:"".concat(t.id,"-fs"),source:n}):n,Object(T.a)(this.vs instanceof Z),Object(T.a)(this.fs instanceof Y),this.uniforms={},this.samplers={},r&&(Object(o.d)(this.gl),this.varyings=r,this.gl.transformFeedbackVaryings(this.handle,r,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Kt(this),this.setProps(t)}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:K(Object(U.a)(e.prototype),"delete",this).call(this,t)}},{key:"setProps",value:function(t){return"uniforms"in t&&this.setUniforms(t.uniforms,t.samplers),this}},{key:"draw",value:function(t){var e=this,n=t.logPriority,r=t.drawMode,a=void 0===r?4:r,s=t.vertexCount,u=t.offset,l=void 0===u?0:u,f=t.start,p=t.end,h=t.isIndexed,d=void 0!==h&&h,y=t.indexType,v=void 0===y?5123:y,g=t.isInstanced,m=void 0!==g&&g,b=t.instanceCount,_=void 0===b?0:b,x=t.vertexArray,w=void 0===x?null:x,E=t.transformFeedback,O=t.framebuffer,S=t.parameters,P=void 0===S?{}:S,C=t.uniforms,k=void 0===C?{}:C,A=t.samplers,M=void 0===A?{}:A;if(void 0!==n){var j=O?O.id:"default",I="mode=".concat(Object(i.a)(this.gl,a)," verts=").concat(s," ")+"instances=".concat(_," indexType=").concat(Object(i.a)(this.gl,v)," ")+"isInstanced=".concat(m," isIndexed=").concat(d," ")+"Framebuffer=".concat(j);c.g.log(n,I)()}return this.gl.useProgram(this.handle),Object(T.a)(w),w.bindForDraw(s,_,function(){if(k&&(c.g.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)"),e.setUniforms(k,M)),void 0!==O&&(P=Object.assign({},P,{framebuffer:O})),E){var t=Xt(a);E.begin(t)}Object(R.c)(e.gl,P,function(){d&&m?e.gl.drawElementsInstanced(a,s,v,l,_):d&&Object(o.n)(e.gl)&&!isNaN(f)&&!isNaN(p)?e.gl.drawRangeElements(a,f,p,s,v,l):d?e.gl.drawElements(a,s,v,l):m?e.gl.drawArraysInstanced(a,l,s,_):e.gl.drawArrays(a,l,s)}),E&&E.end()}),this}},{key:"setSamplers",value:function(t){Object.assign(this.samplers,t)}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1;for(var i in t)if(!Mt(this.uniforms[i],t[i])){r=!0;break}return r&&(n(),function(t,e,n){for(var r in t){var i=t[r];if((!n||Boolean(n[r]))&&!At(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(t,this.id,this._uniformSetters),Object.assign(this.uniforms,t),Object.assign(this.samplers,e)),this._setUniforms(this.uniforms,this.samplers),this}},{key:"_setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in this.gl.useProgram(this.handle),t){var r=t[n],i=this._uniformSetters[n],o=e[n];if(i)if(r instanceof vt&&(r=r.texture),r instanceof $.a){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);var a=r,s=i.textureIndex;a.bind(s),o&&o.bind(s),i(s)}else i(r)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(t){var e=this.gl.getAttachedShaders(t),n={},r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Z({handle:u});break;case 35632:n.fs=new Y({handle:u})}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},{key:"_getParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_setId",value:function(t){if(!t){var e=this._getName();this.id=Object(c.i)(e)}}},{key:"_getName",value:function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?"".concat(t,"-program"):"program"}},{key:"_compileAndLink",value:function(){var t=this.gl;if((t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),c.g.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),c.g.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||c.g.priority>0)&&(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var e=0;e<this._uniformCount;e++){var n=this.gl.getActiveUniform(this.handle,e),r=Tt(n.name),i=r.name,o=(r.isArray,t.getUniformLocation(this.handle,i));this._uniformSetters[i]=kt(t,o,n)}this._textureIndexCounter=0}},{key:"reset",value:function(){}},{key:"getActiveUniforms",value:function(t,e){return this.gl.getActiveUniforms(this.handle,t,e)}},{key:"getUniformBlockIndex",value:function(t){return this.gl.getUniformBlockIndex(this.handle,t)}},{key:"getActiveUniformBlockParameter",value:function(t,e){return this.gl.getActiveUniformBlockParameter(this.handle,t,e)}},{key:"uniformBlockBinding",value:function(t,e){this.gl.uniformBlockBinding(this.handle,t,e)}}]),e}(G.a),Qt=(n(95),G.a,function(t){return t}),$t=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(v.a)(this,e),n=Object(z.a)(this,Object(U.a)(e).call(this,t,r));var i=r.onComplete,o=void 0===i?Qt:i,a=r.onError,s=void 0===a?Qt:a;return n.target=null,n.onComplete=o,n.onError=s,n.promise=null,Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(S.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(o.n)(t),r=N(t,L.TIMER_QUERY),i=n||r,a=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){switch(l.value){case"queries":i=i&&n;break;case"timers":i=i&&r;break;case"timestamps":var f=r?t.getQuery(36392,34916):0;i=i&&f>0;break;default:Object(T.a)(!1)}}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}return i}}]),Object(S.a)(e,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,e=void 0!==t&&t;return this.begin(e?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"getTimestamp",value:function(){C.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(t){C.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function(t){C.beginQuery(this,this.onComplete,this.onError),this.target=t;try{this.gl.beginQuery(this.target,this.handle)}catch(t){C.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.ext.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),C.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function(){var t=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(t)?t/1e6:0}},{key:"_createHandle",value:function(){return e.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){C.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(t){C.poll(t)}}]),e}(G.a);C.setInvalidator({queryType:$t,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(t){return t.getParameter(36795)}});n(124),$.a;var te=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.a)(this,e),Object(o.d)(t),(n=Object(z.a)(this,Object(U.a)(e).call(this,t,r))).initialize(r),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(S.a)(e,null,[{key:"isSupported",value:function(t){return Object(o.n)(t)}}]),Object(S.a)(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(c.d)(this.buffers)||this.bind(function(){return t._unbindBuffers()}),this.setProps(e),this}},{key:"setProps",value:function(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}},{key:"setBuffers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var n in e)t.setBuffer(n,e[n])}),this}},{key:"setBuffer",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=this._getVaryingIndex(t);return o<0?(this.unused[t]=e,c.g.warn(function(){return"".concat(r.id," unused varying buffer ").concat(t)})(),this):(this.buffers[o]=e,this.bindOnUse||this._bindBuffer(o,e,n,i),this)}},{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getVaryingInfo",value:function(t){return this.configuration&&this.configuration.getVaryingInfo(t)}},{key:"_getVaryingIndex",value:function(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,this.buffers[t])}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,null)}},{key:"_bindBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindTransformFeedback(36386,this.handle)}}]),e}(G.a),ee=null;function ne(t,e){return new t(function(t){return(!ee||ee.byteLength<t)&&(ee=new ArrayBuffer(t)),ee}(t.BYTES_PER_ELEMENT*e),0,e)}var re=n(60),ie=n(126),oe=n(127);var ae=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(v.a)(this,e);var i=r.id||r.program&&r.program.id;return(n=Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({},r,{id:i})))).hasVertexArrays=e.isSupported(t),n.buffer=null,n.bufferValue=null,n.initialize(r),Object.seal(Object(Q.a)(Object(Q.a)(n))),n}return Object(V.a)(e,t),Object(S.a)(e,null,[{key:"isSupported",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?Object(o.n)(t)||"Chrome"===function(t){if(!t&&!Object(ie.a)())return"Node";if(Object(oe.a)(t))return"Electron";var e="undefined"!=typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":re.b.chrome?"Chrome":re.b.safari?"Safari":re.b.mozInnerScreenX?"Firefox":"Unknown"}():Object(o.n)(t)||t.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new e(t,{handle:null})),t.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(t){return e.MAX_ATTRIBUTES=e.MAX_ATTRIBUTES||t.getParameter(34921),e.MAX_ATTRIBUTES}},{key:"setConstant",value:function(t,n,r){switch(r.constructor){case Float32Array:e._setConstantFloatArray(t,n,r);break;case Int32Array:e._setConstantIntArray(t,n,r);break;case Uint32Array:e._setConstantUintArray(t,n,r);break;default:Object(c.a)(!1)}}}]),Object(S.a)(e,[{key:"delete",value:function(){K(Object(U.a)(e.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}},{key:"setProps",value:function(t){return this}},{key:"setElementBuffer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(c.a)(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){t.gl.bindBuffer(34963,e?e.handle:null)}),this}},{key:"setBuffer",value:function(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);var r=n.size,i=n.type,a=n.stride,s=n.offset,u=n.normalized,l=n.integer,f=n.divisor,p=this.gl;return t=Number(t),this.bind(function(){p.bindBuffer(34962,e.handle),l?(Object(c.a)(Object(o.n)(p)),p.vertexAttribIPointer(t,r,i,a,s)):p.vertexAttribPointer(t,r,i,u,a,s),p.enableVertexAttribArray(t),p.vertexAttribDivisor(t,f||0)}),this}},{key:"enable",value:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!r&&0===t&&!e.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(function(){return r?n.gl.enableVertexAttribArray(t):n.gl.disableVertexAttribArray(t)})),this}},{key:"getConstantBuffer",value:function(t,e,n){var r=this._normalizeConstantArrayValue(e,n),i=r.byteLength*t,o=r.length*t,a=!this.buffer;if(this.buffer=this.buffer||new B.a(this.gl,i),a=(a=a||this.buffer.setByteLength(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=ne(e.constructor,o);!function(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,u=a*s,l=0,c=i;l<s;l++)e[c++]=n[l];for(;l<u;)l<u-l?(e.copyWithin(i+l,i,i+l),l*=2):(e.copyWithin(i+l,i,i+u-l),l=u)}({target:s,source:r,start:0,count:o}),this.buffer.subData(s),this.bufferValue=e}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(t,e){return Array.isArray(t)?new Float32Array(t):t}},{key:"_compareConstantArrayValues",value:function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=e.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(t){return this.hasVertexArrays&&this.gl.deleteVertexArray(t),[this.elements]}},{key:"_bindHandle",value:function(t){this.hasVertexArrays&&this.gl.bindVertexArray(t)}},{key:"_getParameter",value:function(t,e){var n=this,r=e.location;return Object(c.a)(Number.isFinite(r)),this.bind(function(){switch(t){case 34373:return n.gl.getVertexAttribOffset(r,t);default:return n.gl.getVertexAttrib(r,t)}})}},{key:"MAX_ATTRIBUTES",get:function(){return e.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantIntArray",value:function(t,e,n){switch(Object(c.a)(Object(o.n)(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantUintArray",value:function(t,e,n){switch(Object(c.a)(Object(o.n)(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Object(c.a)(!1)}}}]),e}(G.a),se=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(v.a)(this,t);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=ae.isSupported(e)?new ae(e):ae.getDefaultArray(e),Object(c.h)(this,"VertexArray","v6.0",["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"]),this.initialize(n),Object.seal(this)}return Object(S.a)(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}},{key:"reset",value:function(){this.elements=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(t){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,t)}},{key:"setAttributes",value:function(t){var e=this;return this.vertexArrayObject.bind(function(){for(var n in t){var r=t[n];if(r instanceof B.a)e.setBuffer(n,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof B.a){var i=r[0],o=r[1];e.setBuffer(n,i,o)}else{if(!ArrayBuffer.isView(r)&&!Array.isArray(r))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");e.setConstant(n,r)}}e.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(t,e),this}},{key:"setBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e);var r=this._resolveLocationAndAccessor(t,e,e.accessor,n),i=r.location,o=r.accessor;return i>=0&&(this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,e,o)),this}},{key:"setConstant",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(t,e,n),i=r.location,o=r.accessor;return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e,o),this.values[i]=e,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind(function(){t.elements&&t.setElementBuffer(null),t.buffer=t.buffer||new B.a(t.gl,{size:4});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof B.a&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(34962,t.buffer.handle),t.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind(function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var n=t.values[e];n instanceof B.a&&t.setBuffer(e,n)}}),this}},{key:"bindForDraw",value:function(t,e,n){var r,i=this;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(t,e),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),r=n(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()}),r}},{key:"_resolveLocationAndAccessor",value:function(t,e,n,r){var i=this,o=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,c.g.once(3,function(){return"unused value ".concat(t," in ").concat(i.id)})(),this;var a=this._getAttributeInfo(t),s=Rt.a.resolve(a.accessor,n,r),u=s.size,l=s.type;return Object(c.a)(Number.isFinite(u)&&Number.isFinite(l)),{location:o,accessor:s}}},{key:"_getAttributeInfo",value:function(t){return this.configuration&&this.configuration.getAttributeInfo(t)}},{key:"_getAttributeIndex",value:function(t){if(this.configuration)return this.configuration.getAttributeLocation(t);var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_setConstantAttributes",value:function(t,e){var n=Math.max(0|t,0|e),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(t,e){if(ae.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(t,e){ae.setConstant(this.gl,t,e),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(t,!1)}},{key:"_updateDrawParams",value:function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elements.accessor.type),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}},{key:"_updateDrawParamsForLocation",value:function(t,e){var n=this.values[e],r=this.accessors[e];if(n){var i=r.divisor>0;if(t.isInstanced=t.isInstanced||i,n instanceof B.a){var o=n;if(i){var a=o.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,a)}else{var s=o.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,s)}}}}},{key:"setElements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.g.deprecated("setElements","setElementBuffer"),this.setElementBuffer(t,e)}}]),t}(),ue=n(100),le=n(404),ce=function(){function t(e){var n=e.id;e.display;Object(v.a)(this,t),this.id=n||Object(c.i)(this.constructor.name),this.display=!0,this.position=new ue.a,this.rotation=new ue.a,this.scale=new ue.a(1,1,1),this.matrix=new le.a,this.userData={}}return Object(S.a)(t,[{key:"toString",value:function(){return"{id: ".concat(this.id,", children: ").concat(this.children,")}")}},{key:"setPosition",value:function(t){return Object(T.a)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return Object(T.a)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return Object(T.a)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrixComponents",value:function(t){var e=t.position,n=t.rotation,r=t.scale,i=t.update,o=void 0===i||i;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(n),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,n=t.rotation,r=t.scale;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){Object(T.a)(t),e=e||this.matrix;var n=new le.a(t).multiplyRight(e),r=n.invert();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:r.transpose()}}},{key:"transform",value:function(){if(this.parent){var t=this.parent;this.endPosition.set(this.position.add(t.endPosition)),this.endRotation.set(this.rotation.add(t.endRotation)),this.endScale.set(this.scale.add(t.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var e=this.children,n=0;n<e.length;++n)e[n].transform();return this}}]),t}(),fe=(n(21),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(v.a)(this,t);var r=n.id,i=void 0===r?Object(c.i)("attribute"):r,o=n.type,a=n.isIndexed,s=void 0!==a&&a;this.gl=e,this.id=i,this.isIndexed=s,this.target=s?34963:34962,this.type=o,this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(n),Object.seal(this),this._validateAttributeDefinition()}return Object(S.a)(t,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(t){var e=t.value,n=t.buffer,r=t.constant,i=void 0===r?this.constant||!1:r;this.constant=i,n?(this.externalBuffer=n,this.constant=!1,this.type=n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor)):e&&(this.externalBuffer=null,this.value=e,i||(this.buffer=this.buffer||new B.a(this.gl,Object.assign({},t,{id:this.id,target:this.target,type:this.type})),this.buffer.setData({data:e}),this.type=this.buffer.accessor.type)),this._setAccessor(t)}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var t=this.externalBuffer||this.buffer;return t?[t,this]:null}},{key:"_setAccessor",value:function(t){var e=t.size,n=void 0===e?this.size:e,r=t.offset,i=void 0===r?this.offset||0:r,o=t.stride,a=void 0===o?this.stride||0:o,s=t.normalized,u=void 0===s?this.normalized||!1:s,l=t.integer,f=void 0===l?this.integer||!1:l,p=t.divisor,h=void 0===p?this.divisor||0:p,d=t.instanced,y=t.isInstanced;this.size=n,this.offset=i,this.stride=a,this.normalized=u,this.integer=f,this.divisor=h,void 0!==y&&(c.g.deprecated("Attribute.isInstanced"),this.divisor=y?1:0),void 0!==d&&(c.g.deprecated("Attribute.instanced"),this.divisor=d?1:0)}},{key:"_validateAttributeDefinition",value:function(){}}]),t}()),pe={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function he(t){var e="string"==typeof t?pe[t]||pe.TRIANGLES:t;return Object(T.a)(e>=0&&e<=pe.TRIANGLE_FAN,"Illegal drawMode"),e}var de=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.a)(this,t);var n=e.id,r=e.drawMode,i=void 0===r?pe.TRIANGLES:r,o=e.vertexCount,a=void 0===o?void 0:o,s=e.attributes;this.id=n||Object(c.i)(this.constructor.name),this.drawMode=he(i),this.vertexCount=a,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),s&&this.setAttributes(s)}return Object(S.a)(t,[{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!e,n}},{key:"setVertexCount",value:function(t){this.vertexCount=t}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(t){return Boolean(this.attributes[t])}},{key:"getAttribute",value:function(t){var e=this.attributes[t];return Object(T.a)(e),e.value}},{key:"getArray",value:function(t){var e=this.attributes[t];return Object(T.a)(e),e.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(t){for(var e in t){var n=t[e];n=ArrayBuffer.isView(n)?{value:n}:n,Object(T.a)(ArrayBuffer.isView(n.value),"".concat(this._print(e),": must be typed array or object with value as typed array")),this._autoDetectAttribute(e,n),this.attributes[e]=n}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(t,e){var n;switch(t){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;case"indices":e.size=e.size||1,e.isIndexed=void 0===e.isIndexed||e.isIndexed,Object(T.a)(e.value instanceof Uint16Array||e.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}Object(T.a)(e.size,"attribute ".concat(t," needs size"))}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}}]),t}(),ye="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",ve="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",ge="vs",me="fs";function be(t,e,n){switch(e){case 300:return n?function(t){return t.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(")}(t):function(t){return t.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(")}(t);case 100:return n?function(t){return t.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(t):function(t){return t.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function _e(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var xe=function(){function t(e){var n=e.name,r=e.vs,i=e.fs,o=e.dependencies,a=void 0===o?[]:o,s=e.getUniforms,u=void 0===s?function(){return{}}:s,l=e.deprecations,c=void 0===l?[]:l,f=e.vertexShader,p=e.fragmentShader;Object(v.a)(this,t),_e("string"==typeof n),this.name=n,this.vs=r||f,this.fs=i||p,this.getModuleUniforms=u,this.dependencies=a,this.deprecations=this._parseDeprecationDefinitions(c)}return Object(S.a)(t,[{key:"getModuleSource",value:function(t,e){var n;switch(t){case"vs":n=be(this.vs||"",e,!0);break;case"fs":n=be(this.fs||"",e,!1);break;default:_e(!1)}return"string"!=typeof n?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(t,e){return this.getModuleUniforms(t,e)}},{key:"checkDeprecations",value:function(t,e){this.deprecations.forEach(function(n){n.regex.test(t)&&(n.deprecated&&e?e.deprecated(n.old,n.new)():e&&e.removed(n.old,n.new)())})}},{key:"_parseDeprecationDefinitions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.forEach(function(t){switch(t.type){case"function":t.regex=new RegExp("\\b".concat(t.old,"\\("));break;default:t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}}),t}}]),t}(),we=new(function(){function t(){Object(v.a)(this,t),this.shaderModules={},this.defaultShaderModules=[]}return Object(S.a)(t,[{key:"setDefaultShaderModules",value:function(t){this.defaultShaderModules=this.resolveModules(t)}},{key:"registerShaderModules",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,n=void 0!==e&&e,r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;this._registerShaderModule(u,n)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"getShaderModule",value:function(t){if(t instanceof xe)return t;if("string"!=typeof t)return this._registerShaderModule(t,!0);var e=this.shaderModules[t];return e||_e(!1,"Unknown shader module ".concat(t)),e}},{key:"resolveModules",value:function(t){var e=this;return t.map(function(t){return e.getShaderModule(t)})}},{key:"_registerShaderModule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t instanceof xe)return t;if(_e(t.name,"shader module has no name"),this.shaderModules[t.name]&&!e)throw new Error("shader module ".concat(t.name," already registered"));return(t=new xe(t)).dependencies=this.resolveModules(t.dependencies),this.shaderModules[t.name]=t,this.shaderModules[t.name]}}]),t}());function Ee(t){we.setDefaultShaderModules(t)}function Oe(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,n=void 0!==e&&e;we.registerShaderModules(t,{ignoreMultipleRegistrations:n})}function Se(t){return we.getShaderModule(t)}function Pe(t){var e={},n={};return Ce({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(function(t,e){return n[e]-n[t]}).map(function(t){return e[t]})}function Ce(t){var e=t.modules,n=t.level,r=t.moduleMap,i=t.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var o=!0,a=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;r[c.name]=c,(void 0===i[c.name]||i[c.name]<n)&&(i[c.name]=n)}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}var f=!0,p=!1,h=void 0;try{for(var d,y=e[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var v=d.value;v.dependencies&&Ce({modules:v.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(t){p=!0,h=t}finally{try{f||null==y.return||y.return()}finally{if(p)throw h}}}var Te=32874,ke=7936,Ae=7937,Me=7938,je=35724,Re={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Ie={};Object.keys(Re).forEach(function(t){Ie[t]=t});var Le={};function De(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Re[e];if(_e(r,e),!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="undefined"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(e in Le)return Le[e];var i=r[0],o="#extension GL_".concat(i," : enable\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);var s=t.getShaderParameter(a,35713);return t.deleteShader(a),Le[e]=s,s}function Fe(t,e){var n=Re[e];_e(n,e);var r=function(t){return Boolean(t&&("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||32874===Te))}(t)&&n[1]||n[0],i="string"==typeof r?Boolean(t.getExtension(r)):r;return _e(!1===i||!0===i),i}function Ne(t,e){return(e=Array.isArray(e)?e:[e]).every(function(e){return Fe(t,e)})}function Be(t){switch(function(t){var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||ke),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Ae);return{gpuVendor:function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(Me),shadingLanguageVersion:t.getParameter(je)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}var ze,Ue,Ve=n(37),Ge=n.n(Ve),We=(ze={},Object(O.a)(ze,ge,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(O.a)(ze,me,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),ze),qe=/^(#version[^\n]*\n)?/,He=/main\s*\([^\)]*\)\s*\{\n?/,Xe=/}\n?[^{}]*$/;function Ze(t){var e={};return Ge()(Array.isArray(t)&&t.length>1),t.forEach(function(t){for(var n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]}),e}var Ye=(Ue={},Object(O.a)(Ue,ge,"vertex"),Object(O.a)(Ue,me,"fragment"),Ue),Ke="precision highp float;\n\n";function Je(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.vs,r=e.fs,i=function(t){return t=t.concat(we.defaultShaderModules),Pe(t=we.resolveModules(t))}(e.modules||[]);return{gl:t,vs:Qe(t,Object.assign({},e,{source:n,type:ge,modules:i})),fs:Qe(t,Object.assign({},e,{source:r,type:me,modules:i})),getUniforms:function(t){return function(e){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=u.getUniforms(e,n);Object.assign(n,l)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(i),modules:function(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=Se(s);e[s]=u}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}(i)}}function Qe(t,e){var n=e.id,r=e.source,i=e.type,o=e.modules,a=void 0===o?[]:o,s=e.defines,u=void 0===s?{}:s,l=e.inject,c=void 0===l?{}:l,f=e.prologue,p=void 0===f||f,h=e.log;_e("string"==typeof r,"shader source must be a string");var d=i===ge,y=r.split("\n"),v=100,g="",m=r;0===y[0].indexOf("#version ")&&(v=300,g=y[0],m=y.slice(1).join("\n"));var b=p?"".concat(g,"\n").concat(function(t){var e=t.id,n=t.source,r=t.type;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(Ye[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(Be(t),"\n").concat(function(t,e,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Ne(t,Ie.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Ne(t,Ie.GLSL_DERIVATIVES)&&De(t,Ie.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),Ne(t,Ie.GLSL_FRAG_DATA)&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),Ne(t,Ie.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}(t),"\n").concat(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(var r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;var i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(u),"\n").concat(d?"":Ke,"\n"):"".concat(g,"\n"),_=!1,x=!0,w=!1,E=void 0;try{for(var O,S=a[Symbol.iterator]();!(x=(O=S.next()).done);x=!0){var P=O.value;switch(P.name){case"inject":_=!0;break;default:P.checkDeprecations(m,h),b+=P.getModuleSource(i,v)}}}catch(t){w=!0,E=t}finally{try{x||null==S.return||S.return()}finally{if(w)throw E}}return b=function(t,e,n,r){var i=e===ge,o=function(e){var r=n[e];switch(e){case"vs:#decl":i&&(t=t.replace(qe,function(t){return t+r}));break;case"vs:#main-start":i&&(t=t.replace(He,function(t){return t+r}));break;case"vs:#main-end":i&&(t=t.replace(Xe,function(t){return r+t}));break;case"fs:#decl":i||(t=t.replace(qe,function(t){return t+r}));break;case"fs:#main-start":i||(t=t.replace(He,function(t){return t+r}));break;case"fs:#main-end":i||(t=t.replace(Xe,function(t){return r+t}));break;default:t=t.replace(e,function(t){return t+r})}};for(var a in n)o(a);return r&&(t=t.replace("}s*$",function(t){return t+We[e]})),t}(b+=m,i,c,_)}var $e={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null};function tn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}var en="uniform float ONE;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' from.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\n// Divide float number to high and low floats to extend fraction bits\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\n// Divide float number again when high float uses too many fraction bits\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\n\n// Special sum operation when a > b\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\n// General sum operation\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",nn="".concat(en,"\n").concat("const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n/* k_power controls how much range reduction we would like to have\nRange reduction uses the following method:\nassume a = k_power * r + m * log(2), k and m being integers.\nSet k_power = 4 (we can choose other k to trade accuracy with performance.\nwe only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k_power;\n*/\n\nvec2 exp_fp64(vec2 a) {\n  // We need to make sure these two numbers match\n  // as bit-wise shift is not available in GLSL 1.0\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can't get PI/16 * 3.0 very accurately.\n    // so let's just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"),rn={ONE:1};var on={name:"fp64",vs:nn,fs:null,fp64ify:tn,fp64LowPart:function(t){return t-Math.fround(t)},fp64ifyMatrix4:function(t){for(var e=new Float32Array(32),n=0;n<4;++n)for(var r=0;r<4;++r){var i=4*n+r;tn(t[4*r+n],e,2*i)}return e},getUniforms:function(){return Object.assign({},rn)}},an=("".concat(en),[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),sn={modelMatrix:an,viewMatrix:an,projectionMatrix:an,cameraPositionWorld:[0,0,0]};var un="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n";"".concat(un,"\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),"\n".concat(un);"".concat("  // empty\n","\n").concat("#define LIGHT_MAX 4\n\n/*\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n*/\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\n\n// point lights configuration\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\n\n// reflection / refraction configuration\nuniform bool lighting_uEnableReflections;\n\n// varyings\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n\n  // lighting code\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n    // refraction / reflection code\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n","\n"),"".concat("  // empty\n","\n").concat("precision highp float;\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  // set color from texture\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\n// spec-map.fs\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\n// render-tex.fs\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n/// frag-lighting\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n///\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n","\n"),new Float32Array([1,1,2]);var ln={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};var cn={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  // Do the comparison with selected item color in vertex shader as it should mean fewer compares\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive; // true during rendering to offscreen picking buffer\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n  return selected ? (picking_uHighlightColor * COLOR_SCALE) : color;\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,e={};if(void 0!==t.pickingSelectedColor)if(null===t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{var n=[t.pickingSelectedColor[0],t.pickingSelectedColor[1],t.pickingSelectedColor[2]];e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}return void 0!==t.pickingHighlightColor&&(e.picking_uHighlightColor=t.pickingHighlightColor),void 0!==t.pickingThreshold&&(e.picking_uThreshold=t.pickingThreshold),void 0!==t.pickingActive&&(e.picking_uActive=t.pickingActive?1:0),e}};var fn="void main() {}",pn="#version 300 es\n".concat(fn);function hn(t,e){e=Array.isArray(e)?e:[e];var n=t.replace(/^\s+/,"").split(/\s+/),r=Object(tt.a)(n,3),i=r[0],o=r[1],a=r[2];return e.includes(i)&&o&&a?{qualifier:i,type:o,name:a.split(";")[0]}:null}function dn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,r=t.input,i=t.inputType,o=t.output;if(!r)return 300===n?pn:fn;var a=function(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ge()(!1),null}}(r,i);return 300===n?"#version 300 es\nin ".concat(i," ").concat(r,";\nout vec4 ").concat(o,";\nvoid main() {\n  ").concat(o," = ").concat(a,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(a,";\n}")}var yn={name:"transform",vs:"attribute float transform_elementID;\n\n// returns half of pixel size, used to move the pixel position to center of the pixel.\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\n// returns current elements pixel indeces [x, y],\n// where x ranges in [0 to texSize-1] and y ranges in [0 to texSize-1]\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  // Add safe offset (half of pixel height) before doing floor\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\n\n// returns current elementID's texture co-ordianate\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\n\n// returns current elementID's position\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  // Change from [0 1] range to [-1 1]\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\n\n// returns current elementID's pixel value\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},vn=n(30),gn=n.n(vn),mn={},bn=function t(e,n,r){e&&(n.length>1?t(e[n[0]],n.slice(1),r):e[n[0]]=r)},_n=new Map;function xn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.header,n=void 0===e?"Uniforms":e,r=t.program,i=t.uniforms,o=t.undefinedOnly,a=void 0!==o&&o;Object(T.a)(r);var s=r._uniformSetters,u={},l=Object.keys(s).sort(),f=0,p=!0,h=!1,d=void 0;try{for(var y,v=l[Symbol.iterator]();!(p=(y=v.next()).done);p=!0){var g=y.value;g.match(".*_.*")||g.match(".*Matrix")||wn({table:u,header:n,uniforms:i,uniformName:g,undefinedOnly:a})&&f++}}catch(t){h=!0,d=t}finally{try{p||null==v.return||v.return()}finally{if(h)throw d}}var m=!0,b=!1,_=void 0;try{for(var x,w=l[Symbol.iterator]();!(m=(x=w.next()).done);m=!0){var E=x.value;E.match(".*Matrix")&&wn({table:u,header:n,uniforms:i,uniformName:E,undefinedOnly:a})&&f++}}catch(t){b=!0,_=t}finally{try{m||null==w.return||w.return()}finally{if(b)throw _}}var S=!0,P=!1,C=void 0;try{for(var k,A=l[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){var M=k.value;u[M]||wn({table:u,header:n,uniforms:i,uniformName:M,undefinedOnly:a})&&f++}}catch(t){P=!0,C=t}finally{try{S||null==A.return||A.return()}finally{if(P)throw C}}var j=0,R={};if(!a)for(var I in i){var L=i[I];u[I]||(j++,R[I]=Object(O.a)({Type:"NOT USED: ".concat(L)},n,Object(c.b)(L)))}return{table:u,count:f,unusedTable:R,unusedCount:j}}function wn(t){var e,n=t.table,r=t.header,i=t.uniforms,o=t.uniformName,a=t.undefinedOnly,s=i[o],u=function(t){return void 0!==t&&null!==t}(s);return(!a||!u)&&(n[o]=(e={},Object(O.a)(e,r,u?Object(c.b)(s):"N/A"),Object(O.a)(e,"Uniform Type",u?s:"NOT PROVIDED"),e),!0)}function En(t,e,n,r){var o,a,s,u,l=t.gl,f="NOT PROVIDED",p="N/A",h="N/A",d="N/A";if(n&&(f=n.type,p=n.size,a=-1!==(f=String(f).replace("Array","")).indexOf("nt")),e instanceof B.a){var y,v,g=e,m=g.getDebugData(),b=m.data;if(s=m.modified?"*":"",u=b,h=(d=g.byteLength)/b.BYTES_PER_ELEMENT/p,n){var _=n.divisor>0;v="".concat(_?"I ":"P "," ").concat(h," (x").concat(p,"=").concat(d," bytes ").concat(Object(i.c)(l,f),")")}else a=!0,v="".concat(d," bytes");return y={},Object(O.a)(y,r,"".concat(s).concat(Object(c.b)(u,{size:p,isInteger:a}))),Object(O.a)(y,"Format ",v),y}return u=e,p=e.length,a=-1!==(f=String(e.constructor.name).replace("Array","")).indexOf("nt"),o={},Object(O.a)(o,r,"".concat(Object(c.b)(u,{size:p,isInteger:a})," (constant)")),Object(O.a)(o,"Format ","".concat(p,"x").concat(f," (constant)")),o}function On(t,e){var n=Yt(e.type,e.size);return n?"".concat(t," (").concat(n.name,")"):t}function Sn(t){var e=t.accessor,n=Yt(e.type,e.size);return n?"".concat(n.name," ").concat(t.name):t.name}gn.a.listenFor("luma.gl",function(t){var e=mn[t.itemKey];if(e&&"edit"===t.type&&"uniforms"===t.valuePath[0]){var n=t.valuePath.slice(1);!function(t,e,n){g.b.__SEER_INITIALIZED__&&(_n.has(t)||_n.set(t,new Map),_n.get(t).set(e,n))}(t.itemKey,n,t.value);var r=e.getUniforms();bn(r,n,t.value),e.setUniforms(r)}});var Pn=["renderPickingBuffer","pickingEnabled"],Cn=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.a)(this,e),n=Object(z.a)(this,Object(U.a)(e).call(this,r)),Object(T.a)(Object(o.m)(t)),n.gl=t,n.lastLogTime=0,n.initialize(r),n}return Object(V.a)(e,t),Object(S.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(t),this.vertexArray=new se(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this.setProps(t),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(t.moduleSettings))),this.isInstanced=t.isInstanced||t.instanced,this.onBeforeRender=t.onBeforeRender||function(){},this.onAfterRender=t.onAfterRender||function(){},Object(T.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(t){Object.assign(this.props,t),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"uniforms"in t&&this.setUniforms(t.uniforms,t.samplers),"pickable"in t&&(this.pickable=t.pickable),"timerQueryEnabled"in t&&(this.timerQueryEnabled=t.timerQueryEnabled&&$t.isSupported(this.gl,["timers"]),t.timerQueryEnabled&&!this.timerQueryEnabled&&c.g.warn("GPU timer not supported")()),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers),"_animationProps"in t&&this._setAnimationProps(t._animationProps),"_animationLoop"in t&&(this.animationLoop=t._animationLoop)}},{key:"delete",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this.program.delete(),this.vertexArray.delete(),function(t){delete mn[t],gn.a.deleteItem("luma.gl",t)}(this.id)}},{key:"destroy",value:function(){this.delete()}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!e,this.geometry&&(n=n||this.geometry.getNeedsRedraw({clearRedrawFlags:e})),this.animated&&(n=n||"animated model ".concat(this.id)),n}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getUniforms",value:function(){return this.program.getUniforms}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"setDrawMode",value:function(t){return this.props.drawMode=he(t),this}},{key:"setVertexCount",value:function(t){return Object(T.a)(Number.isFinite(t)),this.props.vertexCount=t,this}},{key:"setInstanceCount",value:function(t){return Object(T.a)(Number.isFinite(t)),this.instanceCount=t,this}},{key:"setGeometry",value:function(t){this.geometry=t;var e=this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());return this.vertexArray.setAttributes(e),this.setNeedsRedraw(),this}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.d)(t))return this;Object.assign(this.attributes,t);var e=this._createBuffersFromAttributeDescriptors(t);return this.vertexArray.setAttributes(e),this.setNeedsRedraw(),this}},{key:"setUniforms",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({},e),function(t,e){if(g.b.__SEER_INITIALIZED__&&t){var n=_n.get(t);n&&n.forEach(function(t,n){bn(e,n,t)})}}(this.id,e),e=this._extractAnimatedUniforms(e),this.program.setUniforms(e,n,function(){t._checkForDeprecatedUniforms(e),t.setNeedsRedraw()})}},{key:"_setAnimationProps",value:function(t){var e=this;if(this.animated){Object(T.a)(t,"Model.draw(): animated uniforms but no animationProps");var n=this._evaluateAnimateUniforms(t);this.program.setUniforms(n,{},function(){e._checkForDeprecatedUniforms(n),e.setNeedsRedraw()})}}},{key:"updateModuleSettings",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:"clear",value:function(t){return ht(this.program.gl,t),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.moduleSettings,n=void 0===e?null:e,r=t.framebuffer,i=t.uniforms,o=void 0===i?{}:i,a=t.attributes,s=void 0===a?{}:a,u=t.samplers,l=void 0===u?{}:u,f=t.transformFeedback,p=void 0===f?this.transformFeedback:f,h=t.parameters,d=void 0===h?{}:h,y=t.vertexArray,v=void 0===y?this.vertexArray:y,g=t.animationProps;!function(t){mn[t.id]||(mn[t.id]=t,gn.a.listItem("luma.gl",t.id))}(this),this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(o,l),this._refreshAnimationProps(g);var m=this._logDrawCallStart(2),b=this.vertexArray.getDrawParams(this.props);b.isInstanced&&!this.isInstanced&&c.g.warn("Found instanced attributes on non-instanced model",this.id)();var _=b.isIndexed,x=b.indexType,w=this.isInstanced,E=this.instanceCount;return this.onBeforeRender(),this._timerQueryStart(),this.program.draw(Object.assign({},t,{logPriority:m,uniforms:null,framebuffer:r,parameters:d,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:v,transformFeedback:p,isIndexed:_,indexType:x,isInstanced:w,instanceCount:E})),this._timerQueryEnd(),this.onAfterRender(),this.setNeedsRedraw(!1),this._logDrawCallEnd(m,v,r),this}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,n=void 0===e||e,r=t.feedbackBuffers,i=t.unbindModels,o=void 0===i?[]:i,a=t.parameters;r&&this._setFeedbackBuffers(r),n&&(a=Object.assign({},a,Object(O.a)({},35977,n))),o.forEach(function(t){return t.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},t,{parameters:a}))}finally{o.forEach(function(t){return t.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(T.a)(arguments.length<=1),this.draw({uniforms:t})}},{key:"_createProgram",value:function(t){var e=t.vs,n=void 0===e?null:e,r=t.fs,i=void 0===r?null:r,o=t.modules,a=void 0===o?null:o,s=t.defines,u=void 0===s?{}:s,l=t.inject,f=void 0===l?{}:l,p=t.shaderCache,h=void 0===p?null:p,d=t.varyings,y=void 0===d?null:d,v=t.bufferMode,g=void 0===v?35981:v,m=t.program,b=void 0===m?null:m;this.getModuleUniforms=function(t){};var _=this.id;if(!b){n=n||ye,i=i||ve;var x=Je(this.gl,{vs:n,fs:i,modules:a,inject:f,defines:u,log:c.g});n=x.vs,i=x.fs,b=h?h.getProgram(this.gl,{id:_,vs:n,fs:i}):new Jt(this.gl,{id:_,vs:n,fs:i,varyings:y,bufferMode:g}),this.getModuleUniforms=x.getUniforms||function(t){}}return Object(T.a)(b instanceof Jt,"Model needs a program"),b}},{key:"_checkForDeprecatedUniforms",value:function(t){Pn.forEach(function(e){e in t&&c.g.deprecated(e,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function(t){(t=t||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(t)}},{key:"_evaluateAnimateUniforms",value:function(t){if(!this.animated)return{};var e={};for(var n in this.animatedUniforms){var r=this.animatedUniforms[n];e[n]=r(t)}return e}},{key:"_extractAnimatedUniforms",value:function(t){var e=!1;for(var n in t){var r=t[n];"function"==typeof r?(this.animatedUniforms[n]=r,e=!0):delete this.animatedUniforms[n]}if(this.animated=!Object(c.d)(this.animatedUniforms),!e)return t;var i={};for(var o in t)this.animatedUniforms[o]||(i[o]=t[o]);return i}},{key:"_setFeedbackBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.d)(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new te(e,{program:this.program}),this.transformFeedback.setBuffers(t),this.setNeedsRedraw(),this}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new $t(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var t=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=t,this.stats.accumulatedFrameTime+=t,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,c.g.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function(t){var e=this.program.gl,n={};for(var r in t){var i=t[r],o=this._attributes[r];i instanceof fe?o=i:i instanceof B.a?(o=o||new fe(e,Object.assign({},i,i.layout,{id:r}))).update({buffer:i}):o?o.update(i):o=new fe(e,Object.assign({},i,{id:r})),this._attributes[r]=o,n[r]=o.getValue()}return n}},{key:"_logDrawCallStart",value:function(t){var e=t>3?0:1e4;if(!(c.g.priority<t||Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),c.g.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:c.g.priority<=2})(),t}},{key:"_logDrawCallEnd",value:function(t,e,n,r){if(void 0!==t){var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vertexArray,n=t.header,r=void 0===n?"Attributes":n;if(!e.configuration)return{};var i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=En(e,e.elements,null,r));var o=e.values;for(var a in o){var s=e._getAttributeInfo(a);if(s){var u="".concat(a,": ").concat(s.name),l=e.accessors[s.location];l&&(u="".concat(a,": ").concat(On(s.name,l))),i[u]=En(e,o[a],l,r)}}return i}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=xn({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),a=o.table,s=o.unusedTable,u=o.unusedCount,l=xn({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),f=l.table;l.count>0&&c.g.log("MISSING UNIFORMS",Object.keys(f))(),u>0&&c.g.log("UNUSED UNIFORMS",Object.keys(s))();var p=function(t){var e={},n="Accessors for ".concat(t.id),r=!0,i=!1,o=void 0;try{for(var a,s=t.attributeInfos[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u){var l=Sn(u);e["in ".concat(l)]=Object(O.a)({},n,JSON.stringify(u.accessor))}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var c=!0,f=!1,p=void 0;try{for(var h,d=t.varyingInfos[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var y=h.value;if(y){var v=Sn(y);e["out ".concat(v)]=Object(O.a)({},n,JSON.stringify(y.accessor))}}}catch(t){f=!0,p=t}finally{try{c||null==d.return||d.return()}finally{if(f)throw p}}return e}(this.vertexArray.configuration);c.g.table(t,i)(),c.g.table(t,a)(),c.g.table(t+1,p)(),function(t,e){if(gn.a.isReady()&&!gn.a.throttle("luma.gl:".concat(t.id),1e3)){var n=t.geometry?Object.assign({},t.geometry.attributes,t.attributes):t.attributes,r=Object.assign({},t.uniforms,e);gn.a.multiUpdate("luma.gl",t.id,[{path:"objects.uniforms",data:r},{path:"objects.attributes",data:n}])}}(this,n),r&&r.log({priority:2,message:"Rendered to ".concat(r.id)}),c.g.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}},{key:"vertexCount",get:function(){return Number.isFinite(this.props.vertexCount)?this.props.vertexCount:this.geometry&&this.geometry.getVertexCount()}},{key:"drawMode",get:function(){return Number.isFinite(this.props.drawMode)?this.props.drawMode:this.geometry&&this.geometry.drawMode}}]),e}(ce),Tn=n(23),kn={preserveDrawingBuffer:!0},An=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.a)(this,t);var n=e.onCreateContext,r=void 0===n?function(t){return j(t)}:n,i=e.onAddHTML,o=void 0===i?null:i,a=e.onInitialize,s=void 0===a?function(){}:a,u=e.onRender,l=void 0===u?function(){}:u,f=e.onFinalize,p=void 0===f?function(){}:f,h=e.offScreen,d=void 0!==h&&h,y=e.gl,g=void 0===y?null:y,m=e.glOptions,b=void 0===m?{}:m,_=e.debug,x=void 0!==_&&_,w=e.createFramebuffer,E=void 0!==w&&w,O=e.autoResizeViewport,S=void 0===O||O,P=e.autoResizeDrawingBuffer,C=void 0===P||P,T=e.useDevicePixels,k=void 0===T||T;return"useDevicePixelRatio"in e&&(c.g.deprecated("useDevicePixelRatio","useDevicePixels")(),k=e.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:o,onInitialize:s,onRender:l,onFinalize:p,gl:g,glOptions:b,debug:x,createFramebuffer:E},this.gl=g,this.offScreen=d,this.needsRedraw=null,this.setProps({autoResizeViewport:S,autoResizeDrawingBuffer:C,useDevicePixels:k}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._renderFrame=this._renderFrame.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this),this}return Object(S.a)(t,[{key:"setNeedsRedraw",value:function(t){return Object(T.a)("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:"setProps",value:function(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this._startPromise=h().then(function(){return t._stopped?null:(t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t.onInitialize(t.animationProps))}).then(function(e){t._stopped||(t._addCallbackData(e||{}),!1===e||t._animationFrameId||(t._animationFrameId=Object(o.p)(t._renderFrame)))})),this}},{key:"stop",value:function(){return this._animationFrameId&&(this._finalizeCallbackData(),Object(o.f)(this._animationFrameId),this._animationFrameId=null,this._stopped=!0),this}},{key:"onCreateContext",value:function(){var t;return(t=this.props).onCreateContext.apply(t,arguments)}},{key:"onInitialize",value:function(){var t;return(t=this.props).onInitialize.apply(t,arguments)}},{key:"onRender",value:function(){var t;return(t=this.props).onRender.apply(t,arguments)}},{key:"onFinalize",value:function(){var t;return(t=this.props).onFinalize.apply(t,arguments)}},{key:"getHTMLControlValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}},{key:"setViewParameters",value:function(){return c.g.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_renderFrame",value:function(){this._stopped||(this._setupFrame(),this._updateCallbackData(),this.onRender(this.animationProps),this.offScreen?this.gl.commit().then(this._renderFrame):this._animationFrameId=Object(o.p)(this._renderFrame))}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){this.animationProps.needsRedraw=this.needsRedraw,this.needsRedraw=null;var t=this._getSizeAndAspect(),e=t.width,n=t.height,r=t.aspect;e===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(t){"object"===Object(Tn.a)(t)&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:"_createWebGLContext",value:function(t){if(t=Object.assign({},t,kn,this.props.glOptions),this.gl=this.props.gl||this.onCreateContext(t),!Object(o.m)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=b(this.gl)),Object(R.a)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);var n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas,i=r.clientWidth,o=r.clientHeight;return i>=0&&o>=0?n=e>0?i/o:1:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){var n=e.useDevicePixels&&window.devicePixelRatio||1,r="width"in e?e.width:t.canvas.clientWidth,i="height"in e?e.height:t.canvas.clientHeight;return t.canvas.width=r*n,void(t.canvas.height=i*n)}var o=t.getExtension("STACKGL_resize_drawingbuffer");o&&"width"in e&&"height"in e&&o.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new vt(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_startEventHandling",value:function(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:"_onMouseleave",value:function(t){this.animationProps._mousePosition=null}}]),t}();new Uint8Array([0,0,0]);var Mn,jn="transform_uSampler_",Rn="transform_uSize_",In="transform_position";function Ln(t){var e=t.vs,n=t.sourceTextureMap,r=t.targetTextureVarying,i=t.targetTexture,o=Object.keys(n).length,a=null,s={},u={},l=e,c={};if(o>0||r){var f=l.split("\n"),p=f.slice();if(f.forEach(function(t,e,i){if(o>0){var l=function(t,e){var n={},r={},i=function(t){return hn(t,["attribute","in"])}(t);if(!i)return null;var o=i.type,a=i.name;if(a&&e[a]){var s="// ".concat(t," => Replaced by Transform with a sampler"),u=function(t){var e="".concat(jn).concat(t),n="".concat(Rn).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(a),l=u.samplerName,c=u.sizeName,f=u.uniformDeclerations,p=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ge()(!1),null}}(o),h="  ".concat(o," ").concat(a," = transform_getInput(").concat(l,", ").concat(c,").").concat(p,";\n"),d=e[a],y=d.width,v=d.height;r[l]=a,n[c]=[y,v];var g={"vs:#decl":f,"vs:#main-start":h};return{updatedLine:s,inject:g,uniforms:n,samplerTextureMap:r}}return null}(t,n);if(l){var f=l.updatedLine,h=l.inject;p[e]=f,c=Ze([c,h]),Object.assign(s,l.uniforms),Object.assign(u,l.samplerTextureMap),o--}}r&&!a&&(a=function(t,e){var n=hn(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))}),r){Ge()(i);var h="".concat(Rn).concat(r),d=i.width,y=i.height;s[h]=[d,y];var v="uniform vec2 ".concat(h,";\n"),g="     vec2 ".concat(In," = transform_getPos(").concat(h,");\n     gl_Position = vec4(").concat(In,", 0, 1.);\n");c=Ze([c,{"vs:#decl":v,"vs:#main-start":g}])}l=p.join("\n")}return{vs:l,uniforms:s,targetTextureType:a,inject:c,samplerTextureMap:u}}var Dn=(Mn={},Object(O.a)(Mn,10241,9728),Object(O.a)(Mn,10240,9728),Object(O.a)(Mn,10242,33071),Object(O.a)(Mn,10243,33071),Mn),Fn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(v.a)(this,t),Object(o.d)(e),this.gl=e,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Object(S.a)(t,null,[{key:"isSupported",value:function(t){return Object(o.n)(t)}}]),Object(S.a)(t,[{key:"delete",value:function(){for(var t in this._createdBuffers)this._createdBuffers[t].delete();this.model.delete()}},{key:"getBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(T.a)(t&&this.feedbackBuffers[this.currentIndex][t]),this.feedbackBuffers[this.currentIndex][t]}},{key:"_getTargetTexture",value:function(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,n=void 0===e?null:e,r=t.packed,i=void 0!==r&&r;if(n&&this.feedbackBuffers[this.currentIndex][n])return this.feedbackBuffers[this.currentIndex][n].getData();Object(T.a)(!n||n===this.targetTextureVarying);var o=this.framebuffers[this.currentIndex].readPixels();if(!i)return o;for(var a=o.constructor,s=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ge()(!1),null}}(this.targetTextureType),u=new a(o.length*s/4),l=0,c=0;c<o.length;c+=4)for(var f=0;f<s;f++)u[l++]=o[c+f];return u}},{key:"_getInputs",value:function(){var t={},e=this.currentIndex,n=Object.assign({},this.sourceBuffers[e]);if(this.hasSourceTextures||this.targetTextureVarying){for(var r in n.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var i=this.samplerTextureMap[r];t[r]=this.sourceTextures[e][i]}this._setSourceTextureParameters()}return{attributes:n,samplerUniforms:t}}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getInputs(),n=e.attributes,r=e.samplerUniforms,i=Object.assign({},r,t.uniforms),o=Object.assign({},t.parameters),a=t.clearRenderTarget,s=void 0===a||a,u=null,l=!0;this.renderingToTexture&&(l=!1,u=this.framebuffers[this.currentIndex],Object(T.a)(u),o.viewport=[0,0,u.width,u.height],s&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(n),this.model.transform(Object.assign({},t,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:i,discard:l,framebuffer:u,parameters:o}))}},{key:"swapBuffers",value:function(){c.g.deprecated("swapBuffers()","swap()"),this.swap()}},{key:"swap",value:function(){Object(T.a)(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.elementCount&&this._setElementCount(t.elementCount);var e=t.sourceBuffers,n=void 0===e?null:e,r=t.feedbackBuffers,i=void 0===r?null:r,o=this.currentIndex;if(n||i){for(var a in i)Object(T.a)(i[a]instanceof B.a);Object.assign(this.sourceBuffers[o],n),Object.assign(this.feedbackBuffers[o],i),this._createFeedbackBuffers({feedbackBuffers:i}),this.transformFeedbacks[o]&&this.transformFeedbacks[o].setBuffers(this.feedbackBuffers[o]),this._setupSwapBuffers()}var s=t._sourceTextures,u=t._targetTexture;(s||u)&&(Object.assign(this.sourceTextures[o],s),this._getDestinationTexture(u)&&(this.targetTextures[o]=this._getDestinationTexture(u),this.framebuffers[o].update(Object(O.a)({},36064,this.targetTextures[o]))),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function(){var t=this.currentIndex;for(var e in this.sourceTextures[t])this.sourceTextures[t][e].setParameters(Dn)}},{key:"_setElementCount",value:function(t){this.elementCount!==t&&(this.elementCount<t&&this._updateElementIDBuffer(t),this.model.setVertexCount(t),this.elementCount=t)}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._validateProps(t),n=e.feedbackBuffers,r=e.feedbackMap,i=t.sourceBuffers,o=t.varyings,a=t._targetTexture,s=t._targetTextureVarying,u=t._swapTexture,l=o;r&&!Array.isArray(o)&&(l=Object.values(r)),this.varyingsArray=l,this.feedbackMap=r,this._swapTexture=u,a&&(this.targetTextureVarying=s,this.renderingToTexture=!0,Object(T.a)(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:i,feedbackBuffers:n}),this._setupTextures(t),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},t,{id:t.id||"transform-model",drawMode:t.drawMode||0,varyings:l}))}},{key:"_validateProps",value:function(t){var e=t.feedbackBuffers,n=t.feedbackMap,r=t.destinationBuffers,i=t.sourceDestinationMap;r&&(c.g.deprecated("destinationBuffers","feedbackBuffers")(),e=e||r),i&&(c.g.deprecated("sourceDestinationMap","feedbackMap")(),n=n||i);var o=t.vs,a=t.elementCount,s=t.varyings,u=t._sourceTextures,l=t._targetTexture,f=t._targetTextureVarying,p=t._swapTexture;for(var h in Object(T.a)(o&&(s||n||l)&&a),e||{})Object(T.a)(e[h]instanceof B.a);for(var d in u||{})Object(T.a)(u[d]instanceof et.a);return Object(T.a)(!l||f),Object(T.a)(!p||u[p]),{feedbackBuffers:e,feedbackMap:n}}},{key:"_setupBuffers",value:function(t){var e=t.sourceBuffers,n=void 0===e?null:e,r=t.feedbackBuffers,i=void 0===r?null:r;this.sourceBuffers[0]=Object.assign({},n),this.feedbackBuffers[0]=Object.assign({},i),this._createFeedbackBuffers({feedbackBuffers:i}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._sourceTextures,n=t._targetTexture;if(this.sourceTextures[0]=Object.assign({},e),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var r=this._getDestinationTexture(n);Object(T.a)(r),this.targetTextures[0]=r,this.targetTextures[1]=null}}},{key:"_getDestinationTexture",value:function(t){var e;if(t instanceof et.a)return t;var n=this.sourceTextures[0][t];return n?Object(o.g)(n,{parameters:(e={},Object(O.a)(e,10241,9728),Object(O.a)(e,10240,9728),Object(O.a)(e,10242,33071),Object(O.a)(e,10243,33071),e),pixelStore:Object(O.a)({},37440,!1)}):null}},{key:"_createFeedbackBuffers",value:function(t){var e=t.feedbackBuffers;if(this.feedbackMap){var n=this.currentIndex;for(var r in this.feedbackMap){var i=this.feedbackMap[r];if(!(i===this.targetTextureVarying||e&&e[i])){var o=this.sourceBuffers[n][r],a=o.bytes,s=o.type,u=o.usage,l=o.accessor,c=new B.a(this.gl,{bytes:a,type:s,usage:u,accessor:l});this._createdBuffers[i]&&this._createdBuffers[i].delete(),this._createdBuffers[i]=c,this.feedbackBuffers[n][i]=c}}}}},{key:"_createNewBuffer",value:function(t,e){var n=new B.a(this.gl,e);return this._createdBuffers[t]&&(this._createdBuffers[t].delete(),this._createdBuffers[t]=n),n}},{key:"_setupSwapBuffers",value:function(){if(this.feedbackMap){var t=this.currentIndex,e=(t+1)%2;for(var n in Object.assign(this.sourceBuffers[e],this.sourceBuffers[t]),Object.assign(this.feedbackBuffers[e],this.feedbackBuffers[t]),this.feedbackMap){var r=this.feedbackMap[n];r!==this.targetTextureVarying&&(this.sourceBuffers[e][n]=this.feedbackBuffers[t][r],this.feedbackBuffers[e][r]=this.sourceBuffers[t][n],Object(T.a)(this.feedbackBuffers[e][r]instanceof B.a))}this.transformFeedbacks[e]&&this.transformFeedbacks[e].setBuffers(this.feedbackBuffers[e])}}},{key:"_setupSwapTextures",value:function(){if(this._swapTexture&&this.targetTextureVarying){var t=this.currentIndex,e=(t+1)%2;Object.assign(this.sourceTextures[e],this.sourceTextures[t]),this.sourceTextures[e][this._swapTexture]=this.targetTextures[t],this.targetTextures[e]=this.sourceTextures[t][this._swapTexture],this.framebuffers[e]&&this.framebuffers[e].update(Object(O.a)({},36064,this.targetTextures[e]))}}},{key:"_buildModel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getShaders(t),n=e.vs,r=e.fs,i=e.modules,o=e.uniforms,a=e.inject,s=e.samplerTextureMap;this.model=new Cn(this.gl,Object.assign({},t,{vs:n,fs:r,vertexCount:t.elementCount,modules:i,uniforms:o,inject:a})),this.samplerTextureMap=s,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(t.elementCount)}},{key:"_setupTransformFeedback",value:function(){Object(c.d)(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new te(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new te(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function(){if(this.renderingToTexture){var t=this.targetTextures[0],e=t.width,n=t.height;if(this.framebuffers[0]=new vt(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:e,height:n,attachments:Object(O.a)({},36064,this.targetTextures[0])}),this._swapTexture){var r=this.targetTextures[1];e=r.width,n=r.height,this.framebuffers[1]=new vt(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:e,height:n,attachments:Object(O.a)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function(t){if(this.hasSourceTextures||this.targetTextureVarying){var e=new Float32Array(t);e.forEach(function(t,e,n){n[e]=e}),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new B.a(this.gl,{data:e,size:1})}}},{key:"_getShaders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t.vs),n=e.vs,r=e.uniforms,i=e.targetTextureType,a=e.inject,s=e.samplerTextureMap;return this.targetTextureType=i,{vs:n,fs:dn({version:Object(o.l)(n),input:this.targetTextureVarying,inputType:i,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[yn].concat(t.modules||[]):t.modules,uniforms:r,inject:a,samplerTextureMap:s}}},{key:"_processVertexShader",value:function(t){return Ln({vs:t,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),t}(),Nn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.gl,r=e._cachePrograms,i=void 0!==r&&r;Object(v.a)(this,t),Object(T.a)(n),this.gl=n,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=i}return Object(S.a)(t,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(t,e){Object(T.a)("string"==typeof e),Object(T.a)(this._compareContexts(t,this.gl));var n=this.vertexShaders[e];return n||(n=new Z(t,e),this.vertexShaders[e]=n),n}},{key:"getFragmentShader",value:function(t,e){Object(T.a)("string"==typeof e),Object(T.a)(this._compareContexts(t,this.gl));var n=this.fragmentShaders[e];return n||(n=new Y(t,e),this.fragmentShaders[e]=n),n}},{key:"getProgram",value:function(t,e){Object(T.a)(this._compareContexts(t,this.gl)),Object(T.a)("string"==typeof e.vs),Object(T.a)("string"==typeof e.fs),Object(T.a)("string"==typeof e.id);var n=this._getProgramKey(e),r=this.programs[n];return r?(this._resetProgram(r),r):(r=this._createNewProgram(t,e),this._cachePrograms&&this._checkProgramProp(r)&&(r._isCached=!0,this.programs[n]=r),r)}},{key:"_getProgramKey",value:function(t){return"".concat(t.id,"-").concat(t.vs,"-").concat(t.fs)}},{key:"_checkProgramProp",value:function(t){return!t.varyings}},{key:"_createNewProgram",value:function(t,e){var n=e.vs,r=e.fs,i=this.getVertexShader(t,n),o=this.getFragmentShader(t,r);return new Jt(this.gl,Object.assign({},e,{vs:i,fs:o}))}},{key:"_resetProgram",value:function(t,e){t.reset()}},{key:"_compareContexts",value:function(t,e){return(t.gl||t)===(e.gl||e)}}]),t}(),Bn=function(){function t(e,n){Object(v.a)(this,t);var r=n.id,i=void 0===r?"pass":r;this.id=i,this.gl=e,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,n)}return Object(S.a)(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"render",value:function(t,e){var n=this;if(this.props.enabled){var r=this.gl,i={gl:r,outputBuffer:t.writeBuffer,inputBuffer:t.readBuffer,animationProps:e,swapBuffers:function(){return t._swapFramebuffers()}};this.props.screen?(i.inputBuffer=i.outputBuffer,i.outputBuffer=vt.getDefaultFramebuffer(r)):this.props.swap&&(i.inputBuffer=t.writeBuffer,i.outputBuffer=t.readBuffer),Object(R.c)(r,{framebuffer:i.outputBuffer},function(){return n._renderPass(i)}),this.props.debug&&i.outputBuffer.log(0,this.id),this.props.swap&&t._swapFramebuffers()}}},{key:"_renderPass",value:function(t){t.gl,t.inputBuffer,t.outputBuffer,t.animationProps}}]),t}(),zn=function(t){function e(t,n){return Object(v.a)(this,e),n=Array.isArray(n)?{passes:n}:n,Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"composite-pass"},n)))}return Object(V.a)(e,t),Object(S.a)(e,[{key:"render",value:function(){var t=this.props.passes,e=void 0===t?[]:t,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.render.apply(s,arguments)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}}]),e}(Bn),Un=function(){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(v.a)(this,t),this.gl=e,this.framebuffer1=new vt(e,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new vt(e,{id:"multi-pass-2",stencil:!0}),this.reset()}return Object(S.a)(t,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}}]),t}(),Vn=function(t){function e(t,n){var r;return Object(v.a)(this,e),n=Array.isArray(n)?{passes:n}:n,(r=Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"multi-pass"},n)))).renderState=new Un(t,n),r}return Object(V.a)(e,t),Object(S.a)(e,[{key:"render",value:function(t){this.renderState.reset();var e=this.props.passes,n=void 0===e?[]:e,r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.render(this.renderState,t)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return this}}]),e}(zn),Gn=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.a)(this,e),Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"clear-pass"},n)))}return Object(V.a)(e,t),Object(S.a)(e,[{key:"_renderPass",value:function(t){var e=t.gl,n=this.props.clearBits,r=void 0===n?16640:n;e.clear(r)}}]),e}(Bn),Wn={x:[2,0,1],y:[0,1,2],z:[1,2,0]},qn=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.a)(this,e);for(var n=t.bottomRadius,r=void 0===n?0:n,i=t.topRadius,o=void 0===i?0:i,a=t.height,s=void 0===a?1:a,u=t.nradial,l=void 0===u?10:u,c=t.nvertical,f=void 0===c?10:c,p=t.verticalAxis,h=void 0===p?"y":p,d=t.topCap,y=void 0!==d&&d,g=t.bottomCap,m=void 0!==g&&g,b=(y?2:0)+(m?2:0),_=(l+1)*(f+1+b),x=Math.atan2(r-o,s),w=Math.sin,E=Math.cos,O=Math.PI,S=E(x),P=w(x),C=y?-2:0,T=f+(m?2:0),k=l+1,A=new Float32Array(3*_),M=new Float32Array(3*_),j=new Float32Array(2*_),R=new Uint16Array(l*(f+b)*6),I=Wn[h],L=0,D=0,F=C;F<=T;F++){var N=F/f,B=s*N,V=void 0;F<0?(B=0,N=1,V=r):F>f?(B=s,N=1,V=o):V=r+F/f*(o-r),-2!==F&&F!==f+2||(V=0,N=0),B-=s/2;for(var G=0;G<k;G++){var W=w(G*O*2/l),q=E(G*O*2/l);A[L+I[0]]=W*V,A[L+I[1]]=B,A[L+I[2]]=q*V,M[L+I[0]]=F<0||F>f?0:W*S,M[L+I[1]]=F<0?-1:F>f?1:P,M[L+I[2]]=F<0||F>f?0:q*S,j[D+0]=G/l,j[D+1]=N,D+=2,L+=3}}for(var H=0;H<f+b;H++)for(var X=0;X<l;X++){var Z=6*(H*l+X);R[Z+0]=k*(H+0)+0+X,R[Z+1]=k*(H+0)+1+X,R[Z+2]=k*(H+1)+1+X,R[Z+3]=k*(H+0)+0+X,R[Z+4]=k*(H+1)+1+X,R[Z+5]=k*(H+1)+0+X}return Object(z.a)(this,Object(U.a)(e).call(this,Object.assign({},t,{attributes:{positions:A,normals:M,texCoords:j,indices:R}})))}return Object(V.a)(e,t),e}(de),Hn=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.a)(this,e);var n=t.id,r=void 0===n?Object(c.i)("cube-geometry"):n;return Object(z.a)(this,Object(U.a)(e).call(this,Object.assign({},t,{id:r,attributes:{indices:new Uint16Array(Xn),positions:new Float32Array(Zn),normals:new Float32Array(Yn),texCoords:new Float32Array(Kn)}})))}return Object(V.a)(e,t),e}(de),Xn=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Zn=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Yn=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Kn=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]);var Jn=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(v.a)(this,e);var n=t.radius,r=void 0===n?1:n;return Object(z.a)(this,Object(U.a)(e).call(this,Object.assign({},t,{bottomRadius:r,topRadius:r})))}return Object(V.a)(e,t),e}(qn);var Qn="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",$n=[-1,-1,1,-1,-1,1,1,1],tr=function(t){function e(t,n){var r;Object(v.a)(this,e);var i=$n.map(function(t){return-1===t?0:t});return(r=Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({},n,{vs:Qn,geometry:new de({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array($n)},aTexCoord:{size:2,value:new Float32Array(i)},aCoordinate:{size:2,value:new Float32Array(i)}}})})))).setVertexCount(4),r}return Object(V.a)(e,t),e}(Cn),er="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",nr=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.a)(this,e),(n=Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"copy-pass",swap:!0},r)))).clipspace=new tr(t,{id:"copy-pass",fs:er}),n}return Object(V.a)(e,t),Object(S.a)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.props.opacity,r=void 0===n?1:n;this.clipspace.draw({uniforms:{uDiffuseSampler:e,uOpacity:r},parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(Bn),rr="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",ir=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(v.a)(this,e),n=Object(z.a)(this,Object(U.a)(e).call(this,t,Object.assign({id:"texture-pass"},r)));var i=r.texture,o=r.opacity,a=void 0===o?1:o;return n.clipspace=new tr(t,{id:"texture-pass",fs:rr,uniforms:{uDiffuseSampler:i,uOpacity:a}}),n}return Object(V.a)(e,t),Object(S.a)(e,[{key:"_renderPass",value:function(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(Bn);n(268);var or="";function ar(){}function sr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.urls,n=t.onProgress,r=void 0===n?ar:n;Object(T.a)(e.every(function(t){return"string"==typeof t}),"loadImages: {urls} must be array of strings");var i=0;return Promise.all(e.map(function(n){var o=function(t,e){return t=or?or+t:t,new Promise(function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(t,".")))},i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(t){r(t)}})}(n,t);return o.then(function(t){return r({progress:++i/e.length,count:i,total:e.length,url:n})}),o}))}function ur(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.urls,r=e.onProgress,i=void 0===r?ar:r;return Object(T.a)(n.every(function(t){return"string"==typeof t}),"loadTextures: {urls} must be array of strings"),sr(Object.assign({urls:n,onProgress:i},e)).then(function(r){return r.map(function(r,i){var o=Array.isArray(e.parameters)?e.parameters[i]:e.parameters;return o=void 0===o?{}:o,new et.a(t,Object.assign({id:n[i]},o,{data:r}))})})}n.d(e,"w",function(){return r.d}),n.d(e,"r",function(){return j}),n.d(e,"C",function(){return y.a}),n.d(e,"B",function(){return R.b}),n.d(e,"D",function(){return R.c}),n.d(e,"e",function(){return L}),n.d(e,"u",function(){return F}),n.d(e,"v",function(){return N}),n.d(e,"b",function(){return B.a}),n.d(e,"f",function(){return vt}),n.d(e,"i",function(){return et.a}),n.d(e,"q",function(){return ht}),n.d(e,"h",function(){return Cn}),n.d(e,"a",function(){return An}),n.d(e,"j",function(){return Fn}),n.d(e,"k",function(){return fe}),n.d(e,"o",function(){return Nn}),n.d(e,"n",function(){return Vn}),n.d(e,"l",function(){return Gn}),n.d(e,"m",function(){return nr}),n.d(e,"p",function(){return ir}),n.d(e,"g",function(){return de}),n.d(e,"c",function(){return Hn}),n.d(e,"d",function(){return Jn}),n.d(e,"x",function(){return ur}),n.d(e,"A",function(){return Ee}),n.d(e,"z",function(){return Oe}),n.d(e,"s",function(){return $e}),n.d(e,"t",function(){return on}),n.d(e,"y",function(){return cn}),n(133)},function(t,e,n){"use strict";var r=n(38),i=n(80);function o(t){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function a(t){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}var s=35632,u=35633;function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:e}function c(t,e,n,r){for(var i=t.split(/\r?\n/),o={},a={},c=r||l(e)||"(unnamed)",h="".concat(function(t){switch(t){case s:return"fragment";case u:return"vertex";default:return"unknown type"}}(n)," shader ").concat(c),d=0;d<i.length;d++){var y=i[d];if(!(y.length<=1)){var v=y.split(":"),g=v[0],m=parseInt(v[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(h,": ").concat(t));"WARNING"!==g?o[m]=y:a[m]=y}}var b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(function(t,r){var o=r+e,a=String(o).length,s=p(o,i-a);return s+n+t})}(e);return{shaderName:h,errors:f(o,b),warnings:f(a,b)}}function f(t,e){for(var n="",r=0;r<e.length;r++){var i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){var o=t[r+1],a=o.split(":",3),s=a[0],u=parseInt(a[1],10)||0,l=o.substring(a.join(":").length+1).trim();n+=p("^^^ ".concat(s,": ").concat(l,"\n\n"),u)}}return n}function p(t,e){for(var n="",r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}var h=n(48),d=n(39);function y(t){var e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}var v=n(62),g=n(95),m=n(124),b=n(37),_=n.n(b);function x(t,e){_()(t instanceof v.a||t instanceof g.a||t instanceof m.a);var n=t.constructor,r=t.gl,i=t.width,o=t.height,a=t.format,s=t.type,u=t.dataFormat,l=t.border,c=t.mipmaps;return new n(r,Object.assign({width:i,height:o,format:a,type:s,dataFormat:u,border:l,mipmaps:c},e))}n.d(e,"c",function(){return r.c}),n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b}),n.d(e,"m",function(){return i.c}),n.d(e,"n",function(){return i.d}),n.d(e,"e",function(){return i.b}),n.d(e,"d",function(){return i.a}),n.d(e,"p",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"o",function(){return c}),n.d(e,"k",function(){return l}),n.d(e,"h",function(){return h.a}),n.d(e,"q",function(){return h.d}),n.d(e,"j",function(){return d.b}),n.d(e,"i",function(){return d.a}),n.d(e,"l",function(){return y}),n.d(e,"g",function(){return x})},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.r(e);var r=n(92),i=n(18);if(r.global.deck&&"6.2.4"!==r.global.deck.VERSION)throw new Error("deck.gl - multiple versions detected: ".concat(r.global.deck.VERSION," vs ").concat("6.2.4"));r.global.deck||(i.a.log(0,"deck.gl ".concat("6.2.4"," - ").concat("set deck.log.priority=1 (or higher) to trace attribute updates"))(),r.global.deck=r.global.deck||{VERSION:"6.2.4",version:"6.2.4",log:i.a}),console.table||(console.table=function(){}),n(206);n(206);var o=n(24),a=n(17),s=n(9),u=n(30),l=n.n(u),c=n(16),f=n.n(c);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g={isExternalBuffer:!1,needsUpdate:!0,needsRedraw:!1,allocedInstances:-1},m=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=d(this,y(e).call(this,t,r));var i=r.transition,o=void 0!==i&&i,a=r.noAlloc,s=void 0!==a&&a,u=r.update,l=void 0===u?null:u,c=r.accessor,f=void 0===c?null:c,p=r.bufferLayout,h=void 0===p?null:p,v=r.defaultValue,m=void 0===v?[0,0,0,0]:v;return m=Array.isArray(m)?m:[m],Object.assign(n.userData,g,r,{transition:o,noAlloc:s,update:l,accessor:f,defaultValue:m,bufferLayout:h}),Object.seal(n.userData),n._validateAttributeUpdaters(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,s["k"]),function(t,e,n){e&&h(t.prototype,e),n&&h(t,n)}(e,[{key:"needsUpdate",value:function(){return this.userData.needsUpdate}},{key:"needsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearChangedFlags,e=void 0!==t&&t,n=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!e,n}},{key:"getInstanceCount",value:function(){return null!==this.value?this.value.length/this.size:0}},{key:"getUpdateTriggers",value:function(){var t=this.userData.accessor;return[this.id].concat(t||[])}},{key:"getAccessor",value:function(){return this.userData.accessor}},{key:"supportsTransition",value:function(){return this.userData.transition}},{key:"getTransitionSetting",value:function(t){var e=this.userData,n=e.transition,r=e.accessor;if(!n)return null;var i=Array.isArray(r)?t[r.find(function(e){return t[e]})]:t[r];return Number.isFinite(i)&&(i={duration:i}),i&&i.duration>0?Object.assign({},n,i):null}},{key:"setNeedsUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsUpdate=this.userData.needsUpdate||t}},{key:"setNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||t}},{key:"allocate",value:function(t){var e=this.userData;if(e.isExternalBuffer||e.noAlloc)return!1;var n=this.getInstanceCount();if((0===n||n<t)&&(e.update||e.accessor)){Object(a.a)(Number.isFinite(t));var r=Math.max(t,1),i=b(this.type||f.a.FLOAT);return this.constant=!1,this.value=new i(this.size*r),e.needsUpdate=!0,e.allocedInstances=r,!0}return!1}},{key:"updateBuffer",value:function(t){var e=t.numInstances,n=t.data,r=t.props,i=t.context;if(!this.needsUpdate())return!1;var o=this.userData,a=o.update,s=o.accessor,u=!0;return a?(a.call(i,this,{data:n,props:r,numInstances:e}),this.update({value:this.value,constant:this.constant}),this._checkAttributeArray()):s?(this._updateBufferViaStandardAccessor(n,r),this._checkAttributeArray()):u=!1,o.needsUpdate=!1,o.needsRedraw=!0,u}},{key:"setGenericValue",value:function(t){var e=this.userData;if(void 0===t||"function"==typeof t)return e.isExternalBuffer=!1,!1;t=this._normalizeValue(t);var n=!this.constant||!this._areValuesEqual(t,this.value);return n&&this.update({constant:!0,value:t}),e.needsRedraw=e.needsUpdate||n,e.needsUpdate=!1,e.isExternalBuffer=!0,!0}},{key:"setExternalBuffer",value:function(t,e){var n=this.userData;if(t){if(n.isExternalBuffer=!0,n.needsUpdate=!1,t instanceof s.b)this.externalBuffer!==t&&(this.update({constant:!1,buffer:t}),n.needsRedraw=!0);else{var r=b(this.type||f.a.FLOAT);if(!(t instanceof r))throw new Error("Attribute ".concat(this.id," must be of type ").concat(r.name));if(n.auto&&t.length<=e*this.size)throw new Error("Attribute prop array must match length and size");this.value!==t&&(this.update({constant:!1,value:t}),n.needsRedraw=!0)}return!0}return n.isExternalBuffer=!1,!1}},{key:"_normalizeValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.userData.defaultValue;if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return e[n]=Number.isFinite(t)?t:r[0],e;switch(this.size){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0]}return e}},{key:"_areValuesEqual",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}},{key:"_updateBufferViaStandardAccessor",value:function(t,e){var n=this.userData.accessor,r=this.value,i=this.size,o=e[n];Object(a.a)("function"==typeof o,'accessor "'.concat(n,'" is not a function'));var s=0,u=!0,l=!1,c=void 0;try{for(var f,p=t[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=o(f.value);this._normalizeValue(h,r,s),s+=i}}catch(t){l=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}this.update({value:r})}},{key:"_validateAttributeUpdaters",value:function(){var t=this.userData;if(!(t.noAlloc||"function"==typeof t.update||"string"==typeof t.accessor))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var t=this.value;if(t&&t.length>=4&&!(Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])))throw new Error("Illegal attribute generated for ".concat(this.id))}},{key:"bufferLayout",get:function(){return this.userData.bufferLayout},set:function(t){this.userData.bufferLayout=t}}]),e}();function b(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===e||e;switch(t){case f.a.FLOAT:return Float32Array;case f.a.UNSIGNED_SHORT:case f.a.UNSIGNED_SHORT_5_6_5:case f.a.UNSIGNED_SHORT_4_4_4_4:case f.a.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case f.a.UNSIGNED_INT:return Uint32Array;case f.a.UNSIGNED_BYTE:return n?Uint8ClampedArray:Uint8Array;case f.a.BYTE:return Int8Array;case f.a.SHORT:return Int16Array;case f.a.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}function _(t){var e=t.source,n=t.target,r=t.start,i=void 0===r?0:r,o=t.end,a=t.getData;o=o||n.length;var s=e.length,u=o-i;if(s>u)n.set(e.subarray(0,u),i);else if(n.set(e,i),a)for(var l=s;l<u;)for(var c=a(l,e),f=0;f<c.length;f++)n[i+l]=c[f],l++}var x={1:"float",2:"vec2",3:"vec3",4:"vec4"};function w(t){var e={},n={};for(var r in t){var i=t[r],o=i.fromState,a=i.toState,s=i.buffer;e["".concat(r,"From")]=o,e["".concat(r,"To")]=a,n["".concat(r)]=s}return{sourceBuffers:e,feedbackBuffers:n}}function E(t){var e=t.fromState,n=t.toState,r=t.fromLength,i=t.toLength,o=t.fromBufferLayout,a=t.toBufferLayout,u=t.getData,l=void 0===u?function(t){return t}:u;if((o&&a||!(r>=i))&&e instanceof s.b){var c=new Float32Array(i),f=e.getData({}),p=n.value,h=n.buffer,d=n.size,y=n.constant,v=p||h.getData({}),g=y?function(t,e){return l(p,e)}:function(t,e){return l(v.subarray(t,t+d),e)};!function(t){var e=t.source,n=t.target,r=t.size,i=t.getData,o=t.sourceLayout,a=t.targetLayout;if(!Array.isArray(a))return _({source:e,target:n,getData:i}),n;for(var s=0,u=0,l=i&&function(t,e){return i(t+u,e)},c=Math.min(o.length,a.length),f=0;f<c;f++){var p=o[f]*r,h=a[f]*r;_({source:e.subarray(s,s+p),target:n,start:u,end:u+h,getData:l}),s+=p,u+=h}u<n.length&&_({source:[],target:n,start:u,getData:l})}({source:f,target:c,sourceLayout:o,targetLayout:a,size:n.size,getData:g}),e.setData({data:c})}}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var S={NONE:"none",PENDING:"pending",IN_PROGRESS:"in_progress",ENDED:"ended"};function P(){}var C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._startTime=null,this._state=S.NONE,this.duration=1,this.easing=function(t){return t},this.onStart=P,this.onUpdate=P,this.onInterrupt=P,this.onEnd=P,Object.assign(this,e)}return function(t,e,n){e&&O(t.prototype,e),n&&O(t,n)}(t,[{key:"start",value:function(t){this.inProgress&&this.onInterrupt(this),Object.assign(this,t),this._setState(S.PENDING)}},{key:"cancel",value:function(){this.inProgress&&(this.onInterrupt(this),this._setState(S.NONE))}},{key:"update",value:function(t){if(this.state===S.PENDING&&(this._startTime=t,this._setState(S.IN_PROGRESS)),this.state===S.IN_PROGRESS){var e=!1,n=(t-this._startTime)/this.duration;return n>=1&&(n=1,e=!0),this.time=this.easing(n),this.onUpdate(this),e&&this._setState(S.ENDED),!0}return!1}},{key:"_setState",value:function(t){if(this._state!==t)switch(this._state=t,t){case S.PENDING:this.onStart(this);break;case S.ENDED:this.onEnd(this)}}},{key:"state",get:function(){return this._state}},{key:"inProgress",get:function(){return this._state===S.PENDING||this._state===S.IN_PROGRESS}}]),t}();function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var k=function(){},A={duration:0,easing:function(t){return t},onStart:k,onEnd:k,onInterrupt:k},M=function(){function t(e,n){var r=n.id;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=r,this.gl=e,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,s.j.isSupported(e)?this.isSupported=!0:i.a.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return function(t,e,n){e&&T(t.prototype,e),n&&T(t,n)}(t,[{key:"finalize",value:function(){for(var t in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(t)}},{key:"update",value:function(t){var e=t.attributes,n=t.transitions,r=void 0===n?{}:n,i=t.numInstances;if(this.opts=r,this.numInstances=i,this.isSupported){var o=this.attributeTransitions,a={};for(var s in e){this._updateAttribute(s,e[s])&&(a[s]=o[s])}for(var u in o){var l=e[u];l&&l.supportsTransition()||this._removeTransition(u)}if(this.transform){if(this.transform){var c=w(a),f=c.sourceBuffers,p=c.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:f,feedbackBuffers:p})}}else this._createModel()}}},{key:"hasAttribute",value:function(t){return t in this.attributeTransitions}},{key:"getAttributes",value:function(){var t={};for(var e in this.attributeTransitions){var n=this.attributeTransitions[e];n.buffer&&(t[e]=n.attributeInTransition)}return t}},{key:"setCurrentTime",value:function(t){if(!this.transform||0===this.numInstances)return!1;var e={},n=this.needsRedraw;for(var r in this.needsRedraw=!1,this.attributeTransitions){var i=this.attributeTransitions[r];i.update(t)&&(e["".concat(r,"Time")]=i.time,n=!0)}return n&&this.transform.run({uniforms:e}),n}},{key:"_createTransition",value:function(t,e){var n=this.attributeTransitions[t];return n?null:(n=new C({name:t,attribute:e,attributeInTransition:new m(this.gl,e),bufferLayout:e.bufferLayout}),this.attributeTransitions[t]=n,this._invalidateModel(),n)}},{key:"_removeTransition",value:function(t){var e=this.attributeTransitions[t];e&&(e.buffer&&e.buffer.delete(),e._swapBuffer&&e._swapBuffer.delete(),delete this.attributeTransitions[t],this._invalidateModel())}},{key:"_updateAttribute",value:function(t,e){var n=e.getTransitionSetting(this.opts);if(n){var r,i=this.attributeTransitions[t];if(i?r=e.needsRedraw():(i=this._createTransition(t,e),r=!0),r)return this._triggerTransition(i,n),!0}return!1}},{key:"_invalidateModel",value:function(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:"_createModel",value:function(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new s.j(this.gl,Object.assign({elementCount:this.numInstances},w(this.attributeTransitions),function(t){var e=[],n=[],r=[],i=[],o=[];for(var a in t){var s=t[a],u=x[s.attribute.size];u&&(s.bufferIndex=e.length,e.push(a),n.push("attribute ".concat(u," ").concat(a,"From;")),n.push("attribute ".concat(u," ").concat(a,"To;")),r.push("uniform float ".concat(a,"Time;")),i.push("varying ".concat(u," ").concat(a,";")),o.push("".concat(a," = mix(").concat(a,"From, ").concat(a,"To,\n        ").concat(a,"Time);")))}return{vs:"\n#define SHADER_NAME feedback-vertex-shader\n".concat(n.join("\n"),"\n").concat(r.join("\n"),"\n").concat(i.join("\n"),"\n\nvoid main(void) {\n  ").concat(o.join("\n"),"\n  gl_Position = vec4(0.0);\n}\n"),fs:"#define SHADER_NAME feedback-fragment-shader\n\nprecision highp float;\n\n".concat(i.join("\n"),"\n\nvoid main(void) {\n  gl_FragColor = vec4(0.0);\n}\n"),varyings:e}}(this.attributeTransitions))))}},{key:"_getNextTransitionStates",value:function(t,e){var n,r=t.attribute,i=r.size;n=r.constant?{constant:!0,value:r.value,size:i}:{constant:!1,buffer:r.getBuffer(),size:i,value:r.externalBuffer?null:r.value};var o=t.buffer||n,a=this.numInstances*i,u=o instanceof s.b&&o.getElementCount()||a,l=t._swapBuffer;return t._swapBuffer=t.buffer,l?l.getElementCount()<a&&l.setData({data:new Float32Array(a)}):l=new s.b(this.gl,{data:new Float32Array(a),usage:f.a.DYNAMIC_COPY}),t.attributeInTransition.update({buffer:l}),E({fromState:o,toState:n,fromLength:u,toLength:a,fromBufferLayout:t.bufferLayout,toBufferLayout:r.bufferLayout,getData:e.enter}),t.bufferLayout=r.bufferLayout,{fromState:o,toState:n,buffer:l}}},{key:"_triggerTransition",value:function(t,e){Object(a.a)(e&&e.duration>0),this.needsRedraw=!0;var n=Object.assign({},A,e);t.start(Object.assign({},this._getNextTransitionStates(t,e),n))}}]),t}();function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),t}function I(){}var L={savedMessages:null,timeStart:null,onLog:function(t){var e=t.level,n=t.message;i.a.log(e,n)()},onUpdateStart:function(t){t.level,t.numInstances;L.savedMessages=[],L.timeStart=new Date},onUpdate:function(t){t.level;var e=t.message;L.savedMessages&&L.savedMessages.push(e)},onUpdateEnd:function(t){var e=t.level,n=t.id,r=t.numInstances,o=Math.round(new Date-L.timeStart),a="".concat(o,"ms");i.a.group(e,"Updated attributes for ".concat(r," instances in ").concat(n," in ").concat(a),{collapsed:!0})();var s=!0,u=!1,l=void 0;try{for(var c,f=L.savedMessages[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value;i.a.log(e,p)()}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}i.a.groupEnd(e,"Updated attributes for ".concat(r," instances in ").concat(n," in ").concat(a))(),L.savedMessages=null}},D=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=void 0===r?"attribute-manager":r,o=n.stats;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=i,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=o,this.attributeTransitionManager=new M(e,{id:"".concat(i,"-transitions")}),Object.seal(this)}return R(t,null,[{key:"setDefaultLogFunctions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onLog,n=t.onUpdateStart,r=t.onUpdate,i=t.onUpdateEnd;void 0!==e&&(L.onLog=e||I),void 0!==n&&(L.onUpdateStart=n||I),void 0!==r&&(L.onUpdate=r||I),void 0!==i&&(L.onUpdateEnd=i||I)}}]),R(t,[{key:"finalize",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t,n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e,n&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(t,e){this._add(t,e)}},{key:"addInstanced",value:function(t,e){this._add(t,e,{instanced:1})}},{key:"remove",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(t){var e=this._invalidateTrigger(t);L.onLog({level:3,message:"invalidated attributes ".concat(e," (").concat(t,") for ").concat(this.id)})}},{key:"invalidateAll",value:function(){for(var t in this.attributes)this.attributes[t].setNeedsUpdate();L.onLog({level:3,message:"invalidated all attributes for ".concat(this.id)})}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.transitions,i=t.props,o=void 0===i?{}:i,a=t.buffers,s=void 0===a?{}:a,u=t.context,l=void 0===u?{}:u,c=!1;for(var f in L.onUpdateStart({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.timeStart("attribute updates",this.id),this.attributes){var p=this.attributes[f];p.setExternalBuffer(s[f],this.numInstances)||p.setGenericValue(o[p.getAccessor()])||p.needsUpdate()&&(c=!0,this._updateAttribute({attribute:p,numInstances:n,data:e,props:o,context:l})),this.needsRedraw|=p.needsRedraw()}c&&(this.stats&&this.stats.timeEnd("attribute updates",this.id),L.onUpdateEnd({level:2,id:this.id,numInstances:n})),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}},{key:"updateTransition",value:function(){var t=this.attributeTransitionManager.setCurrentTime(Date.now());return this.needsRedraw=this.needsRedraw||t,t}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(t){t.clearChangedFlags;var e=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in e){var o=e[i];o.needsRedraw({clearChangedFlags:!0})&&(n.hasAttribute(i)||(r[i]=o))}return r}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&i.a.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var o in t){var a=t[o];r[o]=new m(this.gl,Object.assign({},a,{id:o,constant:a.constant||!1,isIndexed:a.isIndexed||a.elements,size:a.elements?1:a.size,value:a.value||null,instanced:a.instanced||n.instanced}))}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_mapUpdateTriggersToAttributes",value:function(){var t=this,e={},n=function(n){t.attributes[n].getUpdateTriggers().forEach(function(t){e[t]||(e[t]=[]),e[t].push(n)})};for(var r in this.attributes)n(r);this.updateTriggers=e}},{key:"_invalidateTrigger",value:function(t){var e=this.attributes,n=this.updateTriggers[t];if(n)n.forEach(function(t){var n=e[t];n&&n.setNeedsUpdate()});else{var r="invalidating non-existent trigger ".concat(t," for ").concat(this.id,"\n");r+="Valid triggers: ".concat(Object.keys(e).join(", ")),i.a.warn(r,n)()}return n}},{key:"_updateAttribute",value:function(t){var e=t.attribute,n=t.numInstances,r=t.data,i=t.props,o=t.context;e.allocate(n)&&L.onUpdate({level:3,message:"".concat(e.id," allocated ").concat(n),id:this.id});var a=Date.now();if(e.updateBuffer({numInstances:n,data:r,props:i,context:o})){this.needsRedraw=!0;var s=Math.round(Date.now()-a);L.onUpdate({level:3,message:"".concat(e.id," updated ").concat(n," in ").concat(s,"ms")})}}}]),t}();function F(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var N=new Map,B=function(t){if(l.a.isReady()&&t.id){var e=N.get(t.id);e&&e.forEach(function(e,n){!function t(e,n,r){e&&(n.length>1?t(e[n[0]],n.slice(1),r):e[n[0]]=r)}(t,n,e),"data"===n[0]&&(t.data=F(t.data))})}},z=function(t){l.a.isReady()&&l.a.listenFor("deck.gl",t)},U=function(t){l.a.isReady()&&l.a.listenFor("init",t)},V=function(t){if(l.a.isReady()&&t){var e=[t.constructor.layerName];l.a.listItem("deck.gl",t.id,{badges:e,links:t.state&&t.state.model?["luma.gl:".concat(t.state.model.id)]:void 0,parent:t.parent?t.parent.id:void 0})}},G=function(t){if(l.a.isReady()&&!l.a.throttle("deck.gl:".concat(t.id),1e3)){var e=function(t){var e=[{path:"objects.props",data:t.props}],n=[t.constructor.layerName];if(t.state){if(t.getAttributeManager()){var r=t.getAttributeManager().getAttributes();e.push({path:"objects.attributes",data:r}),n.push(t.getAttributeManager().stats.getTimeString())}if(t.state.model){t.state.model.setProps({timerQueryEnabled:!0});var i=t.state.model.stats.lastFrameTime;i&&n.push("".concat((1e3*i).toFixed(0),"μs"))}}return e.push({path:"badges",data:n}),e}(t);l.a.multiUpdate("deck.gl",t.id,e)}};function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){var n=H({newProps:t,oldProps:e,ignoreProps:{data:null,updateTriggers:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";var n=t.dataComparator;if(n){if(!n(t.data,e.data))return"Data comparator detected a change"}else if(t.data!==e.data)return"A new data container was supplied";return null}(t,e),i=!1;return r||(i=function(t,e){if(null===e)return"oldProps is null, initial diff";if("all"in t.updateTriggers){var n=X(e,t,"all");if(n)return{all:!0}}var r={},i=!1;for(var o in t.updateTriggers)if("all"!==o){var a=X(e,t,o);a&&(r[o]=!0,i=r)}return i}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i}}function H(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.newProps,n=t.oldProps,r=t.ignoreProps,i=void 0===r?{}:r,o=t.shallowCompareProps,s=void 0===o?{}:o,u=t.triggerName,l=void 0===u?"props":u;if(Object(a.a)(void 0!==n&&void 0!==e,"compareProps args"),n===e)return null;if("object"!==W(e)||null===e)return"".concat(l," changed shallowly");if("object"!==W(n)||null===n)return"".concat(l," changed shallowly");for(var c in n)if(!(c in i)){if(!(c in e))return"".concat(l,".").concat(c," dropped: ").concat(n[c]," -> undefined");var f=e[c]&&n[c]&&e[c].equals;if(f&&!f.call(e[c],n[c]))return"".concat(l,".").concat(c," changed deeply: ").concat(n[c]," -> ").concat(e[c]);if(c in s)"function"===W(e[c])&&"function"==typeof n[c]&&(f=!0);if(!f&&n[c]!==e[c])return"".concat(l,".").concat(c," changed shallowly: ").concat(n[c]," -> ").concat(e[c])}for(var p in e)if(!(p in i||p in n))return"".concat(l,".").concat(p," added: undefined -> ").concat(e[p]);return null}function X(t,e,n){var r=t.updateTriggers[n]||{};return H({oldProps:e.updateTriggers[n]||{},newProps:r,triggerName:n})}function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Y="count(): argument not an object",K="count(): argument not a container";function J(t){if(!function(t){return null!==t&&"object"===Z(t)}(t))throw new Error(Y);if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===Z(t)&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error(K)}var Q=n(109),$={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"};function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var nt={boolean:{validate:function(t,e){return!0}},number:{validateType:function(t,e){return"value"in e&&(!("max"in e)||Number.isFinite(e.max))&&(!("min"in e)||Number.isFinite(e.min))},validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}}};function rt(t,e){switch(it(e)){case"object":return function(t){var e=t.type,n=(nt[e]||{}).typeValidator;n&&Object(a.a)(n(t),"Illegal prop type");return t}(e=function(t,e){if(!("type"in e))return"value"in e?Object.assign({name:t,type:it(e.value)},e):{name:t,type:"object",value:e};return Object.assign({name:t},e)}(t,e));case"array":return function(t,e){if(/color/i.test(t)&&(3===e.length||4===e.length))return{name:t,type:"color",value:e};return{name:t,type:"array",value:e}}(t,e);case"boolean":return{name:t,type:"boolean",value:e};case"number":return function(t,e){var n=/radius|scale|width|height|pixel|size|miter/i.test(t)&&/^((?!scale).)*$/.test(t)?100:1;return{name:t,type:"number",max:Math.max(e,n),min:Math.min(e,0),value:e}}(t,e);case"function":return{name:t,type:"function",value:e};default:return{name:t,type:"unknown",value:e}}}function it(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":null===t?"null":tt(t)}function ot(t){var e=st(t,"_mergedDefaultProps");return e?{defaultProps:e,propTypes:st(t,"_propTypes")}:function(t){var e=t.prototype;if(!e)return{defaultProps:{}};var n=Object.getPrototypeOf(t),r=e&&ot(n)||null,o=function(t){for(var e={},n={},r=Object.entries(t),i=0;i<r.length;i++){var o=et(r[i],2),a=o[0],s=rt(a,o[1]);e[a]=s,n[a]=s.value}return{propTypes:e,defaultProps:n}}(st(t,"defaultProps")||{}),a=Object.assign({},r&&r.propTypes,o.propTypes),s=function(t,e,n,r){var o=Object.create(null);Object.assign(o,e,t);var a=function(t){var e=st(t,"layerName")||st(t,"componentName");e||i.a.once(0,"".concat(t.name,".componentName not specified"))();return e||t.name}(r);return delete t.id,Object.defineProperties(o,{id:{configurable:!1,writable:!0,value:a}}),function(t,e){var n={},r={_asyncPropDefaultValues:{enumerable:!1,value:n},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var i in e){var o=e[i],a=o.name,s=o.value;o.async&&(n[a]=s,r[a]=at(a))}Object.defineProperties(t,r)}(o,n),o}(o.defaultProps,r&&r.defaultProps,a,t);return t._mergedDefaultProps=s,t._propTypes=a,{propTypes:a,defaultProps:s}}(t)}function at(t){return{configurable:!1,enumerable:!0,set:function(e){"string"==typeof e||e instanceof Promise?this._asyncPropOriginalValues[t]=e:this._asyncPropResolvedValues[t]=e},get:function(){if(this._asyncPropResolvedValues){if(t in this._asyncPropResolvedValues){var e=this._asyncPropResolvedValues[t];return"data"===t?e||this._asyncPropDefaultValues[t]:e}var n=this._component&&this._component.internalState;if(n&&n.hasAsyncProp(t))return n.getAsyncProp(t)}return this._asyncPropDefaultValues[t]}}}function st(t,e){return Object.prototype.hasOwnProperty.call(t,e)&&t[e]}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var lt=Object.freeze({}),ct=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=lt,this.oldAsyncProps=null}return function(t,e,n){e&&ut(t.prototype,e),n&&ut(t,n)}(t,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var t in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps={},this.oldProps)this.oldAsyncProps[t]=this.oldProps[t]}},{key:"hasAsyncProp",value:function(t){return t in this.asyncProps}},{key:"getAsyncProp",value:function(t){var e=this.asyncProps[t];return e&&e.resolvedValue}},{key:"isAsyncPropLoading",value:function(t){var e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}},{key:"setAsyncProps",value:function(t){var e=t._asyncPropResolvedValues||{},n=t._asyncPropOriginalValues||t,r=t._asyncPropDefaultValues||{};for(var i in e){var o=e[i];this._createAsyncPropData(i,o,r[i]),this._updateAsyncProp(i,o)}for(var a in n){var s=n[a];this._createAsyncPropData(a,s,r[a]),this._updateAsyncProp(a,s)}}},{key:"_updateAsyncProp",value:function(t,e){if(this._didAsyncInputValueChange(t,e)){if("string"==typeof e)e=(0,this.layer.props.fetch)(e);e instanceof Promise?this._watchPromise(t,e):this._setPropValue(t,e)}}},{key:"_didAsyncInputValueChange",value:function(t,e){var n=this.asyncProps[t];return e!==n.lastValue&&(n.lastValue=e,!0)}},{key:"_setPropValue",value:function(t,e){var n=this.asyncProps[t];n.value=e,n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(t,e,n){var r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&(Object(a.a)(void 0!==e),this.freezeAsyncOldProps(),e=this._postProcessValue(t,e),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}},{key:"_watchPromise",value:function(t,e){var n=this,r=this.asyncProps[t];r.pendingLoadCount++;var o=r.pendingLoadCount;e.then(function(e){return n._setAsyncPropValue(t,e,o)}).catch(function(t){return i.a.error(t)()})}},{key:"_postProcessValue",value:function(t,e){var n=(this.component?this.component.props:{}).dataTransform;return"data"===t&&n&&(e=n(e)),e}},{key:"_createAsyncPropData",value:function(t,e,n){this.asyncProps[t]||(this.asyncProps[t]={lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0})}}]),t}();function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pt=0,ht=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.props=function(){for(var t=ot(this.constructor).defaultProps,e=Object.create(t,{_component:{enumerable:!1,value:this},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),n=0;n<arguments.length;++n)Object.assign(e,arguments[n]);return B(e),Object.freeze(e),e}.apply(this,arguments),this.id=this.props.id,this.count=pt++,this.lifecycle=$.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return function(t,e,n){e&&ft(t.prototype,e),n&&ft(t,n)}(t,[{key:"clone",value:function(t){return new this.constructor(Object.assign({},this.props,t))}},{key:"_initState",value:function(){this.internalState=new ct({})}},{key:"stats",get:function(){return this.internalState.stats}}]),t}();function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ht.defaultProps={};var bt=function(t){function e(t){var n,r=t.attributeManager,i=t.layer;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vt(this,gt(e).call(this,i))).attributeManager=r,n.model=null,n.needsRedraw=!0,n.subLayers=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(e,ct),function(t,e,n){e&&yt(t.prototype,e),n&&yt(t,n)}(e,[{key:"layer",get:function(){return this.component},set:function(t){this.component=t}}]),e}(),_t=n(31);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ot(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ct=function(){},Tt={data:{type:"data",value:Object.freeze([]),async:!0},dataComparator:null,dataTransform:function(t){return t},fetch:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return fetch(t).then(function(t){return t.json()})}),updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:.8},onHover:Ct,onClick:Ct,coordinateSystem:o.a.LNGLAT,coordinateOrigin:[0,0,0],wrapLongitude:!1,parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:function(t){return[0,100*-t.layerIndex]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:[0,0,128,128]},kt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ot(this,St(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}(e,ht),function(t,e,n){e&&Et(t.prototype,e),n&&Et(t,n)}(e,[{key:"toString",value:function(){var t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:"setLayerNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:"getNeedsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0!==t&&t;return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getSingleModel",value:function(){return this.state&&this.state.model}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getFirstObject",value:function(){var t=this.props.data,e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){return i.value}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return null}},{key:"project",value:function(t){var e=this.context.viewport,n=Object(Q.a)(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),r=wt(Object(_t.k)(n,e.pixelProjectionMatrix),3),i=r[0],o=r[1],a=r[2];return 2===t.length?[i,o]:[i,o,a]}},{key:"unproject",value:function(t){var e=this.context.viewport;return Object(a.a)(Array.isArray(t)),e.unproject(t)}},{key:"projectPosition",value:function(t){return Object(a.a)(Array.isArray(t)),Object(Q.b)(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"projectFlat",value:function(t){i.a.deprecated("layer.projectFlat","layer.projectPosition")();var e=this.context.viewport;return Object(a.a)(Array.isArray(t)),e.projectFlat(t)}},{key:"unprojectFlat",value:function(t){i.a.deprecated("layer.unprojectFlat")();var e=this.context.viewport;return Object(a.a)(Array.isArray(t)),e.unprojectFlat(t)}},{key:"use64bitProjection",value:function(){if(this.props.fp64){if(this.props.coordinateSystem===o.a.LNGLAT_DEPRECATED)return!0;i.a.once(0,"Legacy 64-bit mode only works with coordinateSystem set to\n        COORDINATE_SYSTEM.LNGLAT_DEPRECATED. Rendering in 32-bit mode instead")()}return!1}},{key:"use64bitPositions",value:function(){return this.props.fp64||this.props.coordinateSystem===o.a.LNGLAT}},{key:"screenToDevicePixels",value:function(t){return i.a.deprecated("screenToDevicePixels","DeckGL prop useDevicePixels for conversion")(),t*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){return Object(a.a)(0==(t+1>>24&255),"index out of picking color range"),[t+1&255,t+1>>8&255,t+1>>8>>8&255]}},{key:"decodePickingColor",value:function(t){Object(a.a)(t instanceof Uint8Array);var e=wt(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(t){t.oldProps,t.props,t.context;var e=t.changeFlags,n=this.getAttributeManager();e.dataChanged&&n&&n.invalidateAll()}},{key:"finalizeState",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.getModels()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.delete()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var o=this.getAttributeManager();o&&o.finalize()}},{key:"draw",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.draw(t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function(t){var e=t.info,n=(t.mode,e.index);return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}},{key:"invalidateAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getAttributeManager();n&&("all"===t?(i.a.log(1,"updateTriggers invalidating all attributes: ".concat(e))(),n.invalidateAll()):(i.a.log(1,"updateTriggers invalidating attribute ".concat(t,": ").concat(e))(),n.invalidate(t)))}},{key:"updateAttributes",value:function(t){var e=this.getAttributeManager();if(e){var n=this.getNumInstances(t);e.update({data:t.data,numInstances:n,props:t,transitions:t.transitions,buffers:t,context:this,ignoreUnknownAttributes:!0});var r=this.getSingleModel();if(r){var i=e.getChangedAttributes({clearChangedFlags:!0});r.setAttributes(i)}}}},{key:"updateTransition",value:function(){var t=this.getAttributeManager();t&&t.updateTransition()}},{key:"calculateInstancePickingColors",value:function(t,e){for(var n=e.numInstances,r=t.value,i=t.size,o=0;o<n;o++){var a=this.encodePickingColor(o);r[o*i+0]=a[0],r[o*i+1]=a[1],r[o*i+2]=a[2]}}},{key:"_clearInstancePickingColor",value:function(t){var e=this.getAttributeManager().attributes.instancePickingColors,n=e.value,r=e.size,i=this.decodePickingColor(t);n[i*r+0]=0,n[i*r+1]=0,n[i*r+2]=0,e.update({value:n})}},{key:"_clearPickingColor",value:function(t){for(var e=this.getAttributeManager().attributes.pickingColors,n=e.value,r=0;r<n.length;r+=3)n[r+0]===t[0]&&n[r+1]===t[1]&&n[r+2]===t[2]&&(n[r+0]=0,n[r+1]=0,n[r+2]=0);e.update({value:n})}},{key:"clearPickingColor",value:function(t){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(t):this._clearInstancePickingColor(t)}},{key:"copyPickingColors",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,n=t.instancePickingColors;return new Uint8ClampedArray((e||n).value)}},{key:"restorePickingColors",value:function(t){var e=this.getAttributeManager().attributes,n=e.pickingColors,r=e.instancePickingColors;(n||r).update({value:t})}},{key:"getNumInstances",value:function(t){return t=t||this.props,this.state&&void 0!==this.state.numInstances?this.state.numInstances:void 0!==t.numInstances?t.numInstances:J(this.props.data)}},{key:"_initialize",value:function(){Object(a.a)(this.context.gl),this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState();var t=this.getSingleModel();t&&(t.id=this.props.id,t.program.id="".concat(this.props.id,"-program"),t.geometry.id="".concat(this.props.id,"-geometry"))}},{key:"_update",value:function(){this.needsUpdate()&&this._updateState()}},{key:"_updateState",value:function(){var t=this._getUpdateParams();this.updateState(t),this.isComposite?this._renderLayers(t):(this.setNeedsRedraw(),this.updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:"_finalize",value:function(){Object(a.a)(this.internalState&&this.state),this.finalizeState(this.context),function(t){l.a.isReady()&&t&&l.a.deleteItem("deck.gl",t)}(this.id)}},{key:"drawLayer",value:function(t){var e=this,n=t.moduleParameters,r=void 0===n?null:n,i=t.uniforms,o=void 0===i?{}:i,a=t.parameters,u=void 0===a?{}:a;o.picking_uActive||this.updateTransition(),r&&this.setModuleParameters(r);var l=this.context.animationProps;if(l){var c=!0,f=!1,p=void 0;try{for(var h,d=this.getModels()[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){h.value._setAnimationProps(l)}}catch(t){f=!0,p=t}finally{try{c||null==d.return||d.return()}finally{if(f)throw p}}}var y=this.props.getPolygonOffset,v=y&&y(o)||[0,0];u.polygonOffset=v,Object(s.D)(this.context.gl,u,function(){e.draw({moduleParameters:r,uniforms:o,parameters:u,context:e.context})})}},{key:"pickLayer",value:function(t){return this.getPickingInfo(t)}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(t){var e=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var n=this.internalState.changeFlags;t.dataChanged&&!n.dataChanged&&(n.dataChanged=t.dataChanged,i.a.log(2,function(){return"dataChanged: ".concat(t.dataChanged," in ").concat(e.id)})()),t.updateTriggersChanged&&!n.updateTriggersChanged&&(n.updateTriggersChanged=n.updateTriggersChanged&&t.updateTriggersChanged?Object.assign({},t.updateTriggersChanged,n.updateTriggersChanged):t.updateTriggersChanged||n.updateTriggersChanged,i.a.log(2,function(){return"updateTriggersChanged: "+"".concat(Object.keys(t.updateTriggersChanged).join(", ")," in ").concat(e.id)})()),t.propsChanged&&!n.propsChanged&&(n.propsChanged=t.propsChanged,i.a.log(2,function(){return"propsChanged: ".concat(t.propsChanged," in ").concat(e.id)})()),t.viewportChanged&&!n.viewportChanged&&(n.viewportChanged=t.viewportChanged,i.a.log(3,function(){return"viewportChanged: ".concat(t.viewportChanged," in ").concat(e.id)})()),t.stateChanged&&!n.stateChanged&&(n.stateChanged=t.stateChanged,i.a.log(2,function(){return"stateChanged: ".concat(t.stateChanged," in ").concat(e.id)})());var r=t.dataChanged||t.updateTriggersChanged||t.propsChanged;n.propsOrDataChanged=n.propsOrDataChanged||r,n.somethingChanged=n.somethingChanged||r||t.viewportChanged||t.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"printChangeFlags",value:function(){var t=this.internalState.changeFlags;return"".concat(t.dataChanged?"data ":"").concat(t.propsChanged?"props ":"").concat(t.updateTriggersChanged?"triggers ":"").concat(t.viewportChanged?"viewport":"")}},{key:"diffProps",value:function(t,e){var n=q(t,e);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);return this.setChangeFlags(n)}},{key:"setModuleParameters",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.getModels()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.updateModuleSettings(t)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw({clearRedrawFlags:t}),i=this._modelNeedsRedraw(t);return e=e||r||i}},{key:"_modelNeedsRedraw",value:function(t){var e=!1,n=!0,r=!1,i=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.getNeedsRedraw({clearRedrawFlags:t});u&&"string"!=typeof u&&(u="model ".concat(s.id)),e=e||u}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}},{key:"_getAttributeManager",value:function(){return new D(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_initState",value:function(){Object(a.a)(!this.internalState&&!this.state);var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:f.a.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new bt({attributeManager:t,layer:this}),this.state={},this.state.attributeManager=t,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(t){var e=t.state,n=t.internalState;if(Object(a.a)(e&&n),this!==t){this.internalState=n,this.internalState.component=this,this.state=e,e.layer=this,this.internalState.setAsyncProps(this.props);var r=!0,i=!1,o=void 0;try{for(var s,u=this.getModels()[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){s.value.userData.layer=this}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps())}}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:"_activeUpdateTrigger",value:function(t){this.invalidateAttribute(t)}},{key:"_checkRequiredProp",value:function(t,e){var n=this.props[t];if(void 0===n)throw new Error("Property ".concat(t," undefined in layer ").concat(this));if(e&&!e(n))throw new Error("Bad property ".concat(t," in layer ").concat(this))}},{key:"_updateBaseUniforms",value:function(){var t=this,e={opacity:"function"==typeof this.props.opacity?function(e){return Math.pow(t.props.opacity(e),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},n=!0,r=!1,i=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.setUniforms(e)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"setUniforms",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,a=this.getModels()[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){o.value.setUniforms(t)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.setNeedsRedraw(),i.a.deprecated("layer.setUniforms","model.setUniforms")()}},{key:"is64bitEnabled",value:function(){return i.a.deprecated("is64bitEnabled","use64bitProjection")(),this.use64bitProjection()}}]),e}();kt.layerName="Layer",kt.defaultProps=Tt;var At=2,Mt=0,jt=function(t){var e=t.useDevicePixels;return Object(a.a)("boolean"==typeof e,"Invalid useDevicePixels"),e&&"undefined"!=typeof window?window.devicePixelRatio:1},Rt=function(t,e){var n=e.viewport,r=e.pixelRatio,i=t.canvas?t.canvas.clientHeight:100,o=n;return[o.x*r,(i-o.y-o.height)*r,o.width*r,o.height*r]};function It(t,e){var n=e.layers,r=e.viewports,o=e.views,a=e.onViewportActive,u=e.useDevicePixels,l=e.drawPickingColors,c=void 0!==l&&l,p=e.deviceRect,h=void 0===p?null:p,d=e.parameters,y=void 0===d?{}:d,v=e.layerFilter,g=void 0===v?null:v,m=e.pass,b=void 0===m?"draw":m,_=e.redrawReason,x=void 0===_?"":_,w=e.stats;e.customRender||function(t,e){e.useDevicePixels;var n=t.drawingBufferWidth,r=t.drawingBufferHeight;Object(s.D)(t,{viewport:[0,0,n,r]},function(){t.clear(f.a.COLOR_BUFFER_BIT|f.a.DEPTH_BUFFER_BIT)})}(t,{useDevicePixels:u}),r.forEach(function(e,r){var l=function(t){return t.viewport?t.viewport:t}(e),f=o&&o[l.id];a(l),function(t,e){var n=e.layers,r=e.viewport,o=e.view,a=e.useDevicePixels,u=e.drawPickingColors,l=void 0!==u&&u,c=(e.deviceRect,e.parameters),f=void 0===c?{}:c,p=e.layerFilter,h=e.pass,d=void 0===h?"draw":h,y=e.redrawReason,v=void 0===y?"":y,g=e.stats,m=jt({useDevicePixels:a}),b=Rt(t,{viewport:r,pixelRatio:m});if(o&&o.props.clear){var _=!0===o.props.clear?{color:!0,depth:!0}:o.props.clear;Object(s.D)(t,{scissorTest:!0,scissor:b},function(){return Object(s.q)(t,_)})}var x={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Object(s.B)(t,f||{}),n.forEach(function(e,n){var i=!e.isComposite&&e.props.visible;l&&(i=i&&e.props.pickable),i&&p&&(i=p({layer:e,viewport:r,isPicking:l})),i&&e.props.pickable&&x.pickableCount++,e.isComposite&&x.compositeCount++,i&&(x.visibleCount++,function(t){t.gl;var e=t.layer,n=t.layerIndex,r=t.drawPickingColors,i=t.pixelRatio,o=t.glViewport,a=t.parameters,s=Object.assign(Object.create(e.props),{viewport:e.context.viewport,pickingActive:r?1:0,devicePixelRatio:i}),u=Object.assign({},e.context.uniforms,{layerIndex:n}),l=Object.assign({},e.props.parameters||{},a);Object.assign(l,{viewport:o}),r?Object.assign(l,{blendColor:[0,0,0,(n+1)/255]}):Object.assign(s,function(t){var e=t.props,n=e.highlightedObjectIndex,r={pickingHighlightColor:e.highlightColor};Number.isInteger(n)&&(r.pickingSelectedColor=n>=0?t.encodePickingColor(n):null);return r}(e));e.drawLayer({moduleParameters:s,uniforms:u,parameters:l})}({gl:t,layer:e,layerIndex:n,drawPickingColors:l,pixelRatio:m,glViewport:b,parameters:f}))}),Mt++,function(t){var e=t.renderStats,n=t.pass,r=t.redrawReason,o=t.stats;if(i.a.priority>=At){var a=e.totalCount,s=e.visibleCount,u=e.compositeCount,l=e.pickableCount,c=a-u,f=c-s,p="";p+="RENDER #".concat(Mt," ").concat(s," (of ").concat(a," layers) to ").concat(n," because ").concat(r," "),i.a.priority>At&&(p+="(".concat(f," hidden, ").concat(u," composite ").concat(l," pickable)")),i.a.log(At,p)(),o&&o.increment("redraw layers",s)}}({renderStats:x,pass:d,redrawReason:v,stats:g})}(t,{layers:n,viewport:l,view:f,useDevicePixels:u,drawPickingColors:c,deviceRect:h,parameters:y,layerFilter:g,pass:b,redrawReason:x,stats:w})})}var Lt={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Dt(t,e){for(var n=e.layers,r=e.viewports,i=e.x,o=e.y,a=e.radius,s=e.layerFilter,u=e.depth,l=void 0===u?1:u,c=e.mode,f=e.onViewportActive,p=e.pickingFBO,h=e.lastPickedInfo,d=e.useDevicePixels,y=jt({useDevicePixels:d}),v=Math.round(i*y),g=Math.round(t.canvas.height-o*y),m=Math.round(a*y),b=function(t){var e=t.deviceX,n=t.deviceY,r=t.deviceRadius,i=t.deviceWidth,o=t.deviceHeight;if(!(e>=0&&n>=0&&e<i&&n<o))return null;var a=Math.max(0,e-r),s=Math.max(0,n-r),u=Math.min(i,e+r)-a+1,l=Math.min(o,n+r)-s+1;return{x:a,y:s,width:u,height:l}}({deviceX:v,deviceY:g,deviceRadius:m,deviceWidth:p.width,deviceHeight:p.height}),_=[],x={},w=0;w<l;w++){var E=b&&Nt(t,{layers:n,viewports:r,onViewportActive:f,useDevicePixels:d,pickingFBO:p,deviceRect:b,layerFilter:s,redrawReason:c}),O=E&&zt(t,{pickedColors:E,layers:n,deviceX:v,deviceY:g,deviceRadius:m,deviceRect:b})||Lt;if(O.pickedColor&&w+1<l){var S=O.pickedColor[3]-1;x[S]||(x[S]=n[S].copyPickingColors()),n[S].clearPickingColor(O.pickedColor)}var P=Bt({pickInfo:O,lastPickedInfo:h,mode:c,layers:n,viewports:r,x:i,y:o,deviceX:v,deviceY:g,pixelRatio:y});if(P&&P.forEach(function(t){return _.push(t)}),!O.pickedColor)break}return Object.keys(x).forEach(function(t){return n[t].restorePickingColors(x[t])}),_}function Ft(t,e){var n=e.layers,r=e.viewports,o=e.x,a=e.y,s=e.width,u=e.height,l=e.mode,c=e.layerFilter,f=e.onViewportActive,p=e.pickingFBO,h=e.useDevicePixels,d=jt({useDevicePixels:h}),y=Math.round(o*d),v=Math.round(t.canvas.height-a*d),g=Math.round((o+s)*d),m=Math.round(t.canvas.height-(a+u)*d),b=function(t,e){var n=e.pickedColors,r=e.layers,o=new Map;if(n)for(var a=0;a<n.length;a+=4){var s=n[a+3]-1;if(s>=0){var u=n.slice(a,a+4),l=u.join(",");if(!o.has(l)){var c=r[s];c?o.set(l,{pickedColor:u,pickedLayer:c,pickedObjectIndex:c.decodePickingColor(u)}):i.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(o.values())}(0,{pickedColors:Nt(t,{layers:n,viewports:r,onViewportActive:f,pickingFBO:p,useDevicePixels:h,deviceRect:{x:y,y:m,width:g-y,height:v-m},layerFilter:c,redrawReason:l}),layers:n}),_=new Map;return b.forEach(function(t){var e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:o,y:a,width:s,height:u,pixelRatio:d};e=Ut({layer:t.pickedLayer,info:e,mode:l}),_.has(e.object)||_.set(e.object,e)}),Array.from(_.values())}function Nt(t,e){var n=e.layers,r=e.viewports,i=e.onViewportActive,o=e.useDevicePixels,u=e.pickingFBO,l=e.deviceRect,c=e.layerFilter,f=e.redrawReason;if(Object(a.a)(l),Object(a.a)(Number.isFinite(l.width)&&l.width>0,"`width` must be > 0"),Object(a.a)(Number.isFinite(l.height)&&l.height>0,"`height` must be > 0"),n.filter(function(t){return t.isPickable()}).length<1)return null;!function(t,e){var n=e.layers,r=e.viewports,i=e.onViewportActive,o=e.useDevicePixels,a=e.pickingFBO,u=e.deviceRect,l=u.x,c=u.y,f=u.width,p=u.height,h=e.layerFilter,d=void 0===h?null:h,y=e.redrawReason,v=void 0===y?"":y;Object(s.D)(t,{framebuffer:a,scissorTest:!0,scissor:[l,c,f,p],clearColor:[0,0,0,0]},function(){It(t,{layers:n,viewports:r,onViewportActive:i,useDevicePixels:o,drawPickingColors:!0,layerFilter:d,pass:"picking",redrawReason:v,parameters:{blend:!0,blendFunc:[t.ONE,t.ZERO,t.CONSTANT_ALPHA,t.ZERO],blendEquation:t.FUNC_ADD,blendColor:[0,0,0,0]}})})}(t,{layers:n,viewports:r,onViewportActive:i,useDevicePixels:o,pickingFBO:u,deviceRect:l,layerFilter:c,redrawReason:f});var p=l.x,h=l.y,d=l.width,y=l.height,v=new Uint8Array(d*y*4);return u.readPixels({x:p,y:h,width:d,height:y,pixelArray:v}),v}function Bt(t){var e=t.pickInfo,n=t.lastPickedInfo,r=t.mode,i=t.layers,o=t.viewports,a=t.x,s=t.y,u=t.deviceX,l=t.deviceY,c=t.pixelRatio,f=e.pickedColor,p=e.pickedLayer,h=e.pickedObjectIndex,d=p?[p]:[];if("hover"===r){var y=n.index,v=n.layerId,g=p&&p.props.id;if(g!==v||h!==y){if(g!==v){var m=i.find(function(t){return t.props.id===v});m&&d.unshift(m)}n.layerId=g,n.index=h}}var b=function(t){return t.viewports[0]}({viewports:o}),_={color:null,layer:null,index:-1,picked:!1,x:a,y:s,pixel:[a,s],lngLat:b&&b.unproject([a,s]),devicePixel:[u,l],pixelRatio:c},x=new Map;return d.forEach(function(t){var e=Object.assign({},_);t===p&&(e.color=f,e.index=h,e.picked=!0),(e=Ut({layer:t,info:e,mode:r}))&&x.set(e.layer.id,e);var n=t.props.autoHighlight&&p===t?f:null;t.setModuleParameters({pickingSelectedColor:n})}),function(t,e){var n=[];return t.forEach(function(t){var r=!1;switch(e){case"click":r=t.layer.props.onClick(t);break;case"hover":r=t.layer.props.onHover(t);break;case"query":break;default:throw new Error("unknown pick type")}r||n.push(t)}),n}(x,r)}function zt(t,e){var n=e.pickedColors,r=e.layers,o=e.deviceX,s=e.deviceY,u=e.deviceRadius,l=e.deviceRect;Object(a.a)(n);for(var c=l.x,f=l.y,p=l.width,h=l.height,d=u*u,y=-1,v=0,g=0;g<h;g++){var m=g+f-s,b=m*m;if(b>d)v+=4*p;else for(var _=0;_<p;_++){if(n[v+3]-1>=0){var x=_+c-o,w=x*x+b;w<=d&&(d=w,y=v)}v+=4}}if(y>=0){var E=n[y+3]-1,O=n.slice(y,y+4),S=r[E];if(S)return{pickedColor:O,pickedLayer:S,pickedObjectIndex:S.decodePickingColor(O)};i.a.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Lt}function Ut(t){for(var e=t.layer,n=t.info,r=t.mode;e&&n;){var i=n.layer||e;n.layer=e,n=e.pickLayer({info:n,mode:r,sourceLayer:i}),e=e.parent}return n}function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.filter,r=void 0===n?function(){return!0}:n,i=e.map,o=void 0===i?function(t){return t}:i,a=e.result,s=void 0===a?[]:a;return Array.isArray(t)?function t(e,n,r,i){var o=-1;for(;++o<e.length;){var a=e[o];Array.isArray(a)?t(a,n,r,i):n(a)&&i.push(r(a))}return i}(t,r,o,s):r(t)?[o(t)]:[]}var Gt=n(4),Wt=n(7),qt=n(52),Ht=n(76),Xt=function(){function t(e){var n=e.id;Object(Gt.a)(this,t),this.id=n,this.time=Object(qt.a)(),this.counters={},Object.seal(this)}return Object(Wt.a)(t,[{key:"addCounter",value:function(t){return this._getCounter(t),this}},{key:"bump",value:function(t){var e=this._getCounter(t);return e.call++,e.count++,this}},{key:"increment",value:function(t,e){var n=this._getCounter(t);return n.call++,n.count+=e,this}},{key:"addTimer",value:function(t){return this._getCounter(t).time=0,this}},{key:"addTime",value:function(t,e){var n=this._getCounter(t);return n.time+=e,n.count++,this}},{key:"timeStart",value:function(t,e){this._getCounter(t)._startTime=Object(qt.a)()}},{key:"timeEnd",value:function(t,e){var n=this._getCounter(t);this.addTime(t,Object(qt.a)()-n._startTime)}},{key:"reset",value:function(){for(var t in this.time=Object(qt.a)(),this.counters){var e=this.counters[t];e.count=0,e.time=0}return this}},{key:"hasTimeElapsed",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(qt.a)()-this.time>1e3}},{key:"getStats",value:function(){var t=(Object(qt.a)()-this.time)/1e3,e={};for(var n in this.counters){var r=this.counters[n];e[r.title]={total:r.count,fps:Math.round(r.count/t)},r.time&&(e[r.title].totalTime=Object(Ht.b)(r.time),e[r.title].avgTime=Object(Ht.b)(r.time/r.count))}return e}},{key:"getStatsTable",value:function(){var t=this.getStats();for(var e in t)0===t[e].total&&delete t[e];return t}},{key:"getStatNames",value:function(){return Object.keys(this.counters)}},{key:"get",value:function(t){return this._getCounter(t).count}},{key:"getCount",value:function(t){return this._getCounter(t).count}},{key:"getFPS",value:function(t){var e=this._getCounter(t),n=(Object(qt.a)()-this.time)/1e3;return Math.round(e.count/n)}},{key:"getTimeString",value:function(){return"".concat(this.id,":").concat(Object(Ht.b)(this.time),"(").concat(this.count,")")}},{key:"oneSecondPassed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return this.hasTimeElapsed(t)}},{key:"_getCounter",value:function(t){var e=this.counters[t];return e||(e={title:t,unit:"",timer:!1,count:0,time:0,totalTime:0,averageTime:0},this.counters[t]=e),e}},{key:"_incrementTimer",value:function(t,e,n){t.count+=n,t.totalTime+=e,t.averageTime=t.totalTime/n}}]),t}(),Zt=n(229),Yt=n.n(Zt),Kt=n(58),Jt=n.n(Kt);function Qt(t,e){if(!t)return null;var n=Jt()([0,0,0,0],e,t),r=1/n[3];return Yt()(n,n,[r,r,r,r]),n}var $t=n(22),te=n(404),ee=n(100),ne=n(53),re=n.n(ne),ie=n(57),oe=n.n(ie),ae=n(33),se=n.n(ae),ue=n(87),le=n.n(ue);function ce(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pe=Math.PI/180,he=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],de=[0,0,0],ye={pixelsPerMeter:[1,1,1],metersPerPixel:[1,1,1],pixelsPerDegree:[1,1,1],degreesPerPixel:[1,1,1]},ve=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,o=void 0===i?0:i,a=e.y,s=void 0===a?0:a,u=e.width,l=void 0===u?1:u,c=e.height,f=void 0===c?1:c;this.id=r||this.constructor.displayName||"viewport",this.x=o,this.y=s,this.width=l||1,this.height=f||1,this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return function(t,e,n){e&&fe(t.prototype,e),n&&fe(t,n)}(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&Object($t.e)(e.projectionMatrix,this.projectionMatrix)&&Object($t.e)(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0===e||e,r=this.projectPosition(t),i=Object(_t.k)(r,this.pixelProjectionMatrix),o=ce(i,2),a=o[0],s=o[1],u=n?s:this.height-s;return 2===t.length?[a,u]:[a,u,i[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=ce(t,3),a=o[0],s=o[1],u=o[2],l=r?s:this.height-s,c=i&&i*this.distanceScales.pixelsPerMeter[2],f=Object(_t.h)([a,l,u],this.pixelUnprojectionMatrix,c),p=ce(this.unprojectPosition(f),3),h=p[0],d=p[1],y=p[2];return Number.isFinite(u)?[h,d,y]:Number.isFinite(i)?[h,d,i]:[h,d]}},{key:"projectPosition",value:function(t){var e=ce(this.projectFlat(t),2);return[e[0],e[1],(t[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:"unprojectPosition",value:function(t){var e=ce(this.unprojectFlat(t),2);return[e[0],e[1],(t[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.isGeospatial?Object(_t.g)(t,e):t}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return this.isGeospatial?Object(_t.j)(t,e):t}},{key:"getDistanceScales",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?Object(_t.b)({longitude:t[0],latitude:t[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:"getMatrices",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).modelMatrix,e=void 0===t?null:t,n=this.viewProjectionMatrix,r=this.pixelProjectionMatrix,i=this.pixelUnprojectionMatrix;return e&&(n=se()([],this.viewProjectionMatrix,e),r=se()([],this.pixelProjectionMatrix,e),i=le()([],r)),Object.assign({modelViewProjectionMatrix:n,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:r,pixelUnprojectionMatrix:i,width:this.width,height:this.height,scale:this.scale})}},{key:"containsPixel",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,o=t.height,a=void 0===o?1:o;return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+a}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_addMetersToLngLat",value:function(t,e){var n=ce(t,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=ce(this._metersToLngLatDelta(e),3),u=s[0],l=s[1],c=s[2],f=void 0===c?0:c;return 2===t.length?[r+u,i+l]:[r+u,i+l,a+f]}},{key:"_metersToLngLatDelta",value:function(t){var e=ce(t,3),n=e[0],r=e[1],i=e[2],o=void 0===i?0:i;Object(a.a)(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to Viewport");var s=this.distanceScales,u=s.pixelsPerMeter,l=s.degreesPerPixel,c=n*u[0]*l[0],f=r*u[1]*l[1];return 2===t.length?[c,f]:[c,f,o]}},{key:"_createProjectionMatrix",value:function(t){var e=t.orthographic,n=t.fovyRadians,r=t.aspect,i=t.focalDistance,o=t.near,s=t.far;return Object(a.a)(Number.isFinite(n)),e?(new te.a).orthographic({fovy:n,aspect:r,focalDistance:i,near:o,far:s}):(new te.a).perspective({fovy:n,aspect:r,near:o,far:s})}},{key:"_initViewMatrix",value:function(t){var e=t.viewMatrix,n=void 0===e?he:e,r=t.longitude,i=void 0===r?null:r,o=t.latitude,a=void 0===o?null:o,s=t.zoom,u=void 0===s?null:s,l=t.position,c=void 0===l?null:l,f=t.modelMatrix,p=void 0===f?null:f,h=t.focalDistance,d=void 0===h?1:h,y=t.distanceScales,v=void 0===y?null:y;this.isGeospatial=Number.isFinite(a)&&Number.isFinite(i),this.zoom=u,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(_t.c)({latitude:a})+Math.log2(d):0),this.scale=Math.pow(2,this.zoom),this.distanceScales=this.isGeospatial?Object(_t.b)({latitude:a,longitude:i,scale:this.scale}):v||ye,this.focalDistance=d,this.distanceScales.metersPerPixel=new ee.a(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new ee.a(this.distanceScales.pixelsPerMeter),this.position=de,this.meterOffset=de,c&&(this.position=c,this.modelMatrix=p,this.meterOffset=p?p.transformVector(c):c),this.isGeospatial?(this.longitude=i,this.latitude=a,this.center=this._getCenterInWorld({longitude:i,latitude:a}),this.viewMatrixUncentered=re()([],n,[1,-1,1]),this.viewMatrix=(new te.a).multiplyRight(this.viewMatrixUncentered).translate(new ee.a(this.center||de).negate())):(this.center=c,this.viewMatrixUncentered=n,this.viewMatrix=n)}},{key:"_getCenterInWorld",value:function(t){var e=t.longitude,n=t.latitude,r=this.meterOffset,i=this.scale,o=this.distanceScales,a=this.projectFlat([e,n],i),s=new ee.a(a[0],a[1],0);if(r){var u=new ee.a(r).scale(o.pixelsPerMeter);s.add(u)}return s}},{key:"_initProjectionMatrix",value:function(t){var e=t.projectionMatrix,n=void 0===e?null:e,r=t.orthographic,i=void 0!==r&&r,o=t.fovyRadians,a=t.fovyDegrees,s=t.fovy,u=t.near,l=void 0===u?.1:u,c=t.far,f=void 0===c?1e3:c,p=t.focalDistance,h=void 0===p?1:p,d=t.orthographicFocalDistance,y=o||(a||s||75)*pe;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:i,fovyRadians:y,aspect:this.width/this.height,focalDistance:d||h,near:l,far:f})}},{key:"_initPixelMatrices",value:function(){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];se()(t,t,this.projectionMatrix),se()(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=le()([],this.viewMatrix)||this.viewMatrix;var e=function(t){var e=t.viewMatrix,n=t.viewMatrixInverse;return{eye:[n[12],n[13],n[14]],direction:[e[2],e[6],e[10]],up:[e[1],e[5],e[9]]}}({viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse}),n=e.eye,r=e.direction,o=e.up;this.cameraPosition=n,this.cameraDirection=r,this.cameraUp=o;var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];re()(a,a,[this.width/2,-this.height/2,1]),oe()(a,a,[1,-1,0]),se()(s,a,this.viewProjectionMatrix),this.pixelProjectionMatrix=s,this.viewportMatrix=a,this.pixelUnprojectionMatrix=le()([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||i.a.warn("Pixel project matrix not invertible")()}}]),t}();function ge(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}ve.displayName="Viewport";var be=Object.seal({layerManager:null,gl:null,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,lastPickedInfo:null,animationProps:null,userData:{}}),_e=function(t){return t instanceof kt?"".concat(t):t?"invalid":"null"},xe=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.stats,i=n.viewport,o=void 0===i?null:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},be,{layerManager:this,gl:e,shaderCache:new s.o({gl:e,_cachePrograms:!0}),stats:r||new Xt({id:"deck.gl"}),lastPickedInfo:{index:-1,layerId:null},viewport:o||new ve({id:"DEFAULT-INITIAL-VIEWPORT"})}),this.layerFilter=null,this.drawPickingColors=!1,this._needsRedraw="Initial render",this._needsUpdate=!1,this._activateViewport=this._activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),U(this._initSeer),z(this._editSeer)}return function(t,e,n){e&&me(t.prototype,e),n&&me(t,n)}(t,[{key:"finalize",value:function(){l.a.removeListener(this._initSeer),l.a.removeListener(this._editSeer)}},{key:"needsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0===t||t;return this._checkIfNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t}},{key:"getLayers",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layerIds,e=void 0===t?null:t;return e?this.layers.filter(function(t){return e.find(function(e){return 0===t.id.indexOf(e)})}):this.layers}},{key:"setProps",value:function(t){"userData"in t&&(this.context.userData=t.userData),"useDevicePixels"in t&&(this.context.useDevicePixels=t.useDevicePixels),"layers"in t&&this.setLayers(t.layers),"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this.setNeedsRedraw("layerFilter changed")),"drawPickingColors"in t&&t.drawPickingColors!==this.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this.setNeedsRedraw("drawPickingColors changed"))}},{key:"setLayers",value:function(t){if(t===this.lastRenderedLayers)return i.a.log(3,"Ignoring layer update due to layer array not changed")(),this;this.lastRenderedLayers=t,t=Vt(t,{filter:Boolean});var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){o.value.context=this.context}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}var s=this._updateLayers({oldLayers:this.layers,newLayers:t}),u=s.error,l=s.generatedLayers;if(this.layers=l,u)throw u;return this}},{key:"updateLayers",value:function(){var t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(ge(this.lastRenderedLayers)))}},{key:"drawLayers",value:function(t){var e=t.pass,n=void 0===e?"render to screen":e,r=t.viewports,i=t.views,o=t.redrawReason,a=void 0===o?"unknown reason":o,s=t.customRender,u=void 0!==s&&s,l=this.drawPickingColors,c=this.context,f=c.gl,p=c.useDevicePixels;It(f,{layers:this.layers,viewports:r,views:i,onViewportActive:this._activateViewport,useDevicePixels:p,drawPickingColors:l,pass:n,layerFilter:this.layerFilter,redrawReason:a,customRender:u})}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,r=t.mode,i=t.radius,o=void 0===i?0:i,a=t.layerIds,s=t.viewports,u=t.depth,l=void 0===u?1:u,c=this.context,f=c.gl,p=c.useDevicePixels;return Dt(f,{x:e,y:n,radius:o,layers:this.getLayers({layerIds:a}),mode:r,layerFilter:this.layerFilter,depth:l,viewports:s,onViewportActive:this._activateViewport,pickingFBO:this._getPickingBuffer(),lastPickedInfo:this.context.lastPickedInfo,useDevicePixels:p})}},{key:"pickObjects",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.layerIds,a=t.viewports,s=this.context,u=s.gl,l=s.useDevicePixels;return Ft(u,{x:e,y:n,width:r,height:i,layers:this.getLayers({layerIds:o}),layerFilter:this.layerFilter,mode:"pickObjects",viewports:a,onViewportActive:this._activateViewport,pickingFBO:this._getPickingBuffer(),useDevicePixels:l})}},{key:"_checkIfNeedsRedraw",value:function(t){var e=this._needsRedraw;t&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value.getNeedsRedraw({clearRedrawFlags:t});e=e||s}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}},{key:"_activateViewport",value:function(t){var e=this.context.viewport;if(!e||!t.equals(e)){i.a.log(4,"Viewport changed",t)(),this.context.viewport=t;var n=!0,r=!1,o=void 0;try{for(var s,u=this.layers[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var l=s.value;l.setChangeFlags({viewportChanged:"Viewport changed"}),this._updateLayer(l)}}catch(t){r=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}}return Object(a.a)(this.context.viewport,"LayerManager: viewport not set"),this}},{key:"_getPickingBuffer",value:function(){var t=this.context.gl;return this.context.pickingFBO=this.context.pickingFBO||new s.f(t),this.context.pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.context.pickingFBO}},{key:"_updateLayers",value:function(t){var e=t.oldLayers,n=t.newLayers,r={},o=!0,a=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;r[c.id]?i.a.warn("Multiple old layers with same id ".concat(_e(c)))():r[c.id]=c}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}var f=[],p=this._updateSublayersRecursively({newLayers:n,oldLayerMap:r,generatedLayers:f}),h=this._finalizeOldLayers(r);return this._needsUpdate=!1,{error:p||h,generatedLayers:f}}},{key:"_updateSublayersRecursively",value:function(t){var e=t.newLayers,n=t.oldLayerMap,r=t.generatedLayers,o=null,a=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;f.context=this.context;var p=n[f.id];null===p&&i.a.warn("Multiple new layers with same id ".concat(_e(f)))(),n[f.id]=null;var h=null;try{p?(this._transferLayerState(p,f),this._updateLayer(f),G(f)):(this._initializeLayer(f),V(f)),r.push(f),h=f.isComposite&&f.getSubLayers()}catch(t){i.a.warn("error during matching of ".concat(_e(f)),t)(),o=o||t}h&&this._updateSublayersRecursively({newLayers:h,oldLayerMap:n,generatedLayers:r})}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}return o}},{key:"_finalizeOldLayers",value:function(t){var e=null;for(var n in t){var r=t[n];r&&(e=e||this._finalizeLayer(r))}return e}},{key:"_initializeLayer",value:function(t){i.a.log(2,"initializing ".concat(_e(t)))();var e=null;try{t._initialize(),t.lifecycle=$.INITIALIZED}catch(n){i.a.warn("error while initializing ".concat(_e(t),"\n"),n)(),e=e||n}t.internalState.layer=t;var n=!0,r=!1,o=void 0;try{for(var a,s=t.getModels()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.userData.layer=t}}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return e}},{key:"_transferLayerState",value:function(t,e){e._transferState(t),e.lifecycle=$.MATCHED,e!==t?(i.a.log(4,"matched ".concat(_e(e)),t,"->",e)(),t.lifecycle=$.AWAITING_GC):i.a.log(4,"Matching layer is unchanged ".concat(e.id))()}},{key:"_updateLayer",value:function(t){i.a.log(4,"updating ".concat(t," because: ").concat(t.printChangeFlags()))();var e=null;try{t._update()}catch(n){i.a.warn("error during update of ".concat(_e(t)),n)(),e=n}return e}},{key:"_finalizeLayer",value:function(t){Object(a.a)(t.lifecycle!==$.AWAITING_FINALIZATION),t.lifecycle=$.AWAITING_FINALIZATION;var e=null;this.setNeedsRedraw("finalized ".concat(_e(t)));try{t._finalize()}catch(n){i.a.warn("error during finalization of ".concat(_e(t)),n)(),e=n}return t.lifecycle=$.FINALIZED,i.a.log(2,"finalizing ".concat(_e(t)))(),e}},{key:"_initSeer",value:function(){this.layers.forEach(function(t){V(t),G(t)})}},{key:"_editSeer",value:function(t){if("edit"===t.type&&"props"===t.valuePath[0]){!function(t,e,n){l.a.isReady()&&(N.has(t)||N.set(t,new Map),N.get(t).set(e,n))}(t.itemKey,t.valuePath.slice(1),t.value);var e=this.layers.map(function(t){return new t.constructor(t.props)});this.updateLayers({newLayers:e})}}}]),t}();function we(t,e){return t===e||Object.keys(t).every(function(n){return Array.isArray(t[n])&&Array.isArray(e[n])?we(t[n],e[n]):t[n]===e[n]})}function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Oe=/([0-9]+\.?[0-9]*)(%|px)/;function Se(t){switch(Ee(t)){case"number":return{position:t,relative:!1};case"string":var e=t.match(Oe);if(e&&e.length>=3){var n="%"===e[2],r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Pe(t,e){return t.relative?Math.round(t.position*e):t.position}function Ce(t){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ke=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.id,r=void 0===n?null:n,i=e.x,o=void 0===i?0:i,s=e.y,u=void 0===s?0:s,l=e.width,c=void 0===l?"100%":l,f=e.height,p=void 0===f?"100%":f,h=e.projectionMatrix,d=void 0===h?null:h,y=e.fovy,v=void 0===y?75:y,g=e.near,m=void 0===g?.1:g,b=e.far,_=void 0===b?1e3:b,x=e.modelMatrix,w=void 0===x?null:x,E=e.viewportInstance,O=void 0===E?null:E,S=e.type,P=void 0===S?ve:S;Object(a.a)(!O||O instanceof ve),this.viewportInstance=O,this.id=r||this.constructor.displayName||"view",this.type=P,this.props=Object.assign({},e,{projectionMatrix:d,fovy:v,near:m,far:_,modelMatrix:w}),this._parseDimensions({x:o,y:u,width:c,height:p}),this.equals=this.equals.bind(this),Object.seal(this)}return function(t,e,n){e&&Te(t.prototype,e),n&&Te(t,n)}(t,[{key:"equals",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):we(this.props,t.props))}},{key:"makeViewport",value:function(t){var e=t.width,n=t.height,r=t.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:e,height:n}),o=Object.assign({viewState:r},r,this.props,i);return this._getViewport(o)}},{key:"getViewStateId",value:function(){switch(Ce(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(t){if(this.props.viewState&&"object"===Ce(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var e=Object.assign({},t);for(var n in this.props.viewState)"id"!==n&&(e[n]=this.props.viewState[n]);return e}return t}},{key:"getDimensions",value:function(t){var e=t.width,n=t.height;return{x:Pe(this._x,e),y:Pe(this._y,n),width:Pe(this._width,e),height:Pe(this._height,n)}}},{key:"_getControllerProps",value:function(t){var e=this.props.controller;return e?!0===e?t:("function"==typeof e&&(e={type:e}),Object.assign({},t,e)):null}},{key:"_getViewport",value:function(t){return new(0,this.type)(t)}},{key:"_parseDimensions",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height;this._x=Se(e),this._y=Se(n),this._width=Se(r),this._height=Se(i)}}]),t}();function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Me=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractiveStateChange:e.onInteractiveStateChange},Object.seal(this),this.setProps(e)}return function(t,e,n){e&&Ae(t.prototype,e),n&&Ae(t,n)}(t,[{key:"finalize",value:function(){for(var t in this.controllers)this.controllers[t]&&this.controllers[t].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0===t||t,n=this._needsRedraw;return e&&(this._needsRedraw=!1),n}},{key:"setNeedsRedraw",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:"setNeedsUpdate",value:function(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}},{key:"getViewports",value:function(t){return t?this._viewports.filter(function(e){return e.containsPixel(t)}):this._viewports}},{key:"getViews",value:function(){var t={};return this.views.forEach(function(e){t[e.id]=e}),t}},{key:"getView",value:function(t){return"string"==typeof t?this.views.find(function(e){return e.id===t}):t}},{key:"getViewState",value:function(t){var e=this.getView(t),n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}},{key:"getViewport",value:function(t){return this._viewportMap[t]}},{key:"project",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{topLeft:!0},n=this.getViewports(),r=n.length-1;r>=0;--r){var i=n[r];if(i.contains(t,e))return i.project(t,e)}return null}},{key:"unproject",value:function(t,e){for(var n=this.getViewports(),r=n.length-1;r>=0;--r){var i=n[r];if(i.containsPixel(t,e))return i.unproject(t)}return null}},{key:"setProps",value:function(t){"views"in t&&this._setViews(t.views),"viewState"in t&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(t,e){Object(a.a)(Number.isFinite(t)&&Number.isFinite(e)),t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(t){t=Vt(t,{filter:Boolean}).map(function(t){return t instanceof ve?new ke({viewportInstance:t}):t}),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}},{key:"_setViewState",value:function(t){t?(!we(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):i.a.warn("setting null viewState")()}},{key:"_onViewStateChange",value:function(t,e){e.viewId=t,this._eventCallbacks.onViewStateChange(e)}},{key:"_createController",value:function(t){return new(0,t.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},t))}},{key:"_updateController",value:function(t,e,n,r){if(t.controller){var i=Object.assign({},t.controller,t.defaultState,e,{id:t.id,x:n.x,y:n.y,width:n.width,height:n.height});return r?r.setProps(i):r=this._createController(i),r}return null}},{key:"_rebuildViewports",value:function(){var t=this,e=this.width,n=this.height,r=this.views,i=this.controllers;for(var o in this.controllers={},this._viewports=r.map(function(r){var o=t.getViewState(r),a=r.makeViewport({width:e,height:n,viewState:o});return t.controllers[r.id]=t._updateController(r,o,a,i[r.id]),a}),i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var t=this;this._viewportMap={},this._viewports.forEach(function(e){e.id&&(t._viewportMap[e.id]=t._viewportMap[e.id]||e)})}},{key:"_diffViews",value:function(t,e){return t.length!==e.length||t.some(function(n,r){return!t[r].equals(e[r])})}}]),t}(),je=n(230),Re=n(101),Ie=n.n(Re),Le=n(131),De=n.n(Le);function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ze(t){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ge=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n.latitude,i=void 0===r?0:r,o=n.longitude,a=void 0===o?0:o,s=n.zoom,u=void 0===s?11:s,l=n.pitch,c=void 0===l?0:l,f=n.bearing,p=void 0===f?0:f,h=n.nearZMultiplier,d=void 0===h?.1:h,y=n.farZMultiplier,v=void 0===y?10:y,g=n.orthographic,m=void 0!==g&&g,b=n.width,_=n.height,x=n.altitude,w=void 0===x?1.5:x;b=b||1,_=_||1,w=Math.max(.75,w);var E=Object(_t.e)({width:b,height:_,pitch:c,altitude:w,nearZMultiplier:d,farZMultiplier:v}),O=E.fov,S=E.aspect,P=E.focalDistance,C=E.near,T=E.far,k=Object(_t.f)({height:_,pitch:c,bearing:p,altitude:w}),A=n.position&&[n.position[0],n.position[1],0],M=Object.assign({},n,{width:b,height:_,viewMatrix:k,longitude:a,latitude:i,zoom:u,position:A,orthographic:m,fovyRadians:O,aspect:S,orthographicFocalDistance:P,near:C,far:T});return(t=function(t,e){return!e||"object"!==Fe(e)&&"function"!=typeof e?Ve(t):e}(this,ze(e).call(this,M))).latitude=i,t.longitude=a,t.zoom=u,t.pitch=c,t.bearing=p,t.altitude=w,t.orthographic=m,t.metersToLngLatDelta=t.metersToLngLatDelta.bind(Ve(Ve(t))),t.lngLatDeltaToMeters=t.lngLatDeltaToMeters.bind(Ve(Ve(t))),t.addMetersToLngLat=t.addMetersToLngLat.bind(Ve(Ve(t))),Object.freeze(Ve(Ve(t))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(e,ve),function(t,e,n){e&&Be(t.prototype,e),n&&Be(t,n)}(e,[{key:"metersToLngLatDelta",value:function(t){var e=Ne(t,3),n=e[0],r=e[1],i=e[2],o=void 0===i?0:i;Object(a.a)(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to WebMercatorViewport");var s=this.distanceScales,u=s.pixelsPerMeter,l=s.degreesPerPixel,c=n*u[0]*l[0],f=r*u[1]*l[1];return 2===t.length?[c,f]:[c,f,o]}},{key:"lngLatDeltaToMeters",value:function(t){var e=Ne(t,3),n=e[0],r=e[1],i=e[2],o=void 0===i?0:i;Object(a.a)(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o),"Illegal argument to WebMercatorViewport");var s=this.distanceScales,u=s.pixelsPerDegree,l=s.metersPerPixel,c=n*u[0]*l[0],f=r*u[1]*l[1];return 2===t.length?[c,f]:[c,f,o]}},{key:"addMetersToLngLat",value:function(t,e){return Object(_t.a)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(_t.h)(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Ie()([],i,De()([],r)),a=Ie()([],this.center,o);return this.unprojectFlat(a)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(je.a)(Object.assign({width:r,height:i,bounds:t},n));return new e({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}]),e}();function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Ge.displayName="WebMercatorViewport";var qe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var n=e,r=n.compare,i=n.extract,o=n.required;this._propsToCompare=r,this._propsToExtract=i,this._requiredProps=o}return function(t,e,n){e&&We(t.prototype,e),n&&We(t,n)}(t,[{key:"arePropsEqual",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=(this._propsToCompare||Object.keys(e))[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!Object($t.e)(t[s],e[s]))return!1}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(t,e){var n;if(this._propsToExtract){var r={},i={},o=!0,a=!1,s=void 0;try{for(var u,l=this._propsToExtract[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;r[c]=t[c],i[c]=e[c]}}catch(t){a=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}n={start:r,end:i}}else n={start:t,end:e};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(t,e,n){Object(a.a)(!1,"interpolateProps is not implemented")}},{key:"_checkRequiredProps",value:function(t){this._requiredProps&&this._requiredProps.forEach(function(e){var n=t[e];Object(a.a)(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))})}}]),t}();function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ze(t,e){return!e||"object"!==He(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ke(t,e){return(Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Je=["longitude","latitude","zoom","bearing","pitch"],Qe=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ze(this,Ye(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ke(t,e)}(e,qe),function(t,e,n){e&&Xe(t.prototype,e),n&&Xe(t,n)}(e,[{key:"interpolateProps",value:function(t,e,n){var r={};for(var i in e)r[i]=Object($t.g)(t[i],e[i],n);return r}}]),e}();function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tn=function(){},en={BREAK:1,SNAP_TO_END:2,IGNORE:3},nn={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new Qe,transitionInterruption:en.BREAK,onTransitionStart:tn,onTransitionInterrupt:tn,onTransitionEnd:tn},rn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object(a.a)(e),this.ControllerState=e,this.props=Object.assign({},nn,n),this.animation=null,this.propsInTransition=null,this.transition=new C,this.onViewStateChange=n.onViewStateChange,this._onTransitionFrame=this._onTransitionFrame.bind(this),this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return function(t,e,n){e&&$e(t.prototype,e),n&&$e(t,n)}(t,[{key:"finalize",value:function(){cancelAnimationFrame(this.animation)}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(t){var e=!1,n=this.props;if(t=Object.assign({},nn,t),this.props=t,this._shouldIgnoreViewportChange(n,t))return e;if(this._isTransitionEnabled(t)){var r=Object.assign({},n,this.transition.interruption===en.SNAP_TO_END?this.transition.endProps:this.propsInTransition||n);this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}},{key:"_isTransitionEnabled",value:function(t){return t.transitionDuration>0&&t.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this.transition.inProgress?this.transition.interruption===en.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){Object(a.a)(this._isTransitionEnabled(e),"Transition is not enabled"),cancelAnimationFrame(this.animation);var n=new this.ControllerState(t),r=new this.ControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.transition.start({duration:e.transitionDuration,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startProps:i.start,endProps:i.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)}),this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.animation=requestAnimationFrame(this._onTransitionFrame),this.transition.update(Date.now())}},{key:"_onTransitionEnd",value:function(t){var e=this;return function(n){cancelAnimationFrame(e.animation),e.propsInTransition=null,t(n)}}},{key:"_onTransitionUpdate",value:function(t){var e=t.interpolator,n=t.startProps,r=t.endProps,i=t.time,o=e.interpolateProps(n,r,i);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,o)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0}})}}]),t}();function on(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}rn.defaultProps=nn;var sn={transitionDuration:0},un=["wheel"],ln=["panstart","panmove","panend"],cn=["pinchstart","pinchmove","pinchend"],fn=["doubletap"],pn=["keydown"],hn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object(a.a)(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new rn(e,n),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return function(t,e,n){e&&an(t.prototype,e),n&&an(t,n)}(t,[{key:"finalize",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(t){var e=this.ControllerState;switch(this.controllerState=new e(Object.assign({},this.controllerStateProps,this._state)),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=this.controllerStateProps,n=e.x,r=e.y,i=t.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(t){var e=this.controllerStateProps,n=e.width,r=e.height;return t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(t){"onViewportChange"in t&&i.a.removed("onViewportChange")(),"onViewStateChange"in t&&(this.onViewStateChange=t.onViewStateChange),"onStateChange"in t&&(this.onStateChange=t.onStateChange),this.controllerStateProps=t,"eventManager"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var e=t.scrollZoom,n=void 0===e||e,r=t.dragPan,o=void 0===r||r,a=t.dragRotate,s=void 0===a||a,u=t.doubleClickZoom,l=void 0===u||u,c=t.touchZoom,f=void 0===c||c,p=t.touchRotate,h=void 0!==p&&p,d=t.keyboard,y=void 0===d||d,v=Boolean(this.onViewStateChange);this.toggleEvents(un,v&&n),this.toggleEvents(ln,v&&(o||s)),this.toggleEvents(cn,v&&(f||h)),this.toggleEvents(fn,v&&l),this.toggleEvents(pn,v&&y),this.scrollZoom=n,this.dragPan=o,this.dragRotate=s,this.doubleClickZoom=l,this.touchZoom=f,this.touchRotate=h,this.keyboard=y}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"setOptions",value:function(t){return this.setProps(t)}},{key:"updateViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},t.getViewportProps(),e);if(this.controllerState!==t){var i=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:n,oldViewState:i})}Object.assign(this._state,Object.assign({},t.getInteractiveState(),n)),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e))return!1;var n=this.controllerState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,sn,{isDragging:!0})}},{key:"_onPan",value:function(t){var e=this.isFunctionKeyPressed(t)||t.rightButton;return(e=this.invertPan?!e:e)?this._onPanMove(t):this._onPanRotate(t)}},{key:"_onPanEnd",value:function(t){var e=this.controllerState.panEnd().rotateEnd();return this.updateViewport(e,null,{isDragging:!1})}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,sn,{isDragging:!0})}},{key:"_onPanRotate",value:function(t){return!!this.dragRotate&&(this.invertPan?this._onPanRotateMap(t):this._onPanRotateStandard(t))}},{key:"_onPanRotateStandard",value:function(t){var e=t.deltaX,n=t.deltaY,r=this.controllerState.getViewportProps(),i=e/r.width,o=n/r.height,a=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:o});return this.updateViewport(a,sn,{isDragging:!0})}},{key:"_onPanRotateMap",value:function(t){var e=t.deltaX,n=t.deltaY,r=on(this.getCenter(t),2)[1],i=r-n,o=this.controllerState.getViewportProps(),a=o.width,s=o.height,u=e/a,l=0;n>0?Math.abs(s-i)>5&&(l=n/(i-s)*1.2):n<0&&i>5&&(l=1-r/i),l=Math.min(1,Math.max(-1,l));var c=this.controllerState.rotate({deltaScaleX:u,deltaScaleY:l});return this.updateViewport(c,sn,{isDragging:!0})}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e))return!1;var n=t.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.controllerState.zoom({pos:e,scale:r});return this.updateViewport(i,sn)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,sn,{isDragging:!0})}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(e,sn,{isDragging:!0})}},{key:"_onPinchEnd",value:function(t){var e=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e))return!1;var n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps())}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.controllerState;switch(t.srcEvent.keyCode){case 189:e=n?r.zoomOut().zoomOut():r.zoomOut();break;case 187:e=n?r.zoomIn().zoomIn():r.zoomIn();break;case 37:e=n?r.rotateLeft():r.moveLeft();break;case 39:e=n?r.rotateRight():r.moveRight();break;case 38:e=n?r.rotateUp():r.moveUp();break;case 40:e=n?r.rotateDown():r.moveDown();break;default:return!1}return this.updateViewport(e,this._getTransitionProps())}},{key:"_getTransitionProps",value:function(){return sn}}]),t}(),dn=n(20),yn=n(231),vn=n.n(yn),gn=6371e3,mn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.phi,r=e.theta,i=e.radius,o=e.bearing,a=e.pitch,s=(e.altitude,e.radiusScale),u=void 0===s?gn:s;Object(Gt.a)(this,t),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(n)||Number.isFinite(r)?(this.phi=n||0,this.theta=r||0):(Number.isFinite(o)||Number.isFinite(a))&&(this.bearing=o||0,this.pitch=a||0),this.radius=i||1,this.radiusScale=u||1,this.check()}return Object(Wt.a)(t,[{key:"toString",value:function(){return this.formatString($t.c)}},{key:"formatString",value:function(t){var e=t.printTypes,n=(t.printDegrees,$t.f);return"".concat(e?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}},{key:"equals",value:function(t){return Object($t.e)(this.radius,t.radius)&&Object($t.e)(this.theta,t.theta)&&Object($t.e)(this.phi,t.phi)}},{key:"exactEquals",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:"fromLngLatZ",value:function(t){var e=Object(dn.a)(t,3),n=e[0],r=e[1],i=e[2];this.radius=1+i/this.radiusScale,this.phi=Object($t.h)(r),this.theta=Object($t.h)(n)}},{key:"fromVector3",value:function(t){return this.radius=vn()(t),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(Object($t.b)(t[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new ee.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-Object($t.d)(this.phi)},set:function(t){this.phi=Math.PI-Object($t.h)(t)}},{key:"pitch",get:function(){return Object($t.d)(this.theta)},set:function(t){this.theta=Object($t.h)(t)}},{key:"longitude",get:function(){return Object($t.d)(this.phi)}},{key:"latitude",get:function(){return Object($t.d)(this.theta)}},{key:"lng",get:function(){return Object($t.d)(this.phi)}},{key:"lat",get:function(){return Object($t.d)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),t}();function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _n={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},xn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.width,r=e.height,i=e.position,o=void 0===i?_n.position:i;Object(a.a)(Number.isFinite(n),"`width` must be supplied"),Object(a.a)(Number.isFinite(r),"`height` must be supplied"),this._viewportProps=this._applyConstraints(Object.assign({},e,{position:new ee.a(o)}))}return function(t,e,n){e&&bn(t.prototype,e),n&&bn(t,n)}(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getDirection",value:function(){return new mn({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:"getDirectionFromBearing",value:function(t){return new mn({bearing:t,pitch:90}).toVector3().normalize()}},{key:"shortestPathFrom",value:function(t){return this._viewportProps}},{key:"_applyConstraints",value:function(t){return t}}]),t}(),wn=n(110),En=n(402);function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tn(t,e,n){return e&&Cn(t.prototype,e),n&&Cn(t,n),t}function kn(t,e){return!e||"object"!==On(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jn(t,e)}function jn(t,e){return(jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rn={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new Qe,transitionInterruption:en.BREAK},In={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},Ln={pitch:0,bearing:0,altitude:1.5},Dn=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,s=n.longitude,u=n.zoom,l=n.bearing,c=void 0===l?Ln.bearing:l,f=n.pitch,p=void 0===f?Ln.pitch:f,h=n.altitude,d=void 0===h?Ln.altitude:h,y=n.maxZoom,v=void 0===y?In.maxZoom:y,g=n.minZoom,m=void 0===g?In.minZoom:g,b=n.maxPitch,_=void 0===b?In.maxPitch:b,x=n.minPitch,w=void 0===x?In.minPitch:x,E=n.startPanLngLat,O=n.startZoomLngLat,S=n.startBearing,P=n.startPitch,C=n.startZoom;return Pn(this,e),Object(a.a)(Number.isFinite(s),"`longitude` must be supplied"),Object(a.a)(Number.isFinite(o),"`latitude` must be supplied"),Object(a.a)(Number.isFinite(u),"`zoom` must be supplied"),(t=kn(this,An(e).call(this,{width:r,height:i,latitude:o,longitude:s,zoom:u,bearing:c,pitch:p,altitude:d,maxZoom:v,minZoom:m,maxPitch:_,minPitch:w})))._interactiveState={startPanLngLat:E,startZoomLngLat:O,startBearing:S,startPitch:P,startZoom:C},t}return Mn(e,xn),Tn(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=Sn(this._calculateNewLngLat({startPanLngLat:r,pos:e}),2),o=i[0],a=i[1];return this._getUpdatedState({longitude:o,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=void 0===e?0:e,r=t.deltaScaleY,i=void 0===r?0:r,o=this._interactiveState,a=o.startBearing,s=o.startPitch;if(!Number.isFinite(a)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:a,startPitch:s}),l=u.pitch,c=u.bearing;return this._getUpdatedState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale;Object(a.a)(r>0,"`scale` must be a positive number");var i=this._interactiveState,o=i.startZoom,s=i.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,s=this._unproject(n)||this._unproject(e)),Object(a.a)(s,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var u=this._calculateNewZoom({scale:r,startZoom:o}),l=Sn(new wn.a(Object.assign({},this._viewportProps,{zoom:u})).getLocationAtPoint({lngLat:s,pos:e}),2),c=l[0],f=l[1];return this._getUpdatedState({zoom:u,longitude:c,latitude:f})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.zoom({pos:[n/2,r/2],scale:t})}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+t[0],r/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=Object($t.b)(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;return t.pitch=Object($t.b)(a,o,i),Object.assign(t,Object(En.a)(t)),t}},{key:"_unproject",value:function(t){var e=new wn.a(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new wn.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom,a=n+Math.log2(e);return Object($t.b)(a,o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=Object($t.b)(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(a-i)),{pitch:u,bearing:r+180*e}}}]),e}(),Fn=function(t){function e(t){var n;return Pn(this,e),(n=kn(this,An(e).call(this,Dn,t))).invertPan=!0,n}return Mn(e,hn),Tn(e,[{key:"_getTransitionProps",value:function(){return Rn}}]),e}();function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Un(t){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vn(t,e){return(Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gn=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zn(this,Un(e).call(this,Object.assign({},t,{type:Ge})))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vn(t,e)}(e,ke),function(t,e,n){e&&Bn(t.prototype,e),n&&Bn(t,n)}(e,[{key:"controller",get:function(){return this._getControllerProps({type:Fn})}}]),e}();function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Gn.displayName="MapView";var qn=function(){function t(e){var n=e.gl,r=e.layerManager;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=n,this.layerManager=r,this._effects=[]}return function(t,e,n){e&&Wn(t.prototype,e),n&&Wn(t,n)}(t,[{key:"addEffect",value:function(t){this._effects.push(t),this._sortEffects(),t.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function(t){var e=this._effects.indexOf(t);return e>=0&&(t.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(e,1),!0)}},{key:"preDraw",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.needsRedraw&&o.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"draw",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.needsRedraw&&o.draw({gl:this.gl,layerManager:this.layerManager})}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"_sortEffects",value:function(){this._effects.sort(function(t,e){return t.priority>e.priority?-1:t.priority<e.priority?1:t.count-e.count})}}]),t}();function Hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xn=0,Zn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id="effect",this.count=Xn++,this.visible=!0,this.priority=0,this.needsRedraw=!1}return function(t,e,n){e&&Hn(t.prototype,e),n&&Hn(t,n)}(t,[{key:"initialize",value:function(t){t.gl,t.layerManager}},{key:"finalize",value:function(t){t.gl,t.layerManager}},{key:"preDraw",value:function(t){t.gl,t.layerManager}},{key:"draw",value:function(t){t.gl,t.layerManager}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=t}}]),t}(),Yn=n(132),Kn="";try{var Jn=document.createElement("div").style,Qn=/^(webkit|moz|ms|o)(?=[A-Z])/;for(var $n in Jn)if(Qn.test($n)){Kn="-".concat($n.match(Qn)[0],"-");break}}catch(t){}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function er(){}var nr="-webkit-"===Kn?Kn:"",rr={GRABBING:"".concat(nr,"grabbing"),GRAB:"".concat(nr,"grab"),POINTER:"pointer"};var ir={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,_animate:!1,onWebGLInitialized:er,onResize:er,onViewStateChange:er,onBeforeRender:er,onAfterRender:er,onLayerClick:null,onLayerHover:null,onLoad:er,getCursor:function(t){return t.isDragging?rr.GRABBING:rr.GRAB},debug:!1,drawPickingColors:!1},or=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=Object.assign({},ir,e),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.stats=new Xt({id:"deck.gl"}),this._needsRedraw=!0,this.viewState=e.initialViewState||null,this.interactiveState={isDragging:!1},this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),e.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.setProps(e),this.animationLoop.start()}return function(t,e,n){e&&tr(t.prototype,e),n&&tr(t,n)}(t,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.eventManager&&this.eventManager.destroy()}},{key:"setProps",value:function(t){this.stats.timeStart("deck.setProps"),t=Object.assign({},this.props,t),this.props=t,this._setCanvasSize(t);var e=Object.assign({},t,{views:this._getViews(t),width:this.width,height:this.height}),n=this._getViewState(t);n&&(e.viewState=n),this.viewManager&&this.viewManager.setProps(e),this.layerManager&&this.layerManager.setProps(e),this.animationLoop&&this.animationLoop.setProps(e),this.stats.timeEnd("deck.setProps")}},{key:"needsRedraw",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,e=void 0===t||t;if(this.props._animate)return"Deck._animate";var n=this._needsRedraw;e&&(this._needsRedraw=!1);var r=this.viewManager.needsRedraw({clearRedrawFlags:e}),i=this.layerManager.needsRedraw({clearRedrawFlags:e});return n=n||r||i}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(t){return this.viewManager.getViewports(t)}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,o=t.layerIds,a=void 0===o?null:o;this.stats.timeStart("deck.pickObject");var s=this.layerManager.pickObject({x:e,y:n,radius:i,layerIds:a,viewports:this.getViewports({x:e,y:n}),mode:"query",depth:1});return this.stats.timeEnd("deck.pickObject"),s.length?s[0]:null}},{key:"pickMultipleObjects",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,o=t.layerIds,a=void 0===o?null:o,s=t.depth,u=void 0===s?10:s;this.stats.timeStart("deck.pickMultipleObjects");var l=this.layerManager.pickObject({x:e,y:n,radius:i,layerIds:a,viewports:this.getViewports({x:e,y:n}),mode:"query",depth:u});return this.stats.timeEnd("deck.pickMultipleObjects"),l}},{key:"pickObjects",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,o=t.height,a=void 0===o?1:o,s=t.layerIds,u=void 0===s?null:s;this.stats.timeStart("deck.pickObjects");var l=this.layerManager.pickObjects({x:e,y:n,width:i,height:a,layerIds:u,viewports:this.getViewports({x:e,y:n,width:i,height:a})});return this.stats.timeEnd("deck.pickObjects"),l}},{key:"_createCanvas",value:function(t){var e=t.canvas;("string"==typeof e&&(e=document.getElementById(e),Object(a.a)(e)),e)||(e=document.createElement("canvas"),(t.parent||document.body).appendChild(e));var n=t.id,r=t.style;return e.id=n,Object.assign(e.style,r),e}},{key:"_setCanvasSize",value:function(t){if(this.canvas){var e=t.width,n=t.height;(e||0===e)&&(e=Number.isFinite(e)?"".concat(e,"px"):e,this.canvas.style.width=e),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var t=this.width,e=this.height;this.viewManager.setProps({width:t,height:e}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var t=this.canvas;return!(!t||this.width===t.clientWidth&&this.height===t.clientHeight)&&(this.width=t.clientWidth,this.height=t.clientHeight,!0)}},{key:"_createAnimationLoop",value:function(t){var e=this,n=t.width,r=t.height,i=t.gl,o=t.glOptions,a=t.debug,u=t.useDevicePixels,l=t.autoResizeDrawingBuffer;return new s.a({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:l,onCreateContext:function(t){return i||Object(s.r)(Object.assign({},o,t,{canvas:e.canvas,debug:a}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:t.onBeforeRender,onAfterRender:t.onAfterRender})}},{key:"_getViewState",value:function(t){return t.viewState||this.viewState}},{key:"_getViews",value:function(t){var e=t.views||[new Gn({id:"default-view"})];return(e=Array.isArray(e)?e:[e]).length&&t.controller&&(e[0].props.controller=t.controller),e}},{key:"_pickAndCallback",value:function(t){var e=t.event.offsetCenter;if(e){var n=this.props.pickingRadius,r=this.layerManager.pickObject({x:e.x,y:e.y,radius:n,viewports:this.getViewports(e),mode:t.mode,depth:1});if(t.callback&&r){var i=r.find(function(t){return t.index>=0})||null;t.callback(i,r,t.event.srcEvent)}}}},{key:"_updateCursor",value:function(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_updateAnimationProps",value:function(t){this.layerManager.context.animationProps=t}},{key:"_setGLContext",value:function(t){if(!this.layerManager){this.canvas||(this.canvas=t.canvas,Object(s.C)(t,{enable:!0,copyState:!0})),Object(s.B)(t,{blend:!0,blendFunc:[f.a.SRC_ALPHA,f.a.ONE_MINUS_SRC_ALPHA,f.a.ONE,f.a.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthTest:!0,depthFunc:f.a.LEQUAL}),this.props.onWebGLInitialized(t),this.props._customRender||(this.eventManager=new Yn.a(t.canvas,{events:{click:this._onClick,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave}})),this.viewManager=new Me({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),Object(a.a)(this.viewManager);var e=this.viewManager.getViewports()[0];this.layerManager=new xe(t,{stats:this.stats,viewport:e}),this.effectManager=new qn({gl:t,layerManager:this.layerManager});var n=!0,r=!1,i=void 0;try{for(var o,u=this.props.effects[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value;this.effectManager.addEffect(l)}}catch(t){r=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(t){var e=this.layerManager.context.gl;Object(s.B)(e,this.props.parameters),this.props.onBeforeRender({gl:e}),this.layerManager.drawLayers({pass:"screen",viewports:this.viewManager.getViewports(),views:this.viewManager.getViews(),redrawReason:t,drawPickingColors:this.props.drawPickingColors,customRender:Boolean(this.props._customRender)}),this.props.onAfterRender({gl:e})}},{key:"_onRendererInitialized",value:function(t){var e=t.gl;this._setGLContext(e)}},{key:"_onRenderFrame",value:function(t){if(this.stats.oneSecondPassed()){var e=this.stats.getStatsTable();this.stats.reset(),i.a.table(3,e)()}this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this.stats.bump("fps"),this._updateAnimationProps(t);var n=this.needsRedraw({clearRedrawFlags:!0});n&&(this.stats.bump("render-fps"),this.props._customRender?this.props._customRender():this._drawLayers(n))}},{key:"_onViewStateChange",value:function(t){var e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState[t.viewId]=e,this.viewManager.setProps({viewState:e}))}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:"_onClick",value:function(t){this._pickAndCallback({callback:this.props.onLayerClick,event:t,mode:"click"})}},{key:"_onPointerMove",value:function(t){t.leftButton||t.rightButton||this._pickAndCallback({callback:this.props.onLayerHover,event:t,mode:"hover"})}},{key:"_onPointerLeave",value:function(t){this.layerManager.pickObject({x:-1,y:-1,viewports:[],radius:1,mode:"hover"}),this.props.onLayerHover&&this.props.onLayerHover(null,[],t.srcEvent)}}]),t}();function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ur(t,e){return!e||"object"!==ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t,e,n){return(lr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fr(t,e){return(fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}or.getPropTypes=function(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(Zn)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.bool,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLayerClick:t.func,onLayerHover:t.func,onLoad:t.func,debug:t.bool,drawPickingColors:t.bool,_animate:t.bool}},or.defaultProps=ir;var pr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ur(this,cr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fr(t,e)}(e,kt),function(t,e,n){e&&sr(t.prototype,e),n&&sr(t,n)}(e,[{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(){}},{key:"setState",value:function(t){lr(cr(e.prototype),"setState",this).call(this,t),this.setLayerNeedsUpdate()}},{key:"getPickingInfo",value:function(t){return t.info}},{key:"renderLayers",value:function(){return null}},{key:"getSubLayerProps",value:function(t){var e=this.props,n={opacity:e.opacity,pickable:e.pickable,visible:e.visible,parameters:e.parameters,getPolygonOffset:e.getPolygonOffset,highlightedObjectIndex:e.highlightedObjectIndex,autoHighlight:e.autoHighlight,highlightColor:e.highlightColor,coordinateSystem:e.coordinateSystem,coordinateOrigin:e.coordinateOrigin,wrapLongitude:e.wrapLongitude,modelMatrix:e.modelMatrix};return t&&Object.assign(n,t,{id:"".concat(this.props.id,"-").concat(t.id),updateTriggers:Object.assign({all:this.props.updateTriggers.all},t.updateTriggers)}),n}},{key:"_getAttributeManager",value:function(){return null}},{key:"_renderLayers",value:function(){var t=this.internalState.subLayers;t&&!this.needsUpdate()?i.a.log(3,"Composite layer reused subLayers ".concat(this),this.internalState.subLayers)():(t=Vt(t=this.renderLayers(),{filter:Boolean}),this.internalState.subLayers=t,i.a.log(2,"Composite layer rendered new subLayers ".concat(this),t)());var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){o.value.parent=this}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isComposite",get:function(){return!0}}]),e}();pr.layerName="CompositeLayer";var hr=n(61),dr=n(106),yr=n(107);function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _r(t,e){return!e||"object"!==vr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xr(t){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Or(t,e){return Number.isFinite(t)?t:e}var Sr=function(t){function e(t){var n,r=t.width,i=t.height,o=t.position,a=t.bearing,s=t.pitch,u=t.longitude,l=t.latitude,c=t.zoom,f=(t.syncBearing,t.bounds,t.startPanEventPosition),p=t.startPanPosition,h=t.startRotateCenter,d=t.startRotateViewport,y=t.startZoomPos,v=t.startZoom;return mr(this,e),(n=_r(this,xr(e).call(this,{width:r,height:i,position:o,bearing:a,pitch:s,longitude:u,latitude:l,zoom:c})))._interactiveState={startPanEventPosition:f,startPanPosition:p,startRotateCenter:h,startRotateViewport:d,startZoomPos:y,startZoom:v},n}return wr(e,xn),function(t,e,n){e&&br(t.prototype,e),n&&br(t,n)}(e,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,n=this._viewportProps,r=n.translationX,i=n.translationY;return this._getUpdatedState({startPanPosition:[r,i],startPanEventPosition:e})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._interactiveState.startPanEventPosition||n;if(!r)return this;var i=gr(this._interactiveState.startPanPosition||[],2),o=i[0],a=i[1];o=Or(o,this._viewportProps.translationX),a=Or(a,this._viewportProps.translationY);var s=e[0]-r[0],u=e[1]-r[1];return this._getUpdatedState({translationX:o+s,translationY:a-u})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanPos:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotateCenter:this._viewportProps.position,startRotateViewport:this._viewportProps})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY;if(!this._interactiveState.startRotateCenter)return this;var r=this._viewportProps,i=r.bearing,o=r.pitch;return this._getUpdatedState({bearing:i+10*e,pitch:o-10*n})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotateCenter:null,startRotateViewport:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPos:e,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps,o=i.zoom,a=i.minZoom,s=i.maxZoom,u=i.width,l=i.height,c=(i.translationX,i.translationY,this._interactiveState.startZoomPos||n||e),f=Object($t.b)(o*r,a,s);e[0],c[0],e[1],c[1],c[0],c[1];return f/o<1?this.moveBackward():this.moveForward()}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPos:null,startZoom:null})}},{key:"moveLeft",value:function(){var t=this._viewportProps.bearing-2;return this._getUpdatedState({bearing:t})}},{key:"moveRight",value:function(){var t=this._viewportProps.bearing+2;return this._getUpdatedState({bearing:t})}},{key:"moveForward",value:function(){var t=this._viewportProps.position,e=this.getDirection(),n=new ee.a(e).normalize().scale(1);return this._getUpdatedState({position:new ee.a(t).add(n)})}},{key:"moveBackward",value:function(){var t=this._viewportProps.position,e=this.getDirection(),n=new ee.a(e).normalize().scale(-1);return this._getUpdatedState({position:new ee.a(t).add(n)})}},{key:"moveUp",value:function(){var t=this._viewportProps.position;return this._getUpdatedState({position:new ee.a(t).add([0,0,1])})}},{key:"moveDown",value:function(){var t=this._viewportProps.position,e=t[2]>=1?[0,0,-1]:[0,0,0];return this._getUpdatedState({position:new ee.a(t).add(e)})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom+.2})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._viewportProps.zoom-.2})}},{key:"_getUpdatedState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}}]),e}(),Pr=function(t){function e(t){return mr(this,e),_r(this,xr(e).call(this,Sr,t))}return wr(e,hn),e}();function Cr(t){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kr(t,e){return!e||"object"!==Cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ar(t){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kr(this,Ar(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(e,ke),function(t,e,n){e&&Tr(t.prototype,e),n&&Tr(t,n)}(e,[{key:"_getViewport",value:function(t){var e=t.viewState,n=e.modelMatrix,r=void 0===n?null:n,i=e.bearing,o=e.up,a=void 0===o?[0,0,1]:o,s=function(t){var e=t.bearing,n=t.pitch;return new mn({bearing:e,pitch:n}).toVector3().normalize()}({bearing:i,pitch:89}),u=r?r.transformDirection(s):s,l=(new te.a).lookAt({eye:[0,0,0],center:u,up:a});return new ve(Object.assign({},t,{zoom:null,viewMatrix:l}))}},{key:"controller",get:function(){return this._getControllerProps({type:Pr})}}]),e}();function Rr(t){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lr(t,e){return!e||"object"!==Rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fr(t,e){return(Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}jr.displayName="FirstPersonView";var Nr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lr(this,Dr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fr(t,e)}(e,ke),function(t,e,n){e&&Ir(t.prototype,e),n&&Ir(t,n)}(e,[{key:"_getViewport",value:function(t){var e=t.viewState,n=e.bearing,r=e.pitch,i=e.position,o=e.up,a=50*e.zoom,s=function(t){var e=t.bearing,n=t.pitch;return new mn({bearing:e,pitch:n}).toVector3().normalize()}({bearing:n,pitch:r}).scale(-a).multiply(new ee.a(1,1,-1)),u=(new te.a).multiplyRight((new te.a).lookAt({eye:s,center:i,up:o}));return new ve(Object.assign({},t,{id:this.id,zoom:null,viewMatrix:u}))}}]),e}();Nr.displayName="ThirdPersonView";var Br=n(83),zr=n.n(Br),Ur=n(71),Vr=n.n(Ur),Gr=n(84),Wr=n.n(Gr),qr=n(98),Hr=n.n(qr),Xr=n(85),Zr=n.n(Xr);function Yr(t){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Jr(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $r(t,e){return!e||"object"!==Yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ei(t,e){return(ei=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ni=Math.PI/180,ri=function(t){function e(t){var n,r=t.id,i=void 0===r?"orbit-viewport":r,o=t.width,a=t.height,s=t.distance,u=t.rotationX,l=void 0===u?0:u,c=t.rotationOrbit,f=void 0===c?0:c,p=t.orbitAxis,h=void 0===p?"Z":p,d=t.lookAt,y=void 0===d?[0,0,0]:d,v=t.up,g=void 0===v?[0,1,0]:v,m=t.fov,b=void 0===m?75:m,_=t.near,x=void 0===_?1:_,w=t.far,E=void 0===w?100:w,O=t.zoom,S=void 0===O?1:O;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var P=Wr()([],[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],-l/180*Math.PI);"Z"===h?Zr()(P,P,-f/180*Math.PI):Hr()(P,P,-f/180*Math.PI);var C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];re()(C,C,[S,S,S]),oe()(C,C,[-y[0],-y[1],-y[2]]);var T=zr()([],[0,0,s],[0,0,0],g),k=b*ni,A=o/a,M=Vr()([],k,A,x,E);return(n=$r(this,ti(e).call(this,{id:i,viewMatrix:se()(T,T,se()(P,P,C)),projectionMatrix:M,width:o,height:a}))).width=o,n.height=a,n.distance=s,n.rotationX=l,n.rotationOrbit=f,n.orbitAxis=h,n.lookAt=y,n.up=g,n.fov=b,n.near=x,n.far=E,n.zoom=S,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ei(t,e)}(e,ve),function(t,e,n){e&&Qr(t.prototype,e),n&&Qr(t,n)}(e,[{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==e&&e,r=Kr(Qt(this.pixelProjectionMatrix,Jr(t).concat([1])),3),i=r[0],o=r[1],a=r[2];return[i,n?this.height-o:o,a]}},{key:"unproject",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==e&&e,r=Kr(t,3),i=r[0],o=r[1],a=r[2],s=n?this.height-o:o;return Qt(this.pixelUnprojectionMatrix,[i,s,a,1])}},{key:"getDistance",value:function(t){var e=t.boundingBox,n=t.fov;return Math.max(e[0],e[1],e[2])/2/Math.tan(n/180*Math.PI/2)}},{key:"fitBounds",value:function(t){var n=this.width,r=this.height,i=this.rotationX,o=this.rotationOrbit,a=this.orbitAxis,s=this.lookAt,u=this.up,l=this.fov;return new e({width:n,height:r,rotationX:i,rotationOrbit:o,orbitAxis:a,up:u,fov:l,near:this.near,far:this.far,zoom:this.zoom,lookAt:s,distance:this.getDistance({boundingBox:t,fov:l})})}}]),e}();function ii(t){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){return!e||"object"!==ii(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ai(t){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function si(t,e){return(si=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ci(t,e,n){return e&&li(t.prototype,e),n&&li(t,n),t}ri.displayName="OrbitViewport";var fi={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new Qe(["zoom"]),transitionInterruption:en.BREAK},pi={lookAt:[0,0,0],rotationX:0,rotationOrbit:0,fov:50,near:1,far:100,translationX:0,translationY:0,zoom:1},hi={minZoom:0,maxZoom:1/0};function di(t,e){return Number.isFinite(t)?t:e}var yi=function(){function t(e){var n=e.width,r=e.height,i=e.distance,o=e.rotationX,s=e.rotationOrbit,u=e.orbitAxis,l=e.bounds,c=e.lookAt,f=e.fov,p=e.near,h=e.far,d=e.translationX,y=e.translationY,v=e.zoom,g=e.minZoom,m=e.maxZoom,b=e.startPanViewport,_=e.startPanPos,x=e.isPanning,w=e.startRotateViewport,E=e.isRotating,O=e.startZoomViewport,S=e.startZoomPos;ui(this,t),Object(a.a)(Number.isFinite(n),"`width` must be supplied"),Object(a.a)(Number.isFinite(r),"`height` must be supplied"),Object(a.a)(Number.isFinite(i),"`distance` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,distance:i,rotationX:di(o,pi.rotationX),rotationOrbit:di(s,pi.rotationOrbit),orbitAxis:u,bounds:l,lookAt:c||pi.lookAt,fov:di(f,pi.fov),near:di(p,pi.near),far:di(h,pi.far),translationX:di(d,pi.translationX),translationY:di(y,pi.translationY),zoom:di(v,pi.zoom),minZoom:di(g,hi.minZoom),maxZoom:di(m,hi.maxZoom)}),this._interactiveState={startPanViewport:b,startPanPos:_,isPanning:x,startRotateViewport:w,isRotating:E,startZoomViewport:O,startZoomPos:S}}return ci(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,n=new ri(this._viewportProps);return this._getUpdatedOrbitState({startPanPos:e,startPanViewport:n})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos;if(this._interactiveState.isRotating)return this._getUpdatedOrbitState();var r=this._interactiveState.startPanPos||n;Object(a.a)(r,"`startPanPos` props is required");var i=this._interactiveState.startPanViewport||new ri(this._viewportProps),o=e[0]-r[0],s=e[1]-r[1],u=i.project(i.lookAt),l=i.unproject([u[0]-o,u[1]-s,u[2]]);return this._getUpdatedOrbitState({lookAt:l,isPanning:!0})}},{key:"panEnd",value:function(){return this._getUpdatedOrbitState({startPanViewport:null,startPanPos:null,isPanning:null})}},{key:"rotateStart",value:function(t){t.pos;var e=new ri(this._viewportProps);return this._getUpdatedOrbitState({startRotateViewport:e})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY;if(this._interactiveState.isPanning)return this._getUpdatedOrbitState();var r=this._interactiveState.startRotateViewport||{},i=r.rotationX,o=r.rotationOrbit;i=di(i,this._viewportProps.rotationX),o=di(o,this._viewportProps.rotationOrbit);var a=Object($t.b)(i-180*n,-89.999,89.999),s=(o-180*e)%360;return this._getUpdatedOrbitState({rotationX:a,rotationOrbit:s,isRotating:!0})}},{key:"rotateEnd",value:function(){return this._getUpdatedOrbitState({startRotateViewport:null,isRotating:null})}},{key:"shortestPathFrom",value:function(t){return Object.assign({},this._viewportProps)}},{key:"zoomStart",value:function(t){var e=t.pos,n=new ri(this._viewportProps);return this._getUpdatedOrbitState({startZoomViewport:n,startZoomPos:e})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale,i=this._viewportProps,o=i.zoom,a=i.minZoom,s=i.maxZoom,u=i.width,l=i.height,c=this._interactiveState.startZoomPos||n||e,f=this._interactiveState.startZoomViewport||new ri(this._viewportProps),p=Object($t.b)(o*r,a,s),h=e[0]-c[0],d=e[1]-c[1],y=c[0]-u/2,v=l/2-c[1],g=f.project(f.lookAt),m=g[0]-y+y*p/o+h,b=g[1]+v-v*p/o-d,_=f.unproject([m,b,g[2]]);return this._getUpdatedOrbitState({lookAt:_,zoom:p})}},{key:"zoomEnd",value:function(){return this._getUpdatedOrbitState({startZoomPos:null})}},{key:"_getUpdatedOrbitState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;return t.zoom=r>e?e:r,t.zoom=r<n?n:r,t}}]),t}(),vi=function(t){function e(t){return ui(this,e),oi(this,ai(e).call(this,yi,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&si(t,e)}(e,hn),ci(e,[{key:"_getTransitionProps",value:function(){return fi}}]),e}();function gi(t){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function bi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wi(t,e,n){return e&&xi(t.prototype,e),n&&xi(t,n),t}function Ei(t,e){return!e||"object"!==gi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oi(t){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Si(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pi(t,e)}function Pi(t,e){return(Pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ci=Math.PI/180,Ti=function(t){function e(){return _i(this,e),Ei(this,Oi(e).apply(this,arguments))}return Si(e,ve),wi(e,[{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==e&&e,r=mi(Qt(this.pixelProjectionMatrix,bi(t).concat([1])),3),i=r[0],o=r[1],a=r[2];return[i,n?this.height-o:o,a]}},{key:"unproject",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0!==e&&e,r=mi(t,3),i=r[0],o=r[1],a=r[2],s=n?this.height-o:o;return Qt(this.pixelUnprojectionMatrix,[i,s,a,1])}}]),e}(),ki=function(t){function e(){return _i(this,e),Ei(this,Oi(e).apply(this,arguments))}return Si(e,ke),wi(e,[{key:"_getViewport",value:function(t){var e=t.viewState,n=t.width||1,r=t.height||1,i=t.fov||t.fovy||e.fovy||75,o=t.near||e.near||1,a=t.far||e.far||100,s=Number.isFinite(e.aspect)?e.aspect:n/r,u=i*Ci;return new Ti({id:this.id,viewMatrix:this._getViewMatrix(t.viewState),projectionMatrix:Vr()([],u,s,o,a),x:t.x,y:t.y,width:n,height:r})}},{key:"_getViewMatrix",value:function(t){var e=t.distance,n=t.rotationX,r=void 0===n?0:n,i=t.rotationOrbit,o=void 0===i?0:i,a=t.orbitAxis,s=void 0===a?"Z":a,u=t.lookAt,l=void 0===u?[0,0,0]:u,c=t.up,f=void 0===c?[0,1,0]:c,p=t.zoom,h=void 0===p?1:p,d=Wr()([],[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],-r/180*Math.PI);"Z"===s?Zr()(d,d,-o/180*Math.PI):Hr()(d,d,-o/180*Math.PI);var y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];re()(y,y,[h,h,h]),oe()(y,y,[-l[0],-l[1],-l[2]]);var v=zr()([],[0,0,e],[0,0,0],f);return se()(v,v,se()(d,d,y)),v}},{key:"fitBounds",value:function(t,e){var n=this.width,r=this.height,i=this.fov,o=this.near,a=this.far;return this._getViewport({width:n,height:r,fov:i,near:o,far:a})}},{key:"controller",get:function(){return this._getControllerProps({type:vi})}}],[{key:"getDistance",value:function(t){var e=t.boundingBox,n=t.fov;return Math.max(e[0],e[1],e[2])/2/Math.tan(n/180*Math.PI/2)}}]),e}();function Ai(t){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ji(t,e){return!e||"object"!==Ai(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ri(t){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ii(t,e){return(Ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ki.displayName="OrbitView";var Li=Math.PI/180,Di=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ji(this,Ri(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ii(t,e)}(e,ke),function(t,e,n){e&&Mi(t.prototype,e),n&&Mi(t,n)}(e,[{key:"_getViewport",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.viewState,a=o.eye,s=o.lookAt,u=void 0===s?[0,0,0]:s,l=o.up,c=void 0===l?[0,1,0]:l,f=t.fovy||o.fovy||75,p=t.near||o.near||1,h=t.far||o.far||100,d=Number.isFinite(o.aspect)?o.aspect:r/i,y=f*Li;return new ve({id:this.id,x:e,y:n,width:r,height:i,viewMatrix:zr()([],a,u,c),projectionMatrix:Vr()([],y,d,p,h)})}}]),e}();Di.displayName="PerspectiveView";var Fi=n(111);function Ni(t){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ui(t,e){return!e||"object"!==Ni(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vi(t){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wi(t,e)}function Wi(t,e){return(Wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qi=function(t){function e(t){var n,r=t.width,i=t.height,o=t.offset,a=t.zoom,s=t.startPanPosition,u=t.startPanOffset,l=t.startRotatePosition,c=t.startRotateOffset;return Bi(this,e),(n=Ui(this,Vi(e).call(this,{width:r,height:i,offset:o,zoom:a})))._interactiveState={startPanPosition:s,startPanOffset:u,startRotatePosition:l,startRotateOffset:c},n}return Gi(e,xn),function(t,e,n){e&&zi(t.prototype,e),n&&zi(t,n)}(e,[{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,n=this._viewportProps.offset;return this._getUpdatedState({startPanPosition:e,startPanOffset:n})}},{key:"pan",value:function(t){var e=t.pos,n=this._interactiveState,r=n.startPanPosition,i=n.startPanOffset,o=new Fi.a(e).subtract(r);return this._getUpdatedState({offset:new Fi.a(i).subtract(o)})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startPanOffset:null})}},{key:"rotateStart",value:function(t){t.pos;return this}},{key:"rotate",value:function(t){t.deltaScaleX,t.deltaScaleY;return this}},{key:"rotateEnd",value:function(){return this}},{key:"zoom",value:function(t){var e=t.pos,n=t.scale,r=this._viewportProps,i=r.zoom,o=r.width,a=r.height,s=r.offset,u=Object($t.b)(i*n,.1,10),l=o/2-s[0],c=a/2-s[1],f=(e[0]-l)*(i/u-1),p=(e[1]-c)*(i/u-1);return this._getUpdatedState({zoom:u,offset:[s[0]+f,s[1]+p]})}},{key:"moveLeft",value:function(){var t=this._viewportProps.offset,e=[10,0];return this._getUpdatedState({offset:new Fi.a(t).add(e)})}},{key:"moveRight",value:function(){var t=this._viewportProps.offset,e=[-10,0];return this._getUpdatedState({offset:new Fi.a(t).add(e)})}},{key:"moveUp",value:function(){var t=this._viewportProps.offset,e=[0,10];return this._getUpdatedState({offset:new Fi.a(t).add(e)})}},{key:"moveDown",value:function(){var t=this._viewportProps.offset,e=[0,-10];return this._getUpdatedState({offset:new Fi.a(t).add(e)})}},{key:"_getUpdatedState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}}]),e}(),Hi=function(t){function e(t){var n;return Bi(this,e),(n=Ui(this,Vi(e).call(this,qi,t))).invertPan=!0,n}return Gi(e,hn),e}();function Xi(t){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yi(t,e){return!e||"object"!==Xi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ki(t){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ji(t,e){return(Ji=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Yi(this,Ki(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ji(t,e)}(e,ke),function(t,e,n){e&&Zi(t.prototype,e),n&&Zi(t,n)}(e,[{key:"_getViewport",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.viewState,a=o.eye,s=void 0===a?[0,0,1]:a,u=o.lookAt,l=void 0===u?[0,0,0]:u,c=o.up,f=void 0===c?[0,1,0]:c,p=o.offset,h=void 0===p?[0,1]:p,d=o.zoom,y=void 0===d?1:d;r=r||1,i=i||1;var v=this.props,g=v.left,m=void 0===g?(-r/2+h[0])*y:g,b=v.top,_=void 0===b?(-i/2+h[1])*y:b,x=v.right,w=void 0===x?(r/2+h[0])*y:x,E=v.bottom,O=void 0===E?(i/2+h[1])*y:E,S=v.near,P=void 0===S?1:S,C=v.far,T=void 0===C?100:C;return new ve({id:this.id,x:e,y:n,width:r,height:i,viewMatrix:(new te.a).lookAt({eye:s,lookAt:l,up:f}),projectionMatrix:(new te.a).ortho({left:m,right:w,bottom:O,top:_,near:P,far:T})})}},{key:"controller",get:function(){return this._getControllerProps({type:Hi})}}]),e}();Qi.displayName="OrthographicView";function $i(t){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eo(t,e){return!e||"object"!==$i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function no(t){return(no=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ro(t,e){return(ro=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var io=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=eo(this,no(e).call(this))).reflectivity=n,t.blur=r,t.framebuffer=null,t.setNeedsRedraw(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ro(t,e)}(e,Zn),function(t,e,n){e&&to(t.prototype,e),n&&to(t,n)}(e,[{key:"getShaders",value:function(){return{vs:"#define SHADER_NAME reflection-effect-vs\n\nattribute vec3 vertices;\n\nvarying vec2 uv;\n\nvoid main(void) {\n  uv = vertices.xy;\n  gl_Position = vec4(2. * vertices.xy - vec2(1., 1.), 1., 1.);\n}\n",fs:'#define SHADER_NAME reflection-effect-fs\n\nprecision highp float;\n\nuniform sampler2D reflectionTexture;\nuniform int reflectionTextureWidth;\nuniform int reflectionTextureHeight;\n\nuniform float reflectivity;\nuniform float blur;\n\n\nvarying vec2 uv;\n\n#define KERNEL_SIZE 7\n\n/*\n * Samples from tex with a gaussian-shaped patch, centered at uv and\n * with standard deviation sigma.  The size of the texture in\n * pixels must be specified by dim\n */\nvec4 sample_gaussian(sampler2D tex, vec2 dim, vec2 uv, float sigma) {\n  if (sigma == 0.0) {\n    return texture2D(tex, uv);\n  }\n\n  vec2 delta = 1.0 / dim;\n  vec2 top_left = uv - delta * float(KERNEL_SIZE+1) / 2.0;\n\n  vec4 color = vec4(0);\n  float sum = 0.0;\n  for (int i = 0; i <  KERNEL_SIZE; ++i) {\n    for (int j = 0; j < KERNEL_SIZE; ++j) {\n      vec2 uv2 = top_left + vec2(i, j) * delta;\n      float d = length((uv2 - uv) * dim);\n      float f = exp(-(d*d) / (2.0*sigma * sigma));\n      color += f * texture2D(tex, uv2);\n      sum += f;\n    }\n  }\n  return color / sum;\n}\n\nvoid main(void) {\n  //map blur in [0, 1] to sigma in [0, inf]\n  //alpha will determine the "steepness" of our curve.\n  //this was picked just to make the scale feel "natural"\n  //if our image is 1000 pixels wide, a blur of 0.5 should correspond\n  //to a sigma of 1 pixels\n  float alpha = 1000.0;\n  float sigma = blur / (alpha * (1.0 - blur));\n  //let this be our standard deviation in terms of screen-widths.\n  //rewrite this in terms of pixels.\n  sigma *= float(reflectionTextureWidth);\n\n\n  gl_FragColor = sample_gaussian(reflectionTexture, vec2(reflectionTextureWidth,\n    reflectionTextureHeight), vec2(uv.x, 1. - uv.y), sigma);\n  //because our canvas expects alphas to be pre-multiplied, we multiply by whole\n  //color vector by reflectivity, not just the alpha channel\n  gl_FragColor *= reflectivity;\n}\n',modules:[],shaderCache:this.context.shaderCache}}},{key:"initialize",value:function(t){var e=t.gl;t.layerManager;this.unitQuad=new s.h(e,Object.assign({},this.getShaders(),{id:"reflection-effect",geometry:new s.g({drawMode:f.a.TRIANGLE_FAN,vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])})})),this.framebuffer=new s.f(e,{depth:!0})}},{key:"preDraw",value:function(t){var e=t.gl,n=t.layerManager,r=n.context.viewport,i="undefined"!=typeof window&&window.devicePixelRatio||1;this.framebuffer.resize({width:i*r.width,height:i*r.height});var o=r.pitch;this.framebuffer.bind(),n.setViewport(new Ge(Object.assign({},r,{pitch:-180-o}))),e.clear(f.a.COLOR_BUFFER_BIT|f.a.DEPTH_BUFFER_BIT),n.drawLayers({pass:"reflection"}),n.setViewport(r),this.framebuffer.unbind()}},{key:"draw",value:function(t){t.gl,t.layerManager;this.unitQuad.render({reflectionTexture:this.framebuffer.texture,reflectionTextureWidth:this.framebuffer.width,reflectionTextureHeight:this.framebuffer.height,reflectivity:this.reflectivity,blur:this.blur})}},{key:"finalize",value:function(t){t.gl,t.layerManager}}]),e}(),oo=n(403);function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uo(t,e){return!e||"object"!==ao(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lo(t){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function co(t,e){return(co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fo=["bearing","pitch"],po=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),uo(this,lo(e).call(this,{compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&co(t,e)}(e,qe),function(t,e,n){e&&so(t.prototype,e),n&&so(t,n)}(e,[{key:"interpolateProps",value:function(t,e,n){for(var r=Object(oo.a)(t,e,n),i=0;i<fo.length;i++){var o=fo[i];r[o]=Object($t.g)(t[o]||0,e[o]||0,n)}return r}}]),e}();function ho(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function yo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vo=function(t){return t.length},go=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vo;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sortedBins=this.getSortedBins(e,n),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}return function(t,e,n){e&&yo(t.prototype,e),n&&yo(t,n)}(t,[{key:"getSortedBins",value:function(t,e){return t.reduce(function(t,n,r){var i=e(n.points);return null!==i&&void 0!==i&&t.push({i:Number.isFinite(n.index)?n.index:r,value:i,counts:n.points.length}),t},[]).sort(function(t,e){return t.value-e.value})}},{key:"getValueRange",value:function(t){var e=ho(t,2),n=e[0],r=e[1],i=this.sortedBins.length;if(!i)return[0,0];var o=Math.ceil(n/100*(i-1)),a=Math.floor(r/100*(i-1));return[this.sortedBins[o].value,this.sortedBins[a].value]}},{key:"getMaxCount",value:function(){var t=0;return this.sortedBins.forEach(function(e){return t=t>e.counts?t:e.counts}),t}},{key:"getBinMap",value:function(){return this.sortedBins.reduce(function(t,e){return Object.assign(t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e.i,e))},{})}}]),t}();function mo(t,e,n){var r=t[1]-t[0];if(r<=0)return i.a.warn("quantizeScale: invalid domain, returning range[0]")(),e[0];var o=r/e.length,a=Math.floor((n-t[0])/o);return e[Math.max(Math.min(a,e.length-1),0)]}var bo=n(37),_o=n.n(bo);function xo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oo(t,e,n){return e&&Eo(t.prototype,e),n&&Eo(t,n),t}var So=s.t.fp64ifyMatrix4,Po=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Co={dataChanged:!0,viewportChanged:!0,cellSizeChanged:!0},To=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n.id||"gpu-grid-aggregator",this.shaderCache=n.shaderCache||null,this.gl=e,this.state={},this._hasGPUSupport=Object(s.w)(e)&&Object(s.v)(this.gl,s.e.BLEND_EQUATION_MINMAX,s.e.COLOR_ATTACHMENT_RGBA32F,s.e.TEXTURE_FILTER_LINEAR_FLOAT),this._hasGPUSupport&&this._setupGPUResources()}return Oo(t,null,[{key:"getAggregationData",value:function(t){var e=t.countsData,n=t.maxCountData,r=t.pixelIndex;_o()(e.length>=4*(r+1)),_o()(4===n.length);var i=4*r;return{cellCount:e[i],cellWeight:e[i+1],totalCount:n[0],totalWeight:n[1],maxCellWieght:n[3]}}},{key:"getCellData",value:function(t){for(var e=t.countsData,n=[],r=[],i=0;i<e.length;i+=4)r.push(e[i]),n.push(e[i+1]);return{cellCounts:r,cellWeights:n}}}]),Oo(t,[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.positions,n=t.positions64xyLow,r=t.weights,o=t.changeFlags,a=void 0===o?Co:o,s=t.cellSize,u=t.viewport,l=t.width,c=t.height,f=t.countsBuffer,p=void 0===f?null:f,h=t.maxCountBuffer,d=void 0===h?null:h,y=t.gridTransformMatrix,v=void 0===y?null:y,g=t.projectPoints,m=void 0!==g&&g,b=t.useGPU,_=void 0===b||b,x=t.fp64,w=void 0!==x&&x;this.state.useGPU!==_&&(a=Co),this._setState({useGPU:_});var E={positions:e,positions64xyLow:n,weights:r,changeFlags:a,cellSize:s,viewport:u,gridTransformMatrix:(m?u.viewportMatrix:v)||Po,countsBuffer:p,maxCountBuffer:d,projectPoints:m,fp64:w};return this._updateGridSize({viewport:u,cellSize:s,width:l,height:c}),this._hasGPUSupport&&_?this._runAggregationOnGPU(E):(_&&i.a.warn("ScreenGridAggregator: GPU Aggregation not supported, falling back to CPU")(),this._runAggregationOnCPU(E))}},{key:"_getAggregateData",value:function(t){var e=t.countsBuffer,n=t.maxCountBuffer;return e=this.gridAggregationFramebuffer.readPixelsToBuffer({buffer:e,type:f.a.FLOAT}),n=this.allAggregrationFramebuffer.readPixelsToBuffer({width:1,height:1,type:f.a.FLOAT,buffer:n}),{countsBuffer:e,countsTexture:this.gridAggregationFramebuffer.texture,maxCountBuffer:n,maxCountTexture:this.allAggregrationFramebuffer.texture}}},{key:"_getAggregationModel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.gl,n=this.shaderCache;return new s.h(e,{id:"Gird-Aggregation-Model",vs:t?"#define SHADER_NAME gpu-aggregation-to-grid-vs-64\n\nattribute vec2 positions;\nattribute vec2 positions64xyLow;\nattribute float weights;\nuniform vec2 windowSize;\nuniform vec2 cellSize;\nuniform vec2 gridSize;\nuniform vec2 uProjectionMatrixFP64[16];\nuniform bool projectPoints;\n\nvarying float vWeights;\n\nvoid project_to_pixel(vec2 pos, vec2 pos64xyLow, out vec2 pixelXY64[2]) {\n\n  vec2 result64[4];\n  vec2 position64[4];\n  position64[0] = vec2(pos.x, pos64xyLow.x);\n  position64[1] = vec2(pos.y, pos64xyLow.y);\n  position64[2] = vec2(0., 0.);\n  position64[3] = vec2(1., 0.);\n  mat4_vec4_mul_fp64(uProjectionMatrixFP64, position64,\n  result64);\n\n  pixelXY64[0] = div_fp64(result64[0], result64[3]);\n  pixelXY64[1] = div_fp64(result64[1], result64[3]);\n}\n\nvoid main(void) {\n\n  vWeights = weights;\n\n  vec2 windowPos = positions;\n  vec2 windowPos64xyLow = positions64xyLow;\n  if (projectPoints) {\n    vec2 projectedXY[2];\n    project_position_fp64(windowPos, windowPos64xyLow, projectedXY);\n    windowPos.x = projectedXY[0].x;\n    windowPos.y = projectedXY[1].x;\n    windowPos64xyLow.x = projectedXY[0].y;\n    windowPos64xyLow.y = projectedXY[1].y;\n  }\n\n  vec2 pixelXY64[2];\n  project_to_pixel(windowPos, windowPos64xyLow, pixelXY64);\n\n  // Transform (0,0):windowSize -> (0, 0): gridSize\n  vec2 gridXY64[2];\n  gridXY64[0] = div_fp64(pixelXY64[0], vec2(cellSize.x, 0));\n  gridXY64[1] = div_fp64(pixelXY64[1], vec2(cellSize.y, 0));\n  float x = floor(gridXY64[0].x);\n  float y = floor(gridXY64[1].x);\n  vec2 pos = vec2(x, y);\n\n  // Transform (0,0):gridSize -> (-1, -1):(1,1)\n  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n}\n":"#define SHADER_NAME gpu-aggregation-to-grid-vs\n\nattribute vec2 positions;\nattribute float weights;\nuniform vec2 windowSize;\nuniform vec2 cellSize;\nuniform vec2 gridSize;\nuniform mat4 uProjectionMatrix;\nuniform bool projectPoints;\n\nvarying float vWeights;\n\nvec2 project_to_pixel(vec4 pos) {\n  vec4 result =  uProjectionMatrix * pos;\n  return result.xy/result.w;\n}\n\nvoid main(void) {\n\n  vWeights = weights;\n\n  vec4 windowPos = vec4(positions, 0, 1.);\n  if (projectPoints) {\n    windowPos = project_position_to_clipspace(vec3(positions, 0), vec2(0, 0), vec3(0, 0, 0));\n  }\n\n  vec2 pos = project_to_pixel(windowPos);\n\n  // Transform (0,0):windowSize -> (0, 0): gridSize\n  pos = floor(pos / cellSize);\n\n  // Transform (0,0):gridSize -> (-1, -1):(1,1)\n  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n}\n",fs:"#define SHADER_NAME gpu-aggregation-to-grid-fs\n\nprecision highp float;\n\nvarying float vWeights;\n\nvoid main(void) {\n  gl_FragColor = vec4(1., vWeights, 0, 0.0);\n}\n",modules:t?["fp64","project64"]:["project32"],shaderCache:n,vertexCount:0,drawMode:f.a.POINTS})}},{key:"_getAllAggregationModel",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this.gl,e=this.shaderCache;return new s.h(t,{id:"All-Aggregation-Model",vs:"#version 300 es\n#define SHADER_NAME gpu-aggregation-all-vs-64\n\nin vec2 position;\nuniform vec2 gridSize;\n\nout vec2 vTextureCoord;\nvoid main(void) {\n  // Map each position to single pixel\n  vec2 pos = vec2(-1.0, -1.0);\n\n  // Move to pixel center, pixel-size in screen sapce (2/gridSize) * 0.5 => 1/gridSize\n  vec2 offset = 1.0 / gridSize;\n  pos = pos + offset;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n\n  float yIndex = floor(float(gl_InstanceID) / gridSize[0]);\n  float xIndex = float(gl_InstanceID) - (yIndex * gridSize[0]);\n\n  vec2 yIndexFP64 = vec2(yIndex, 0.);\n  vec2 xIndexFP64 = vec2(xIndex, 0.);\n  vec2 gridSizeYFP64 = vec2(gridSize[1], 0.);\n  vec2 gridSizeXFP64 = vec2(gridSize[0], 0.);\n\n  vec2 texCoordXFP64 = div_fp64(yIndexFP64, gridSizeYFP64);\n  vec2 texCoordYFP64 = div_fp64(xIndexFP64, gridSizeXFP64);\n\n  vTextureCoord = vec2(texCoordYFP64.x, texCoordXFP64.x);\n}\n",fs:"#version 300 es\n#define SHADER_NAME gpu-aggregation-all-fs\n\nprecision highp float;\n\nin vec2 vTextureCoord;\nuniform sampler2D uSampler;\nout vec4 fragColor;\nvoid main(void) {\n  vec4 textureColor = texture(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n  // Red: total count, Green: total weight, Alpha: maximum wieght\n  fragColor = vec4(textureColor.r, textureColor.g, 0., textureColor.g);\n}\n",modules:["fp64"],shaderCache:e,vertexCount:1,drawMode:f.a.POINTS,isInstanced:!0,instanceCount:0,attributes:{position:new s.b(t,{size:2,data:new Float32Array([0,0])})}})}},{key:"_projectPositions",value:function(t){var e=this.state.projectedPositions;if(!e||t.changeFlags.dataChanged||t.changeFlags.viewportChanged){var n=t.positions,r=t.viewport;e=[];for(var i=0;i<n.length;i+=2){var o=wo(r.projectFlat([n[i],n[i+1]]),2),a=o[0],s=o[1];e.push(a,s)}this._setState({projectedPositions:e})}}},{key:"_renderAggregateData",value:function(t){var e=t.cellSize,n=t.viewport,r=t.gridTransformMatrix,i=t.projectPoints,o=this.state,a=o.numCol,s=o.numRow,u=o.windowSize,l=this.gl,c=this.gridAggregationFramebuffer,p=this.gridAggregationModel,h=this.allAggregrationFramebuffer,d=this.allAggregationModel,y=So(r),v=[a,s];c.bind(),l.viewport(0,0,v[0],v[1]),l.clear(l.COLOR_BUFFER_BIT),p.draw({parameters:{clearColor:[0,0,0,0],clearDepth:0,blend:!0,depthTest:!1,blendEquation:f.a.FUNC_ADD,blendFunc:[f.a.ONE,f.a.ONE]},moduleSettings:{viewport:n},uniforms:{windowSize:u,cellSize:e,gridSize:v,uProjectionMatrix:r,uProjectionMatrixFP64:y,projectPoints:i}}),c.unbind(),h.bind(),l.viewport(0,0,v[0],v[1]),l.clear(l.COLOR_BUFFER_BIT),d.draw({parameters:{clearColor:[0,0,0,0],clearDepth:0,blend:!0,depthTest:!1,blendEquation:[f.a.FUNC_ADD,f.a.MAX],blendFunc:[f.a.ONE,f.a.ONE]},uniforms:{uSampler:c.texture,gridSize:v}}),h.unbind()}},{key:"_runAggregationOnCPU",value:function(t){var e=t.positions,n=t.weights,r=t.cellSize,i=t.projectPoints,o=t.gridTransformMatrix,a=t.viewport,u=t.countsBuffer,l=t.maxCountBuffer,c=this.state,f=c.numCol,p=c.numRow,h=new Float32Array(f*p*4),d=o,y=e;i&&(this._projectPositions(t),y=this.state.projectedPositions,d=a.pixelProjectionMatrix),h.fill(0);for(var v=0,g=0,m=0,b=0;b<y.length;b+=2){var _=Object(_t.k)([y[b],y[b+1],0],d),x=_[0],w=_[1],E=n?n[b/2]:1;_o()(Number.isFinite(E));var O=Math.floor(x/r[0]),S=Math.floor(w/r[1]);if(O>=0&&O<f&&S>=0&&S<p){var P=4*(O+S*f);h[P]++,h[P+1]+=E,g+=1,m+=E,h[P+1]>v&&(v=h[P+1])}}var C=new Float32Array(4);return C[0]=g,C[1]=m,C[3]=v,u?u.subData({data:h}):u=new s.b(this.gl,{data:h}),l?l.subData({data:C}):l=new s.b(this.gl,{data:C}),{countsBuffer:u,maxCountBuffer:l,countsData:h,maxCountData:C,totalCount:g,totalWeight:m,maxWeight:v}}},{key:"_runAggregationOnGPU",value:function(t){return this._updateModels(t),this._renderAggregateData(t),this._getAggregateData(t)}},{key:"_setState",value:function(t){Object.assign(this.state,t)}},{key:"_setupGPUResources",value:function(){var t=this.gl;this.gridAggregationFramebuffer=ko(t,{id:"GridAggregation"}),this.allAggregrationFramebuffer=ko(t,{id:"AllAggregation"})}},{key:"_setupModels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.gridAggregationModel&&this.gridAggregationModel.delete(),this.gridAggregationModel=this._getAggregationModel(t),this.allAggregationModel&&this.allAggregationModel.delete(),this.allAggregationModel=this._getAllAggregationModel(t)}},{key:"_updateModels",value:function(t){var e=this.gl,n=t.positions,r=t.positions64xyLow,i=t.weights,o=t.changeFlags,a=this.state,u=a.numCol,l=a.numRow,c=this.state,f=c.positionsBuffer,p=c.positions64xyLowBuffer,h=c.weightsBuffer,d={},y=!1;if(t.fp64!==this.state.fp64&&(this._setupModels(t.fp64),this._setState({fp64:t.fp64}),t.fp64&&(y=!0)),!o.dataChanged&&f||(f&&f.delete(),h&&h.delete(),f=new s.b(e,{size:2,data:new Float32Array(n)}),h=new s.b(e,{size:1,data:new Float32Array(i)}),y=t.fp64,Object.assign(d,{positions:f,weights:h}),this.gridAggregationModel.setVertexCount(n.length/2),this._setState({positionsBuffer:f,weightsBuffer:h})),y&&(_o()(r),p&&p.delete(),p=new s.b(e,{size:2,data:new Float32Array(r)}),Object.assign(d,{positions64xyLow:p}),this._setState({positions64xyLowBuffer:p})),this.gridAggregationModel.setAttributes(d),o.cellSizeChanged||o.viewportChanged){this.allAggregationModel.setInstanceCount(u*l);var v={width:u,height:l};this.gridAggregationFramebuffer.resize(v),this.allAggregrationFramebuffer.resize(v)}}},{key:"_updateGridSize",value:function(t){var e=t.viewport,n=t.cellSize,r=t.width||e.width,i=t.height||e.height,o=Math.ceil(r/n[0]),a=Math.ceil(i/n[1]);this._setState({numCol:o,numRow:a,windowSize:[r,i]})}}]),t}();function ko(t,e){var n,r=e.id,i=new s.i(t,{data:null,format:f.a.RGBA32F,type:f.a.FLOAT,border:0,mipmaps:!1,parameters:(n={},xo(n,f.a.TEXTURE_MAG_FILTER,f.a.NEAREST),xo(n,f.a.TEXTURE_MIN_FILTER,f.a.NEAREST),n),dataFormat:f.a.RGBA});return new s.f(t,{id:r,attachments:xo({},f.a.COLOR_ATTACHMENT0,i)})}var Ao=s.t.fp64LowPart,Mo=6378e3;function jo(t){var e=t.data,n=t.getPosition,r=t.cellSizeMeters,i=t.gpuGridAggregator,a=t.gpuAggregation,s=t.fp64,u=void 0!==s&&s,l=t.coordinateSystem,c=void 0===l?o.a.LNGLAT:l,f=t.viewport,p=void 0===f?null:f,h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_o()(t&&e);for(var r,i,o=[],a=[],s=[],u=1/0,l=-1/0,c=1/0,f=-1/0,p=0;p<t.length;p++){var h=e(t[p]);i=h[0],r=h[1],o.push(i,r),a.push(Ao(i),Ao(r));var d=n?n(t[p]):1;s.push(d),Number.isFinite(r)&&Number.isFinite(i)&&(u=r<u?r:u,l=r>l?r:l,c=i<c?i:c,f=i>f?i:f)}return{positions:o,positions64xyLow:a,weights:s,yMin:u,yMax:l,xMin:c,xMax:f}}(e,n),d=[r,r],y=[0,0];if(_o()(c===o.a.LNGLAT||c===o.a.IDENTITY),c===o.a.LNGLAT){var v=function(t,e){var n=t.yMin,r=t.yMax;return function(t,e){var n=function(t){return t/Mo*(180/Math.PI)}(t),r=function(t,e){return e/Mo*(180/Math.PI)/Math.cos(t*Math.PI/180)}(e,t);return{yOffset:n,xOffset:r}}(e,(n+r)/2)}(h,r);d=[v.xOffset,v.yOffset],y=[-180,-90]}else{_o()(c===o.a.IDENTITY),y=[-p.width/2,-p.height/2]}var g=function(t){var e=t.gridData,n=t.cellSize,r=t.worldOrigin,i=e.yMin,o=e.yMax,a=e.xMin,s=e.xMax,u=Ro(a-r[0],n[0])+r[0],l=Ro(i-r[1],n[1])+r[1],c=(new te.a).translate([-1*u,-1*l,0]),f=[u,l],p=s-a+n[0],h=o-i+n[1],d=[Math.ceil(p/n[0]),Math.ceil(h/n[1])];return{gridOrigin:f,gridSize:d,width:p,height:h,gridTransformMatrix:c}}({gridData:h,cellSize:d,worldOrigin:y}),m=i.run({positions:h.positions,positions64xyLow:h.positions64xyLow,weights:h.weights,cellSize:d,width:g.width,height:g.height,gridTransformMatrix:g.gridTransformMatrix,useGPU:a,fp64:u});return{countsBuffer:m.countsBuffer,maxCountBuffer:m.maxCountBuffer,countsData:m.countsData,maxCountData:m.maxCountData,gridSize:g.gridSize,gridOrigin:g.gridOrigin,cellSize:d}}function Ro(t,e){var n=t<0?-1:1,r=n<0?Math.abs(t)+e:Math.abs(t);return(r=Math.floor(r/e)*e)*n}n.d(e,"experimental",function(){return Io}),n.d(e,"COORDINATE_SYSTEM",function(){return o.a}),n.d(e,"Deck",function(){return or}),n.d(e,"LayerManager",function(){return xe}),n.d(e,"AttributeManager",function(){return D}),n.d(e,"Layer",function(){return kt}),n.d(e,"CompositeLayer",function(){return pr}),n.d(e,"Viewport",function(){return ve}),n.d(e,"WebMercatorViewport",function(){return Ge}),n.d(e,"project",function(){return hr.a}),n.d(e,"project64",function(){return dr.a}),n.d(e,"lighting",function(){return yr.a}),n.d(e,"View",function(){return ke}),n.d(e,"MapView",function(){return Gn}),n.d(e,"FirstPersonView",function(){return jr}),n.d(e,"ThirdPersonView",function(){return Nr}),n.d(e,"OrbitView",function(){return ki}),n.d(e,"PerspectiveView",function(){return Di}),n.d(e,"OrthographicView",function(){return Qi}),n.d(e,"Controller",function(){return hn}),n.d(e,"MapController",function(){return Fn}),n.d(e,"_FirstPersonController",function(){return Pr}),n.d(e,"_OrbitController",function(){return vi}),n.d(e,"_OrthographicController",function(){return Hi}),n.d(e,"_EffectManager",function(){return qn}),n.d(e,"_Effect",function(){return Zn}),n.d(e,"_ReflectionEffect",function(){return io}),n.d(e,"TRANSITION_EVENTS",function(){return en}),n.d(e,"LinearInterpolator",function(){return Qe}),n.d(e,"FlyToInterpolator",function(){return po}),n.d(e,"log",function(){return i.a}),n.d(e,"_GPUGridAggregator",function(){return To}),n.d(e,"_pointToDensityGridData",function(){return jo});var Io={BinSorter:go,linearScale:function(t,e,n){return(n-t[0])/(t[1]-t[0])*(e[1]-e[0])+e[0]},getLinearScale:function(t,e){return function(n){return(n-t[0])/(t[1]-t[0])*(e[1]-e[0])+e[0]}},quantizeScale:mo,getQuantizeScale:function(t,e){return function(n){return mo(t,e,n)}},defaultColorRange:[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]],flattenVertices:function t(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.result,i=void 0===r?[]:r,o=n.dimensions,a=void 0===o?3:o,s=-1,u=0;++s<e.length;){var l=e[s];Array.isArray(l)||ArrayBuffer.isView(l)?t(l,{result:i,dimensions:a}):u<a&&(i.push(l),u++)}return u>0&&u<a&&i.push(0),i},fillArray:function(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,o=t.count,a=void 0===o?1:o,s=n.length,u=a*s,l=0,c=i;l<s;l++)e[c++]=n[l];for(;l<u;)l<u-l?(e.copyWithin(i+l,i,i+l),l*=2):(e.copyWithin(i+l,i,i+u-l),l=u);return e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(23),i=n(19);function o(t,e){return!e||"object"!==Object(r.a)(e)&&"function"!=typeof e?Object(i.a)(t):e}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(128);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r.a)(t,e)}},function(t,e,n){var r=n(90),i=n(35),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==a||e==s||e==o||e==u}},function(t,e,n){t.exports=n(274)},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var r=n(23),i=n(21),o=n(4),a=n(7),s=n(74);var u=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(o.a)(this,t),this.storage=function(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(a.a)(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}(),l=n(52),c=n(76),f={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function p(t){return"string"==typeof t?f[t.toUpperCase()]||f.WHITE:t}function h(t,e){if(!t)throw new Error("Assertion failed. ".concat(e))}var d={debug:s.b&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},y={enabled:!1,priority:0};function v(){}var g={};var m=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(o.a)(this,t),this.id=e,this.VERSION=s.a,this._startTs=Object(l.a)(),this._deltaTs=Object(l.a)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new u("__probe-".concat(this.id,"__"),y),this.userData={},this.timeStamp("".concat(this.id," started")),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=!0,o=!1,a=void 0;try{for(var s,u=function(){var n=s.value;"function"==typeof t[n]&&(e.find(function(t){return n===t})||(t[n]=t[n].bind(t)))},l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}(this),Object.seal(this)}return Object(a.a)(t,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number((Object(l.a)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((Object(l.a)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({priority:t}),this}},{key:"warn",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._getLogFunction({message:t,args:n,method:d.warn,once:!0})}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._getLogFunction({message:t,args:n,method:d.error})}},{key:"deprecated",value:function(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}},{key:"removed",value:function(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}},{key:"probe",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:d.log,time:!0,once:!0})}},{key:"log",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:d.debug})}},{key:"info",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:console.info})}},{key:"once",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:d.debug||d.info,once:!0})}},{key:"table",value:function(t,e,n){if(e){var r=function(t){for(var e in t)for(var n in t[e])return n||"untitled";return"empty"}(e);return this._getLogFunction({priority:t,message:e,args:n&&[n],tag:r,method:console.table||v})}return v}},{key:"image",value:function(t){var e=t.priority,n=t.image,r=t.message,i=void 0===r?"":r,o=t.scale,a=void 0===o?1:o;return e>this.getPriority()?v:s.b?this._logImageInBrowser({image:n,message:i,scale:a}):this._logImageInNode({image:n,message:i,scale:a})}},{key:"_logImageInNode",value:function(t){var e=t.image,r=(t.message,t.scale),i=void 0===r?1:r,o=null;try{o=n(257)}catch(t){}return o?function(){return o(e,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(t){return console.log(t)})}:v}},{key:"_logImageInBrowser",value:function(t){var e=t.image,n=t.message,r=void 0===n?"":n,o=t.scale,a=void 0===o?1:o;if("string"==typeof e){var s=new Image;return s.onload=function(){var t,e=Object(c.a)(s,r,a);(t=console).log.apply(t,Object(i.a)(e))},s.src=e,v}var u,l=e.nodeName||"";if("img"===l.toLowerCase())return(u=console).log.apply(u,Object(i.a)(Object(c.a)(e,r,a))),v;if("canvas"===l.toLowerCase()){var f=new Image;return f.onload=function(){var t;return(t=console).log.apply(t,Object(i.a)(Object(c.a)(f,r,a)))},f.src=e.toDataURL(),v}return v}},{key:"time",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.timeStamp||v})}},{key:"group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=(n=this._normalizeArguments({priority:t,message:e,opts:n})).collapsed;return this._getLogFunction({priority:t,message:e,opts:n,method:(r?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction({priority:t,message:"",method:console.groupEnd||v})}},{key:"withGroup",value:function(t,e,n){var r=this._normalizeArguments({priority:t,message:e});this.group(r);try{n()}finally{this.groupEnd(r.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return 0===(t=this._normalizePriority(t))||this.isEnabled()&&this.getPriority()>=t}},{key:"_getElapsedTime",value:function(){var t=this.getTotal(),e=this.getDelta();return this._deltaTs=Object(l.a)(),{total:t,delta:e}}},{key:"_getLogFunction",value:function(t){if(this._shouldLog(t.priority)){var e=t.method;t=this._parseArguments(t),h(e);var n=t.message,r=t.tag||t.message;if(t.once){if(g[r])return v;g[r]=Object(l.a)()}return n=this._decorateMessage(n,t),e.bind.apply(e,[console,n].concat(Object(i.a)(t.args)))}return v}},{key:"_parseArguments",value:function(t){var e=this._normalizeArguments(t),n=this._getElapsedTime(),r=n.delta,i=n.total;return Object.assign(t,e,{delta:r,total:i})}},{key:"_normalizePriority",value:function(t){var e;switch(Object(r.a)(t)){case"number":e=t;break;case"object":e=t.priority||0;break;default:e=0}return h(Number.isFinite(e)&&e>=0),e}},{key:"_normalizeArguments",value:function(t){var e=t.priority,n=t.message,i=t.args,o=void 0===i?[]:i,a=t.opts,s={priority:this._normalizePriority(e),message:n,args:o};switch(Object(r.a)(e)){case"string":case"function":void 0!==n&&o.unshift(n),Object.assign(s,{message:e});break;case"object":Object.assign(s,e)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),h("string"==typeof s.message||"object"===Object(r.a)(s.message)),Object.assign(s,a)}},{key:"_decorateMessage",value:function(t,e){if("string"==typeof t){var n="";if(e.time){var r=this._getElapsedTime().total;n=Object(c.c)(Object(c.b)(r))}t=function(t,e,n){return s.b||"string"!=typeof t||(e&&(e=p(e),t="[".concat(e,"m").concat(t,"[39m")),n&&(e=p(n),t="[".concat(n+10,"m").concat(t,"[49m"))),t}(t=e.time?"".concat(this.id,": ").concat(n,"  ").concat(t):"".concat(this.id,": ").concat(t),e.color,e.background)}return t}},{key:"priority",set:function(t){return this._storage.updateConfiguration({priority:t}),this},get:function(){return this._storage.config.priority}}]),t}();m.VERSION=s.a;e.a=new m({id:"deck"}).enable()},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"f",function(){return a}),n.d(e,"h",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"b",function(){return f}),n.d(e,"g",function(){return p}),n.d(e,"e",function(){return h});var r={};function i(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function o(t){return Math.round(t/r.EPSILON)*r.EPSILON}function a(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,n=void 0===e?r.precision||4:e;return t=o(t),parseFloat(t.toPrecision(n))}function s(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function u(t,e){if(s(t)){for(var n=function(t){return t.clone?t.clone():new Array(t)}(t),r=0;r<n.length;++r)n[r]=e(n[r],r,n);return n}return e(t)}function l(t){return u(t,function(t){return t/180*Math.PI})}function c(t){return u(t,function(t){return 180*t/Math.PI})}function f(t,e,n){return u(t,function(t){return Math.max(e,Math.min(n,t))})}function p(t,e,n){return s(t)?t.map(function(t,r){return p(t,e[r],n)}):n*e+(1-n)*t}function h(t,e){if(s(t)&&s(e)){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!h(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}r.EPSILON=1e-12,r.debug=!0,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={LNGLAT:1,LNGLAT_EXPERIMENTAL:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0}},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n(4),i=n(7),o=n(13),a=n(11),s=n(14),u=n(19),l=n(32),c=n(54),f=n(10),p=n(48),h=n(8),d=n(6),y=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),(n=Object(o.a)(this,Object(a.a)(e).call(this,t,i))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=i.target||(n.gl.webgl2?36662:34962),n._initialize(i),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(e,t),Object(i.a)(e,[{key:"getElementCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/c.a.getBytesPerElement(t))}},{key:"getVertexCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/c.a.getBytesPerVertex(t))}},{key:"initialize",value:function(t){return this._initialize(t)}},{key:"setProps",value:function(t){return"data"in t&&this.setData(t),this}},{key:"setAccessor",value:function(t){return this.accessor=t,this}},{key:"reallocate",value:function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}},{key:"setData",value:function(t){return this.initialize(t)}},{key:"subData",value:function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,n=e.data,r=e.offset,i=void 0===r?0:r,o=e.srcOffset,a=void 0===o?0:o,s=t.byteLength||t.length;Object(d.a)(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==a||void 0!==s?(Object(f.d)(this.gl),this.gl.bufferSubData(this.target,i,n,a,s)):this.gl.bufferSubData(u,i,n),this.gl.bindBuffer(u,null),this.debugData=null,this.accessor.type||this.setAccessor(new c.a(this.accessor,{type:Object(p.b)(n)})),this}},{key:"copyData",value:function(t){var e=t.sourceBuffer,n=t.readOffset,r=void 0===n?0:n,i=t.writeOffset,o=void 0===i?0:i,a=t.size,s=this.gl;return Object(f.d)(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,o,a),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dstData,n=void 0===e?null:e,r=t.srcByteOffset,i=void 0===r?0:r,o=t.dstOffset,a=void 0===o?0:o,s=t.length,u=void 0===s?0:s;Object(f.d)(this.gl);var l,c,h=Object(p.c)(this.accessor.type||5126,{clamped:!1}),y=this._getAvailableElementCount(i),v=a;n?l=(c=n.length)-v:c=v+(l=Math.min(y,u||y));var g=Math.min(y,l);return u=u||g,Object(d.a)(u<=g),n=n||new h(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,a,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,o=t.offset,a=void 0===o?0:o,s=t.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,a,s):(Object(d.a)(0===a),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r;return 35345===n||35982===n?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t.bytes&&h.g.deprecated("bytes","byteLength");var e=t.byteLength||t.bytes||0;return this.usage=t.usage||35044,this.setAccessor(new c.a(t,t.accessor)),t.data?this._setData(t.data):this._setByteLength(e)}},{key:"_setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(d.a)(ArrayBuffer.isView(t));var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,t,e),this.gl.bindBuffer(n,null),this.usage=e,this.debugData=t.slice(0,10),this.byteLength=t.byteLength,this.bytesUsed=t.byteLength;var r=Object(p.b)(t);return Object(d.a)(r),this.setAccessor(new c.a(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(d.a)(t>=0);var n=t;0===t&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.byteLength=t,this.bytesUsed=t,this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(t){var e=t/Object(p.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}},{key:"updateAccessor",value:function(t){return h.g.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)"),this.accessor=new c.a(this.accessor,t),this}},{key:"setByteLength",value:function(t){return h.g.deprecated("setByteLength","reallocate"),this.reallocate(t)}},{key:"data",get:function(){h.g.removed("Buffer.data","N/A","v6.0")}},{key:"bytes",get:function(){return h.g.deprecated("Buffer.bytes","Buffer.byteLength","v6.1"),this.byteLength}}]),e}(l.a)},function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"c",function(){return p});var r=n(20),i=n(21),o=n(82),a=n(63);n.d(e,"a",function(){return a.c});var s=n(8),u=n(6),l={framebuffer:function(t,e){var n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:function(t,e){return e?t.enable(3042):t.disable(3042)},blendColor:function(t,e){return t.blendColor.apply(t,Object(i.a)(e))},blendEquation:function(t,e){e=c(e)?e:[e,e],t.blendEquationSeparate.apply(t,Object(i.a)(e))},blendFunc:function(t,e){e=c(e)&&2===e.length?Object(i.a)(e).concat(Object(i.a)(e)):e,t.blendFuncSeparate.apply(t,Object(i.a)(e))},clearColor:function(t,e){return t.clearColor.apply(t,Object(i.a)(e))},clearDepth:function(t,e){return t.clearDepth(e)},clearStencil:function(t,e){return t.clearStencil(e)},colorMask:function(t,e){return t.colorMask.apply(t,Object(i.a)(e))},cull:function(t,e){return e?t.enable(2884):t.disable(2884)},cullFace:function(t,e){return t.cullFace(e)},depthTest:function(t,e){return e?t.enable(2929):t.disable(2929)},depthFunc:function(t,e){return t.depthFunc(e)},depthMask:function(t,e){return t.depthMask(e)},depthRange:function(t,e){return t.depthRange.apply(t,Object(i.a)(e))},dither:function(t,e){return e?t.enable(3024):t.disable(3024)},derivativeHint:function(t,e){t.hint(35723,e)},frontFace:function(t,e){return t.frontFace(e)},mipmapHint:function(t,e){return t.hint(33170,e)},lineWidth:function(t,e){return t.lineWidth(e)},polygonOffsetFill:function(t,e){return e?t.enable(32823):t.disable(32823)},polygonOffset:function(t,e){return t.polygonOffset.apply(t,Object(i.a)(e))},sampleCoverage:function(t,e){return t.sampleCoverage.apply(t,Object(i.a)(e))},scissorTest:function(t,e){return e?t.enable(3089):t.disable(3089)},scissor:function(t,e){return t.scissor.apply(t,Object(i.a)(e))},stencilTest:function(t,e){return e?t.enable(2960):t.disable(2960)},stencilMask:function(t,e){var n=e=c(e)?e:[e,e],i=Object(r.a)(n,2),o=i[0],a=i[1];t.stencilMaskSeparate(1028,o),t.stencilMaskSeparate(1029,a)},stencilFunc:function(t,e){var n=e=c(e)&&3===e.length?Object(i.a)(e).concat(Object(i.a)(e)):e,o=Object(r.a)(n,6),a=o[0],s=o[1],u=o[2],l=o[3],f=o[4],p=o[5];t.stencilFuncSeparate(1028,a,s,u),t.stencilFuncSeparate(1029,l,f,p)},stencilOp:function(t,e){var n=e=c(e)&&3===e.length?Object(i.a)(e).concat(Object(i.a)(e)):e,o=Object(r.a)(n,6),a=o[0],s=o[1],u=o[2],l=o[3],f=o[4],p=o[5];t.stencilOpSeparate(1028,a,s,u),t.stencilOpSeparate(1029,l,f,p)},viewport:function(t,e){return t.viewport.apply(t,Object(i.a)(e))}};function c(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function f(t,e){for(var n in Object(a.d)(t,e),e){var r=l[n];r&&r(t,e[n],n)}}function p(t,e,n){if(Object(s.d)(e))return n(t);var r,i=e.nocatch,a=void 0===i||i;if(Object(u.a)(!e.frameBuffer),Object(o.c)(t),f(t,e),a)r=n(t),Object(o.b)(t);else try{r=n(t)}finally{Object(o.b)(t)}return r}},function(t,e,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function(t,e){try{return function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var a,s,u,l=r(e),c=r(n);if(l&&c){if((s=e.length)!=n.length)return!1;for(a=s;0!=a--;)if(!t(e[a],n[a]))return!1;return!0}if(l!=c)return!1;var f=e instanceof Date,p=n instanceof Date;if(f!=p)return!1;if(f&&p)return e.getTime()==n.getTime();var h=e instanceof RegExp,d=n instanceof RegExp;if(h!=d)return!1;if(h&&d)return e.toString()==n.toString();var y=i(e);if((s=y.length)!==i(n).length)return!1;for(a=s;0!=a--;)if(!o.call(n,y[a]))return!1;for(a=s;0!=a--;)if(!("_owner"===(u=y[a])&&e.$$typeof||t(e[u],n[u])))return!1;return!0}return e!=e&&n!=n}(t,e)}catch(t){if(t.message&&t.message.match(/stack|recursion/i)||-2146828260===t.number)return console.warn("Warning: react-fast-compare does not handle circular references.",t.name,t.message),!1;throw t}}},function(t,e,n){var r=n(174),i=n(151),o=n(117),a=n(46),s=n(69),u=n(140),l=n(116),c=n(141),f="[object Map]",p="[object Set]",h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||c(t)||o(t)))return!t.length;var e=i(t);if(e==f||e==p)return!t.size;if(l(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},i=r.window||r.self||r.global,o=r.global||r.self||r.window}).call(this,n(55))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="undefined"!=typeof window&&window.addEventListener,o=new Map,a=function(){return i&&window.__SEER_INITIALIZED__},s=function(t,e){var n=o.get(t),r=Date.now();return!!(n&&r-n<e)||(o.set(t,r),!1)},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&a()){var n=new Set,o=JSON.stringify(e,function(t){return function(e,n){if(!n||"object"!==(void 0===n?"undefined":r(n))||!t.has(n))return t.add(n),Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}}(n));try{window.postMessage({type:t,payload:o,source:"seer-agent"},"*")}catch(t){if(s("seer-log",2e3))return;console.log(t)}}},l=new Map,c=function(t){if(t&&t.data&&"seer-core"===t.data.source){var e=t.data,n=e.type,r=e.payload,i=l.get(n);i&&i.forEach(function(t){return t(r)})}},f=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",c),window.__SEER_LISTENER__=!0)};e.default={send:u,throttle:s,isReady:a,list:function(t,e){return u("LIST",{key:t,data:e})},listItem:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u("LIST_ITEM",{key:t,itemKey:e,data:n})},updateItem:function(t,e,n,r){return u("UPDATE_ITEM",{key:t,itemKey:e,path:n,data:r})},multiUpdate:function(t,e,n){return u("MULTI_UPDATE_ITEM",{key:t,itemKey:e,array:n})},deleteItem:function(t,e){return u("DELETE_ITEM",{key:t,itemKey:e})},addLog:function(t,e,n){return u("ADD_LOG",{key:t,itemKey:e,msg:n})},listeners:l,listenFor:function(t,e){if(i){if(!t||!e)throw new Error("Please provide a type and callback");l.has(t)||l.set(t,[]),window.__SEER_LISTENER__||f(),l.get(t).push(e)}},removeListener:function(t){l.forEach(function(e,n){l.set(n,e.filter(function(e){return e!==t}))})},init:f,clean:function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",c),delete window.__SEER_LISTENER__)}}},function(t,e,n){"use strict";n.d(e,"l",function(){return P}),n.d(e,"i",function(){return C}),n.d(e,"g",function(){return T}),n.d(e,"j",function(){return k}),n.d(e,"c",function(){return A}),n.d(e,"b",function(){return M}),n.d(e,"a",function(){return j}),n.d(e,"f",function(){return R}),n.d(e,"e",function(){return I}),n.d(e,"d",function(){return L}),n.d(e,"k",function(){return D}),n.d(e,"h",function(){return F});var r=n(20),i=n(100),o=n(50),a=n(71),s=n.n(a),u=n(53),l=n.n(u),c=n(57),f=n.n(c),p=n(84),h=n.n(p),d=n(85),y=n.n(d),v=n(227),g=n.n(v),m=n(88),b=Math.PI,_=b/4,x=b/180,w=180/b,E=512,O=4003e4,S=1.5;function P(t){return Math.pow(2,t)}function C(t){return Math.log2(t)}function T(t,e){var n=Object(r.a)(t,2),i=n[0],o=n[1]*x;return[(e*=E)*(i*x+b)/(2*b),e*(b-Math.log(Math.tan(_+.5*o)))/(2*b)]}function k(t,e){var n=Object(r.a)(t,2),i=n[0],o=n[1],a=i/(e*=E)*(2*b)-b,s=2*(Math.atan(Math.exp(b-o/e*(2*b)))-_);return[a*w,s*w]}function A(t){var e=t.latitude;Object(m.a)(Number.isFinite(e));var n=Math.cos(e*x);return C(O*n)-9}function M(t){var e=t.latitude,n=t.longitude,r=t.zoom,i=t.scale,o=t.highPrecision,a=void 0!==o&&o;i=void 0!==i?i:P(r),Object(m.a)(Number.isFinite(e)&&Number.isFinite(n)&&Number.isFinite(i));var s={},u=E*i,l=Math.cos(e*x),c=u/360,f=c/l,p=u/O/l;if(s.pixelsPerMeter=[p,-p,p],s.metersPerPixel=[1/p,-1/p,1/p],s.pixelsPerDegree=[c,-f,p],s.degreesPerPixel=[1/c,-1/f,1/p],a){var h=x*Math.tan(e*x)/l,d=c*h/2,y=u/O*h,v=y/f*p;s.pixelsPerDegree2=[0,-d,y],s.pixelsPerMeter2=[v,0,v]}return s}function j(t,e){var n=Object(r.a)(t,3),i=n[0],o=n[1],a=n[2],s=Object(r.a)(e,3),u=s[0],l=s[1],c=s[2],f=M({longitude:i,latitude:o,scale:1,highPrecision:!0}),p=f.pixelsPerMeter,h=f.pixelsPerMeter2,d=T(t,1);d[0]+=u*(p[0]+h[0]*l),d[1]+=l*(p[1]+h[1]*l);var y=k(d,1),v=(a||0)+(c||0);return Number.isFinite(a)||Number.isFinite(c)?[y[0],y[1],v]:y}function R(t){var e=t.height,n=t.pitch,r=t.bearing,a=t.altitude,s=t.center,u=void 0===s?null:s,c=t.flipY,p=void 0!==c&&c,d=Object(o.a)();return f()(d,d,[0,0,-a]),l()(d,d,[1,1,1/e]),h()(d,d,-n*x),y()(d,d,r*x),p&&l()(d,d,[1,-1,1]),u&&f()(d,d,new i.a(u).negate()),d}function I(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?S:r,o=t.pitch,a=void 0===o?0:o,s=t.nearZMultiplier,u=void 0===s?1:s,l=t.farZMultiplier,c=void 0===l?1:l,f=a*x,p=Math.atan(.5/i),h=Math.sin(p)*i/Math.sin(Math.PI/2-f-p),d=Math.cos(Math.PI/2-f)*h+i;return{fov:2*Math.atan(n/2/i),aspect:e/n,focalDistance:i,near:u,far:d*c}}function L(t){var e=t.width,n=t.height,r=t.pitch,i=I({width:e,height:n,altitude:t.altitude,pitch:r,nearZMultiplier:t.nearZMultiplier,farZMultiplier:t.farZMultiplier}),o=i.fov,a=i.aspect,u=i.near,l=i.far;return s()([],o,a,u,l)}function D(t,e){var n=Object(r.a)(t,3),i=n[0],a=n[1],s=n[2],u=void 0===s?0:s;return Object(m.a)(Number.isFinite(i)&&Number.isFinite(a)&&Number.isFinite(u)),Object(o.d)(e,[i,a,u,1])}function F(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Object(r.a)(t,3),a=i[0],s=i[1],u=i[2];if(Object(m.a)(Number.isFinite(a)&&Number.isFinite(s)),Number.isFinite(u))return Object(o.d)(e,[a,s,u,1]);var l=Object(o.d)(e,[a,s,0,1]),c=Object(o.d)(e,[a,s,1,1]),f=l[2],p=c[2],h=f===p?0:((n||0)-f)/(p-f);return g()([],l,c,h)}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(4),i=n(7),o=n(133),a=n(10),s=n(8),u=n(6),l="Resource subclass must define virtual methods",c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),Object(a.e)(e);var i=n.id,o=n.userData,u=void 0===o?{}:o;this.gl=e,this.id=i||Object(s.i)(this.constructor.name),this.userData=u,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return Object(i.a)(t,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,e=void 0!==t&&t,n=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),n&&e&&n.filter(Boolean).forEach(function(t){t.delete()}),this}},{key:"bind",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(a.j)(this.gl,t),Object(u.a)(t);var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=Object(a.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){var i=n.webgl1,o="webgl2"in n?n.webgl2:n.webgl1;return r?o:i}}return this._getParameter(t,e)}},{key:"getParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=e.parameters,r=e.keys,i=this.constructor.PARAMETERS||{},o=Object(a.n)(this.gl),s={},u=n||Object.keys(i),l=!0,c=!1,f=void 0;try{for(var p,h=u[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var d=p.value,y=i[d];if(y&&(!("webgl2"in y)||o)&&(!("extension"in y)||this.gl.getExtension(y.extension))){var v=r?Object(a.i)(this.gl,d):d;s[v]=this.getParameter(d,t),r&&"GLenum"===y.type&&(s[v]=Object(a.i)(this.gl,s[v]))}}}catch(t){c=!0,f=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}return s}},{key:"setParameter",value:function(t,e){t=Object(a.j)(this.gl,t),Object(u.a)(t);var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=Object(a.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=Object(a.j)(e))}return this._setParameter(t,e),this}},{key:"setParameters",value:function(t){for(var e in t)this.setParameter(e,t[e]);return this}},{key:"stubRemovedMethods",value:function(t,e,n){return Object(s.h)(this,t,e,n)}},{key:"initialize",value:function(t){}},{key:"_createHandle",value:function(){throw new Error(l)}},{key:"_deleteHandle",value:function(){throw new Error(l)}},{key:"_bindHandle",value:function(){throw new Error(l)}},{key:"_getOptsFromHandle",value:function(){throw new Error(l)}},{key:"_getParameter",value:function(t,e){throw new Error(l)}},{key:"_setParameter",value:function(t,e){throw new Error(l)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var t=this.constructor.name,e=o.default.stats;e.resourceCount=e.resourceCount||0,e.resourceMap=e.resourceMap||{},e.resourceCount++,e.resourceMap[t]=e.resourceMap[t]||{created:0,active:0},e.resourceMap[t].created++,e.resourceMap[t].active++}},{key:"_removeStats",value:function(){var t=this.constructor.name;o.default.stats.resourceMap[t].active--}},{key:"handle",get:function(){return this._handle}}]),t}()},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],y=e[12],v=e[13],g=e[14],m=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*s+x*f+w*y,t[1]=b*i+_*u+x*p+w*v,t[2]=b*o+_*l+x*h+w*g,t[3]=b*a+_*c+x*d+w*m,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*s+x*f+w*y,t[5]=b*i+_*u+x*p+w*v,t[6]=b*o+_*l+x*h+w*g,t[7]=b*a+_*c+x*d+w*m,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*s+x*f+w*y,t[9]=b*i+_*u+x*p+w*v,t[10]=b*o+_*l+x*h+w*g,t[11]=b*a+_*c+x*d+w*m,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*s+x*f+w*y,t[13]=b*i+_*u+x*p+w*v,t[14]=b*o+_*l+x*h+w*g,t[15]=b*a+_*c+x*d+w*m,t}},,function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=n(261),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function c(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var f=t.exports=g,p=/\s*function\s+([^\(\s]*)\s*/;function h(t){if(o.isFunction(t)){if(u)return t.name;var e=t.toString().match(p);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function y(t){if(u||!o.isFunction(t))return o.inspect(t);var e=h(t);return"[Function"+(e?": "+e:"")+"]"}function v(t,e,n,r,i){throw new f.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function g(t,e){t||v(t,!0,e,"==",f.ok)}function m(t,e,n,a){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(c(t)&&c(e)&&l(t)===l(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(a=a||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=b(t),a=b(e);if(i&&!a||!i&&a)return!1;if(i)return t=s.call(t),e=s.call(e),m(t,e,n);var u,l,c=w(t),f=w(e);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),l=c.length-1;l>=0;l--)if(c[l]!==f[l])return!1;for(l=c.length-1;l>=0;l--)if(u=c[l],!m(t[u],e[u],n,r))return!1;return!0}(t,e,n,a))}return n?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&v(i,n,"Missing expected exception"+r);var a="string"==typeof r,s=!t&&o.isError(i),u=!t&&i&&!n;if((s&&a&&_(i,n)||u)&&v(i,n,"Got unwanted exception"+r),t&&i&&n&&!_(i,n)||!t&&i)throw i}f.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return d(y(t.actual),128)+" "+t.operator+" "+d(y(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=h(e),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},o.inherits(f.AssertionError,Error),f.fail=v,f.ok=g,f.equal=function(t,e,n){t!=e&&v(t,e,n,"==",f.equal)},f.notEqual=function(t,e,n){t==e&&v(t,e,n,"!=",f.notEqual)},f.deepEqual=function(t,e,n){m(t,e,!1)||v(t,e,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,n){m(t,e,!0)||v(t,e,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,n){m(t,e,!1)&&v(t,e,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,n,r){m(e,n,!0)&&v(e,n,r,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,n){t!==e&&v(t,e,n,"===",f.strictEqual)},f.notStrictEqual=function(t,e,n){t===e&&v(t,e,n,"!==",f.notStrictEqual)},f.throws=function(t,e,n){x(!0,t,e,n)},f.doesNotThrow=function(t,e,n){x(!1,t,e,n)},f.ifError=function(t){if(t)throw t};var w=Object.keys||function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e}}).call(this,n(55))},function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return p}),n.d(e,"a",function(){return h});var r=n(4),i=n(29),o=null,a=function(){throw new Error("luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.")};if(!n(96).a)try{a=n(259),o=n(260)}catch(t){}var s=function t(){Object(r.a)(this,t)},u=o||i.a,l=u.WebGLRenderingContext,c=void 0===l?s:l,f=(u.WebGLProgram,u.WebGLShader,u.WebGLBuffer),p=void 0===f?s:f;u.WebGLFramebuffer,u.WebGLRenderbuffer,u.WebGLTexture,u.WebGLUniformLocation,u.WebGLActiveInfo,u.WebGLShaderPrecisionFormat;var h=i.a.WebGL2RenderingContext||function t(){Object(r.a)(this,t)};i.a.Image},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s});var r=n(6),i=n(49);function o(t,e){if("string"!=typeof e)return e;var n=Number(e);if(!isNaN(n))return n;var i=t[e=e.replace(/^.*\./,"")];return Object(r.a)(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function a(t,e){for(var n in e=Number(e),t)if(t[n]===e)return"GL.".concat(n);return String(e)}function s(t,e){return void 0===e&&i.a.removed("glKey(value)","glKey(gl, value)","6.0")(),a(t,e)}},function(t,e,n){var r=n(90),i=n(198),o=n(77),a="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,c=u.hasOwnProperty,f=l.call(Object);t.exports=function(t){if(!o(t)||r(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}},function(t,e,n){var r=n(172),i=n(174),o=n(69);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(e.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0}},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){var r=n(197),i=n(69),o=n(354),a=n(194),s=n(86),u=Math.max;t.exports=function(t,e,n,l){t=i(t)?t:s(t),n=n&&!l?a(n):0;var c=t.length;return n<0&&(n=u(c+n,0)),o(t)?n<=c&&t.indexOf(e,n)>-1:!!c&&r(t,e,n)>-1}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return s});var r="Failed to deduce GL constant from typed array";function i(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(r)}}function o(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===e||e;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(t){var e=t.data,n=t.width,r=t.height,i=t.bytesPerPixel,o=void 0===i?4:i,a=t.temp,s=n*o;a=a||new Uint8Array(s);for(var u=0;u<r/2;++u){var l=u*s,c=(r-u-1)*s;a.set(e.subarray(l,l+s)),e.copyWithin(l,c,c+s),e.set(a,c)}}function s(t){for(var e=t.data,n=t.width,r=t.height,i=Math.round(n/2),o=Math.round(r/2),a=new Uint8Array(i*o*4),s=0;s<o;s++)for(var u=0;u<i;u++)for(var l=0;l<4;l++)a[4*(s*i+u)+l]=e[4*(2*s*n+2*u)+l];return{data:a,width:i,height:o}}},function(t,e,n){"use strict";var r=n(23),i=n(21),o=n(4),a=n(7),s=n(126),u="2.0.1",l=Object(s.a)();var c=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(o.a)(this,t),this.storage=function(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(a.a)(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}(),f=n(60);function p(){if(!l){var t=f.a.hrtime();return t[0]+t[1]/1e6}return f.b.performance?f.b.performance.now():Date.now()}p();function h(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));var o=t.width*n,a=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}var d={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function y(t){return"string"==typeof t?d[t.toUpperCase()]||d.WHITE:t}function v(t,e){if(!t)throw new Error("Assertion failed. ".concat(e))}var g={debug:l&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},m={enabled:!1,priority:0};function b(){}var _={};var x=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(o.a)(this,t),this.id=e,this.VERSION=u,this._startTs=p(),this._deltaTs=p(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new c("__probe-".concat(this.id,"__"),m),this.userData={},this.timeStamp("".concat(this.id," started")),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=!0,o=!1,a=void 0;try{for(var s,u=function(){var n=s.value;"function"==typeof t[n]&&(e.find(function(t){return n===t})||(t[n]=t[n].bind(t)))},l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}(this),Object.seal(this)}return Object(a.a)(t,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number((p()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((p()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({priority:t}),this}},{key:"warn",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._getLogFunction({message:t,args:n,method:g.warn,once:!0})}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._getLogFunction({message:t,args:n,method:g.error})}},{key:"deprecated",value:function(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}},{key:"removed",value:function(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}},{key:"probe",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:g.log,time:!0,once:!0})}},{key:"log",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:g.debug})}},{key:"info",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:console.info})}},{key:"once",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:t,message:e,args:r,method:g.debug||g.info,once:!0})}},{key:"table",value:function(t,e,n){if(e){var r=function(t){for(var e in t)for(var n in t[e])return n||"untitled";return"empty"}(e);return this._getLogFunction({priority:t,message:e,args:n&&[n],tag:r,method:console.table||b})}return b}},{key:"image",value:function(t){var e=t.priority,n=t.image,r=t.message,i=void 0===r?"":r,o=t.scale,a=void 0===o?1:o;return e>this.getPriority()?b:l?this._logImageInBrowser({image:n,message:i,scale:a}):this._logImageInNode({image:n,message:i,scale:a})}},{key:"_logImageInNode",value:function(t){var e=t.image,r=(t.message,t.scale),i=void 0===r?1:r,o=null;try{o=n(258)}catch(t){}return o?function(){return o(e,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(t){return console.log(t)})}:b}},{key:"_logImageInBrowser",value:function(t){var e=t.image,n=t.message,r=void 0===n?"":n,o=t.scale,a=void 0===o?1:o;if("string"==typeof e){var s=new Image;return s.onload=function(){var t,e=h(s,r,a);(t=console).log.apply(t,Object(i.a)(e))},s.src=e,b}var u,l=e.nodeName||"";if("img"===l.toLowerCase())return(u=console).log.apply(u,Object(i.a)(h(e,r,a))),b;if("canvas"===l.toLowerCase()){var c=new Image;return c.onload=function(){var t;return(t=console).log.apply(t,Object(i.a)(h(c,r,a)))},c.src=e.toDataURL(),b}return b}},{key:"time",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.timeStamp||b})}},{key:"group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=(n=this._normalizeArguments({priority:t,message:e,opts:n})).collapsed;return this._getLogFunction({priority:t,message:e,opts:n,method:(r?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction({priority:t,message:"",method:console.groupEnd||b})}},{key:"withGroup",value:function(t,e,n){var r=this._normalizeArguments({priority:t,message:e});this.group(r);try{n()}finally{this.groupEnd(r.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return 0===(t=this._normalizePriority(t))||this.isEnabled()&&this.getPriority()>=t}},{key:"_getElapsedTime",value:function(){var t=this.getTotal(),e=this.getDelta();return this._deltaTs=p(),{total:t,delta:e}}},{key:"_getLogFunction",value:function(t){if(this._shouldLog(t.priority)){var e=t.method;t=this._parseArguments(t),v(e);var n=t.message,r=t.tag||t.message;if(t.once){if(_[r])return b;_[r]=p()}return n=this._decorateMessage(n,t),e.bind.apply(e,[console,n].concat(Object(i.a)(t.args)))}return b}},{key:"_parseArguments",value:function(t){var e=this._normalizeArguments(t),n=this._getElapsedTime(),r=n.delta,i=n.total;return Object.assign(t,e,{delta:r,total:i})}},{key:"_normalizePriority",value:function(t){var e;switch(Object(r.a)(t)){case"number":e=t;break;case"object":e=t.priority||0;break;default:e=0}return v(Number.isFinite(e)&&e>=0),e}},{key:"_normalizeArguments",value:function(t){var e=t.priority,n=t.message,i=t.args,o=void 0===i?[]:i,a=t.opts,s={priority:this._normalizePriority(e),message:n,args:o};switch(Object(r.a)(e)){case"string":case"function":void 0!==n&&o.unshift(n),Object.assign(s,{message:e});break;case"object":Object.assign(s,e)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),v("string"==typeof s.message||"object"===Object(r.a)(s.message)),Object.assign(s,a)}},{key:"_decorateMessage",value:function(t,e){if("string"==typeof t){var n="";if(e.time)n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}(this._getElapsedTime().total));t=function(t,e,n){return l||"string"!=typeof t||(e&&(e=y(e),t="[".concat(e,"m").concat(t,"[39m")),n&&(e=y(n),t="[".concat(n+10,"m").concat(t,"[49m"))),t}(t=e.time?"".concat(this.id,": ").concat(n,"  ").concat(t):"".concat(this.id,": ").concat(t),e.color,e.background)}return t}},{key:"priority",set:function(t){return this._storage.updateConfiguration({priority:t}),this},get:function(){return this._storage.config.priority}}]),t}();x.VERSION=u;e.a=new x({id:"luma"}).enable()},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return c});var r=n(228),i=n.n(r),o=n(58),a=n.n(o);function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function u(t,e){var n=a()([],e,t);return i()(n,n,1/n[3]),n}function l(t,e){var n=t%e;return n<0?e+n:n}function c(t,e,n){return n*e+(1-n)*t}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,f=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!c){var t=s(p);c=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(74),i=n(70);function o(){if(!r.b){var t=i.a.hrtime();return t[0]+t[1]/1e6}return i.b.performance?i.b.performance.now():Date.now()}o()},function(t,e){t.exports=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(t,e,n){"use strict";var r=n(128);function i(t,e,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&Object(r.a)(o,n.prototype),o}).apply(null,arguments)}var o=n(4),a=n(7),s=n(48),u=n(49),l=n(6);n.d(e,"a",function(){return f});var c={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},f=function(){function t(){var e=this;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(t){return e._assign(t)}),Object.freeze(this)}return Object(a.a)(t,null,[{key:"getBytesPerElement",value:function(t){return Object(s.c)(t.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){return Object(l.a)(t.size),Object(s.c)(t.type||5126).BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i(t,[c].concat(n))}}]),Object(a.a)(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==t.type&&(this.type!==t.type&&u.a.warn("accessor type mismatch"),this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size!==t.size&&u.a.warn("accessor size mismatch"),this.size=t.size),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.instanced&&(u.a.deprecated("Accessor.instanced","Accessor.divisor"),this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(u.a.deprecated("Accessor.isInstanced","Accessor.divisor"),this.divisor=t.isInstanced?1:0),void 0!==t.index&&(this.index=t.index?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}}]),t}()},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r,i=n(4),o=n(13),a=n(11),s=n(7),u=n(14),l=n(2),c=n(32),f=n(25),p=n(26),h=n(10),d=n(8),y=n(6),v=[9729,9728],g=(r={},Object(l.a)(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(l.a)(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(l.a)(r,6406,{dataFormat:6406,types:[5121]}),Object(l.a)(r,6409,{dataFormat:6409,types:[5121]}),Object(l.a)(r,6410,{dataFormat:6410,types:[5121]}),Object(l.a)(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(l.a)(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(l.a)(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(l.a)(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r);var m=function(t){function e(t,n){var r;Object(i.a)(this,e);var s=n.id,u=void 0===s?Object(d.i)("texture"):s,l=n.handle,c=n.target;return(r=Object(o.a)(this,Object(a.a)(e).call(this,t,{id:u,handle:l}))).target=c,r.hasFloatTexture=t.getExtension("OES_texture_float"),r.textureUnit=void 0,r}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format,r=e.linearFiltering,i=!0;return n&&(i=(i=i&&function(t,e){var n=g[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(h.n)(t)&&n.gl2||n.gl1;return"string"==typeof r?t.getExtension(r):r}(t,n))&&(!r||function(t,e){var n=g[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),i}}]),Object(s.a)(e,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.pixels,r=void 0===n?null:n,i=t.format,o=void 0===i?6408:i,a=t.type,s=void 0===a?5121:a,u=t.border,c=void 0===u?0:u,f=t.recreate,p=void 0!==f&&f,h=t.parameters,y=void 0===h?{}:h,v=t.pixelStore,g=void 0===v?{}:v,m=t.textureUnit,b=void 0===m?void 0:m,_=t.unpackFlipY,x=void 0===_||_,w=t.mipmaps,E=void 0===w||w;e||(e=r);var O=t.width,S=t.height,P=t.dataFormat,C=this._deduceParameters({format:o,type:s,dataFormat:P,compressed:!1,data:e,width:O,height:S});O=C.width,S=C.height,P=C.dataFormat,this.width=O,this.height=S,this.format=o,this.type=s,this.dataFormat=P,this.border=c,this.textureUnit=b,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var T=Object(l.a)({},37440,x),k=Object.assign({},T,g);this._isNPOT()&&E&&(d.g.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(y)),this.mipmaps=E,this.setImageData({data:e,width:O,height:S,format:o,type:s,dataFormat:P,border:c,mipmaps:E,parameters:k}),E&&this.generateMipmap(),this.setParameters(y),p&&(this.data=e)}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),Object(p.c)(this.gl,e,function(){t.gl.generateMipmap(t.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(t){var e=this,n=t.target,r=void 0===n?this.target:n,i=t.pixels,o=void 0===i?null:i,a=t.data,s=void 0===a?null:a,u=t.width,l=t.height,c=t.level,f=void 0===c?0:c,d=t.format,v=void 0===d?6408:d,g=t.type,m=t.dataFormat,b=t.offset,_=void 0===b?0:b,x=t.border,w=void 0===x?0:x,E=t.compressed,O=void 0!==E&&E,S=t.parameters,P=void 0===S?{}:S;s||(s=o);var C=this._deduceParameters({format:v,type:g,dataFormat:m,compressed:O,data:s,width:u,height:l});g=C.type,m=C.dataFormat,O=C.compressed,u=C.width,l=C.height;var T=this.gl;T.bindTexture(this.target,this.handle);var k,A=this._getDataType({data:s,compressed:O});s=A.data,k=A.dataType,Object(p.c)(this.gl,P,function(){switch(k){case"null":T.texImage2D(r,f,v,u,l,w,m,g,s);break;case"typed-array":T.texImage2D(r,f,v,u,l,w,m,g,s,_);break;case"buffer":Object(h.d)(T),T.bindBuffer(35052,s.handle||s),T.texImage2D(r,f,v,u,l,w,v,g,_);break;case"browser-object":T.texImage2D(r,f,v,v,g,s);break;case"compressed":T.compressedTexImage2D(e.target,f,v,u,l,w,s);break;default:Object(y.a)(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function(t){var e=this,n=t.target,r=void 0===n?this.target:n,i=t.pixels,o=void 0===i?null:i,a=t.data,s=void 0===a?null:a,u=t.x,l=void 0===u?0:u,c=t.y,d=void 0===c?0:c,y=t.width,v=t.height,g=t.level,m=void 0===g?0:g,b=t.format,_=void 0===b?6408:b,x=t.type,w=t.dataFormat,E=t.compressed,O=void 0!==E&&E,S=t.offset,P=void 0===S?0:S,C=t.border,T=void 0===C?0:C,k=t.parameters,A=void 0===k?{}:k,M=this._deduceParameters({format:_,type:x,dataFormat:w,compressed:O,data:s,width:y,height:v});if(x=M.type,w=M.dataFormat,O=M.compressed,y=M.width,v=M.height,s||(s=o),s&&s.data){var j=s;s=j.data,y=j.shape[0],v=j.shape[1]}s instanceof f.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(p.c)(this.gl,A,function(){O?e.gl.compressedTexSubImage2D(r,m,l,d,y,v,_,s):null===s?e.gl.texSubImage2D(r,m,_,y,v,T,w,x,null):ArrayBuffer.isView(s)?e.gl.texSubImage2D(r,m,l,d,y,v,_,x,s,P):s instanceof h.b?(Object(h.d)(e.gl),e.gl.bindBuffer(35052,s),e.gl.texSubImage2D(r,m,_,y,v,T,_,x,P),e.gl.bindBuffer(35052,null)):e.gl.texSubImage2D(r,m,l,d,_,x,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(t){var e=t.target,n=(void 0===e&&this.target,t.framebuffer),r=(t.offset,t.x),i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.width,u=t.height,l=t.level,c=void 0===l?0:l,f=t.internalFormat,p=void 0===f?6408:f,h=t.border,d=void 0===h?0:h;n&&n.bind(),this.bind(),this.gl.copyTexImage2D(this.target,c,p,i,a,s,u,d),this.unbind(),n&&n.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,this.gl.activeTexture(33984+t),this.gl.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(t){var e=t.data,n=t.compressed;return void 0!==n&&n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof f.a?{data:e.handle,dataType:"buffer"}:e instanceof h.b?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}},{key:"setImage3D",value:function(t){var e=t.level,n=void 0===e?0:e,r=t.internalformat,i=void 0===r?6408:r,o=t.width,a=t.height,s=t.depth,u=void 0===s?1:s,l=t.border,c=void 0===l?0:l,p=t.format,h=t.type,d=void 0===h?5121:h,y=t.offset,v=void 0===y?0:y,g=t.pixels;return ArrayBuffer.isView(g)?(this.gl.texImage3D(this.target,n,i,o,a,u,c,p,d,g),this):(g instanceof f.a&&(this.gl.bindBuffer(35052,g.handle),this.gl.texImage3D(this.target,n,i,o,a,u,c,p,d,v)),this)}},{key:"_deduceParameters",value:function(t){var e=t.format,n=t.data,r=t.width,i=t.height,o=t.dataFormat,a=t.type,s=t.compressed,u=g[e];o=o||u&&u.dataFormat,a=a||u&&u.types[0],s=s||u&&u.compressed;var l=this._deduceImageSize({data:n,width:r,height:i});return{dataFormat:o,type:a,compressed:s,width:r=l.width,height:i=l.height,format:e,data:n}}},{key:"_deduceImageSize",value:function(t){var e,n=t.data,r=t.width,i=t.height;return e="undefined"!=typeof ImageData&&n instanceof ImageData?{width:n.width,height:n.height}:"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement?{width:n.naturalWidth,height:n.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement?{width:n.width,height:n.height}:"undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement?{width:n.videoWidth,height:n.videoHeight}:n?{width:r,height:i}:{width:r>=0?r:1,height:i>=0?i:1},Object(y.a)(e,"Could not deduced texture size"),Object(y.a)(void 0===r||e.width===r,"Deduced texture width does not match supplied width"),Object(y.a)(void 0===i||e.height===i,"Deduced texture height does not match supplied height"),e}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:"_setParameter",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Object(y.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(Object(h.n)(this.gl)||Object(d.f)(this.width)&&Object(d.f)(this.height))}},{key:"_updateForNPOT",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(t,e){if(this._isNPOT())switch(t){case 10241:-1===v.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}]),e}(c.a)},function(t,e){t.exports=function(t,e,n){var r,i,o,a,s,u,l,c,f,p,h,d,y=n[0],v=n[1],g=n[2];e===t?(t[12]=e[0]*y+e[4]*v+e[8]*g+e[12],t[13]=e[1]*y+e[5]*v+e[9]*g+e[13],t[14]=e[2]*y+e[6]*v+e[10]*g+e[14],t[15]=e[3]*y+e[7]*v+e[11]*g+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=p,t[10]=h,t[11]=d,t[12]=r*y+s*v+f*g+e[12],t[13]=i*y+u*v+p*g+e[13],t[14]=o*y+l*v+h*g+e[14],t[15]=a*y+c*v+d*g+e[15]);return t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}},,function(t,e,n){"use strict";(function(t,r){n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var i=n(23),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":Object(i.a)(r))&&r},a=o.window||o.self||o.global,s=o.process||{};console}).call(this,n(55),n(51))},function(t,e,n){"use strict";var r=n(9),i=n(43),o=Object.keys(i.a).map(function(t){return"const float COORDINATE_SYSTEM_".concat(t," = ").concat(i.a[t],".;")}).join(""),a="".concat(o,'\n\nuniform float project_uCoordinateSystem;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uPixelsPerMeter;\nuniform vec3 project_uPixelsPerDegree;\nuniform vec3 project_uPixelsPerUnit;\nuniform vec3 project_uPixelsPerUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec2 project_coordinate_origin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\n\n//\n// Scaling offsets - scales meters to "pixels"\n// Note the scalar version of project_scale is for scaling the z component only\n//\nfloat project_scale(float meters) {\n  return meters * project_uPixelsPerMeter.z;\n}\n\nvec2 project_scale(vec2 meters) {\n  return meters * project_uPixelsPerMeter.xy;\n}\n\nvec3 project_scale(vec3 meters) {\n  return meters * project_uPixelsPerMeter;\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(meters.xyz * project_uPixelsPerMeter, meters.w);\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uPixelsPerDegree);\n  }\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uPixelsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  vec3 pixelsPerUnit = project_uPixelsPerUnit + project_uPixelsPerUnit2 * offset.y;\n  return vec4(offset.xyz * pixelsPerUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\n//\n// Projects lnglats (or meter offsets, depending on mode) to pixels\n//\nvec4 project_position(vec4 position, vec2 position64xyLow) {\n  // TODO - why not simply subtract center and fall through?\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\n    return project_uModelMatrix * vec4(\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    float X = position.x - project_coordinate_origin.x;\n    float Y = position.y - project_coordinate_origin.y;\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\n  }\n\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return project_offset_(position);\n  }\n\n  // METER_OFFSETS or IDENTITY\n  // Apply model matrix\n  vec4 position_modelspace = project_uModelMatrix * position;\n  return project_offset_(position_modelspace);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_XY_LOW);\n}\n\nvec3 project_position(vec3 position, vec2 position64xyLow) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\n  return projected_position.xy;\n}\n\n//\n// Projects from "world" coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_to_clipspace(vec4 position) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    // Needs to be divided with project_uPixelsPerMeter\n    position.w *= project_uPixelsPerMeter.z;\n  }\n  return project_uViewProjectionMatrix * position + project_uCenter;\n}\n\n// Returns a clip space offset that corresponds to a given number of **non-device** pixels\nvec4 project_pixel_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return vec4(offset * project_uFocalDistance, 0.0, 0.0);\n}\n'),s=n(130),u={};e.a={name:"project",dependencies:[r.s],vs:a,getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return t.viewport?Object(s.b)(t):{}},deprecations:[{type:"uniform vec3",old:"selectedPickingColor",new:"luma.gl's picking module"},{type:"uniform float",old:"renderPickingBuffer",new:"luma.gl's picking module"},{type:"uniform float",old:"pickingEnabled",new:"luma.gl's picking module"},{type:"uniform float",old:"projectionMode",new:"project_uCoordinateSystem"},{type:"uniform vec4",old:"projectionCenter",new:"project_uCenter"},{type:"uniform vec2",old:"projectionOrigin"},{type:"uniform mat4",old:"modelMatrix",new:"project_uModelMatrix"},{type:"uniform mat4",old:"viewMatrix"},{type:"uniform mat4",old:"projectionMatrix",new:"project_uViewProjectionMatrix"},{type:"uniform vec3",old:"projectionPixelsPerUnit",new:"project_uPixelsPerUnit"},{type:"uniform float",old:"projectionScale",new:"project_uScale"},{type:"uniform vec2",old:"viewportSize",new:"project_uViewportSize"},{type:"uniform float",old:"devicePixelRatio",new:"project_uDevicePixelRatio"},{type:"uniform vec3",old:"cameraPos",new:"project_uCameraPosition"},{type:"function",old:"scale",new:"project_scale"},{type:"function",old:"preproject",new:"project_position"},{type:"function",old:"project",new:"project_to_clipspace"}]}},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(4),i=n(13),o=n(11),a=n(7),s=n(14),u=n(19),l=n(56),c=n(10),f=function(t){function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(c.e)(t),(n=Object(i.a)(this,Object(o.a)(e).call(this,t,Object.assign({},a,{target:3553})))).initialize(a),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(e,t),Object(a.a)(e,null,[{key:"isSupported",value:function(t,e){return l.a.isSupported(t,e)}}]),Object(a.a)(e,[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return t.activeTexture(33984+this.textureUnit),t.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}}]),e}(l.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"d",function(){return g}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return _});var r,i,o,a=n(21),s=n(2),u=n(10),l=(n(6),r={},Object(s.a)(r,3042,!1),Object(s.a)(r,32773,new Float32Array([0,0,0,0])),Object(s.a)(r,32777,32774),Object(s.a)(r,34877,32774),Object(s.a)(r,32969,1),Object(s.a)(r,32968,0),Object(s.a)(r,32971,1),Object(s.a)(r,32970,0),Object(s.a)(r,3106,new Float32Array([0,0,0,0])),Object(s.a)(r,3107,[!0,!0,!0,!0]),Object(s.a)(r,2884,!1),Object(s.a)(r,2885,1029),Object(s.a)(r,2929,!1),Object(s.a)(r,2931,1),Object(s.a)(r,2932,513),Object(s.a)(r,2928,new Float32Array([0,1])),Object(s.a)(r,2930,!0),Object(s.a)(r,3024,!0),Object(s.a)(r,36006,null),Object(s.a)(r,2886,2305),Object(s.a)(r,33170,4352),Object(s.a)(r,2849,1),Object(s.a)(r,32823,!1),Object(s.a)(r,32824,0),Object(s.a)(r,10752,0),Object(s.a)(r,32938,1),Object(s.a)(r,32939,!1),Object(s.a)(r,3089,!1),Object(s.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(r,2960,!1),Object(s.a)(r,2961,0),Object(s.a)(r,2968,4294967295),Object(s.a)(r,36005,4294967295),Object(s.a)(r,2962,519),Object(s.a)(r,2967,0),Object(s.a)(r,2963,4294967295),Object(s.a)(r,34816,519),Object(s.a)(r,36003,0),Object(s.a)(r,36004,4294967295),Object(s.a)(r,2964,7680),Object(s.a)(r,2965,7680),Object(s.a)(r,2966,7680),Object(s.a)(r,34817,7680),Object(s.a)(r,34818,7680),Object(s.a)(r,34819,7680),Object(s.a)(r,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(r,3333,4),Object(s.a)(r,3317,4),Object(s.a)(r,37440,!1),Object(s.a)(r,37441,!1),Object(s.a)(r,37443,37444),Object(s.a)(r,35723,4352),Object(s.a)(r,36010,null),Object(s.a)(r,35977,!1),Object(s.a)(r,3330,0),Object(s.a)(r,3332,0),Object(s.a)(r,3331,0),Object(s.a)(r,3314,0),Object(s.a)(r,32878,0),Object(s.a)(r,3316,0),Object(s.a)(r,3315,0),Object(s.a)(r,32877,0),r),c=function(t,e,n){return e?t.enable(n):t.disable(n)},f=function(t,e,n){return t.hint(n,e)},p=function(t,e,n){return t.pixelStorei(n,e)},h=(i={},Object(s.a)(i,3042,c),Object(s.a)(i,32773,function(t,e){return t.blendColor.apply(t,Object(a.a)(e))}),Object(s.a)(i,32777,"blendEquation"),Object(s.a)(i,34877,"blendEquation"),Object(s.a)(i,32969,"blendFunc"),Object(s.a)(i,32968,"blendFunc"),Object(s.a)(i,32971,"blendFunc"),Object(s.a)(i,32970,"blendFunc"),Object(s.a)(i,3106,function(t,e){return t.clearColor.apply(t,Object(a.a)(e))}),Object(s.a)(i,3107,function(t,e){return t.colorMask.apply(t,Object(a.a)(e))}),Object(s.a)(i,2884,c),Object(s.a)(i,2885,function(t,e){return t.cullFace(e)}),Object(s.a)(i,2929,c),Object(s.a)(i,2931,function(t,e){return t.clearDepth(e)}),Object(s.a)(i,2932,function(t,e){return t.depthFunc(e)}),Object(s.a)(i,2928,function(t,e){return t.depthRange.apply(t,Object(a.a)(e))}),Object(s.a)(i,2930,function(t,e){return t.depthMask(e)}),Object(s.a)(i,3024,c),Object(s.a)(i,35723,f),Object(s.a)(i,36006,function(t,e){var n=Object(u.n)(t)?36009:36160;return t.bindFramebuffer(n,e)}),Object(s.a)(i,2886,function(t,e){return t.frontFace(e)}),Object(s.a)(i,33170,f),Object(s.a)(i,2849,function(t,e){return t.lineWidth(e)}),Object(s.a)(i,32823,c),Object(s.a)(i,32824,"polygonOffset"),Object(s.a)(i,10752,"polygonOffset"),Object(s.a)(i,35977,c),Object(s.a)(i,32938,"sampleCoverage"),Object(s.a)(i,32939,"sampleCoverage"),Object(s.a)(i,3089,c),Object(s.a)(i,3088,function(t,e){return t.scissor.apply(t,Object(a.a)(e))}),Object(s.a)(i,2960,c),Object(s.a)(i,2961,function(t,e){return t.clearStencil(e)}),Object(s.a)(i,2968,function(t,e){return t.stencilMaskSeparate(1028,e)}),Object(s.a)(i,36005,function(t,e){return t.stencilMaskSeparate(1029,e)}),Object(s.a)(i,2962,"stencilFuncFront"),Object(s.a)(i,2967,"stencilFuncFront"),Object(s.a)(i,2963,"stencilFuncFront"),Object(s.a)(i,34816,"stencilFuncBack"),Object(s.a)(i,36003,"stencilFuncBack"),Object(s.a)(i,36004,"stencilFuncBack"),Object(s.a)(i,2964,"stencilOpFront"),Object(s.a)(i,2965,"stencilOpFront"),Object(s.a)(i,2966,"stencilOpFront"),Object(s.a)(i,34817,"stencilOpBack"),Object(s.a)(i,34818,"stencilOpBack"),Object(s.a)(i,34819,"stencilOpBack"),Object(s.a)(i,2978,function(t,e){return t.viewport.apply(t,Object(a.a)(e))}),Object(s.a)(i,3333,p),Object(s.a)(i,3317,p),Object(s.a)(i,37440,p),Object(s.a)(i,37441,p),Object(s.a)(i,37443,p),Object(s.a)(i,3330,p),Object(s.a)(i,3332,p),Object(s.a)(i,3331,p),Object(s.a)(i,36010,function(t,e){return t.bindFramebuffer(36008,e)}),Object(s.a)(i,3314,p),Object(s.a)(i,32878,p),Object(s.a)(i,3316,p),Object(s.a)(i,3315,p),Object(s.a)(i,32877,p),i),d={blendEquation:function(t,e){return t.blendEquationSeparate(e[32777],e[34877])},blendFunc:function(t,e){return t.blendFuncSeparate(e[32969],e[32968],e[32971],e[32970])},polygonOffset:function(t,e){return t.polygonOffset(e[32824],e[10752])},sampleCoverage:function(t,e){return t.sampleCoverage(e[32938],e[32939])},stencilFuncFront:function(t,e){return t.stencilFuncSeparate(1028,e[2962],e[2967],e[2963])},stencilFuncBack:function(t,e){return t.stencilFuncSeparate(1029,e[34816],e[36003],e[36004])},stencilOpFront:function(t,e){return t.stencilOpSeparate(1028,e[2964],e[2965],e[2966])},stencilOpBack:function(t,e){return t.stencilOpSeparate(1029,e[34817],e[34818],e[34819])}},y=function(t,e){return t.isEnabled(e)},v=(o={},Object(s.a)(o,3042,y),Object(s.a)(o,2884,y),Object(s.a)(o,2929,y),Object(s.a)(o,3024,y),Object(s.a)(o,32823,y),Object(s.a)(o,32926,y),Object(s.a)(o,32928,y),Object(s.a)(o,3089,y),Object(s.a)(o,2960,y),Object(s.a)(o,35977,y),o);function g(t,e){var n={};for(var r in e){var i=Number(r),o=h[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],i))}var a=t.state&&t.state.cache;if(a){var s=Object.assign({},a,e);for(var u in n){(0,d[u])(t,s)}}}function m(t,e){var n=v[e];return n?n(t,Number(e)):t.getParameter(Number(e))}function b(t,e){e=e||l;var n=Array.isArray(e)?e:Object.keys(e),r={},i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r[c]=m(t,c)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}function _(t){g(t,Object.assign({},l,{}))}},function(t,e,n){var r=n(299),i=n(179)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},function(t,e,n){var r=n(357),i=n(46);t.exports=function(t,e,n,o){return null==t?[]:(i(e)||(e=null==e?[]:[e]),i(n=o?void 0:n)||(n=null==n?[]:[n]),r(t,e,n))}},function(t,e,n){var r=n(113),i=n(372),o=Object.prototype.hasOwnProperty,a=i(function(t,e,n){o.call(t,n)?t[n].push(e):r(t,n,[e])});t.exports=a},function(t,e,n){var r=n(379),i=n(35),o="Expected a function";t.exports=function(t,e,n){var a=!0,s=!0;if("function"!=typeof t)throw new TypeError(o);return i(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:a,maxWait:e,trailing:s})}},function(t,e,n){var r=n(167),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){var r=n(15),i=n(139);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){"use strict";(function(t,r){n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var i=n(23),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":Object(i.a)(r))&&r},a=o.window||o.self||o.global,s=o.process||{};console}).call(this,n(55),n(51))},function(t,e){t.exports=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}},function(t,e,n){var r=n(177),i=0;t.exports=function(t){var e=++i;return r(t)+e}},function(t,e,n){var r=n(199);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(208),i="2.0.1",o=Object(r.a)()},function(t,e,n){var r=n(368),i=n(138),o=n(369),a=i(function(t,e){return o(t)?r(t,e):[]});t.exports=a},function(t,e,n){"use strict";function r(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function o(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));var o=t.width*n,a=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(324);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var r=n(365)();t.exports=r},function(t,e,n){"use strict";n.d(e,"c",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"b",function(){return f}),n.d(e,"a",function(){return p});var r=n(38),i=n(6),o=34962,a=32874,s="Invalid WebGLRenderingContext",u="Requires WebGL2";function l(t){return Boolean(t&&(t instanceof r.c||t.ARRAY_BUFFER===o))}function c(t){return Boolean(t&&(t instanceof r.a||t.TEXTURE_BINDING_3D===a))}function f(t){Object(i.a)(l(t),s)}function p(t){Object(i.a)(c(t),u)}},function(t,e,n){var r=n(331),i=n(349),o=n(47),a=n(46),s=n(108);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"b",function(){return y});var r=n(4),i=n(7),o=n(2),a=n(63),s=n(6),u=function(t,e){var n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return t===e},l={enable:function(t,e){return t(Object(o.a)({},e,!0))},disable:function(t,e){return t(Object(o.a)({},e,!1))},pixelStorei:function(t,e,n){return t(Object(o.a)({},e,n))},hint:function(t,e,n){return t(Object(o.a)({},e,n))},bindFramebuffer:function(t,e,n){var r;switch(e){case 36160:return t((r={},Object(o.a)(r,36006,n),Object(o.a)(r,36010,n),r));case 36009:return t(Object(o.a)({},36006,n));case 36008:return t(Object(o.a)({},36010,n));default:return null}},blendColor:function(t,e,n,r,i){return t(Object(o.a)({},32773,new Float32Array([e,n,r,i])))},blendEquation:function(t,e){var n;return t((n={},Object(o.a)(n,32777,e),Object(o.a)(n,34877,e),n))},blendEquationSeparate:function(t,e,n){var r;return t((r={},Object(o.a)(r,32777,e),Object(o.a)(r,34877,n),r))},blendFunc:function(t,e,n){var r;return t((r={},Object(o.a)(r,32969,e),Object(o.a)(r,32968,n),Object(o.a)(r,32971,e),Object(o.a)(r,32970,n),r))},blendFuncSeparate:function(t,e,n,r,i){var a;return t((a={},Object(o.a)(a,32969,e),Object(o.a)(a,32968,n),Object(o.a)(a,32971,r),Object(o.a)(a,32970,i),a))},clearColor:function(t,e,n,r,i){return t(Object(o.a)({},3106,new Float32Array([e,n,r,i])))},clearDepth:function(t,e){return t(Object(o.a)({},2931,e))},clearStencil:function(t,e){return t(Object(o.a)({},2961,e))},colorMask:function(t,e,n,r,i){return t(Object(o.a)({},3107,[e,n,r,i]))},cullFace:function(t,e){return t(Object(o.a)({},2885,e))},depthFunc:function(t,e){return t(Object(o.a)({},2932,e))},depthRange:function(t,e,n){return t(Object(o.a)({},2928,new Float32Array([e,n])))},depthMask:function(t,e){return t(Object(o.a)({},2930,e))},frontFace:function(t,e){return t(Object(o.a)({},2886,e))},lineWidth:function(t,e){return t(Object(o.a)({},2849,e))},polygonOffset:function(t,e,n){var r;return t((r={},Object(o.a)(r,32824,e),Object(o.a)(r,10752,n),r))},sampleCoverage:function(t,e,n){var r;return t((r={},Object(o.a)(r,32938,e),Object(o.a)(r,32939,n),r))},scissor:function(t,e,n,r,i){return t(Object(o.a)({},3088,new Int32Array([e,n,r,i])))},stencilMask:function(t,e){var n;return t((n={},Object(o.a)(n,2968,e),Object(o.a)(n,36005,e),n))},stencilMaskSeparate:function(t,e,n){return t(Object(o.a)({},1028===e?2968:36005,n))},stencilFunc:function(t,e,n,r){var i;return t((i={},Object(o.a)(i,2962,e),Object(o.a)(i,2967,n),Object(o.a)(i,2963,r),Object(o.a)(i,34816,e),Object(o.a)(i,36003,n),Object(o.a)(i,36004,r),i))},stencilFuncSeparate:function(t,e,n,r,i){var a;return t((a={},Object(o.a)(a,1028===e?2962:34816,n),Object(o.a)(a,1028===e?2967:36003,r),Object(o.a)(a,1028===e?2963:36004,i),a))},stencilOp:function(t,e,n,r){var i;return t((i={},Object(o.a)(i,2964,e),Object(o.a)(i,2965,n),Object(o.a)(i,2966,r),Object(o.a)(i,34817,e),Object(o.a)(i,34818,n),Object(o.a)(i,34819,r),i))},stencilOpSeparate:function(t,e,n,r,i){var a;return t((a={},Object(o.a)(a,1028===e?2964:34817,n),Object(o.a)(a,1028===e?2965:34818,r),Object(o.a)(a,1028===e?2966:34819,i),a))},viewport:function(t,e,n,r,i){return t(Object(o.a)({},2978,new Int32Array([e,n,r,i])))}};function c(t,e){var n=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache||(t.state.cache[e]=n.apply(void 0,arguments)),t.state.enable?t.state.cache[e]:n.apply(void 0,arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function f(t,e,n){var r=t[e].bind(t);t[e]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s,u=n.apply(void 0,[t.state._updateCache].concat(o)),l=u.valueChanged,c=u.oldValue;l&&((s=t.state).log.apply(s,["gl.".concat(e)].concat(o)),r.apply(void 0,o));return c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}var p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,o=void 0!==i&&i,s=n.log,u=void 0===s?function(){}:s;Object(r.a)(this,t),this.gl=e,this.stateStack=[],this.enable=!0,this.cache=o?Object(a.b)(e):Object.assign({},a.a),this.log=u,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(t,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){Object(s.a)(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];Object(a.d)(this.gl,t,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in t)Object(s.a)(void 0!==i),u(t[i],this.cache[i])||(n=!0,e=this.cache[i],!r||i in r||(r[i]=this.cache[i]),this.cache[i]=t[i]);return{valueChanged:n,oldValue:e}}}]),t}();function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Object(s.a)(void 0!==o),!e.state){var a=void 0!==t?t:window;for(var u in a.polyfillContext&&a.polyfillContext(e),e.state=new p(e,{copyState:o,enable:i}),l){f(e,u,l[u])}c(e,"getParameter"),c(e,"isEnabled")}return e.state.enable=i,e}function d(t){t.state||h(t,{copyState:!1}),t.state.push()}function y(t){Object(s.a)(t.state),t.state.pop()}}).call(this,n(55))},function(t,e,n){var r=n(267);t.exports=function(t,e,n,i){var o,a,s,u,l,c,f,p,h,d,y=e[0],v=e[1],g=e[2],m=i[0],b=i[1],_=i[2],x=n[0],w=n[1],E=n[2];if(Math.abs(y-x)<1e-6&&Math.abs(v-w)<1e-6&&Math.abs(g-E)<1e-6)return r(t);f=y-x,p=v-w,h=g-E,d=1/Math.sqrt(f*f+p*p+h*h),o=b*(h*=d)-_*(p*=d),a=_*(f*=d)-m*h,s=m*p-b*f,(d=Math.sqrt(o*o+a*a+s*s))?(o*=d=1/d,a*=d,s*=d):(o=0,a=0,s=0);u=p*s-h*a,l=h*o-f*s,c=f*a-p*o,(d=Math.sqrt(u*u+l*l+c*c))?(u*=d=1/d,l*=d,c*=d):(u=0,l=0,c=0);return t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=l,t[6]=p,t[7]=0,t[8]=s,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*y+a*v+s*g),t[13]=-(u*y+l*v+c*g),t[14]=-(f*y+p*v+h*g),t[15]=1,t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],p=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=p*i-u*r,t}},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],p=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=p*i-u*r,t}},function(t,e,n){var r=n(355),i=n(41);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],p=e[10],h=e[11],d=e[12],y=e[13],v=e[14],g=e[15],m=n*s-r*a,b=n*u-i*a,_=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,O=c*y-f*d,S=c*v-p*d,P=c*g-h*d,C=f*v-p*y,T=f*g-h*y,k=p*g-h*v,A=m*k-b*T+_*C+x*P-w*S+E*O;if(!A)return null;return A=1/A,t[0]=(s*k-u*T+l*C)*A,t[1]=(i*T-r*k-o*C)*A,t[2]=(y*E-v*w+g*x)*A,t[3]=(p*w-f*E-h*x)*A,t[4]=(u*P-a*k-l*S)*A,t[5]=(n*k-i*P+o*S)*A,t[6]=(v*_-d*E-g*b)*A,t[7]=(c*E-p*_+h*b)*A,t[8]=(a*T-s*P+l*O)*A,t[9]=(r*P-n*T-o*O)*A,t[10]=(d*w-y*_+g*m)*A,t[11]=(f*_-c*w-h*m)*A,t[12]=(s*S-a*C-u*O)*A,t[13]=(n*C-r*S+i*O)*A,t[14]=(y*b-d*x-v*m)*A,t[15]=(c*x-f*b+p*m)*A,t}},function(t,e,n){"use strict";function r(t){if(!t)throw new Error("viewport-mercator-project: assertion failed.")}n.d(e,"a",function(){return r})},function(t,e,n){var r=n(282),i=n(287);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(103),i=n(283),o=n(284),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:a:u&&u in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(113),i=n(123),o=n(81);t.exports=function(t,e){var n={};return e=o(e,3),i(t,function(t,i,o){r(n,i,e(t,i,o))}),n}},function(t,e,n){(function(e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i="object"!==(void 0===e?"undefined":r(e))||"[object process]"!==String(e)||e.browser;t.exports={window:"undefined"!=typeof window?window:n,global:void 0!==n?n:window,document:"undefined"!=typeof document?document:{},isBrowser:i}}).call(this,n(51),n(55))},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(4),i=n(7),o=n(13),a=n(11),s=n(14),u=n(19),l=n(56),c=n(6),f=[34069,34070,34071,34072,34073,34074],p=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),(n=Object(o.a)(this,Object(a.a)(e).call(this,t,Object.assign({},i,{target:34067})))).initialize(i),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(e,t),Object(i.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.format,n=void 0===e?6408:e,r=t.mipmaps,i=void 0===r||r,o=t.width,a=void 0===o?1:o,s=t.height,u=void 0===s?1:s,l=t.type,f=void 0===l?5121:l,p=t.dataFormat,h=this._deduceParameters({format:n,type:f,dataFormat:p});f=h.type,p=h.dataFormat;var d=this._deduceImageSize({data:t[34069],width:a,height:u});a=d.width,u=d.height,Object(c.a)(a===u),this.setCubeMapImageData(t),i&&this.generateMipmap(t),this.opts=t}},{key:"subImage",value:function(t){var e=t.face,n=t.data,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:e,data:n,x:i,y:a,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(t){var e=t.width,n=t.height,r=t.pixels,i=t.data,o=t.border,a=void 0===o?0:o,s=t.format,u=void 0===s?6408:s,l=t.type,c=void 0===l?5121:l,p=(t.generateMipmap,this.gl);if(r=r||i,this.bind(),this.width||this.height)for(var h=0;h<f.length;h++){var d=f[h];p.texImage2D(d,0,u,e,n,a,u,c,r[d])}else for(var y=0;y<f.length;y++){var v=f[y];p.texImage2D(v,0,u,u,c,r[v])}}},{key:"bind",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;return void 0!==t&&this.gl.activeTexture(33984+t),this.gl.bindTexture(34067,this.handle),t}},{key:"unbind",value:function(){return this.gl.bindTexture(34067,null),this}}]),e}(l.a);p.FACES=f},function(t,e,n){"use strict";(function(t){var r=n(23),i=n(210),o=!("object"===(void 0===t?"undefined":Object(r.a)(t))&&"[object process]"===String(t)&&!t.browser)||i.a;e.a=o}).call(this,n(51))},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(4),i=n(7),o=n(13),a=n(11),s=n(14),u=n(129),l=n(22),c=function(t,e){if(!t)throw new Error(e)},f=function(t){function e(){return Object(r.a)(this,e),Object(o.a)(this,Object(a.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(l.a)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(l.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]+=i[o];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]-=i[o];return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]*=i[o];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]/=i[o];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"scaleAndAdd",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*e+t[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return c(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(l.a)(this[t])}},{key:"setComponent",value:function(t,e){return c(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(l.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(l.a)(t)}}]),e}(u.a)},function(t,e){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],f=e[10],p=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-f*r,t[3]=u*i-p*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+f*i,t[11]=u*r+p*i,t}},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function i(t){var e,n={};return function(i){for(var o in i)if(!r(i[o],n[o])){e=t(i),n=i;break}return e}}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.d(e,"a",function(){return x});var r=n(4),i=n(7),o=n(13),a=n(11),s=n(14),u=n(97),l=n(22),c=n(212),f=n.n(c),p=n(213),h=n.n(p),d=n(214),y=n.n(d),v=n(215),g=n.n(v),m=n(216),b=n.n(m),_=[0,0,0],x=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,e),t=Object(o.a)(this,Object(a.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,i,s),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:"angle",value:function(t){return f()(this,t)}},{key:"cross",value:function(t){return h()(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?_:n;return y()(this,this,r,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?_:n;return g()(this,this,r,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?_:n;return b()(this,this,r,e),this.check()}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(l.a)(t)}}]),e}(u.a)},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:t;void 0!==t||window,"undefined"!=typeof document&&document}).call(this,n(55))},function(t,e,n){var r=n(68).Symbol;t.exports=r},function(t,e,n){var r=n(90),i=n(77),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==o}},function(t,e,n){var r=n(104),i=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,n){"use strict";var r=n(9),i=n(61),o=n(99),a=r.t.fp64ify,s=r.t.fp64ifyMatrix4,u=(e.a={name:"project64",dependencies:[i.a,r.t],vs:"\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 project64_uScale;\nuniform vec2 project_uViewProjectionMatrixFP64[16];\n\n// longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64,\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\n  vec4 position64xy = vec4(\n    position.x, position64xyLow.x,\n    position.y, position64xyLow.y);\n\n  project_position_fp64(position64xy, out_val);\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\n    vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  // This is the local offset to the instance position\n  vec2 offset64[4];\n  vec4_fp64(vec4(offset, 0.0), offset64);\n\n  float z = project_scale(position.z);\n\n  // Apply web mercator projection (depends on coordinate system imn use)\n  vec2 projectedPosition64xy[2];\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\n\n  vec2 worldPosition64[4];\n  worldPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\n  worldPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\n  worldPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\n  worldPosition64[3] = vec2(1.0, 0.0);\n\n  worldPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\n\n  return project_to_clipspace_fp64(worldPosition64);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(\n    position, position64xyLow, offset, worldPosition\n  );\n}\n",getUniforms:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.project_uViewProjectionMatrix,n=t.project_uScale;if(e&&n)return u({project_uViewProjectionMatrix:e,project_uScale:n});return{}},deprecations:[{type:"uniform vec2",old:"projectionFP64[16]",new:"project_uViewProjectionMatrixFP64"},{type:"uniform vec2",old:"projectionScaleFP64",new:"project64_uScale"}]},Object(o.a)(function(t){var e=t.project_uViewProjectionMatrix,n=t.project_uScale,r=s(e),i=a(n);return{project_uViewProjectionMatrixFP64:r,project64_uViewProjectionMatrix:r,project64_uScale:i}}))},function(t,e,n){"use strict";var r=n(61),i=n(109),o=n(99),a=(e.a={name:"lighting",dependencies:[r.a],vs:"#define MAX_NUM_OF_LIGHTS 5\n\n// TODO these should be using lighting_ prefix\nuniform vec3 lighting_lightPositions[MAX_NUM_OF_LIGHTS];\nuniform vec2 lighting_lightStrengths[MAX_NUM_OF_LIGHTS];\nuniform float lighting_ambientRatio;\nuniform float lighting_diffuseRatio;\nuniform float lighting_specularRatio;\nuniform int lighting_numberOfLights;\n\nfloat lighting_getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  float lightWeight = 0.0;\n\n  vec3 normals_worldspace_vec3 = normals_worldspace.xyz;\n\n  vec3 camera_pos_worldspace = project_uCameraPosition;\n  vec3 view_direction = normalize(camera_pos_worldspace - position_worldspace_vec3);\n\n  for (int i = 0; i < MAX_NUM_OF_LIGHTS; i++) {\n    if (i >= lighting_numberOfLights) {\n      break;\n    }\n    vec3 light_position_worldspace = lighting_lightPositions[i];\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace_vec3);\n\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normals_worldspace_vec3);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normals_worldspace_vec3, halfway_direction), 0.0);\n      specular = pow(specular_angle, 32.0);\n    }\n    lambertian = max(lambertian, 0.0);\n    lightWeight += (lighting_ambientRatio + lambertian * lighting_diffuseRatio + specular * lighting_specularRatio) *\n      lighting_lightStrengths[i].x;\n  }\n\n  return lightWeight;\n}\n\n// DEPRECATED - Backwards compatibility\n\nfloat getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n  return lighting_getLightWeight(position_worldspace_vec3, normals_worldspace);\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;if(!t.lightSettings)return{};var e=t.coordinateSystem,n=t.coordinateOrigin,r=t.lightSettings,i=r.numberOfLights,o=void 0===i?1:i,h=r.lightsPosition,d=void 0===h?s:h,y=r.lightsStrength,v=void 0===y?u:y,g=r.coordinateSystem,m=r.coordinateOrigin,b=r.modelMatrix,_=void 0===b?null:b,x=r.ambientRatio,w=void 0===x?l:x,E=r.diffuseRatio,O=void 0===E?c:E,S=r.specularRatio,P=void 0===S?f:S;return{lighting_lightPositions:p({lightsPosition:d,numberOfLights:o,viewport:t.viewport,modelMatrix:_,coordinateSystem:e,coordinateOrigin:n,fromCoordinateSystem:g,fromCoordinateOrigin:m}),lighting_lightStrengths:v,lighting_ambientRatio:w,lighting_diffuseRatio:O,lighting_specularRatio:P,lighting_numberOfLights:o}},deprecations:[{type:"function",old:"getLightWeight",new:"lighting_getLightWeight",deprecated:!0}]},{}),s=[-122.45,37.75,8e3],u=[2,0],l=.4,c=.6,f=.8,p=Object(o.a)(function(t){for(var e=t.lightsPosition,n=t.numberOfLights,r=t.viewport,o=t.modelMatrix,a=t.coordinateSystem,s=t.coordinateOrigin,u=t.fromCoordinateSystem,l=t.fromCoordinateOrigin,c={viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,fromCoordinateSystem:u,fromCoordinateOrigin:l},f=[],p=0;p<n;p++){var h=Object(i.b)(e.slice(3*p,3*p+3),c);f[3*p]=h[0],f[3*p+1]=h[1],f[3*p+2]=h[2]}return f})},function(t,e,n){var r=n(326),i=n(327),o=n(144),a=n(105);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return p}),n.d(e,"b",function(){return h});var r=n(24),i=n(130),o=n(58),a=n.n(o),s=n(226),u=n.n(s),l=n(31);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=c(t,3),i=r[0],o=r[1],a=r[2],s=void 0===a?0:a,u=c(e.projectFlat(t),2);return[u[0],u[1],s*(n?Object(l.b)({longitude:i,latitude:o,scale:e.scale}):e.getDistanceScales()).pixelsPerMeter[2]]}function p(t,e){var n=e.viewport,i=e.modelMatrix,o=e.coordinateSystem,s=e.coordinateOrigin,u=e.offsetMode,p=c(t,3),h=p[0],d=p[1],y=p[2];if(i){var v=c(a()([],[h,d,y,1],i),3);h=v[0],d=v[1],y=v[2]}switch(o){case r.a.LNGLAT:case r.a.LNGLAT_DEPRECATED:return f([h,d,y],n,u);case r.a.LNGLAT_OFFSETS:return f([h+s[0],d+s[1],y+(s[2]||0)],n,u);case r.a.METER_OFFSETS:return f(Object(l.a)(s,[h,d,y]),n,u);case r.a.IDENTITY:default:return[h,d,y]}}function h(t,e){var n=function(t){var e=Object.assign({},t),n=t.viewport,o=t.coordinateSystem,a=t.coordinateOrigin,s=t.fromCoordinateSystem,u=t.fromCoordinateOrigin;return void 0===s&&(e.fromCoordinateSystem=o),void 0===u&&(e.fromCoordinateOrigin=a),o===r.a.LNGLAT&&n.zoom>=i.a&&(e.coordinateSystem=r.a.LNGLAT_OFFSETS,e.coordinateOrigin=[Math.fround(n.longitude),Math.fround(n.latitude)]),e}(e),o=n.viewport,a=n.coordinateSystem,s=n.coordinateOrigin,l=n.modelMatrix,c=n.fromCoordinateSystem,h=n.fromCoordinateOrigin;switch(a){case r.a.LNGLAT_OFFSETS:case r.a.METER_OFFSETS:var d=p(t,{viewport:o,modelMatrix:l,coordinateSystem:c,coordinateOrigin:h,offsetMode:!0}),y=f(s,o,!0);return u()(d,d,y),d;case r.a.LNGLAT:case r.a.LNGLAT_DEPRECATED:case r.a.IDENTITY:default:return p(t,{viewport:o,modelMatrix:l,coordinateSystem:c,coordinateOrigin:h,offsetMode:!1})}}},function(t,e,n){"use strict";var r=n(4),i=n(7),o=n(13),a=n(11),s=n(14),u=n(19),l=n(20),c=n(22),f=n(50),p=n(31),h=n(53),d=n.n(h),y=n(57),v=n.n(y),g=n(33),m=n.n(g),b=n(87),_=n.n(b),x=Object(f.a)(),w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,i=e.height,o=e.viewMatrix,a=void 0===o?x:o,s=e.projectionMatrix,u=void 0===s?x:s;Object(r.a)(this,t),this.width=n||1,this.height=i||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=a,this.projectionMatrix=u;var l=Object(f.a)();m()(l,l,this.projectionMatrix),m()(l,l,this.viewMatrix),this.viewProjectionMatrix=l;var c=Object(f.a)();d()(c,c,[this.width/2,-this.height/2,1]),v()(c,c,[1,-1,0]),m()(c,c,this.viewProjectionMatrix);var p=_()(Object(f.a)(),c);if(!p)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=p,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(i.a)(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&Object(c.e)(e.projectionMatrix,this.projectionMatrix)&&Object(c.e)(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,n=void 0===e||e,r=this.projectPosition(t),i=Object(p.k)(r,this.pixelProjectionMatrix),o=Object(l.a)(i,2),a=o[0],s=o[1],u=n?s:this.height-s;return 2===t.length?[a,u]:[a,u,i[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=Object(l.a)(t,3),a=o[0],s=o[1],u=o[2],c=r?s:this.height-s,f=i&&i*this.pixelsPerMeter,h=Object(p.h)([a,c,u],this.pixelUnprojectionMatrix,f),d=this.unprojectPosition(h),y=Object(l.a)(d,3),v=y[0],g=y[1],m=y[2];return Number.isFinite(u)?[v,g,m]:Number.isFinite(i)?[v,g,i]:[v,g]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=Object(l.a)(e,2);return[n[0],n[1],(t[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=Object(l.a)(e,2);return[n[0],n[1],(t[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}}]),t}(),E=n(230),O=n(101),S=n.n(O),P=n(131),C=n.n(P);n.d(e,"a",function(){return T});var T=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.width,s=n.height,l=n.latitude,c=void 0===l?0:l,f=n.longitude,h=void 0===f?0:f,d=n.zoom,y=void 0===d?0:d,v=n.pitch,g=void 0===v?0:v,m=n.bearing,b=void 0===m?0:m,_=n.altitude,x=void 0===_?1.5:_,w=n.nearZMultiplier,E=n.farZMultiplier;Object(r.a)(this,e),i=i||1,s=s||1;var O=Object(p.l)(y);x=Math.max(.75,x);var S=Object(p.g)([h,c],O);S[2]=0;var P=Object(p.d)({width:i,height:s,pitch:g,bearing:b,altitude:x,nearZMultiplier:w||1/s,farZMultiplier:E||1.01}),C=Object(p.f)({height:s,center:S,pitch:g,bearing:b,altitude:x,flipY:!0});return(t=Object(o.a)(this,Object(a.a)(e).call(this,{width:i,height:s,viewMatrix:C,projectionMatrix:P}))).latitude=c,t.longitude=h,t.zoom=y,t.pitch=g,t.bearing=b,t.altitude=x,t.scale=O,t.center=S,t.pixelsPerMeter=Object(p.b)(Object(u.a)(Object(u.a)(t))).pixelsPerMeter[2],Object.freeze(Object(u.a)(Object(u.a)(t))),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(p.g)(t,e)}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(p.j)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(p.h)(n,this.pixelUnprojectionMatrix),i=Object(p.g)(e,this.scale),o=S()([],i,C()([],r)),a=S()([],this.center,o);return Object(p.j)(a,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(E.a)(Object.assign({width:r,height:i,bounds:t},n));return new e({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}]),e}(w)},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(4),i=n(7),o=n(13),a=n(11),s=n(14),u=n(97),l=n(225),c=n.n(l),f=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(r.a)(this,e),t=Object(o.a)(this,Object(a.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,i),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:"cross",value:function(t){return c()(this,this,t),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),e}(u.a)},function(t,e,n){var r=n(378),i=n(47);t.exports=function(t){return t&&t.length?r(t,i):0}},function(t,e,n){var r=n(166);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(93),i=n(69),o=n(115),a=n(35);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(294),i=n(77),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){var r=n(46),i=n(144),o=n(300),a=n(177);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(89)(Object,"create");t.exports=r},function(t,e,n){var r=n(310),i=n(311),o=n(312),a=n(313),s=n(314);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(93);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(316);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(359),i=n(41);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(4),i=n(13),o=n(11),a=n(7),s=n(14),u=n(19),l=n(10),c=n(26),f=n(56),p=n(25),h=function(t){function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(l.d)(t),(n=Object(i.a)(this,Object(o.a)(e).call(this,t,Object.assign({},a,{target:a.target||32879})))).width=null,n.height=null,n.depth=null,Object.seal(Object(u.a)(Object(u.a)(n))),n.setImageData(a),a.generateMipmap&&n.generateMipmap(),n}return Object(s.a)(e,t),Object(a.a)(e,null,[{key:"isSupported",value:function(t){return Object(l.n)(t)}}]),Object(a.a)(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,e);var n=this.opts,r=n.pixels,i=n.settings;i&&(Object(c.c)(i,function(){r&&t.setImage3D(t.opts)}),this.setParameters(e))}},{key:"setImage3D",value:function(t){var e=t.level,n=void 0===e?0:e,r=t.internalformat,i=void 0===r?6408:r,o=t.width,a=t.height,s=t.depth,u=void 0===s?1:s,l=t.border,c=void 0===l?0:l,f=t.format,h=t.type,d=void 0===h?5121:h,y=t.offset,v=void 0===y?0:y,g=t.pixels;ArrayBuffer.isView(g)?this.gl.texImage3D(this.target,n,i,o,a,u,c,f,d,g):g instanceof p.a&&(this.gl.bindBuffer(35052,g.handle),this.gl.texImage3D(this.target,n,i,o,a,u,c,f,d,v),this.gl.bindBuffer(35052,g.handle))}}]),e}(f.a)},function(t,e,n){var r=n(254);t.exports=d,t.exports.parse=o,t.exports.compile=function(t,e){return u(o(t,e))},t.exports.tokensToFunction=u,t.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){for(var n,r=[],o=0,a=0,s="",u=e&&e.delimiter||"/";null!=(n=i.exec(t));){var f=n[0],p=n[1],h=n.index;if(s+=t.slice(a,h),a=h+f.length,p)s+=p[1];else{var d=t[a],y=n[2],v=n[3],g=n[4],m=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var x=null!=y&&null!=d&&d!==y,w="+"===b||"*"===b,E="?"===b||"*"===b,O=n[2]||u,S=g||m;r.push({name:v||o++,prefix:y||"",delimiter:O,optional:E,repeat:w,partial:x,asterisk:!!_,pattern:S?c(S):_?".*":"[^"+l(O)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&r.push(s),r}function a(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function s(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function u(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,i){for(var o="",u=n||{},l=(i||{}).pretty?a:encodeURIComponent,c=0;c<t.length;c++){var f=t[c];if("string"!=typeof f){var p,h=u[f.name];if(null==h){if(f.optional){f.partial&&(o+=f.prefix);continue}throw new TypeError('Expected "'+f.name+'" to be defined')}if(r(h)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(p=l(h[d]),!e[c].test(p))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(p)+"`");o+=(0===d?f.prefix:f.delimiter)+p}}else{if(p=f.asterisk?s(h):l(h),!e[c].test(p))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+p+'"');o+=f.prefix+p}}else o+=f}return o}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function f(t,e){return t.keys=e,t}function p(t){return t.sensitive?"":"i"}function h(t,e,n){r(e)||(n=e||n,e=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<t.length;s++){var u=t[s];if("string"==typeof u)a+=l(u);else{var c=l(u.prefix),h="(?:"+u.pattern+")";e.push(u),u.repeat&&(h+="(?:"+c+h+")*"),a+=h=u.optional?u.partial?c+"("+h+")?":"(?:"+c+"("+h+"))?":c+"("+h+")"}}var d=l(n.delimiter||"/"),y=a.slice(-d.length)===d;return i||(a=(y?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&y?"":"(?="+d+"|$)",f(new RegExp("^"+a,p(n)),e)}function d(t,e,n){return r(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return f(t,e)}(t,e):r(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(d(t[i],e,n).source);return f(new RegExp("(?:"+r.join("|")+")",p(n)),e)}(t,e,n):function(t,e,n){return h(o(t,n),e,n)}(t,e,n)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r=n(23),i=n(127);function o(){return!("object"===(void 0===t?"undefined":Object(r.a)(t))&&"[object process]"===String(t)&&!t.browser)||Object(i.a)()}}).call(this,n(51))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return i});var r=n(23);function i(e){if("undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==t&&"object"===Object(r.a)(t.versions)&&Boolean(t.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=e||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n(51))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(4),i=n(7),o=n(13),a=n(11),s=n(14),u=n(22);var l=function(t){function e(){return Object(r.a)(this,e),Object(o.a)(this,Object(a.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"toString",value:function(){return this.formatString(u.c)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Object(u.f)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(u.e)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t&&t.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(t[n]);return e}},{key:"check",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(u.c.debug&&!this.validate(t))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}}]),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array))},function(t,e,n){"use strict";n.d(e,"a",function(){return g}),n.d(e,"b",function(){return b});var r=n(33),i=n.n(r),o=n(58),a=n.n(o),s=n(24),u=n(99),l=n(18),c=n(17),f=n(43),p=[0,0,0,0],h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y=[0,0,0],v=[0,0,0],g=12,m=Object(u.a)(function(t){var e=t.viewport,n=t.devicePixelRatio,r=t.coordinateSystem,o=t.coordinateOrigin,u=t.wrapLongitude,l=e.zoom;Object(c.a)(l>=0);var d=function(t){var e,n=t.viewport,r=t.coordinateSystem,o=t.coordinateOrigin,u=t.coordinateZoom,l=n.viewMatrixUncentered,c=n.viewMatrix,d=n.projectionMatrix,y=n.viewProjectionMatrix,v=function(t){switch(t){case s.a.LNGLAT:case s.a.LNGLAT_EXPERIMENTAL:default:return f.a.LNGLAT_AUTO_OFFSET;case s.a.LNGLAT_DEPRECATED:return f.a.LNG_LAT;case s.a.METER_OFFSETS:case s.a.METERS:return f.a.METER_OFFSETS;case s.a.LNGLAT_OFFSETS:return f.a.LNGLAT_OFFSETS;case s.a.IDENTITY:return f.a.IDENTITY}}(r),m=o;if(v===f.a.LNGLAT_AUTO_OFFSET)if(u<g)v=f.a.LNG_LAT;else{var b=Math.fround(n.longitude),_=Math.fround(n.latitude);m=[b,_]}switch(v){case f.a.IDENTITY:case f.a.LNG_LAT:e=p;break;case f.a.LNGLAT_OFFSETS:case f.a.METER_OFFSETS:case f.a.LNGLAT_AUTO_OFFSET:var x=n.projectFlat(m,Math.pow(2,u));e=a()([],[x[0],x[1],0,1],y),c=l||c,y=i()([],d,c),y=i()([],y,h);break;default:throw new Error("Unknown projection mode")}return{viewMatrix:c,viewProjectionMatrix:y,projectionCenter:e,cameraPos:n.cameraPosition,shaderCoordinateSystem:v,shaderCoordinateOrigin:m}}({coordinateSystem:r,coordinateOrigin:o,coordinateZoom:l,viewport:e}),v=d.projectionCenter,m=d.viewProjectionMatrix,b=d.cameraPos,_=d.shaderCoordinateSystem,x=d.shaderCoordinateOrigin;Object(c.a)(m,"Viewport missing modelViewProjectionMatrix");var w=e.getDistanceScales(),E=[e.width*n,e.height*n],O={project_uCoordinateSystem:_,project_uCenter:v,project_uWrapLongitude:u,project_uAntimeridian:(e.longitude||0)-180,project_uViewportSize:E,project_uDevicePixelRatio:n,project_uFocalDistance:e.focalDistance||1,project_uPixelsPerMeter:w.pixelsPerMeter,project_uPixelsPerDegree:w.pixelsPerDegree,project_uPixelsPerUnit:w.pixelsPerMeter,project_uPixelsPerUnit2:y,project_uScale:e.scale,project_uViewProjectionMatrix:m,project_uCameraPosition:b},S=e.getDistanceScales(x);switch(_){case f.a.METER_OFFSETS:O.project_uPixelsPerUnit=S.pixelsPerMeter,O.project_uPixelsPerUnit2=S.pixelsPerMeter2;break;case f.a.LNGLAT_AUTO_OFFSET:O.project_coordinate_origin=x;case f.a.LNGLAT_OFFSETS:O.project_uPixelsPerUnit=S.pixelsPerDegree,O.project_uPixelsPerUnit2=S.pixelsPerDegree2}return O});function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewport,n=t.devicePixelRatio,r=void 0===n?1:n,i=t.modelMatrix,o=void 0===i?null:i,a=t.coordinateSystem,u=void 0===a?s.a.LNGLAT:a,f=t.coordinateOrigin,p=void 0===f?v:f,h=t.wrapLongitude,y=void 0!==h&&h,g=t.projectionMode,b=t.positionOrigin;return Object(c.a)(e),void 0!==g&&l.a.removed("projectionMode","coordinateSystem")(),void 0!==b&&l.a.removed("positionOrigin","coordinateOrigin")(),Object.assign({project_uModelMatrix:o||d},m({viewport:e,devicePixelRatio:r,coordinateSystem:u,coordinateOrigin:p,wrapLongitude:y}))}},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},function(t,e,n){"use strict";var r=n(232),i=1,o=2,a=4,s={mousedown:i,mousemove:o,mouseup:a};var u=void 0;r.a&&(u=n(275)),u&&(function(t){var e=t.prototype.handler;t.prototype.handler=function(t){var n=this.store;t.button>0&&(function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,function(e){return e.pointerId===t.pointerId})||n.push(t)),e.call(this,t)}}(u.PointerEventInput),function(t){t.prototype.handler=function(t){var e=s[t.type];e&i&&t.button>=0&&(this.pressed=!0),e&o&&0===t.which&&(e=a),this.pressed&&(e&a&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(u.MouseInput));var l=u?u.Manager:function(t){var e={},n=function(){return e};return e.get=function(){return null},e.set=n,e.on=n,e.off=n,e.destroy=n,e.emit=n,e},c=u,f=c?[[c.Rotate,{enable:!1}],[c.Pinch,{enable:!1}],[c.Swipe,{enable:!1}],[c.Pan,{threshold:0,enable:!1}],[c.Press,{enable:!1}],[c.Tap,{event:"doubletap",taps:2,enable:!1}],[c.Tap,{enable:!1}]]:null,p={rotate:["pinch"]},h={doubletap:["tap"]},d={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},y=["keydown","keyup"],v=["mousedown","mousemove","mouseup","mouseleave"],g=["wheel","mousewheel","DOMMouseScroll"],m={tap:"tap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},b={click:"tap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseleave:"pointerleave"},_=n(102),x=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var w=-1!==_.a.indexOf("firefox"),E=g,O=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=E.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent)})}return x(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"wheel"===t&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){this.options.legacyBlockScroll&&t.preventDefault();var e=t.deltaY;_.b.WheelEvent&&(w&&t.deltaMode===_.b.WheelEvent.DOM_DELTA_PIXEL&&(e/=_.b.devicePixelRatio),t.deltaMode===_.b.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%4.000244140625==0&&(e=Math.floor(e/4.000244140625)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:"wheel",center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}(),S=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var P=v,C=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.events=P.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent)})}return S(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"pointermove"===t&&(this.enableMoveEvent=e),"pointerleave"===t&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){if(this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:"pointerleave",srcEvent:t,pointerType:"mouse",target:t.target}),this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}(),T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var k=y,A=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=k.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=1,e.style.outline="none",this.events.forEach(function(t){return e.addEventListener(t,r.handleEvent)})}return T(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"keydown"===t&&(this.enableDownEvent=e),"keyup"===t&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:"keydown",srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:"keyup",srcEvent:t,key:t.key,target:t.target}))}}]),t}(),M=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var j=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return M(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"handleEvent",value:function(t){this.callback({type:"contextmenu",center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target}),this.options.rightButton&&t.preventDefault()}}]),t}(),R=1,I=2,L=4,D={pointerdown:R,pointermove:I,pointerup:L,mousedown:R,mousemove:I,mouseup:L},F=1,N=2,B=3,z=0,U=1,V=2,G=1,W=2,q=4;var H=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var X={events:null,recognizers:null,Manager:l,rightButton:!1,touchAction:"none",legacyBlockScroll:!0},Z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Object.assign({},X,n),this.eventHandlers=[],this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var r=n.events;r&&this.on(r)}return H(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||f}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(p).forEach(function(t){var n=e.manager.get(t);n&&p[t].forEach(function(t){n.recognizeWith(t)})}),this.wheelInput=new O(t,this._onOtherEvent,{enable:!1,legacyBlockScroll:n.legacyBlockScroll}),this.moveInput=new C(t,this._onOtherEvent,{enable:!1}),this.keyInput=new A(t,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new j(t,this._onOtherEvent,{rightButton:n.rightButton}),this.eventHandlers.forEach(function(t){var n=t.recognizerName,r=t.eventAlias,i=t.wrappedHandler;e._toggleRecognizer(n,!0),e.manager.on(r,i)})}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){if("string"==typeof t)this._addEventHandler(t,e,n);else for(var r in n=e,t)this._addEventHandler(r,t[r],n)}},{key:"off",value:function(t,e){if("string"==typeof t)this._removeEventHandler(t,e);else for(var n in t)this._removeEventHandler(n,t[n])}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r){r.set({enable:e});var i=h[t];i&&!this.options.recognizers&&i.forEach(function(r){var i=n.get(r);e?i.requireFailure(t):i.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.manager,i=this.eventHandlers,o=this._wrapEventHandler(t,e,n),a=b[t]||t,s=m[a]||a;this._toggleRecognizer(s,!0);var u=i.filter(function(t){return t.eventAlias===a&&t.srcElement!==n&&(!t.srcElement||t.srcElement.contains(n))});i.push({event:t,eventAlias:a,recognizerName:s,srcElement:n,handler:e,wrappedHandler:o}),u.forEach(function(t){return r.off(a,t.wrappedHandler)}),r&&r.on(a,o),u.forEach(function(t){return r.on(a,t.wrappedHandler)})}},{key:"_removeEventHandler",value:function(t,e){for(var n=this.manager,r=this.eventHandlers,i=!1,o=r.length;o--;){var a=r[o];a.event===t&&a.handler===e&&(n&&n.off(a.eventAlias,a.wrappedHandler),r.splice(o,1),i=!0)}if(i){var s=b[t]||t,u=m[s]||s;r.find(function(t){return t.recognizerName===u})||this._toggleRecognizer(u,!1)}}},{key:"_wrapEventHandler",value:function(t,e,n){var r=this;return function(i){var o=i.mjolnirEvent;(o||(o=r._normalizeEvent(i),i.mjolnirEvent=o),o.handled&&o.handled!==n)||(!n||n.contains(i.srcEvent.target))&&e(Object.assign({},o,{type:t,stopPropagation:function(){o.handled||(o.handled=n)}}))}}},{key:"_normalizeEvent",value:function(t){var e=this.element;return Object.assign({},t,function(t){var e=D[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,o=n.which,a=!1,s=!1,u=!1;return e===L||e===I&&!Number.isFinite(r)?(a=o===F,s=o===N,u=o===B):e===I?(a=Boolean(r&G),s=Boolean(r&q),u=Boolean(r&W)):e===R&&(a=i===z,s=i===U,u=i===V),{leftButton:a,middleButton:s,rightButton:u}}(t),function(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),o=i.width/e.offsetWidth,a=i.height/e.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/o,y:(r.y-i.top-e.clientTop)/a}}}(t,e),{handled:!1,rootElement:e})}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=d[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}();n.d(e,"a",function(){return Z})},function(t,e,n){"use strict";n.r(e);var r=n(96),i=n(29),o=n(49);n(163);n.d(e,"global",function(){return i.a});var a="6.2.0-beta.4";if(i.a.luma&&i.a.luma.VERSION!==a)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(i.a.luma.VERSION," vs ").concat(a));i.a.luma||(r.a&&o.a.log(0,"luma.gl ".concat(a," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),i.a.luma=i.a.luma||{VERSION:a,version:a,log:o.a,stats:{},globals:{modules:{},nodeIO:{}}});e.default=i.a.luma},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return f});var r=n(0),i=n.n(r);function o(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(){}var u={container:i.a.object,mapboxApiAccessToken:i.a.string,attributionControl:i.a.bool,preserveDrawingBuffer:i.a.bool,onLoad:i.a.func,onError:i.a.func,reuseMaps:i.a.bool,reuseMap:i.a.bool,transformRequest:i.a.func,mapStyle:i.a.string,visible:i.a.bool,width:i.a.number,height:i.a.number,viewState:i.a.object,longitude:i.a.number,latitude:i.a.number,zoom:i.a.number,bearing:i.a.number,pitch:i.a.number,altitude:i.a.number,mapOptions:i.a.object},l={mapboxApiAccessToken:function(){var e=null;if("undefined"!=typeof window&&window.location){var n=window.location.search.match(/access_token=([^&\/]*)/);e=n&&n[1]}return e||void 0===t||(e=e||t.env.MapboxAccessToken||t.env.REACT_APP_MAPBOX_ACCESS_TOKEN),e||null}(),preserveDrawingBuffer:!1,attributionControl:!0,preventStyleDiffing:!1,onLoad:s,onError:s,reuseMaps:!1,reuseMap:!1,transformRequest:null,mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,bearing:0,pitch:0,altitude:1.5,width:0,height:0,mapOptions:{}};function c(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"component";t.debug&&i.a.checkPropTypes(u,t,"prop",e)}var f=function(){function t(e){if(o(this,t),!e.mapboxgl)throw new Error("Mapbox not available");!t.initialized&&console.debug&&(t.initialized=!0,console.debug("react-map-gl: ".concat("3.3.8"," using mapbox-gl v").concat(e.mapboxgl.version)),this._checkStyleSheet(e.mapboxgl.version)),this.props={},this._initialize(e)}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(t){return this._update(this.props,t),this}},{key:"resize",value:function(){return this._map.resize(),this}},{key:"getMap",value:function(){return this._map}},{key:"_create",value:function(e){if((e.reuseMaps||e.reuseMap)&&t.savedMap){this._map=this.map=t.savedMap;var n=this._map.getContainer(),r=e.container;for(r.classList.add("mapboxgl-map");0<n.childNodes.length;)r.appendChild(n.childNodes[0]);this._map._container=r,t.savedMap=null,e.mapStyle&&this._map.setStyle(e.mapStyle),e.onLoad()}else{var i={container:e.container||document.body,center:[0,0],zoom:8,pitch:0,bearing:0,style:e.mapStyle,interactive:!1,attributionControl:e.attributionControl,preserveDrawingBuffer:e.preserveDrawingBuffer};e.transformRequest&&(i.transformRequest=e.transformRequest),this._map=this.map=new e.mapboxgl.Map(Object.assign({},i,e.mapOptions)),this.map.once("load",e.onLoad),this.map.on("error",e.onError)}return this}},{key:"_destroy",value:function(){this._map&&(t.savedMap?this._map.remove():t.savedMap=this._map,this._map=null)}},{key:"_initialize",value:function(t){c(t=Object.assign({},l,t),"Mapbox"),this.accessToken=t.mapboxApiAccessToken||l.mapboxApiAccessToken,t.mapboxgl&&(this.accessToken?t.mapboxgl.accessToken=this.accessToken:t.mapboxgl.accessToken="no-token"),this._create(t);var e=this.map.getCanvas();e&&(e.style.outline="none"),this._updateMapViewport({},t),this._updateMapSize({},t),this.props=t}},{key:"_update",value:function(t,e){this._map&&(c(e=Object.assign({},this.props,e),"Mapbox"),this._updateMapViewport(t,e),this._updateMapSize(t,e),this.props=e)}},{key:"_updateMapSize",value:function(t,e){(t.width!==e.width||t.height!==e.height)&&this._map.resize()}},{key:"_updateMapViewport",value:function(t,e){var n=this._getViewState(t),r=this._getViewState(e);(r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude)&&(this._map.jumpTo(this._getMapboxViewStateProps(e)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude))}},{key:"_getViewState",value:function(t){var e=t.viewState||t,n=e.longitude,r=e.latitude,i=e.zoom,o=e.pitch,a=void 0===o?0:o,s=e.bearing,u=void 0===s?0:s,l=e.altitude;return{longitude:n,latitude:r,zoom:i,pitch:a,bearing:u,altitude:void 0===l?1.5:l}}},{key:"_checkStyleSheet",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"0.47.0";if("undefined"!=typeof document)try{var e=document.createElement("div");if(e.className="mapboxgl-map",e.style.display="none",document.body.append(e),!("static"!==window.getComputedStyle(e).position)){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(t,"/mapbox-gl.css")),document.head.append(n)}}catch(t){}}},{key:"_getMapboxViewStateProps",value:function(t){var e=this._getViewState(t);return{center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch,width:t.width,height:t.height}}}]),t}();f.propTypes=u,f.defaultProps=l}).call(this,n(51))},function(t,e,n){var r=n(94),i=n(81),o=n(176),a=n(370);t.exports=function(t,e){if(null==t)return{};var n=r(a(t),function(t){return[t]});return e=i(e),o(t,n,function(t,n){return e(t,n[0])})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DeckGL",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"autobind",{enumerable:!0,get:function(){return i.default}});var r=o(n(276)),i=o(n(165));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var r=n(113),i=n(93),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(47),i=n(169),o=n(170);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e,n){(function(t){var r=n(68),i=n(295),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(173)(t))},function(t,e,n){var r=n(296),i=n(142),o=n(297),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(118),i=n(105);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(46),i=n(104),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(303),i=n(315),o=n(317),a=n(318),s=n(319);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(89)(n(68),"Map");t.exports=r},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(145),i=n(339),o=n(340);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(346),i=n(146),o=n(347),a=n(189),s=n(190),u=n(90),l=n(168),c=l(r),f=l(i),p=l(o),h=l(a),d=l(s),y=u;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=y(new i)||o&&"[object Promise]"!=y(o.resolve())||a&&"[object Set]"!=y(new a)||s&&"[object WeakMap]"!=y(new s))&&(y=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=y},function(t,e,n){var r=n(123),i=n(361)(r);t.exports=i},function(t,e,n){var r=n(203),i=n(154);function o(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,t.exports=o},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(203),i=n(154),o=4294967295;function a(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}a.prototype=r(i.prototype),a.prototype.constructor=a,t.exports=a},function(t,e,n){(function(e){t.exports={window:"undefined"==typeof window?e:window,global:void 0===e?window:e,document:"undefined"==typeof document?{}:document}}).call(this,n(55))},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){var r=n(184),i=n(81),o=n(375),a=n(46),s=n(114);t.exports=function(t,e,n){var u=a(t)?r:o;return n&&s(t,e,n)&&(e=void 0),u(t,i(e,3))}},function(t,e,n){var r=n(171),i=n(376),o=n(47),a=Object.prototype.toString,s=i(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=a.call(e)),t[e]=n},r(o));t.exports=s},,function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(s[l]=n[l]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(249)},function(t,e,n){"use strict";(function(t){var e,r=n(2),i=n(211);function o(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function a(t){return t&&!0}var s=(e={},Object(r.a)(e,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){o(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(r.a)(e,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(t,e){o(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(r.a)(e,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){o(!1)}}),Object(r.a)(e,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){o(!1)},deleteQuery:function(){o(!1)},beginQuery:function(){o(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},queryCounter:function(){},getQueryObject:function(){}}),Object(r.a)(e,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),Object(r.a)(e,"OVERRIDES",{readBuffer:function(t,e,n){a(t)&&e(n)},getVertexAttrib:function(t,e,n,r){var i,o=function(t,e){return{webgl2:a(t),ext:t.getExtension(e)}}(t,"ANGLE_instanced_arrays"),s=o.webgl2,u=o.ext;switch(r){case 35069:i=!!s&&void 0;break;case 35070:i=s||u?void 0:0}return void 0!==i?i:e(n,r)},getProgramParameter:function(t,e,n,r){if(!a(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,i){if(!a(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter:function(t,e,n,r){switch(r){case 34046:var i=t.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:i.a,hint:function(t,e,n,r){return e(n,r)}}),e);function u(t,e){var n=e.extension,r=e.target,i=e.target2,a=s[n];o(a);var u=a.meta,l=(void 0===u?{}:u).suffix,c=void 0===l?"":l,f=t.getExtension(n);Object.keys(a).forEach(function(e){var n="".concat(e).concat(c),o=null;"meta"===e||"function"==typeof t[e]||(f&&"function"==typeof f[n]?o=function(){return f[n].apply(f,arguments)}:"function"==typeof a[e]&&(o=a[e].bind(r))),o&&(r[e]=o,i[e]=o)})}(void 0!==t?t:window).polyfillContext=function(t){if(t.luma=t.luma||{},function(t){t.luma.extensions={};var e=t.getSupportedExtensions(),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.luma[s]=t.getExtension(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}(t),!t.luma.polyfilled){for(var e in s)"overrides"!==e&&u(t,{extension:e,target:t.luma,target2:t});!function(t,e){var n=e.target,r=e.target2,i=s.OVERRIDES;Object.keys(i).forEach(function(e){if("function"==typeof i[e]){var o=t[e]?t[e].bind(t):function(){},a=i[e].bind(null,t,o);n[e]=a,r[e]=a}})}(t,{target:t.luma,target2:t}),t.luma.polyfilled=!0}return t}}).call(this,n(55))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inheritsFrom=function(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(e),i=!0,o=!1,a=void 0;try{for(var s,u=function(){var e=s.value;"function"==typeof t[e]&&(r.find(function(t){return e===t})||(t[e]=t[e].bind(t)))},l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}};var r=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"]},function(t,e,n){var r=n(89),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(55))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(290),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=o[a];return l[e]=n(u),r(t,this,l)}}},function(t,e,n){var r=n(291),i=n(292)(r);t.exports=i},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(293),i=n(117),o=n(46),a=n(140),s=n(115),u=n(141),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),f=!n&&!c&&a(t),p=!n&&!c&&!f&&u(t),h=n||c||f||p,d=h?r(t.length,String):[],y=d.length;for(var v in t)!e&&!l.call(t,v)||h&&("length"==v||f&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,y))||d.push(v);return d}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(116),i=n(298),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(143),i=n(321),o=n(118);t.exports=function(t,e,n){for(var a=-1,s=e.length,u={};++a<s;){var l=e[a],c=r(t,l);n(c,l)&&i(u,o(l,t),c)}return u}},function(t,e,n){var r=n(320);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(322),i=n(323);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e,n){var r=n(78),i=n(169),o=n(170);t.exports=function(t){return o(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(172),i=n(328),o=n(69);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(120),i=n(333),o=n(334),a=n(335),s=n(336),u=n(337);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e,n){var r=n(338),i=n(77);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e,n){var r=n(148),i=n(184),o=n(149),a=1,s=2;t.exports=function(t,e,n,u,l,c){var f=n&a,p=t.length,h=e.length;if(p!=h&&!(f&&h>p))return!1;var d=c.get(t);if(d&&c.get(e))return d==e;var y=-1,v=!0,g=n&s?new r:void 0;for(c.set(t,e),c.set(e,t);++y<p;){var m=t[y],b=e[y];if(u)var _=f?u(b,m,y,e,t,c):u(m,b,y,t,e,c);if(void 0!==_){if(_)continue;v=!1;break}if(g){if(!i(e,function(t,e){if(!o(g,e)&&(m===t||l(m,t,n,u,c)))return g.push(e)})){v=!1;break}}else if(m!==b&&!l(m,b,n,u,c)){v=!1;break}}return c.delete(t),c.delete(e),v}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e,n){var r=n(147),i=n(46);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e,n){var r=n(345),i=n(188),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i;t.exports=s},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(89)(n(68),"Set");t.exports=r},function(t,e,n){var r=n(89)(n(68),"WeakMap");t.exports=r},function(t,e,n){var r=n(35);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e,n){var r=n(195);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(196),i=1/0,o=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===i||t===-i?(t<0?-1:1)*o:t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(35),i=n(104),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=u.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):s.test(t)?o:+t}},function(t,e,n){var r=n(193),i=n(352),o=n(353);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},function(t,e,n){var r=n(175)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(148),i=n(200),o=n(201),a=n(149),s=n(367),u=n(150),l=200;t.exports=function(t,e,n){var c=-1,f=i,p=t.length,h=!0,d=[],y=d;if(n)h=!1,f=o;else if(p>=l){var v=e?null:s(t);if(v)return u(v);h=!1,f=a,y=new r}else y=e?[]:d;t:for(;++c<p;){var g=t[c],m=e?e(g):g;if(g=n||0!==g?g:0,h&&m==m){for(var b=y.length;b--;)if(y[b]===m)continue t;e&&y.push(m),d.push(g)}else f(y,m,n)||(y!==d&&y.push(m),d.push(g))}return d}},function(t,e,n){var r=n(197);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(35),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(382),i=n(202),o=r?function(t){return r.get(t)}:i;t.exports=o},function(t,e,n){var r=n(383),i=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=t.name+"",n=r[e],o=i.call(r,e)?n.length:0;o--;){var a=n[o],s=a.func;if(null==s||s==t)return a.name}return e}},function(t,e,n){"use strict";n.r(e);var r=n(9),i=n(61),o={name:"project32",dependencies:[i.a],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 worldPosition\n) {\n  vec3 projectedPosition = project_position(position, position64xyLow);\n  worldPosition = vec4(projectedPosition + offset, 1.0);\n  return project_to_clipspace(worldPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec2 position64xyLow, vec3 offset\n) {\n  vec4 worldPosition;\n  return project_position_to_clipspace(position, position64xyLow, offset, worldPosition);\n}\n"},a=n(106),s=n(107);function u(){Object(r.z)([r.s,r.t,i.a,o,a.a,s.a,r.y]),Object(r.A)([i.a])}n.d(e,"initializeShaderModules",function(){return u}),n.d(e,"fp32",function(){return r.s}),n.d(e,"fp64",function(){return r.t}),n.d(e,"picking",function(){return r.y}),n.d(e,"project",function(){return i.a}),n.d(e,"project64",function(){return a.a}),n.d(e,"lighting",function(){return s.a}),u()},function(t,e,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,c=l&&l(Object);t.exports=function t(e,n,f){if("string"!=typeof n){if(c){var p=l(n);p&&p!==c&&t(e,p,f)}var h=a(n);s&&(h=h.concat(s(n)));for(var d=0;d<h.length;++d){var y=h[d];if(!(r[y]||i[y]||f&&f[y])){var v=u(n,y);try{o(e,y,v)}catch(t){}}}return e}return e}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r=n(23),i=n(209);function o(){return!("object"===(void 0===t?"undefined":Object(r.a)(t))&&"[object process]"===String(t)&&!t.browser)||Object(i.a)()}}).call(this,n(51))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return i});var r=n(23);function i(e){if("undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==t&&"object"===Object(r.a)(t.versions)&&Boolean(t.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=e||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n(51))},function(t,e,n){"use strict";(function(t){var r=n(23);e.a="undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type||!(void 0===t||"object"!==Object(r.a)(t.versions)||!Boolean(t.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}).call(this,n(51))},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,i=n(2),o=function(t){return s(t)?void 0:0},a=(r={},Object(i.a)(r,3074,function(t){return s(t)?void 0:36064}),Object(i.a)(r,35723,function(t){return s(t)?void 0:4352}),Object(i.a)(r,35977,o),Object(i.a)(r,32937,o),Object(i.a)(r,36795,function(t,e){var n=s(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0}),Object(i.a)(r,37445,function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)}),Object(i.a)(r,37446,function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)}),Object(i.a)(r,34047,function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),Object(i.a)(r,32883,o),Object(i.a)(r,35071,o),Object(i.a)(r,37447,o),Object(i.a)(r,36063,function(t,e){if(!s(t)){var n=t.getExtension("WEBGL_draw_buffers");return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),Object(i.a)(r,35379,o),Object(i.a)(r,35374,o),Object(i.a)(r,35377,o),Object(i.a)(r,34852,function(t){if(!s(t)){var e=t.getExtension("WEBGL_draw_buffers");return e?e.MAX_DRAW_BUFFERS_WEBGL:0}}),Object(i.a)(r,36203,function(t){return t.getExtension("OES_element_index")?2147483647:65535}),Object(i.a)(r,33001,function(t){return t.getExtension("OES_element_index")?16777216:65535}),Object(i.a)(r,33e3,function(t){return 16777216}),Object(i.a)(r,37157,o),Object(i.a)(r,35373,o),Object(i.a)(r,35657,o),Object(i.a)(r,36183,o),Object(i.a)(r,37137,o),Object(i.a)(r,34045,o),Object(i.a)(r,35978,o),Object(i.a)(r,35979,o),Object(i.a)(r,35968,o),Object(i.a)(r,35376,o),Object(i.a)(r,35375,o),Object(i.a)(r,35659,o),Object(i.a)(r,37154,o),Object(i.a)(r,35371,o),Object(i.a)(r,35658,o),Object(i.a)(r,35076,o),Object(i.a)(r,35077,o),Object(i.a)(r,35380,o),r);function s(t){return t&&!0}function u(t,e,n){var r=a[n],i="function"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)}},function(t,e,n){t.exports=function(t,e){var n=r(t[0],t[1],t[2]),a=r(e[0],e[1],e[2]);i(n,n),i(a,a);var s=o(n,a);return s>1?0:Math.acos(s)};var r=n(264),i=n(265),o=n(266)},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[1],o=n[2],a=e[1]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=e[0],t[1]=i+a*l-s*u,t[2]=o+a*u+s*l,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[0],o=n[2],a=e[0]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+s*u+a*l,t[1]=e[1],t[2]=o+s*l-a*u,t}},function(t,e){t.exports=function(t,e,n,r){var i=n[0],o=n[1],a=e[0]-i,s=e[1]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+a*l-s*u,t[1]=o+a*u+s*l,t[2]=e[2],t}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],p=t[11],h=t[12],d=t[13],y=t[14],v=t[15];return(e*a-n*o)*(f*v-p*y)-(e*s-r*o)*(c*v-p*d)+(e*u-i*o)*(c*y-f*d)+(n*s-r*a)*(l*v-p*h)-(n*u-i*a)*(l*y-f*h)+(r*u-i*s)*(l*d-c*h)}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,p=i*a,h=i*s,d=i*u,y=o*a,v=o*s,g=o*u;return t[0]=1-f-d,t[1]=c+g,t[2]=p-v,t[3]=0,t[4]=c-g,t[5]=1-l-d,t[6]=h+y,t[7]=0,t[8]=p+v,t[9]=h-y,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e){t.exports=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}},function(t,e){t.exports=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}},function(t,e){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},function(t,e){t.exports=function(t,e,n,r){var i,o,a,s,u,l,c,f,p,h,d,y,v,g,m,b,_,x,w,E,O,S,P,C,T=r[0],k=r[1],A=r[2],M=Math.sqrt(T*T+k*k+A*A);if(Math.abs(M)<1e-6)return null;T*=M=1/M,k*=M,A*=M,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],l=e[2],c=e[3],f=e[4],p=e[5],h=e[6],d=e[7],y=e[8],v=e[9],g=e[10],m=e[11],b=T*T*a+o,_=k*T*a+A*i,x=A*T*a-k*i,w=T*k*a-A*i,E=k*k*a+o,O=A*k*a+T*i,S=T*A*a+k*i,P=k*A*a-T*i,C=A*A*a+o,t[0]=s*b+f*_+y*x,t[1]=u*b+p*_+v*x,t[2]=l*b+h*_+g*x,t[3]=c*b+d*_+m*x,t[4]=s*w+f*E+y*O,t[5]=u*w+p*E+v*O,t[6]=l*w+h*E+g*O,t[7]=c*w+d*E+m*O,t[8]=s*S+f*P+y*C,t[9]=u*S+p*P+v*C,t[10]=l*S+h*P+g*C,t[11]=c*S+d*P+m*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}},function(t,e){t.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},function(t,e){t.exports=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(20),i=n(110),o=n(88);function a(t){var e=t.width,n=t.height,a=t.bounds,s=t.padding,u=void 0===s?0:s,l=t.offset,c=void 0===l?[0,0]:l,f=Object(r.a)(a,2),p=Object(r.a)(f[0],2),h=p[0],d=p[1],y=Object(r.a)(f[1],2),v=y[0],g=y[1];if(Number.isFinite(u)){u={top:u,bottom:u,left:u,right:u}}else Object(o.a)(Number.isFinite(u.top)&&Number.isFinite(u.bottom)&&Number.isFinite(u.left)&&Number.isFinite(u.right));var m=new i.a({width:e,height:n,longitude:0,latitude:0,zoom:0}),b=m.project([h,g]),_=m.project([v,d]),x=[Math.abs(_[0]-b[0]),Math.abs(_[1]-b[1])],w=[e-u.left-u.right-2*Math.abs(c[0]),n-u.top-u.bottom-2*Math.abs(c[1])];Object(o.a)(w[0]>0&&w[1]>0);var E=w[0]/x[0],O=w[1]/x[1],S=(u.right-u.left)/2/E,P=(u.bottom-u.top)/2/O,C=[(_[0]+b[0])/2+S,(_[1]+b[1])/2+P],T=m.unproject(C),k=m.zoom+Math.log2(Math.abs(Math.min(E,O)));return{longitude:T[0],latitude:T[1],zoom:k}}},function(t,e){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}},function(t,e,n){"use strict";(function(t){var r=n(233),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=!("object"===(void 0===t?"undefined":i(t))&&"[object process]"===String(t)&&!t.browser)||r.a;e.a=o}).call(this,n(51))},function(t,e,n){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a="undefined"!=typeof window&&"object"===n(window.process)&&"renderer"===window.process.type||!(void 0===t||"object"!==n(t.versions)||!Boolean(t.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":n(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}).call(this,n(51))},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,s,u,l,c,h,y,v=e&&e.length,g=v?e[0]*n:t.length,m=i(t,0,g,n,!0),b=[];if(!m)return b;if(v&&(m=function(t,e,n,r){var a,s,u,l,c,h=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,l=a<s-1?e[a+1]*r:t.length,(c=i(t,u,l,r,!1))===c.next&&(c.steiner=!0),h.push(d(c));for(h.sort(f),a=0;a<h.length;a++)p(h[a],n),n=o(n,n.next);return n}(t,e,m,n)),t.length>80*n){r=u=t[0],s=l=t[1];for(var _=n;_<g;_+=n)c=t[_],h=t[_+1],c<r&&(r=c),h<s&&(s=h),c>u&&(u=c),h>l&&(l=h);y=0!==(y=Math.max(u-r,l-s))?1/y:0}return a(m,b,n,r,s,y),b}function i(t,e,n,r,i){var o,a;if(i===S(t,e,n,r)>0)for(o=e;o<n;o+=r)a=w(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=w(o,t[o],t[o+1],a);return a&&m(a,a.next)&&(E(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(E(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,f,p){if(t){!p&&f&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=h(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,f);for(var d,y,v=t;t.prev!==t.next;)if(d=t.prev,y=t.next,f?u(t,r,i,f):s(t))e.push(d.i/n),e.push(t.i/n),e.push(y.i/n),E(t),t=y.next,v=y.next;else if((t=y)===v){p?1===p?a(t=l(t,e,n),e,n,r,i,f,2):2===p&&c(t,e,n,r,i,f):a(o(t),e,n,r,i,f,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(g(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(y(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(g(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=h(s,u,e,n,r),p=h(l,c,e,n,r),d=t.prevZ,v=t.nextZ;d&&d.z>=f&&v&&v.z<=p;){if(d!==t.prev&&d!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,v!==t.prev&&v!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=p;){if(v!==t.prev&&v!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!m(i,o)&&b(i,r,r.next,o)&&_(i,o)&&_(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),E(r),E(r.next),r=t=o),r=r.next}while(r!==t);return r}function c(t,e,n,r,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&v(u,l)){var c=x(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,r,i,s),void a(c,e,n,r,i,s)}l=l.next}u=u.next}while(u!==t)}function f(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,f=n.y,p=1/0;r=n.next;for(;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&y(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&_(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=x(e,t);o(n,n.next)}}function h(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&_(t,e)&&_(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){return!!(m(t,e)&&m(n,r)||m(t,r)&&m(n,e))||g(t,e,n)>0!=g(t,e,r)>0&&g(n,r,t)>0!=g(n,r,e)>0}function _(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function x(t,e){var n=new O(t.i,t.x,t.y),r=new O(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(t,e,n,r){var i=new O(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(S(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(S(t,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,h=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[p]-t[d])*(t[h+1]-t[p+1])-(t[p]-t[h])*(t[d+1]-t[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";(function(t){var r=n(236);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=!("object"===(void 0===t?"undefined":i(t))&&"[object process]"==t+""&&!t.browser)||r.a;e.a=o}).call(this,n(51))},function(t,e,n){"use strict";(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=!("undefined"==typeof window||"object"!==n(window.process)||"renderer"!==window.process.type)||void 0!==t&&"object"===n(t.versions)&&t.versions.electron||!!("object"===("undefined"==typeof navigator?"undefined":n(navigator))&&"string"==typeof navigator.userAgent&&0<=navigator.userAgent.indexOf("Electron"))}).call(this,n(51))},function(t,e,n){var r=n(330)(n(351));t.exports=r},function(t,e,n){var r=n(356);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(81),i=n(199);t.exports=function(t,e){return t&&t.length?i(t,r(e,2)):[]}},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}},function(t,e,n){var r=n(381)();t.exports=r},function(t,e,n){var r=n(123),i=n(388);t.exports=function(t,e){return t&&r(t,i(e))}},function(t,e,n){var r=n(389)(n(41));t.exports=r},,function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(1)),o=l(n(162)),a=n(400);n(255);var s=l(n(256)),u=l(n(396));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.Component),r(e,[{key:"render",value:function(){return i.default.createElement(a.HashRouter,{hashType:"noslash"},i.default.createElement(a.Switch,null,i.default.createElement(a.Route,{exact:!0,path:"/",component:s.default}),i.default.createElement(a.Route,{component:u.default})))}}]),e}();o.default.render(i.default.createElement(c,null),document.getElementById("root"))},,function(t,e,n){"use strict";
/** @license React v16.6.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(161),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,y=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function m(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function x(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}function w(){}function E(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}x.prototype.isReactComponent={},x.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&m("85"),this.updater.enqueueSetState(this,t,e,"setState")},x.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=x.prototype;var O=E.prototype=new w;O.constructor=E,r(O,x.prototype),O.isPureReactComponent=!0;var S={current:null,currentDispatcher:null},P=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,n){var r=void 0,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)P.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:S.current}}function k(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var A=/\/+/g,M=[];function j(t,e,n,r){if(M.length){var i=M.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function R(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>M.length&&M.push(t)}function I(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+L(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+L(s=e[l],l);u+=t(s,c,r,i)}else if(c=null===e||"object"!=typeof e?null:"function"==typeof(c=g&&e[g]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+L(s,l++),r,i);else"object"===s&&m("31","[object Object]"==(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return u}(t,"",e,n)}function L(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function D(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?N(t,r,n,function(t){return t}):null!=t&&(k(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(A,"$&/")+"/")+n)),r.push(t))}function N(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),I(t,F,e=j(e,o,r,i)),R(e)}var B={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return N(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;I(t,D,e=j(null,null,e,n)),R(e)},count:function(t){return I(t,function(){return null},null)},toArray:function(t){var e=[];return N(t,e,null,function(t){return t}),e},only:function(t){return k(t)||m("143"),t}},createRef:function(){return{current:null}},Component:x,PureComponent:E,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:h,render:t}},lazy:function(t){return{$$typeof:v,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:y,type:t,compare:void 0===e?null:e}},Fragment:s,StrictMode:u,Suspense:d,createElement:T,cloneElement:function(t,e,n){(null===t||void 0===t)&&m("267",t);var i=void 0,a=r({},t.props),s=t.key,u=t.ref,l=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,l=S.current),void 0!==e.key&&(s=""+e.key);var c=void 0;for(i in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)P.call(e,i)&&!C.hasOwnProperty(i)&&(a[i]=void 0===e[i]&&void 0!==c?c[i]:e[i])}if(1===(i=arguments.length-2))a.children=n;else if(1<i){c=Array(i);for(var f=0;f<i;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:o,type:t.type,key:s,ref:u,props:a,_owner:l}},createFactory:function(t){var e=T.bind(null,t);return e.type=t,e},isValidElement:k,version:"16.6.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:S,assign:r}};B.unstable_ConcurrentMode=p,B.unstable_Profiler=l;var z={default:B},U=z&&B||z;t.exports=U.default||U},function(t,e,n){"use strict";
/** @license React v16.6.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1),i=n(161),o=n(250);function a(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||a("227");var s=!1,u=null,l=!1,c=null,f={onError:function(t){s=!0,u=t}};function p(t,e,n,r,i,o,a,l,c){s=!1,u=null,function(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}.apply(f,arguments)}var h=null,d={};function y(){if(h)for(var t in d){var e=d[t],n=h.indexOf(t);if(-1<n||a("96",t),!g[n])for(var r in e.extractEvents||a("97",t),g[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,u=r;m.hasOwnProperty(u)&&a("99",u),m[u]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&v(l[i],s,u);i=!0}else o.registrationName?(v(o.registrationName,s,u),i=!0):i=!1;i||a("98",r,t)}}}function v(t,e,n){b[t]&&a("100",t),b[t]=e,_[t]=e.eventTypes[n].dependencies}var g=[],m={},b={},_={},x=null,w=null,E=null;function O(t,e,n){var r=t.type||"unknown-event";t.currentTarget=E(n),function(t,e,n,r,i,o,f,h,d){if(p.apply(this,arguments),s){if(s){var y=u;s=!1,u=null}else a("198"),y=void 0;l||(l=!0,c=y)}}(r,e,void 0,t),t.currentTarget=null}function S(t,e){return null==e&&a("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function P(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var C=null;function T(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)O(t,e[r],n[r]);else e&&O(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}var k={injectEventPluginOrder:function(t){h&&a("101"),h=Array.prototype.slice.call(t),y()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];d.hasOwnProperty(e)&&d[e]===r||(d[e]&&a("102",e),d[e]=r,n=!0)}n&&y()}};function A(t,e){var n=t.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}return t?null:(n&&"function"!=typeof n&&a("231",e,typeof n),n)}function M(t){if(null!==t&&(C=S(C,t)),t=C,C=null,t&&(P(t,T),C&&a("95"),l))throw t=c,l=!1,c=null,t}var j=Math.random().toString(36).slice(2),R="__reactInternalInstance$"+j,I="__reactEventHandlers$"+j;function L(t){if(t[R])return t[R];for(;!t[R];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[R]).tag||6===t.tag?t:null}function D(t){return!(t=t[R])||5!==t.tag&&6!==t.tag?null:t}function F(t){if(5===t.tag||6===t.tag)return t.stateNode;a("33")}function N(t){return t[I]||null}function B(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function z(t,e,n){(e=A(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=S(n._dispatchListeners,e),n._dispatchInstances=S(n._dispatchInstances,t))}function U(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=B(e);for(e=n.length;0<e--;)z(n[e],"captured",t);for(e=0;e<n.length;e++)z(n[e],"bubbled",t)}}function V(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=A(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=S(n._dispatchListeners,e),n._dispatchInstances=S(n._dispatchInstances,t))}function G(t){t&&t.dispatchConfig.registrationName&&V(t._targetInst,null,t)}function W(t){P(t,U)}var q=!("undefined"==typeof window||!window.document||!window.document.createElement);function H(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var X={animationend:H("Animation","AnimationEnd"),animationiteration:H("Animation","AnimationIteration"),animationstart:H("Animation","AnimationStart"),transitionend:H("Transition","TransitionEnd")},Z={},Y={};function K(t){if(Z[t])return Z[t];if(!X[t])return t;var e,n=X[t];for(e in n)if(n.hasOwnProperty(e)&&e in Y)return Z[t]=n[e];return t}q&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete X.animationend.animation,delete X.animationiteration.animation,delete X.animationstart.animation),"TransitionEvent"in window||delete X.transitionend.transition);var J=K("animationend"),Q=K("animationiteration"),$=K("animationstart"),tt=K("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nt=null,rt=null,it=null;function ot(){if(it)return it;var t,e,n=rt,r=n.length,i="value"in nt?nt.value:nt.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return it=i.slice(t,1<e?1-e:void 0)}function at(){return!0}function st(){return!1}function ut(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?at:st,this.isPropagationStopped=st,this}function lt(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ct(t){t instanceof this||a("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function ft(t){t.eventPool=[],t.getPooled=lt,t.release=ct}i(ut.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){this.isPersistent=at},isPersistent:st,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=st,this._dispatchInstances=this._dispatchListeners=null}}),ut.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ut.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,ft(n),n},ft(ut);var pt=ut.extend({data:null}),ht=ut.extend({data:null}),dt=[9,13,27,32],yt=q&&"CompositionEvent"in window,vt=null;q&&"documentMode"in document&&(vt=document.documentMode);var gt=q&&"TextEvent"in window&&!vt,mt=q&&(!yt||vt&&8<vt&&11>=vt),bt=String.fromCharCode(32),_t={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xt=!1;function wt(t,e){switch(t){case"keyup":return-1!==dt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Et(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Ot=!1;var St={eventTypes:_t,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(yt)t:{switch(t){case"compositionstart":i=_t.compositionStart;break t;case"compositionend":i=_t.compositionEnd;break t;case"compositionupdate":i=_t.compositionUpdate;break t}i=void 0}else Ot?wt(t,n)&&(i=_t.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=_t.compositionStart);return i?(mt&&"ko"!==n.locale&&(Ot||i!==_t.compositionStart?i===_t.compositionEnd&&Ot&&(o=ot()):(rt="value"in(nt=r)?nt.value:nt.textContent,Ot=!0)),i=pt.getPooled(i,e,n,r),o?i.data=o:null!==(o=Et(n))&&(i.data=o),W(i),o=i):o=null,(t=gt?function(t,e){switch(t){case"compositionend":return Et(e);case"keypress":return 32!==e.which?null:(xt=!0,bt);case"textInput":return(t=e.data)===bt&&xt?null:t;default:return null}}(t,n):function(t,e){if(Ot)return"compositionend"===t||!yt&&wt(t,e)?(t=ot(),it=rt=nt=null,Ot=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=ht.getPooled(_t.beforeInput,e,n,r)).data=t,W(e)):e=null,null===o?e:null===e?o:[o,e]}},Pt=null,Ct=null,Tt=null;function kt(t){if(t=w(t)){"function"!=typeof Pt&&a("280");var e=x(t.stateNode);Pt(t.stateNode,t.type,e)}}function At(t){Ct?Tt?Tt.push(t):Tt=[t]:Ct=t}function Mt(){if(Ct){var t=Ct,e=Tt;if(Tt=Ct=null,kt(t),e)for(t=0;t<e.length;t++)kt(e[t])}}function jt(t,e){return t(e)}function Rt(t,e,n){return t(e,n)}function It(){}var Lt=!1;function Dt(t,e){if(Lt)return t(e);Lt=!0;try{return jt(t,e)}finally{Lt=!1,(null!==Ct||null!==Tt)&&(It(),Mt())}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ft[t.type]:"textarea"===e}function Bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function zt(t){if(!q)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}function Ut(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Vt(t){t._valueTracker||(t._valueTracker=function(t){var e=Ut(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Gt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ut(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}var Wt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qt=/^(.*)[\\\/]/,Ht="function"==typeof Symbol&&Symbol.for,Xt=Ht?Symbol.for("react.element"):60103,Zt=Ht?Symbol.for("react.portal"):60106,Yt=Ht?Symbol.for("react.fragment"):60107,Kt=Ht?Symbol.for("react.strict_mode"):60108,Jt=Ht?Symbol.for("react.profiler"):60114,Qt=Ht?Symbol.for("react.provider"):60109,$t=Ht?Symbol.for("react.context"):60110,te=Ht?Symbol.for("react.concurrent_mode"):60111,ee=Ht?Symbol.for("react.forward_ref"):60112,ne=Ht?Symbol.for("react.suspense"):60113,re=Ht?Symbol.for("react.memo"):60115,ie=Ht?Symbol.for("react.lazy"):60116,oe="function"==typeof Symbol&&Symbol.iterator;function ae(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=oe&&t[oe]||t["@@iterator"])?t:null}function se(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case te:return"ConcurrentMode";case Yt:return"Fragment";case Zt:return"Portal";case Jt:return"Profiler";case Kt:return"StrictMode";case ne:return"Suspense"}if("object"==typeof t)switch(t.$$typeof){case $t:return"Context.Consumer";case Qt:return"Context.Provider";case ee:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case re:return se(t.type);case ie:if(t=1===t._status?t._result:null)return se(t)}return null}function ue(t){var e="";do{t:switch(t.tag){case 2:case 16:case 0:case 1:case 5:case 8:case 13:var n=t._debugOwner,r=t._debugSource,i=se(t.type),o=null;n&&(o=se(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace(qt,"")+":"+r.lineNumber+")":o&&(i=" (created by "+o+")"),o="\n    in "+(n||"Unknown")+i;break t;default:o=""}e+=o,t=t.return}while(t);return e}var le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,fe={},pe={};function he(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){de[t]=new he(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];de[e]=new he(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){de[t]=new he(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){de[t]=new he(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){de[t]=new he(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){de[t]=new he(t,3,!0,t,null)}),["capture","download"].forEach(function(t){de[t]=new he(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){de[t]=new he(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){de[t]=new he(t,5,!1,t.toLowerCase(),null)});var ye=/[\-:]([a-z])/g;function ve(t){return t[1].toUpperCase()}function ge(t,e,n,r){var i=de.hasOwnProperty(e)?de[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||void 0===e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!ce.call(pe,t)||!ce.call(fe,t)&&(le.test(t)?pe[t]=!0:(fe[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function me(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function be(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function _e(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=me(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function xe(t,e){null!=(e=e.checked)&&ge(t,"checked",e,!1)}function we(t,e){xe(t,e);var n=me(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Oe(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oe(t,e.type,me(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Ee(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Oe(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ye,ve);de[e]=new he(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ye,ve);de[e]=new he(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ye,ve);de[e]=new he(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),de.tabIndex=new he("tabIndex",1,!1,"tabindex",null);var Se={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Pe(t,e,n){return(t=ut.getPooled(Se.change,t,e,n)).type="change",At(n),W(t),t}var Ce=null,Te=null;function ke(t){M(t)}function Ae(t){if(Gt(F(t)))return t}function Me(t,e){if("change"===t)return e}var je=!1;function Re(){Ce&&(Ce.detachEvent("onpropertychange",Ie),Te=Ce=null)}function Ie(t){"value"===t.propertyName&&Ae(Te)&&Dt(ke,t=Pe(Te,t,Bt(t)))}function Le(t,e,n){"focus"===t?(Re(),Te=n,(Ce=e).attachEvent("onpropertychange",Ie)):"blur"===t&&Re()}function De(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Ae(Te)}function Fe(t,e){if("click"===t)return Ae(e)}function Ne(t,e){if("input"===t||"change"===t)return Ae(e)}q&&(je=zt("input")&&(!document.documentMode||9<document.documentMode));var Be={eventTypes:Se,_isInputEventSupported:je,extractEvents:function(t,e,n,r){var i=e?F(e):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Me:Nt(i)?je?o=Ne:(o=De,a=Le):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Fe),o&&(o=o(t,e)))return Pe(o,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Oe(i,"number",i.value)}},ze=ut.extend({view:null,detail:null}),Ue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ve(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ue[t])&&!!e[t]}function Ge(){return Ve}var We=0,qe=0,He=!1,Xe=!1,Ze=ze.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ge,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=We;return We=t.screenX,He?"mousemove"===t.type?t.screenX-e:0:(He=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=qe;return qe=t.screenY,Xe?"mousemove"===t.type?t.screenY-e:0:(Xe=!0,0)}}),Ye=Ze.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ke={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Je={eventTypes:Ke,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=n.relatedTarget||n.toElement)?L(e):null):o=null,o===e)return null;var a=void 0,s=void 0,u=void 0,l=void 0;"mouseout"===t||"mouseover"===t?(a=Ze,s=Ke.mouseLeave,u=Ke.mouseEnter,l="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=Ye,s=Ke.pointerLeave,u=Ke.pointerEnter,l="pointer");var c=null==o?i:F(o);if(i=null==e?i:F(e),(t=a.getPooled(s,o,n,r)).type=l+"leave",t.target=c,t.relatedTarget=i,(n=a.getPooled(u,e,n,r)).type=l+"enter",n.target=i,n.relatedTarget=c,r=e,o&&r)t:{for(i=r,l=0,a=e=o;a;a=B(a))l++;for(a=0,u=i;u;u=B(u))a++;for(;0<l-a;)e=B(e),l--;for(;0<a-l;)i=B(i),a--;for(;l--;){if(e===i||e===i.alternate)break t;e=B(e),i=B(i)}e=null}else e=null;for(i=e,e=[];o&&o!==i&&(null===(l=o.alternate)||l!==i);)e.push(o),o=B(o);for(o=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)o.push(r),r=B(r);for(r=0;r<e.length;r++)V(e[r],"bubbled",t);for(r=o.length;0<r--;)V(o[r],"captured",n);return[t,n]}},Qe=Object.prototype.hasOwnProperty;function $e(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function tn(t,e){if($e(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Qe.call(e,n[r])||!$e(t[n[r]],e[n[r]]))return!1;return!0}function en(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function nn(t){2!==en(t)&&a("188")}function rn(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=en(t))&&a("188"),1===e?null:t;for(var n=t,r=e;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return nn(i),t;if(s===r)return nn(i),e;s=s.sibling}a("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}s||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var on=ut.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=ut.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sn=ze.extend({relatedTarget:null});function un(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn=ze.extend({key:function(t){if(t.key){var e=ln[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=un(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?cn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ge,charCode:function(t){return"keypress"===t.type?un(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?un(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),pn=Ze.extend({dataTransfer:null}),hn=ze.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ge}),dn=ut.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),yn=Ze.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),vn=[["abort","abort"],[J,"animationEnd"],[Q,"animationIteration"],[$,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[tt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],gn={},mn={};function bn(t,e){var n=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},gn[t]=e,mn[n]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){bn(t,!0)}),vn.forEach(function(t){bn(t,!1)});var _n={eventTypes:gn,isInteractiveTopLevelEventType:function(t){return void 0!==(t=mn[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=mn[t];if(!i)return null;switch(t){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":t=fn;break;case"blur":case"focus":t=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ze;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=hn;break;case J:case Q:case $:t=on;break;case tt:t=dn;break;case"scroll":t=ze;break;case"wheel":t=yn;break;case"copy":case"cut":case"paste":t=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Ye;break;default:t=ut}return W(e=t.getPooled(i,e,n,r)),e}},xn=_n.isInteractiveTopLevelEventType,wn=[];function En(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=L(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Bt(t.nativeEvent);r=t.topLevelType;for(var o=t.nativeEvent,a=null,s=0;s<g.length;s++){var u=g[s];u&&(u=u.extractEvents(r,e,o,i))&&(a=S(a,u))}M(a)}}var On=!0;function Sn(t,e){if(!e)return null;var n=(xn(t)?Cn:Tn).bind(null,t);e.addEventListener(t,n,!1)}function Pn(t,e){if(!e)return null;var n=(xn(t)?Cn:Tn).bind(null,t);e.addEventListener(t,n,!0)}function Cn(t,e){Rt(Tn,t,e)}function Tn(t,e){if(On){var n=Bt(e);if(null===(n=L(n))||"number"!=typeof n.tag||2===en(n)||(n=null),wn.length){var r=wn.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Dt(En,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>wn.length&&wn.push(t)}}}var kn={},An=0,Mn="_reactListenersID"+(""+Math.random()).slice(2);function jn(t){return Object.prototype.hasOwnProperty.call(t,Mn)||(t[Mn]=An++,kn[t[Mn]]={}),kn[t[Mn]]}function Rn(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function In(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ln(t,e){var n,r=In(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=In(r)}}function Dn(){for(var t=window,e=Rn();e instanceof t.HTMLIFrameElement;){try{t=e.contentDocument.defaultView}catch(t){break}e=Rn(t.document)}return e}function Fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Nn=q&&"documentMode"in document&&11>=document.documentMode,Bn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zn=null,Un=null,Vn=null,Gn=!1;function Wn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Gn||null==zn||zn!==Rn(n)?null:("selectionStart"in(n=zn)&&Fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vn&&tn(Vn,n)?null:(Vn=n,(t=ut.getPooled(Bn.select,Un,t,e)).type="select",t.target=zn,W(t),t))}var qn={eventTypes:Bn,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=jn(o),i=_.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?F(e):window,t){case"focus":(Nt(o)||"true"===o.contentEditable)&&(zn=o,Un=e,Vn=null);break;case"blur":Vn=Un=zn=null;break;case"mousedown":Gn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Gn=!1,Wn(n,r);case"selectionchange":if(Nn)break;case"keydown":case"keyup":return Wn(n,r)}return null}};function Hn(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(e.children))&&(t.children=e),t}function Xn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+me(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Zn(t,e){return null!=e.dangerouslySetInnerHTML&&a("91"),i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yn(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&a("92"),Array.isArray(e)&&(1>=e.length||a("93"),e=e[0]),n=e),null==n&&(n="")),t._wrapperState={initialValue:me(n)}}function Kn(t,e){var n=me(e.value),r=me(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Jn(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}k.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=N,w=D,E=F,k.injectEventPluginsByName({SimpleEventPlugin:_n,EnterLeaveEventPlugin:Je,ChangeEventPlugin:Be,SelectEventPlugin:qn,BeforeInputEventPlugin:St});var Qn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function $n(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?$n(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var er=void 0,nr=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n)})}:t}(function(t,e){if(t.namespaceURI!==Qn.svg||"innerHTML"in t)t.innerHTML=e;else{for((er=er||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=er.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ir={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},or=["Webkit","ms","Moz","O"];function ar(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||ir.hasOwnProperty(t)&&ir[t]?(""+e).trim():e+"px"}function sr(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ar(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ir).forEach(function(t){or.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ir[e]=ir[t]})});var ur=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(t,e){e&&(ur[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&a("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&a("60"),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||a("61")),null!=e.style&&"object"!=typeof e.style&&a("62",""))}function cr(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fr(t,e){var n=jn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=_[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Pn("scroll",t);break;case"focus":case"blur":Pn("focus",t),Pn("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":zt(i)&&Pn(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(i)&&Sn(i,t)}n[i]=!0}}}function pr(){}var hr=null,dr=null;function yr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var gr="function"==typeof setTimeout?setTimeout:void 0,mr="function"==typeof clearTimeout?clearTimeout:void 0;function br(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function _r(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var xr=[],wr=-1;function Er(t){0>wr||(t.current=xr[wr],xr[wr]=null,wr--)}function Or(t,e){xr[++wr]=t.current,t.current=e}var Sr={},Pr={current:Sr},Cr={current:!1},Tr=Sr;function kr(t,e){var n=t.type.contextTypes;if(!n)return Sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ar(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Mr(t){Er(Cr),Er(Pr)}function jr(t){Er(Cr),Er(Pr)}function Rr(t,e,n){Pr.current!==Sr&&a("168"),Or(Pr,e),Or(Cr,n)}function Ir(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in t||a("108",se(e)||"Unknown",o);return i({},n,r)}function Lr(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Sr,Tr=Pr.current,Or(Pr,e),Or(Cr,Cr.current),!0}function Dr(t,e,n){var r=t.stateNode;r||a("169"),n?(e=Ir(t,e,Tr),r.__reactInternalMemoizedMergedChildContext=e,Er(Cr),Er(Pr),Or(Pr,e)):Er(Cr),Or(Cr,n)}var Fr=null,Nr=null;function Br(t){return function(e){try{return t(e)}catch(t){}}}function zr(t,e,n,r){return new function(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}(t,e,n,r)}function Ur(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Vr(t,e){var n=t.alternate;return null===n?((n=zr(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.firstContextDependency=t.firstContextDependency,n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gr(t,e,n,r,i,o){var s=2;if(r=t,"function"==typeof t)Ur(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case Yt:return Wr(n.children,i,o,e);case te:return qr(n,3|i,o,e);case Kt:return qr(n,2|i,o,e);case Jt:return(t=zr(12,n,e,4|i)).elementType=Jt,t.type=Jt,t.expirationTime=o,t;case ne:return(t=zr(13,n,e,i)).elementType=ne,t.type=ne,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case Qt:s=10;break t;case $t:s=9;break t;case ee:s=11;break t;case re:s=14;break t;case ie:s=16,r=null;break t}a("130",null==t?t:typeof t,"")}return(e=zr(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Wr(t,e,n,r){return(t=zr(7,t,r,e)).expirationTime=n,t}function qr(t,e,n,r){return t=zr(8,t,r,e),e=0==(1&e)?Kt:te,t.elementType=e,t.type=e,t.expirationTime=n,t}function Hr(t,e,n){return(t=zr(6,t,null,e)).expirationTime=n,t}function Xr(t,e,n){return(e=zr(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zr(t,e){t.didError=!1;var n=t.earliestPendingTime;0===n?t.earliestPendingTime=t.latestPendingTime=e:n<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),Jr(e,t)}function Yr(t,e){t.didError=!1;var n=t.latestPingedTime;0!==n&&n>=e&&(t.latestPingedTime=0),n=t.earliestPendingTime;var r=t.latestPendingTime;n===e?t.earliestPendingTime=r===e?t.latestPendingTime=0:r:r===e&&(t.latestPendingTime=n),n=t.earliestSuspendedTime,r=t.latestSuspendedTime,0===n?t.earliestSuspendedTime=t.latestSuspendedTime=e:n<e?t.earliestSuspendedTime=e:r>e&&(t.latestSuspendedTime=e),Jr(e,t)}function Kr(t,e){var n=t.earliestPendingTime;return t=t.earliestSuspendedTime,n>e&&(e=n),t>e&&(e=t),e}function Jr(t,e){var n=e.earliestSuspendedTime,r=e.latestSuspendedTime,i=e.earliestPendingTime,o=e.latestPingedTime;0===(i=0!==i?i:o)&&(0===t||r<t)&&(i=r),0!==(t=i)&&n>t&&(t=n),e.nextExpirationTimeToWorkOn=i,e.expirationTime=t}var Qr=!1;function $r(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ti(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ei(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function ni(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function ri(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=$r(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=$r(t.memoizedState),i=n.updateQueue=$r(n.memoizedState)):r=t.updateQueue=ti(i):null===i&&(i=n.updateQueue=ti(r));null===i||r===i?ni(r,e):null===r.lastUpdate||null===i.lastUpdate?(ni(r,e),ni(i,e)):(ni(r,e),i.lastUpdate=e)}function ii(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=$r(t.memoizedState):oi(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function oi(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=ti(e)),e}function ai(t,e,n,r,o,a){switch(n.tag){case 1:return"function"==typeof(t=n.payload)?t.call(a,r,o):t;case 3:t.effectTag=-2049&t.effectTag|64;case 0:if(null===(o="function"==typeof(t=n.payload)?t.call(a,r,o):t)||void 0===o)break;return i({},r,o);case 2:Qr=!0}return r}function si(t,e,n,r,i){Qr=!1;for(var o=(e=oi(t,e)).baseState,a=null,s=0,u=e.firstUpdate,l=o;null!==u;){var c=u.expirationTime;c<i?(null===a&&(a=u,o=l),s<c&&(s=c)):(l=ai(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(c=null,u=e.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<i?(null===c&&(c=u,null===a&&(o=l)),s<f&&(s=f)):(l=ai(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===a&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===c&&(o=l),e.baseState=o,e.firstUpdate=a,e.firstCapturedUpdate=c,t.expirationTime=s,t.memoizedState=l}function ui(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),li(e.firstEffect,n),e.firstEffect=e.lastEffect=null,li(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function li(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;"function"!=typeof n&&a("191",n),n.call(r)}t=t.nextEffect}}function ci(t,e){return{value:t,source:e,stack:ue(e)}}var fi={current:null},pi=null,hi=null,di=null;function yi(t,e){var n=t.type._context;Or(fi,n._currentValue),n._currentValue=e}function vi(t){var e=fi.current;Er(fi),t.type._context._currentValue=e}function gi(t){pi=t,di=hi=null,t.firstContextDependency=null}function mi(t,e){return di!==t&&!1!==e&&0!==e&&("number"==typeof e&&1073741823!==e||(di=t,e=1073741823),e={context:t,observedBits:e,next:null},null===hi?(null===pi&&a("293"),pi.firstContextDependency=hi=e):hi=hi.next=e),t._currentValue}var bi={},_i={current:bi},xi={current:bi},wi={current:bi};function Ei(t){return t===bi&&a("174"),t}function Oi(t,e){Or(wi,e),Or(xi,t),Or(_i,bi);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tr(null,"");break;default:e=tr(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}Er(_i),Or(_i,e)}function Si(t){Er(_i),Er(xi),Er(wi)}function Pi(t){Ei(wi.current);var e=Ei(_i.current),n=tr(e,t.type);e!==n&&(Or(xi,t),Or(_i,n))}function Ci(t){xi.current===t&&(Er(_i),Er(xi))}function Ti(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var ki=Wt.ReactCurrentOwner,Ai=(new r.Component).refs;function Mi(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var ji={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===en(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Ea(),i=ei(r=Yo(r,t));i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Wo(),ri(t,i),Qo(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Ea(),i=ei(r=Yo(r,t));i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Wo(),ri(t,i),Qo(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ea(),r=ei(n=Yo(n,t));r.tag=2,void 0!==e&&null!==e&&(r.callback=e),Wo(),ri(t,r),Qo(t,n)}};function Ri(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!tn(n,r)||!tn(i,o))}function Ii(t,e,n){var r=!1,i=Sr,o=e.contextType;return"object"==typeof o&&null!==o?o=ki.currentDispatcher.readContext(o):(i=Ar(e)?Tr:Pr.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?kr(t,i):Sr),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ji,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Li(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ji.enqueueReplaceState(e,e.state,null)}function Di(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Ai;var o=e.contextType;"object"==typeof o&&null!==o?i.context=ki.currentDispatcher.readContext(o):(o=Ar(e)?Tr:Pr.current,i.context=kr(t,o)),null!==(o=t.updateQueue)&&(si(t,o,n,i,r),i.state=t.memoizedState),"function"==typeof(o=e.getDerivedStateFromProps)&&(Mi(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&ji.enqueueReplaceState(i,i.state,null),null!==(o=t.updateQueue)&&(si(t,o,n,i,r),i.state=t.memoizedState)),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var Fi=Array.isArray;function Ni(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){var r=void 0;(n=n._owner)&&(1!==n.tag&&a("289"),r=n.stateNode),r||a("147",t);var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===Ai&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}"string"!=typeof t&&a("284"),n._owner||a("290",t)}return t}function Bi(t,e){"textarea"!==t.type&&a("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function zi(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e,n){return(t=Vr(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Hr(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Ni(t,e,n),r.return=t,r):((r=Gr(n.type,n.key,n.props,null,t.mode,r)).ref=Ni(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Xr(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?((e=Wr(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Hr(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Xt:return(n=Gr(e.type,e.key,e.props,null,t.mode,n)).ref=Ni(t,null,e),n.return=t,n;case Zt:return(e=Xr(e,t.mode,n)).return=t,e}if(Fi(e)||ae(e))return(e=Wr(e,t.mode,n,null)).return=t,e;Bi(t,e)}return null}function h(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Xt:return n.key===i?n.type===Yt?f(t,e,n.props.children,r,i):l(t,e,n,r):null;case Zt:return n.key===i?c(t,e,n,r):null}if(Fi(n)||ae(n))return null!==i?null:f(t,e,n,r,null);Bi(t,n)}return null}function d(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Xt:return t=t.get(null===r.key?n:r.key)||null,r.type===Yt?f(e,t,r.props.children,i,r.key):l(e,t,r,i);case Zt:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(Fi(r)||ae(r))return f(e,t=t.get(n)||null,r,i,null);Bi(e,r)}return null}function y(i,a,s,u){for(var l=null,c=null,f=a,y=a=0,v=null;null!==f&&y<s.length;y++){f.index>y?(v=f,f=null):v=f.sibling;var g=h(i,f,s[y],u);if(null===g){null===f&&(f=v);break}t&&f&&null===g.alternate&&e(i,f),a=o(g,a,y),null===c?l=g:c.sibling=g,c=g,f=v}if(y===s.length)return n(i,f),l;if(null===f){for(;y<s.length;y++)(f=p(i,s[y],u))&&(a=o(f,a,y),null===c?l=f:c.sibling=f,c=f);return l}for(f=r(i,f);y<s.length;y++)(v=d(f,i,y,s[y],u))&&(t&&null!==v.alternate&&f.delete(null===v.key?y:v.key),a=o(v,a,y),null===c?l=v:c.sibling=v,c=v);return t&&f.forEach(function(t){return e(i,t)}),l}function v(i,s,u,l){var c=ae(u);"function"!=typeof c&&a("150"),null==(u=c.call(u))&&a("151");for(var f=c=null,y=s,v=s=0,g=null,m=u.next();null!==y&&!m.done;v++,m=u.next()){y.index>v?(g=y,y=null):g=y.sibling;var b=h(i,y,m.value,l);if(null===b){y||(y=g);break}t&&y&&null===b.alternate&&e(i,y),s=o(b,s,v),null===f?c=b:f.sibling=b,f=b,y=g}if(m.done)return n(i,y),c;if(null===y){for(;!m.done;v++,m=u.next())null!==(m=p(i,m.value,l))&&(s=o(m,s,v),null===f?c=m:f.sibling=m,f=m);return c}for(y=r(i,y);!m.done;v++,m=u.next())null!==(m=d(y,i,v,m.value,l))&&(t&&null!==m.alternate&&y.delete(null===m.key?v:m.key),s=o(m,s,v),null===f?c=m:f.sibling=m,f=m);return t&&y.forEach(function(t){return e(i,t)}),c}return function(t,r,o,u){var l="object"==typeof o&&null!==o&&o.type===Yt&&null===o.key;l&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case Xt:t:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag?o.type===Yt:l.elementType===o.type){n(t,l.sibling),(r=i(l,o.type===Yt?o.props.children:o.props)).ref=Ni(t,l,o),r.return=t,t=r;break t}n(t,l);break}e(t,l),l=l.sibling}o.type===Yt?((r=Wr(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Gr(o.type,o.key,o.props,null,t.mode,u)).ref=Ni(t,r,o),u.return=t,t=u)}return s(t);case Zt:t:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Xr(o,t.mode,u)).return=t,t=r}return s(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Hr(o,t.mode,u)).return=t,t=r),s(t);if(Fi(o))return y(t,r,o,u);if(ae(o))return v(t,r,o,u);if(c&&Bi(t,o),void 0===o&&!l)switch(t.tag){case 1:case 0:a("152",(u=t.type).displayName||u.name||"Component")}return n(t,r)}}var Ui=zi(!0),Vi=zi(!1),Gi=null,Wi=null,qi=!1;function Hi(t,e){var n=zr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Xi(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Zi(t){if(qi){var e=Wi;if(e){var n=e;if(!Xi(t,e)){if(!(e=br(n))||!Xi(t,e))return t.effectTag|=2,qi=!1,void(Gi=t);Hi(Gi,n)}Gi=t,Wi=_r(e)}else t.effectTag|=2,qi=!1,Gi=t}}function Yi(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;Gi=t}function Ki(t){if(t!==Gi)return!1;if(!qi)return Yi(t),qi=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vr(e,t.memoizedProps))for(e=Wi;e;)Hi(t,e),e=br(e);return Yi(t),Wi=Gi?br(t.stateNode):null,!0}function Ji(){Wi=Gi=null,qi=!1}var Qi=Wt.ReactCurrentOwner;function $i(t,e,n,r){e.child=null===t?Vi(e,null,n,r):Ui(e,t.child,n,r)}function to(t,e,n,r,i){n=n.render;var o=e.ref;return gi(e),r=n(r,o),e.effectTag|=1,$i(t,e,r,i),e.child}function eo(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||Ur(a)||void 0!==a.defaultProps||null!==n.compare?((t=Gr(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,no(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:tn)(i,r)&&t.ref===e.ref)?co(t,e,o):((t=Vr(a,r)).ref=e.ref,t.return=e,e.child=t)}function no(t,e,n,r,i,o){return null!==t&&i<o&&tn(t.memoizedProps,r)&&t.ref===e.ref?co(t,e,o):io(t,e,n,r,o)}function ro(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function io(t,e,n,r,i){var o=Ar(n)?Tr:Pr.current;return o=kr(e,o),gi(e),n=n(r,o),e.effectTag|=1,$i(t,e,n,i),e.child}function oo(t,e,n,r,i){if(Ar(n)){var o=!0;Lr(e)}else o=!1;if(gi(e),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Ii(e,n,r),Di(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=ki.currentDispatcher.readContext(l):l=kr(e,l=Ar(n)?Tr:Pr.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Li(e,a,r,l),Qr=!1;var p=e.memoizedState;u=a.state=p;var h=e.updateQueue;null!==h&&(si(e,h,r,a,i),u=e.memoizedState),s!==r||p!==u||Cr.current||Qr?("function"==typeof c&&(Mi(e,n,c,r),u=e.memoizedState),(s=Qr||Ri(e,n,s,r,p,u,l))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,s=e.memoizedProps,a.props=e.type===e.elementType?s:Ti(e.type,s),u=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=ki.currentDispatcher.readContext(l):l=kr(e,l=Ar(n)?Tr:Pr.current),(f="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Li(e,a,r,l),Qr=!1,u=e.memoizedState,p=a.state=u,null!==(h=e.updateQueue)&&(si(e,h,r,a,i),p=e.memoizedState),s!==r||u!==p||Cr.current||Qr?("function"==typeof c&&(Mi(e,n,c,r),p=e.memoizedState),(c=Qr||Ri(e,n,s,r,u,p,l))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return ao(t,e,n,r,o,i)}function ao(t,e,n,r,i,o){ro(t,e);var a=0!=(64&e.effectTag);if(!r&&!a)return i&&Dr(e,n,!1),co(t,e,o);r=e.stateNode,Qi.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=Ui(e,t.child,null,o),e.child=Ui(e,null,s,o)):$i(t,e,s,o),e.memoizedState=r.state,i&&Dr(e,n,!0),e.child}function so(t){var e=t.stateNode;e.pendingContext?Rr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Rr(0,e.context,!1),Oi(t,e.containerInfo)}function uo(t,e,n){var r=e.mode,i=e.pendingProps,o=e.memoizedState;if(0==(64&e.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,e.effectTag&=-65;return null===t?a?(a=i.fallback,i=Wr(null,r,0,null),0==(1&e.mode)&&lo(e,i,null!==e.memoizedState?e.child.child:e.child),r=Wr(a,r,n,null),i.sibling=r,(n=i).return=r.return=e):n=r=Vi(e,null,i.children,n):null!==t.memoizedState?(t=(r=t.child).sibling,a?(n=i.fallback,(i=Vr(r,r.pendingProps)).effectTag|=2,0==(1&e.mode)&&((a=null!==e.memoizedState?e.child.child:e.child)!==r.child&&lo(e,i,a)),(r=i.sibling=Vr(t,n,t.expirationTime)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=e):(a=t.child,r=Ui(e,r.child,i.children,n),Ui(e,a,null,n),n=r)):(t=t.child,a?(a=i.fallback,(i=Wr(null,r,0,null)).effectTag|=2,i.child=t,t.return=i,0==(1&e.mode)&&lo(e,i,null!==e.memoizedState?e.child.child:e.child),(r=i.sibling=Wr(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=e):r=n=Ui(e,t,i.children,n)),e.memoizedState=o,e.child=n,r}function lo(t,e,n){for(n=e.child=n;null!==n;)null===e.firstEffect&&(e.firstEffect=n.firstEffect),null!==n.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=n.firstEffect),e.lastEffect=n.lastEffect),1<n.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=n:e.firstEffect=n,e.lastEffect=n),n.return=e,n=n.sibling;t.firstEffect=e.firstEffect,t.lastEffect=e.lastEffect}function co(t,e,n){if(null!==t&&(e.firstContextDependency=t.firstContextDependency),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child&&a("153"),null!==e.child){for(n=Vr(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Vr(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function fo(t,e,n){var r=e.expirationTime;if(null!==t&&t.memoizedProps===e.pendingProps&&!Cr.current&&r<n){switch(e.tag){case 3:so(e),Ji();break;case 5:Pi(e);break;case 1:Ar(e.type)&&Lr(e);break;case 4:Oi(e,e.stateNode.containerInfo);break;case 10:yi(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?uo(t,e,n):null!==(e=co(t,e,n))?e.sibling:null}return co(t,e,n)}switch(e.expirationTime=0,e.tag){case 2:r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var i=kr(e,Pr.current);if(gi(e),i=r(t,i),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,Ar(r)){var o=!0;Lr(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&Mi(e,r,s,t),i.updater=ji,e.stateNode=i,i._reactInternalFiber=e,Di(e,r,t,n),e=ao(null,e,r,!0,o,n)}else e.tag=0,$i(null,e,i,n),e=e.child;return e;case 16:switch(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),o=e.pendingProps,t=function(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:throw t._status=0,(e=(e=t._ctor)()).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)}),t._result=e,e}}(i),e.type=t,i=e.tag=function(t){if("function"==typeof t)return Ur(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ee)return 11;if(t===re)return 14}return 2}(t),o=Ti(t,o),s=void 0,i){case 0:s=io(null,e,t,o,n);break;case 1:s=oo(null,e,t,o,n);break;case 11:s=to(null,e,t,o,n);break;case 14:s=eo(null,e,t,Ti(t.type,o),r,n);break;default:a("283",t)}return s;case 0:return r=e.type,i=e.pendingProps,io(t,e,r,i=e.elementType===r?i:Ti(r,i),n);case 1:return r=e.type,i=e.pendingProps,oo(t,e,r,i=e.elementType===r?i:Ti(r,i),n);case 3:return so(e),null===(r=e.updateQueue)&&a("282"),i=null!==(i=e.memoizedState)?i.element:null,si(e,r,e.pendingProps,null,n),(r=e.memoizedState.element)===i?(Ji(),e=co(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(Wi=_r(e.stateNode.containerInfo),Gi=e,i=qi=!0),i?(e.effectTag|=2,e.child=Vi(e,null,r,n)):($i(t,e,r,n),Ji()),e=e.child),e;case 5:return Pi(e),null===t&&Zi(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,vr(r,i)?s=null:null!==o&&vr(r,o)&&(e.effectTag|=16),ro(t,e),1!==n&&1&e.mode&&i.hidden?(e.expirationTime=1,e=null):($i(t,e,s,n),e=e.child),e;case 6:return null===t&&Zi(e),null;case 13:return uo(t,e,n);case 4:return Oi(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ui(e,null,r,n):$i(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,to(t,e,r,i=e.elementType===r?i:Ti(r,i),n);case 7:return $i(t,e,e.pendingProps,n),e.child;case 8:case 12:return $i(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,yi(e,o=i.value),null!==s){var u=s.value;if(0===(o=u===o&&(0!==u||1/u==1/o)||u!=u&&o!=o?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!Cr.current){e=co(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){if(null!==(u=s.firstContextDependency))do{if(u.context===r&&0!=(u.observedBits&o)){if(1===s.tag){var l=ei(n);l.tag=2,ri(s,l)}s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n);for(var c=s.return;null!==c;){if(l=c.alternate,c.childExpirationTime<n)c.childExpirationTime=n,null!==l&&l.childExpirationTime<n&&(l.childExpirationTime=n);else{if(!(null!==l&&l.childExpirationTime<n))break;l.childExpirationTime=n}c=c.return}}l=s.child,u=u.next}while(null!==u);else l=10===s.tag&&s.type===e.type?null:s.child;if(null!==l)l.return=s;else for(l=s;null!==l;){if(l===e){l=null;break}if(null!==(s=l.sibling)){s.return=l.return,l=s;break}l=l.return}s=l}}$i(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,gi(e),r=r(i=mi(i,o.unstable_observedBits)),e.effectTag|=1,$i(t,e,r,n),e.child;case 14:return eo(t,e,i=e.type,o=Ti(i.type,e.pendingProps),r,n);case 15:return no(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ti(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Ar(r)?(t=!0,Lr(e)):t=!1,gi(e),Ii(e,r,i),Di(e,r,i,n),ao(null,e,r,!0,t,n);default:a("156")}}function po(t){t.effectTag|=4}var ho=void 0,yo=void 0,vo=void 0,go=void 0;function mo(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=ue(n)),null!==n&&se(n.type),e=e.value,null!==t&&1===t.tag&&se(t.type);try{console.error(e)}catch(t){setTimeout(function(){throw t})}}function bo(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Zo(t,e)}else e.current=null}function _o(t){switch("function"==typeof Nr&&Nr(t),t.tag){case 0:case 11:case 14:case 15:var e=t.updateQueue;if(null!==e&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n.destroy;if(null!==r){var i=t;try{r()}catch(t){Zo(i,t)}}n=n.next}while(n!==e)}break;case 1:if(bo(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Zo(t,e)}break;case 5:bo(t);break;case 4:Eo(t)}}function xo(t){return 5===t.tag||3===t.tag||4===t.tag}function wo(t){t:{for(var e=t.return;null!==e;){if(xo(e)){var n=e;break t}e=e.return}a("160"),n=void 0}var r=e=void 0;switch(n.tag){case 5:e=n.stateNode,r=!1;break;case 3:case 4:e=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(rr(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||xo(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=e,s=i.stateNode,u=n;8===o.nodeType?o.parentNode.insertBefore(s,u):o.insertBefore(s,u)}else e.insertBefore(i.stateNode,n);else r?(s=e,u=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(u,s):(o=s).appendChild(u),null!==(s=s._reactRootContainer)&&void 0!==s||null!==o.onclick||(o.onclick=pr)):e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Eo(t){for(var e=t,n=!1,r=void 0,i=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,i=!1;break t;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag){t:for(var o=e,s=o;;)if(_o(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=e.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(e.stateNode)}else if(4===e.tag?(r=e.stateNode.containerInfo,i=!0):_o(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function Oo(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[I]=r,"input"===t&&"radio"===r.type&&null!=r.name&&xe(n,r),cr(t,i),e=cr(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?sr(n,u):"dangerouslySetInnerHTML"===s?nr(n,u):"children"===s?rr(n,u):ge(n,s,u,e)}switch(t){case"input":we(n,r);break;case"textarea":Kn(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Xn(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Xn(n,!!r.multiple,r.defaultValue,!0):Xn(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:null===e.stateNode&&a("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(t=e,null===(n=e.memoizedState)?r=!1:(r=!0,t=e.child,0===n.timedOutAt&&(n.timedOutAt=Ea())),null!==t)t:for(e=n=t;;){if(5===e.tag)t=e.stateNode,r?t.style.display="none":(t=e.stateNode,o=void 0!==(o=e.memoizedProps.style)&&null!==o&&o.hasOwnProperty("display")?o.display:null,t.style.display=ar("display",o));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;null===e.sibling;){if(null===e.return||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}break;case 17:break;default:a("163")}}function So(t,e,n){(n=ei(n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ra(r),mo(t,e)},n}function Po(t,e,n){(n=ei(n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Vo?Vo=new Set([this]):Vo.add(this));var n=e.value,i=e.stack;mo(t,e),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function Co(t){switch(t.tag){case 1:Ar(t.type)&&Mr();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return Si(),jr(),0!=(64&(e=t.effectTag))&&a("285"),t.effectTag=-2049&e|64,t;case 5:return Ci(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 4:return Si(),null;case 10:return vi(t),null;default:return null}}ho=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},yo=function(){},vo=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s=e.stateNode;switch(Ei(_i.current),t=null,n){case"input":a=be(s,a),r=be(s,r),t=[];break;case"option":a=Hn(s,a),r=Hn(s,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Zn(s,a),r=Zn(s,r),t=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(s.onclick=pr)}lr(n,r),s=n=void 0;var u=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var l=a[n];for(s in l)l.hasOwnProperty(s)&&(u||(u={}),u[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in r){var c=r[n];if(l=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&c!==l&&(null!=c||null!=l))if("style"===n)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(u||(u={}),u[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(u||(u={}),u[s]=c[s])}else u||(t||(t=[]),t.push(n,u)),u=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(t=t||[]).push(n,""+c)):"children"===n?l===c||"string"!=typeof c&&"number"!=typeof c||(t=t||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=c&&fr(o,n),t||l===c||(t=[])):(t=t||[]).push(n,c))}u&&(t=t||[]).push("style",u),o=t,(e.updateQueue=o)&&po(e)}},go=function(t,e,n,r){n!==r&&po(e)};var To={readContext:mi},ko=Wt.ReactCurrentOwner,Ao=1073741822,Mo=0,jo=!1,Ro=null,Io=null,Lo=0,Do=-1,Fo=!1,No=null,Bo=!1,zo=null,Uo=null,Vo=null;function Go(){if(null!==Ro)for(var t=Ro.return;null!==t;){var e=t;switch(e.tag){case 1:var n=e.type.childContextTypes;null!==n&&void 0!==n&&Mr();break;case 3:Si(),jr();break;case 5:Ci(e);break;case 4:Si();break;case 10:vi(e)}t=t.return}Io=null,Lo=0,Do=-1,Fo=!1,Ro=null}function Wo(){null!==Uo&&(o.unstable_cancelCallback(zo),Uo())}function qo(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0==(1024&t.effectTag)){Ro=t;t:{var o=e,s=Lo,u=(e=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Ar(e.type)&&Mr();break;case 3:Si(),jr(),(u=e.stateNode).pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),null!==o&&null!==o.child||(Ki(e),e.effectTag&=-3),yo(e);break;case 5:Ci(e);var l=Ei(wi.current);if(s=e.type,null!==o&&null!=e.stateNode)vo(o,e,s,u,l),o.ref!==e.ref&&(e.effectTag|=128);else if(u){var c=Ei(_i.current);if(Ki(e)){o=(u=e).stateNode;var f=u.type,p=u.memoizedProps,h=l;switch(o[R]=u,o[I]=p,s=void 0,l=f){case"iframe":case"object":Sn("load",o);break;case"video":case"audio":for(f=0;f<et.length;f++)Sn(et[f],o);break;case"source":Sn("error",o);break;case"img":case"image":case"link":Sn("error",o),Sn("load",o);break;case"form":Sn("reset",o),Sn("submit",o);break;case"details":Sn("toggle",o);break;case"input":_e(o,p),Sn("invalid",o),fr(h,"onChange");break;case"select":o._wrapperState={wasMultiple:!!p.multiple},Sn("invalid",o),fr(h,"onChange");break;case"textarea":Yn(o,p),Sn("invalid",o),fr(h,"onChange")}for(s in lr(l,p),f=null,p)p.hasOwnProperty(s)&&(c=p[s],"children"===s?"string"==typeof c?o.textContent!==c&&(f=["children",c]):"number"==typeof c&&o.textContent!==""+c&&(f=["children",""+c]):b.hasOwnProperty(s)&&null!=c&&fr(h,s));switch(l){case"input":Vt(o),Ee(o,p,!0);break;case"textarea":Vt(o),Jn(o);break;case"select":case"option":break;default:"function"==typeof p.onClick&&(o.onclick=pr)}s=f,u.updateQueue=s,(u=null!==s)&&po(e)}else{p=e,o=s,h=u,f=9===l.nodeType?l:l.ownerDocument,c===Qn.html&&(c=$n(o)),c===Qn.html?"script"===o?((o=f.createElement("div")).innerHTML="<script><\/script>",f=o.removeChild(o.firstChild)):"string"==typeof h.is?f=f.createElement(o,{is:h.is}):(f=f.createElement(o),"select"===o&&h.multiple&&(f.multiple=!0)):f=f.createElementNS(c,o),(o=f)[R]=p,o[I]=u,ho(o,e,!1,!1),h=o;var d=l,y=cr(f=s,p=u);switch(f){case"iframe":case"object":Sn("load",h),l=p;break;case"video":case"audio":for(l=0;l<et.length;l++)Sn(et[l],h);l=p;break;case"source":Sn("error",h),l=p;break;case"img":case"image":case"link":Sn("error",h),Sn("load",h),l=p;break;case"form":Sn("reset",h),Sn("submit",h),l=p;break;case"details":Sn("toggle",h),l=p;break;case"input":_e(h,p),l=be(h,p),Sn("invalid",h),fr(d,"onChange");break;case"option":l=Hn(h,p);break;case"select":h._wrapperState={wasMultiple:!!p.multiple},l=i({},p,{value:void 0}),Sn("invalid",h),fr(d,"onChange");break;case"textarea":Yn(h,p),l=Zn(h,p),Sn("invalid",h),fr(d,"onChange");break;default:l=p}lr(f,l),c=void 0;var v=f,g=h,m=l;for(c in m)if(m.hasOwnProperty(c)){var _=m[c];"style"===c?sr(g,_):"dangerouslySetInnerHTML"===c?null!=(_=_?_.__html:void 0)&&nr(g,_):"children"===c?"string"==typeof _?("textarea"!==v||""!==_)&&rr(g,_):"number"==typeof _&&rr(g,""+_):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?null!=_&&fr(d,c):null!=_&&ge(g,c,_,y))}switch(f){case"input":Vt(h),Ee(h,p,!1);break;case"textarea":Vt(h),Jn(h);break;case"option":null!=p.value&&h.setAttribute("value",""+me(p.value));break;case"select":(l=h).multiple=!!p.multiple,null!=(h=p.value)?Xn(l,!!p.multiple,h,!1):null!=p.defaultValue&&Xn(l,!!p.multiple,p.defaultValue,!0);break;default:"function"==typeof l.onClick&&(h.onclick=pr)}(u=yr(s,u))&&po(e),e.stateNode=o}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&a("166");break;case 6:o&&null!=e.stateNode?go(o,e,o.memoizedProps,u):("string"!=typeof u&&(null===e.stateNode&&a("166")),o=Ei(wi.current),Ei(_i.current),Ki(e)?(s=(u=e).stateNode,o=u.memoizedProps,s[R]=u,(u=s.nodeValue!==o)&&po(e)):(s=e,(u=(9===o.nodeType?o:o.ownerDocument).createTextNode(u))[R]=e,s.stateNode=u));break;case 11:break;case 13:if(u=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=s,e.firstEffect=e.lastEffect=null,Ro=e;break t}((u=null!==u)!==(null!==o&&null!==o.memoizedState)||0==(1&e.effectTag)&&u)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Si(),yo(e);break;case 10:vi(e);break;case 9:case 14:break;case 17:Ar(e.type)&&Mr();break;default:a("156")}Ro=null}if(e=t,1===Lo||1!==e.childExpirationTime){for(u=0,s=e.child;null!==s;)o=s.expirationTime,l=s.childExpirationTime,o>u&&(u=o),l>u&&(u=l),s=s.sibling;e.childExpirationTime=u}if(null!==Ro)return Ro.firstEffect=Ro.lastEffect=null,Ro;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t))}else{if(null!==(t=Co(t)))return t.effectTag&=1023,t;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;t=n}return null}function Ho(t){var e=fo(t.alternate,t,Lo);return t.memoizedProps=t.pendingProps,null===e&&(e=qo(t)),ko.current=null,e}function Xo(t,e){jo&&a("243"),Wo(),jo=!0,ko.currentDispatcher=To;var n=t.nextExpirationTimeToWorkOn;n===Lo&&t===Io&&null!==Ro||(Go(),Lo=n,Ro=Vr((Io=t).current,null),t.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(e)for(;null!==Ro&&!Ca();)Ro=Ho(Ro);else for(;null!==Ro;)Ro=Ho(Ro)}catch(e){if(di=hi=pi=null,null===Ro)r=!0,Ra(e);else{null===Ro&&a("271");var i=Ro,o=i.return;if(null!==o){t:{var s=t,u=o,l=i,c=e;if(o=Lo,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var f=c;c=u;var p=-1,h=-1;do{if(13===c.tag){var d=c.alternate;if(null!==d&&null!==(d=d.memoizedState)){h=10*(1073741822-d.timedOutAt);break}"number"==typeof(d=c.pendingProps.maxDuration)&&(0>=d?p=0:(-1===p||d<p)&&(p=d))}c=c.return}while(null!==c);c=u;do{if((d=13===c.tag)&&(d=void 0!==c.memoizedProps.fallback&&null===c.memoizedState),d){if(u=Ko.bind(null,s,c,l,0==(1&c.mode)?1073741823:o),f.then(u,u),0==(1&c.mode)){c.effectTag|=64,$i(l.alternate,l,null,o),l.effectTag&=-1025,l.effectTag&=-933,1===l.tag&&null===l.alternate&&(l.tag=17),l.expirationTime=o;break t}-1===p?s=1073741823:(-1===h&&(h=10*(1073741822-Kr(s,o))-5e3),s=h+p),0<=s&&Do<s&&(Do=s),c.effectTag|=2048,c.expirationTime=o;break t}c=c.return}while(null!==c);c=Error((se(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ue(l))}Fo=!0,c=ci(c,l),s=u;do{switch(s.tag){case 3:l=c,s.effectTag|=2048,s.expirationTime=o,ii(s,o=So(s,l,o));break t;case 1:if(l=c,u=s.type,f=s.stateNode,0==(64&s.effectTag)&&("function"==typeof u.getDerivedStateFromError||null!==f&&"function"==typeof f.componentDidCatch&&(null===Vo||!Vo.has(f)))){s.effectTag|=2048,s.expirationTime=o,ii(s,o=Po(s,l,o));break t}}s=s.return}while(null!==s)}Ro=qo(i);continue}r=!0,Ra(e)}}break}if(jo=!1,di=hi=pi=ko.currentDispatcher=null,r)Io=null,t.finishedWork=null;else if(null!==Ro)t.finishedWork=null;else{if(null===(r=t.current.alternate)&&a("281"),Io=null,Fo){if(i=t.latestPendingTime,o=t.latestSuspendedTime,s=t.latestPingedTime,0!==i&&i<n||0!==o&&o<n||0!==s&&s<n)return Yr(t,n),void wa(t,r,n,t.expirationTime,-1);if(!t.didError&&e)return t.didError=!0,n=t.nextExpirationTimeToWorkOn=n,e=t.expirationTime=1073741823,void wa(t,r,n,e,-1)}e&&-1!==Do?(Yr(t,n),(e=10*(1073741822-Kr(t,n)))<Do&&(Do=e),e=10*(1073741822-Ea()),e=Do-e,wa(t,r,n,t.expirationTime,0>e?0:e)):(t.pendingCommitExpirationTime=n,t.finishedWork=r)}}function Zo(t,e){for(var n=t.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Vo||!Vo.has(r)))return ri(n,t=Po(n,t=ci(e,t),1073741823)),void Qo(n,1073741823);break;case 3:return ri(n,t=So(n,t=ci(e,t),1073741823)),void Qo(n,1073741823)}n=n.return}3===t.tag&&(ri(t,n=So(t,n=ci(e,t),1073741823)),Qo(t,1073741823))}function Yo(t,e){return 0!==Mo?t=Mo:jo?t=Bo?1073741823:Lo:1&e.mode?(t=pa?1073741822-10*(1+((1073741822-t+15)/10|0)):1073741822-25*(1+((1073741822-t+500)/25|0)),null!==Io&&t===Lo&&--t):t=1073741823,pa&&(0===sa||t<sa)&&(sa=t),t}function Ko(t,e,n,r){var i=t.earliestSuspendedTime,o=t.latestSuspendedTime;if(0!==i&&r<=i&&r>=o){o=i=r,t.didError=!1;var a=t.latestPingedTime;(0===a||a>o)&&(t.latestPingedTime=o),Jr(o,t)}else Zr(t,i=Yo(i=Ea(),e));0!=(1&e.mode)&&t===Io&&Lo===r&&(Io=null),Jo(e,i),0==(1&e.mode)&&(Jo(n,i),1===n.tag&&null!==n.stateNode&&((e=ei(i)).tag=2,ri(n,e))),0!==(n=t.expirationTime)&&Oa(t,n)}function Jo(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null===i?null:i}function Qo(t,e){null!==(t=Jo(t,e))&&(!jo&&0!==Lo&&e>Lo&&Go(),Zr(t,e),jo&&!Bo&&Io===t||Oa(t,t.expirationTime),ma>ga&&(ma=0,a("185")))}function $o(t,e,n,r,i){var o=Mo;Mo=1073741823;try{return t(e,n,r,i)}finally{Mo=o}}var ta=null,ea=null,na=0,ra=void 0,ia=!1,oa=null,aa=0,sa=0,ua=!1,la=null,ca=!1,fa=!1,pa=!1,ha=null,da=o.unstable_now(),ya=1073741822-(da/10|0),va=ya,ga=50,ma=0,ba=null;function _a(){ya=1073741822-((o.unstable_now()-da)/10|0)}function xa(t,e){if(0!==na){if(e<na)return;null!==ra&&o.unstable_cancelCallback(ra)}na=e,t=o.unstable_now()-da,ra=o.unstable_scheduleCallback(Ta,{timeout:10*(1073741822-e)-t})}function wa(t,e,n,r,i){t.expirationTime=r,0!==i||Ca()?0<i&&(t.timeoutHandle=gr(function(t,e,n){t.pendingCommitExpirationTime=n,t.finishedWork=e,_a(),va=ya,Aa(t,n)}.bind(null,t,e,n),i)):(t.pendingCommitExpirationTime=n,t.finishedWork=e)}function Ea(){return ia?va:(Sa(),0!==aa&&1!==aa||(_a(),va=ya),va)}function Oa(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===ea?(ta=ea=t,t.nextScheduledRoot=t):(ea=ea.nextScheduledRoot=t).nextScheduledRoot=ta):e>t.expirationTime&&(t.expirationTime=e),ia||(ca?fa&&(oa=t,aa=1073741823,Ma(t,1073741823,!1)):1073741823===e?ka(1073741823,!1):xa(t,e))}function Sa(){var t=0,e=null;if(null!==ea)for(var n=ea,r=ta;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ea)&&a("244"),r===r.nextScheduledRoot){ta=ea=r.nextScheduledRoot=null;break}if(r===ta)ta=i=r.nextScheduledRoot,ea.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ea){(ea=n).nextScheduledRoot=ta,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>t&&(t=i,e=r),r===ea)break;if(1073741823===t)break;n=r,r=r.nextScheduledRoot}}oa=e,aa=t}var Pa=!1;function Ca(){return!!Pa||!!o.unstable_shouldYield()&&(Pa=!0)}function Ta(){try{if(!Ca()&&null!==ta){_a();var t=ta;do{var e=t.expirationTime;0!==e&&ya<=e&&(t.nextExpirationTimeToWorkOn=ya),t=t.nextScheduledRoot}while(t!==ta)}ka(0,!0)}finally{Pa=!1}}function ka(t,e){if(Sa(),e)for(_a(),va=ya;null!==oa&&0!==aa&&t<=aa&&!(Pa&&ya>aa);)Ma(oa,aa,ya>aa),Sa(),_a(),va=ya;else for(;null!==oa&&0!==aa&&t<=aa;)Ma(oa,aa,!1),Sa();if(e&&(na=0,ra=null),0!==aa&&xa(oa,aa),ma=0,ba=null,null!==ha)for(t=ha,ha=null,e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){ua||(ua=!0,la=t)}}if(ua)throw t=la,la=null,ua=!1,t}function Aa(t,e){ia&&a("253"),oa=t,aa=e,Ma(t,e,!1),ka(1073741823,!1)}function Ma(t,e,n){if(ia&&a("245"),ia=!0,n){var r=t.finishedWork;null!==r?ja(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,mr(r)),Xo(t,n),null!==(r=t.finishedWork)&&(Ca()?t.finishedWork=r:ja(t,r,e)))}else null!==(r=t.finishedWork)?ja(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,mr(r)),Xo(t,n),null!==(r=t.finishedWork)&&ja(t,r,e));ia=!1}function ja(t,e,n){var r=t.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===ha?ha=[r]:ha.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===ba?ma++:(ba=t,ma=0),Bo=jo=!0,t.current===e&&a("177"),0===(n=t.pendingCommitExpirationTime)&&a("261"),t.pendingCommitExpirationTime=0,r=e.expirationTime;var i=e.childExpirationTime;if(r=i>r?i:r,t.didError=!1,0===r?(t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0):(0!==(i=t.latestPendingTime)&&(i>r?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>r&&(t.earliestPendingTime=t.latestPendingTime)),0===(i=t.earliestSuspendedTime)?Zr(t,r):r<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,Zr(t,r)):r>i&&Zr(t,r)),Jr(0,t),ko.current=null,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,r=e.firstEffect):r=e:r=e.firstEffect,hr=On,Fn(i=Dn())){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{var s=(o=(o=i.ownerDocument)&&o.defaultView||window).getSelection&&o.getSelection();if(s&&0!==s.rangeCount){o=s.anchorNode;var u=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{o.nodeType,l.nodeType}catch(t){o=null;break t}var c=0,f=-1,p=-1,h=0,d=0,y=i,v=null;e:for(;;){for(var g;y!==o||0!==u&&3!==y.nodeType||(f=c+u),y!==l||0!==s&&3!==y.nodeType||(p=c+s),3===y.nodeType&&(c+=y.nodeValue.length),null!==(g=y.firstChild);)v=y,y=g;for(;;){if(y===i)break e;if(v===o&&++h===u&&(f=c),v===l&&++d===s&&(p=c),null!==(g=y.nextSibling))break;v=(y=v).parentNode}y=g}o=-1===f||-1===p?null:{start:f,end:p}}else o=null}o=o||{start:0,end:0}}else o=null;for(dr={focusedElem:i,selectionRange:o},On=!1,No=r;null!==No;){i=!1,o=void 0;try{for(;null!==No;){if(256&No.effectTag)t:{var m=No.alternate;switch((u=No).tag){case 0:case 11:case 15:break t;case 1:if(256&u.effectTag&&null!==m){var b=m.memoizedProps,_=m.memoizedState,x=u.stateNode,w=x.getSnapshotBeforeUpdate(u.elementType===u.type?b:Ti(u.type,b),_);x.__reactInternalSnapshotBeforeUpdate=w}break t;case 3:case 5:case 6:case 4:case 17:break t;default:a("163")}}No=No.nextEffect}}catch(t){i=!0,o=t}i&&(null===No&&a("178"),Zo(No,o),null!==No&&(No=No.nextEffect))}for(No=r;null!==No;){m=!1,b=void 0;try{for(;null!==No;){var E=No.effectTag;if(16&E&&rr(No.stateNode,""),128&E){var O=No.alternate;if(null!==O){var S=O.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(14&E){case 2:wo(No),No.effectTag&=-3;break;case 6:wo(No),No.effectTag&=-3,Oo(No.alternate,No);break;case 4:Oo(No.alternate,No);break;case 8:Eo(_=No),_.return=null,_.child=null,_.alternate&&(_.alternate.child=null,_.alternate.return=null)}No=No.nextEffect}}catch(t){m=!0,b=t}m&&(null===No&&a("178"),Zo(No,b),null!==No&&(No=No.nextEffect))}if(S=dr,O=Dn(),E=S.focusedElem,b=S.selectionRange,O!==E&&E&&E.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(E.ownerDocument.documentElement,E)){null!==b&&Fn(E)&&(O=b.start,void 0===(S=b.end)&&(S=O),"selectionStart"in E?(E.selectionStart=O,E.selectionEnd=Math.min(S,E.value.length)):(S=(O=E.ownerDocument||document)&&O.defaultView||window).getSelection&&(S=S.getSelection(),_=E.textContent.length,m=Math.min(b.start,_),b=void 0===b.end?m:Math.min(b.end,_),!S.extend&&m>b&&(_=b,b=m,m=_),_=Ln(E,m),x=Ln(E,b),_&&x&&(1!==S.rangeCount||S.anchorNode!==_.node||S.anchorOffset!==_.offset||S.focusNode!==x.node||S.focusOffset!==x.offset)&&((O=O.createRange()).setStart(_.node,_.offset),S.removeAllRanges(),m>b?(S.addRange(O),S.extend(x.node,x.offset)):(O.setEnd(x.node,x.offset),S.addRange(O))))),O=[];for(S=E;S=S.parentNode;)1===S.nodeType&&O.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof E.focus&&E.focus(),E=0;E<O.length;E++)(S=O[E]).element.scrollLeft=S.left,S.element.scrollTop=S.top}for(dr=null,On=!!hr,hr=null,t.current=e,No=r;null!==No;){r=!1,E=void 0;try{for(O=n;null!==No;){var P=No.effectTag;if(36&P){var C=No.alternate;switch(m=O,(S=No).tag){case 0:case 11:case 15:break;case 1:var T=S.stateNode;if(4&S.effectTag)if(null===C)T.componentDidMount();else{var k=S.elementType===S.type?C.memoizedProps:Ti(S.type,C.memoizedProps);T.componentDidUpdate(k,C.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var A=S.updateQueue;null!==A&&ui(0,A,T);break;case 3:var M=S.updateQueue;if(null!==M){if(b=null,null!==S.child)switch(S.child.tag){case 5:b=S.child.stateNode;break;case 1:b=S.child.stateNode}ui(0,M,b)}break;case 5:var j=S.stateNode;null===C&&4&S.effectTag&&yr(S.type,S.memoizedProps)&&j.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}if(128&P){var R=No.ref;if(null!==R){var I=No.stateNode;switch(No.tag){case 5:var L=I;break;default:L=I}"function"==typeof R?R(L):R.current=L}}No=No.nextEffect}}catch(t){r=!0,E=t}r&&(null===No&&a("178"),Zo(No,E),null!==No&&(No=No.nextEffect))}jo=Bo=!1,"function"==typeof Fr&&Fr(e.stateNode),P=e.expirationTime,0===(e=(e=e.childExpirationTime)>P?e:P)&&(Vo=null),t.expirationTime=e,t.finishedWork=null}function Ra(t){null===oa&&a("246"),oa.expirationTime=0,ua||(ua=!0,la=t)}function Ia(t,e){var n=ca;ca=!0;try{return t(e)}finally{(ca=n)||ia||ka(1073741823,!1)}}function La(t,e){if(ca&&!fa){fa=!0;try{return t(e)}finally{fa=!1}}return t(e)}function Da(t,e,n){if(pa)return t(e,n);ca||ia||0===sa||(ka(sa,!1),sa=0);var r=pa,i=ca;ca=pa=!0;try{return t(e,n)}finally{pa=r,(ca=i)||ia||ka(1073741823,!1)}}function Fa(t,e,n,r,i){var o=e.current;t:if(n){n=n._reactInternalFiber;e:{2===en(n)&&1===n.tag||a("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ar(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===n.tag){var u=n.type;if(Ar(u)){n=Ir(n,u,s);break t}}n=s}else n=Sr;return null===e.context?e.context=n:e.pendingContext=n,e=i,(i=ei(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Wo(),ri(o,i),Qo(o,r),r}function Na(t,e,n,r){var i=e.current;return Fa(t,e,n,i=Yo(Ea(),i),r)}function Ba(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function za(t){var e=1073741822-25*(1+((1073741822-Ea()+500)/25|0));e>=Ao&&(e=Ao-1),this._expirationTime=Ao=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ua(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Va(t,e,n){t={current:e=zr(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function Ga(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Wa(t,e,n,r,i){Ga(n)||a("200");var o=n._reactRootContainer;if(o){if("function"==typeof i){var s=i;i=function(){var t=Ba(o._internalRoot);s.call(t)}}null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Va(t,!1,e)}(n,r),"function"==typeof i){var u=i;i=function(){var t=Ba(o._internalRoot);u.call(t)}}La(function(){null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)})}return Ba(o._internalRoot)}function qa(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ga(e)||a("200"),function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Zt,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Pt=function(t,e,n){switch(e){case"input":if(we(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=N(r);i||a("90"),Gt(r),we(r,i)}}}break;case"textarea":Kn(t,n);break;case"select":null!=(e=n.value)&&Xn(t,!!n.multiple,e,!1)}},za.prototype.render=function(t){this._defer||a("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new Ua;return Fa(t,e,null,n,r._onCommit),r},za.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},za.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||a("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)r=i,i=i._next;null===r&&a("251"),r._next=i._next,this._next=e,t.firstBatch=this}this._defer=!1,Aa(t,n),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},za.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Ua.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Ua.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!=typeof n&&a("191",n),n()}}},Va.prototype.render=function(t,e){var n=this._internalRoot,r=new Ua;return null!==(e=void 0===e?null:e)&&r.then(e),Na(t,n,null,r._onCommit),r},Va.prototype.unmount=function(t){var e=this._internalRoot,n=new Ua;return null!==(t=void 0===t?null:t)&&n.then(t),Na(null,e,null,n._onCommit),n},Va.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new Ua;return null!==(n=void 0===n?null:n)&&i.then(n),Na(e,r,t,i._onCommit),i},Va.prototype.createBatch=function(){var t=new za(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime>=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},jt=Ia,Rt=Da,It=function(){ia||0===sa||(ka(sa,!1),sa=0)};var Ha={createPortal:qa,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"==typeof t.render?a("188"):a("268",Object.keys(t))),t=null===(t=rn(e))?null:t.stateNode},hydrate:function(t,e,n){return Wa(null,t,e,!0,n)},render:function(t,e,n){return Wa(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){return(null==t||void 0===t._reactInternalFiber)&&a("38"),Wa(t,e,n,!1,r)},unmountComponentAtNode:function(t){return Ga(t)||a("40"),!!t._reactRootContainer&&(La(function(){Wa(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return qa.apply(void 0,arguments)},unstable_batchedUpdates:Ia,unstable_interactiveUpdates:Da,flushSync:function(t,e){ia&&a("187");var n=ca;ca=!0;try{return $o(t,e)}finally{ca=n,ka(1073741823,!1)}},unstable_flushControlled:function(t){var e=ca;ca=!0;try{$o(t)}finally{(ca=e)||ia||ka(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[D,F,N,k.injectEventPluginsByName,m,W,function(t){P(t,G)},At,Mt,Tn,M]},unstable_createRoot:function(t,e){return Ga(t)||a("299","unstable_createRoot"),new Va(t,!0,null!=e&&!0===e.hydrate)}};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Fr=Br(function(t){return e.onCommitFiberRoot(n,t)}),Nr=Br(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}})(i({},t,{findHostInstanceByFiber:function(t){return null===(t=rn(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:L,bundleType:0,version:"16.6.1",rendererPackageName:"react-dom"});var Xa={default:Ha},Za=Xa&&Ha||Xa;t.exports=Za.default||Za},function(t,e,n){"use strict";t.exports=n(251)},function(t,e,n){"use strict";
/** @license React v16.6.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(e,"__esModule",{value:!0});var r=null,i=!1,o=3,a=-1,s=-1,u=!1,l=!1;function c(){if(!u){var t=r.expirationTime;l?g():l=!0,v(h,t)}}function f(){var t=r,e=r.next;if(r===e)r=null;else{var n=r.previous;r=n.next=e,e.previous=n}t.next=t.previous=null,n=t.callback,e=t.expirationTime,t=t.priorityLevel;var i=o,a=s;o=t,s=e;try{var u=n()}finally{o=i,s=a}if("function"==typeof u)if(u={callback:u,priorityLevel:t,expirationTime:e,next:null,previous:null},null===r)r=u.next=u.previous=u;else{n=null,t=r;do{if(t.expirationTime>=e){n=t;break}t=t.next}while(t!==r);null===n?n=r:n===r&&(r=u,c()),(e=n.previous).next=n.previous=u,u.next=n,u.previous=e}}function p(){if(-1===a&&null!==r&&1===r.priorityLevel){u=!0;try{do{f()}while(null!==r&&1===r.priorityLevel)}finally{u=!1,null!==r?c():l=!1}}}function h(t){u=!0;var n=i;i=t;try{if(t)for(;null!==r;){var o=e.unstable_now();if(!(r.expirationTime<=o))break;do{f()}while(null!==r&&r.expirationTime<=o)}else if(null!==r)do{f()}while(null!==r&&!m())}finally{u=!1,i=n,null!==r?c():l=!1,p()}}var d,y,v,g,m,b=Date,_="function"==typeof setTimeout?setTimeout:void 0,x="function"==typeof clearTimeout?clearTimeout:void 0,w="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,E="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function O(t){d=w(function(e){x(y),t(e)}),y=_(function(){E(d),t(e.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var S=performance;e.unstable_now=function(){return S.now()}}else e.unstable_now=function(){return b.now()};if("undefined"!=typeof window&&window._schedMock){var P=window._schedMock;v=P[0],g=P[1],m=P[2]}else if("undefined"==typeof window||"function"!=typeof window.addEventListener){var C=null,T=-1,k=function(t,e){if(null!==C){var n=C;C=null;try{T=e,n(t)}finally{T=-1}}};v=function(t,e){-1!==T?setTimeout(v,0,t,e):(C=t,setTimeout(k,e,!0,e),setTimeout(k,1073741823,!1,1073741823))},g=function(){C=null},m=function(){return!1},e.unstable_now=function(){return-1===T?0:T}}else{"undefined"!=typeof console&&("function"!=typeof w&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof E&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,M=!1,j=-1,R=!1,I=!1,L=0,D=33,F=33;m=function(){return L<=e.unstable_now()};var N="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===N){M=!1,t=A;var n=j;A=null,j=-1;var r=e.unstable_now(),i=!1;if(0>=L-r){if(!(-1!==n&&n<=r))return R||(R=!0,O(B)),A=t,void(j=n);i=!0}if(null!==t){I=!0;try{t(i)}finally{I=!1}}}},!1);var B=function(t){if(null!==A){O(B);var e=t-L+F;e<F&&D<F?(8>e&&(e=8),F=e<D?D:e):D=e,L=t+F,M||(M=!0,window.postMessage(N,"*"))}else R=!1};v=function(t,e){A=t,j=e,I||0>e?window.postMessage(N,"*"):R||(R=!0,O(B))},g=function(){A=null,M=!1,j=-1}}e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=4,e.unstable_runWithPriority=function(t,n){switch(t){case 1:case 2:case 3:case 4:break;default:t=3}var r=o,i=a;o=t,a=e.unstable_now();try{return n()}finally{o=r,a=i,p()}},e.unstable_scheduleCallback=function(t,n){var i=-1!==a?a:e.unstable_now();if("object"==typeof n&&null!==n&&"number"==typeof n.timeout)n=i+n.timeout;else switch(o){case 1:n=i+-1;break;case 2:n=i+250;break;case 4:n=i+1073741823;break;default:n=i+5e3}if(t={callback:t,priorityLevel:o,expirationTime:n,next:null,previous:null},null===r)r=t.next=t.previous=t,c();else{i=null;var s=r;do{if(s.expirationTime>n){i=s;break}s=s.next}while(s!==r);null===i?i=r:i===r&&(r=t,c()),(n=i.previous).next=i.previous=t,t.next=i,t.previous=n}return t},e.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(e===t)r=null;else{t===r&&(r=e);var n=t.previous;n.next=e,e.previous=n}t.next=t.previous=null}},e.unstable_wrapCallback=function(t){var n=o;return function(){var r=o,i=a;o=n,a=e.unstable_now();try{return t.apply(this,arguments)}finally{o=r,a=i,p()}}},e.unstable_getCurrentPriorityLevel=function(){return o},e.unstable_shouldYield=function(){return!i&&(null!==r&&r.expirationTime<s||m())}},function(t,e,n){"use strict";var r=n(253);function i(){}t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=p(n(1)),o=(n(162),n(399)),a=p(o),s=n(401);n(280);var u=p(n(281)),l=n(392),c=p(n(393));n(394);var f=p(n(395));function p(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={configURL:"/config.json",xFilter:void 0,engine:"cudf",ip:void 0,dataset:void 0,memformat:"arrow",sessions:!0,mapboxtoken:void 0,geoData:void 0,hover:void 0,currentZip:void 0,totalDP:0,currentDP:0,mapOpacity:100,mapScale:10,colorRange5:[[49,130,189,100],[107,174,214,100],[123,142,216,100],[226,103,152,100],[255,0,104,100],[50,50,50,100]],bankList:f.default.banks,selectedBank:"All",chart1Bins:10,chart2Bins:10,chart3Bins:10,chart1Data:[],chart1Domain:void 0,chart1BrushDomain:void 0,chart2Data:[],chart2Domain:void 0,chart2BrushDomain:void 0,chart3Data:[],chart3Domain:void 0,chart3BrushDomain:void 0,externalMutations:void 0,active:!0,error:!1},n.areaHover=n.areaHover.bind(n),n.mapOpacitySelection=n.mapOpacitySelection.bind(n),n.mapScaleSelection=n.mapScaleSelection.bind(n),n.filterZip3=n.filterZip3.bind(n),n.bankSelection=n.bankSelection.bind(n),n.chart1BinSelection=n.chart1BinSelection.bind(n),n.chart2BinSelection=n.chart2BinSelection.bind(n),n.chart3BinSelection=n.chart3BinSelection.bind(n),n.chart1BinUpdate=n.debounce(n.chart1BinUpdate.bind(n),100),n.chart2BinUpdate=n.debounce(n.chart2BinUpdate.bind(n),100),n.chart3BinUpdate=n.debounce(n.chart3BinUpdate.bind(n),100),n.filterCharts=n.filterCharts.bind(n),n.updateSize=n.updateSize.bind(n),n.updateComplete=n.updateComplete.bind(n),n.resetAllFilters=n.resetAllFilters.bind(n),n.resetInit=n.resetInit.bind(n),n.switchMode=n.switchMode.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.Component),r(e,[{key:"debounce",value:function(t,e){console.log("debounce init");var n=void 0;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){return t.apply(r,i)},e)}}},{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),window.addEventListener("updateGroupEvent",function(e){console.log("Triggered updateGroupEvent: ",e.detail.column),t.parseMapData(e)}),window.addEventListener("updateHistEvent",function(e){console.log("Triggered updateHistEvent: ",e.detail.column),t.parseChartData(e)}),window.addEventListener("updateSizeEvent",function(e){console.log("Triggered updateSizeEvent"),t.updateSize()}),window.addEventListener("allUpdatesComplete",function(e){t.updateComplete()}),this.loadConfig()}},{key:"componentWillUnmount",value:function(){console.log("Unmounting..."),void 0!=this.state.xFilter&&(this.state.xFilter.resetAllFilters(),this.state.xFilter.endSession().then(function(t){console.log("Umount:",t)}).catch(function(t){console.log("xFilter endSession error:",t)}))}},{key:"loadConfig",value:function(){var t=this;fetch(this.state.configURL).then(function(t){if(t.ok)return t.json();throw new Error("Network response was not ok.")}).then(function(e){console.log("xFilter Config data loaded.",e),""===e.server_ip||""===e.dataset||""===e.cuXfilter_port_external?(t.setState({error:!0}),console.log("config.json error. Make sure the config file is fill out correctly")):(""===e.demo_mapbox_token&&console.log("WARNING: no mapbox token token configured, there will be NO map base layer!"),t.setState({ip:e.server_ip+":"+e.cuXfilter_port_external,dataset:e.demo_dataset_name,mapboxtoken:e.demo_mapbox_token}),t.initCuXFilter())}).catch(function(e){t.setState({error:!0}),console.log("config.json fetch error. Make sure the config file is setup correctly: ",e)})}},{key:"switchMode",value:function(){"cudf"===this.state.engine?this.setState({engine:"pandas"}):this.setState({engine:"cudf"}),this.resetInit()}},{key:"resetInit",value:function(){var t=this;this.setState({active:!0,currentZip:void 0,error:!1,totalDP:0,currentDP:0,selectedBank:"All",chart1Data:[],chart1Domain:void 0,chart1BrushDomain:void 0,chart2Data:[],chart2Domain:void 0,chart2BrushDomain:void 0,chart3Data:[],chart3Domain:void 0,chart3BrushDomain:void 0}),this.state.xFilter.resetAllFilters(),this.state.xFilter.endSession().then(function(e){console.log("reset Init:",e),t.initCuXFilter()}).catch(function(e){t.setState({error:!0}),console.log("xFilter rest endSession error:",e)})}},{key:"initCuXFilter",value:function(){var t=this,e=new c.default(this.state.dataset,this.state.ip,this.state.engine,this.state.sessions,this.state.memformat);console.log("initializing xFilter to: ",e),e.init().then(function(n){console.log("xFilter initialized: ",n),t.setState({xFilter:e,active:!0}),t.loadGeoJson()}).catch(function(e){t.setState({error:!0}),console.log("xFilter Error: ",e)})}},{key:"loadGeoJson",value:function(){var t=this;fetch("./data/zip3-ms-rhs-lessprops.json").then(function(t){if(t.ok)return t.json();throw new Error("Network response was not ok.")}).then(function(e){console.log("GeoJSON data loaded.",e),t.setState({geoData:e}),t.setMapChartDimensions()}).catch(function(e){t.setState({error:!0}),console.log("Fetch operation error: ",e)})}},{key:"setMapChartDimensions",value:function(){var t=this;this.setState({active:!0});var e=this.state.xFilter.schema;console.log("setting dimensions:",e),this.zip3DIM=this.state.xFilter.dimension(e[0]),this.delDIM=this.state.xFilter.dimension(e[5]),this.creditDIM=this.state.xFilter.dimension(e[3]),this.dtiDIM=this.state.xFilter.dimension(e[1]),this.orgDIM=this.state.xFilter.dimension(e[6]),Promise.all([this.zip3DIM.loadDimension(),this.delDIM.loadDimension(),this.creditDIM.loadDimension(),this.dtiDIM.loadDimension(),this.orgDIM.loadDimension()]).then(function(e){console.log("Dims loaded",e);return t.zip3GROUP=t.zip3DIM.group({delinquency_12_prediction:["mean"],current_actual_upb:["sum"]}),Promise.all([t.zip3GROUP.loadGroup()])}).then(function(e){console.log("Groups loaded",e),t.zip3GROUP.all(),t.delDIM.getHist(t.state.chart1Bins),t.dtiDIM.getHist(t.state.chart2Bins),t.creditDIM.getHist(t.state.chart3Bins),t.state.xFilter.resetAllFilters()}).catch(function(e){t.setState({error:!0}),console.log("zip3 dim error ",e)})}},{key:"updateComplete",value:function(){this.setState({active:!1})}},{key:"updateSize",value:function(){void 0!=this.state.xFilter&&(0===this.state.totalDP?this.setState({currentDP:this.state.xFilter.size,totalDP:this.state.xFilter.size}):this.setState({currentDP:this.state.xFilter.size}))}},{key:"parseMapData",value:function(t){var e=this.zip3GROUP.value;console.log("parsing to map data: ",e);var n=this.state.geoData.features;if(void 0!=n.length){for(var r=0;r<n.length;r++){var i=parseFloat(n[r].properties.ZIP3),o=e.zip.indexOf(i);o>-1?(n[r].properties.sum_upb=e.sum_current_actual_upb[o],n[r].properties.delinquency=e.mean_delinquency_12_prediction[o]):(console.log(i+" not found in geoJSON"),n[r].properties.sum_upb=void 0,n[r].properties.delinquency=void 0)}this.setState({geoData:{type:"FeatureCollection",features:n},error:!1})}else this.setState({error:!0})}},{key:"parseChartData",value:function(t){if(console.log("Parsing data for chart..."),"delinquency_12_prediction"===t.detail.column)if(void 0===this.delDIM)this.setState({error:!0});else{var e=this.formatData(this.delDIM.histogram);this.setState({chart1Data:e})}if("dti"===t.detail.column)if(void 0===this.dtiDIM)this.setState({error:!0});else{var n=this.formatData(this.dtiDIM.histogram);this.setState({chart2Data:n})}if("borrower_credit_score"===t.detail.column)if(void 0===this.creditDIM)this.setState({error:!0});else{var r=this.formatData(this.creditDIM.histogram);this.setState({chart3Data:r})}}},{key:"formatData",value:function(t){for(var e=[],n=0;n<t.X.length;n++){var r={x:t.X[n],y:t.Y[n]};e.push(r)}return this.setState({error:!1}),e}},{key:"calcZip3BinColors",value:function(t){var e=t.properties.delinquency;return void 0!=this.state.currentZip&&this.state.currentZip!=t.properties.ZIP3?[255,255,255,50]:void 0==e?this.state.colorRange5[6]:e<=.196?this.state.colorRange5[0]:e>.196&&e<=.198?this.state.colorRange5[1]:e>.198&&e<=.2?this.state.colorRange5[2]:e>.2&&e<=.202?this.state.colorRange5[3]:e>.202?this.state.colorRange5[4]:this.state.colorRange5[6]}},{key:"getElevation",value:function(t){var e=t.properties.sum_upb;return void 0!=e?e/1e5:100}},{key:"filterZip3",value:function(t){var e=t.object.properties.ZIP3;console.log("filtering",e),e===this.state.currentZip?(this.setState({active:!0,currentZip:void 0}),this.zip3DIM.resetFilters()):(this.setState({active:!0,currentZip:e}),this.zip3DIM.resetThenFilter(parseFloat(e)))}},{key:"filterBanks",value:function(t){console.log("Filtering Bank:",t),this.setState({active:!0,currentZip:void 0}),"All"===t?this.orgDIM.resetFilters():this.orgDIM.resetThenFilter(parseFloat(t))}},{key:"filterCharts",value:function(t,e){var n=e.children[0].props.name;"chart1"==n&&(void 0===this.state.chart1Domain&&this.setState({chart1Domain:e.domain.x}),t.x[0]===e.domain.x[0]&&t.x[1]===e.domain.x[1]?(console.log("resetting chart1..."),this.delDIM.resetFilters()):(console.log("Filtering: ",n,t.x,e),this.delDIM.resetThenFilter(t.x)),this.setState({active:!0,chart1BrushDomain:t.x})),"chart2"==n&&(void 0===this.state.chart2Domain&&this.setState({chart2Domain:e.domain.x}),t.x[0]===e.domain.x[0]&&t.x[1]===e.domain.x[1]?(console.log("resetting chart2..."),this.dtiDIM.resetFilters()):(console.log("Filtering: ",n,t.x,e),this.dtiDIM.resetThenFilter(t.x)),this.setState({active:!0,chart2BrushDomain:t.x})),"chart3"==n&&(void 0===this.state.chart3Domain&&this.setState({chart3Domain:e.domain.x}),t.x[0]===e.domain.x[0]&&t.x[1]===e.domain.x[1]?(console.log("resetting chart3..."),this.creditDIM.resetFilters()):(console.log("Filtering: ",n,t.x,e),this.creditDIM.resetThenFilter(t.x)),this.setState({active:!0,chart3BrushDomain:t.x}))}},{key:"resetAllFilters",value:function(){console.log("clearing all filters..."),this.setState({active:!0,currentZip:void 0,selectedBank:"All"}),this.state.xFilter.resetAllFilters()}},{key:"chart1BinSelection",value:function(t){this.setState({chart1Bins:t}),this.chart1BinUpdate()}},{key:"chart1BinUpdate",value:function(){this.delDIM.getHist(this.state.chart1Bins)}},{key:"chart2BinSelection",value:function(t){this.setState({chart2Bins:t}),this.chart2BinUpdate()}},{key:"chart2BinUpdate",value:function(){this.dtiDIM.getHist(this.state.chart2Bins)}},{key:"chart3BinSelection",value:function(t){this.setState({chart3Bins:t}),this.chart3BinUpdate()}},{key:"chart3BinUpdate",value:function(){this.creditDIM.getHist(this.state.chart3Bins)}},{key:"mapOpacitySelection",value:function(t){this.setState({colorRange5:[[49,130,189,t],[107,174,214,t],[123,142,216,t],[226,103,152,t],[255,0,104,t],[50,50,50,t]],mapOpacity:t})}},{key:"mapScaleSelection",value:function(t){this.setState({mapScale:t})}},{key:"bankSelection",value:function(t){this.setState({selectedBank:t.target.value}),this.filterBanks(t.target.value)}},{key:"buildBankList",value:function(){var t=this.state.bankList.map(function(t,e){return i.default.createElement("option",{value:e,key:e},t)});return i.default.createElement("select",{className:"mapchart-bank-list",value:this.state.selectedBank,onChange:this.bankSelection},i.default.createElement("option",{value:"All"},"All Banks"),t)}},{key:"areaHover",value:function(t){void 0!=t&&void 0!=t.object&&void 0!=t.object.properties?this.setState({hover:t.object.properties}):this.setState({hover:void 0})}},{key:"buildAreaHover",value:function(){if(void 0!=this.state.hover){var t=0,e=0,n=0;return void 0!=this.state.hover.ZIP3&&(t=this.state.hover.ZIP3),void 0!=this.state.hover.delinquency&&(e=this.state.hover.delinquency.toFixed(3)),void 0!=this.state.hover.sum_upb&&(n=this.state.hover.sum_upb.toLocaleString()),i.default.createElement("div",{className:"mapchar-selected-area"},"3zip: ",t,"xx ",i.default.createElement("br",null)," score: ",e," ",i.default.createElement("br",null)," upb: ",n," ")}return i.default.createElement("div",{className:"mapchart-selected-area"},"none")}},{key:"buildHeaderStatus",value:function(){var t={},e="mapchart-total-bar-"+this.state.engine;return this.state.error?(t.width="100%",t.backgroundColor="orange"):this.state.active?e+=" stripes":this.state.totalDP>0?(t.marginRight=100-this.state.currentDP/this.state.totalDP*100+"%",t.width=this.state.currentDP/this.state.totalDP*100+"%"):(t.width="100%",t.backgroundColor="orange"),i.default.createElement("div",{className:e,style:t})}},{key:"buildMap",value:function(){var t=this,e={longitude:-101,latitude:37,zoom:3,pitch:0,bearing:0},n=new o.GeoJsonLayer({id:"geojson-layer",data:this.state.geoData,visible:!0,highlightColor:[200,200,200,200],autoHighlight:!0,wireframe:!1,pickable:!0,stroked:!1,filled:!0,extruded:!0,elevationScale:this.state.mapScale/100,lineWidthScale:10,lineWidthMinPixels:1,getFillColor:function(e){return t.calcZip3BinColors(e)},getLineColor:[0,188,212,100],getRadius:100,getLineWidth:10,getElevation:function(e){return t.getElevation(e)},updateTriggers:{getFillColor:[this.state.mapOpacity,this.state.geoData]},onClick:function(e){t.state.active||t.filterZip3(e)},onHover:function(e){t.areaHover(e)}});return void 0!=this.state.mapboxtoken?i.default.createElement(a.default,{initialViewState:e,controller:!0,layers:[n]},i.default.createElement(s.StaticMap,{mapboxApiAccessToken:this.state.mapboxtoken,mapStyle:"mapbox://styles/mapbox/dark-v9"})):i.default.createElement(a.default,{initialViewState:e,controller:!0,layers:[n]})}},{key:"render",value:function(){var t=this.buildHeaderStatus(),e=this.buildBankList(),n=this.buildAreaHover(),r=this.buildMap(),o="",a="";"cudf"===this.state.engine?(o="gpu",a="cpu"):"pandas"===this.state.engine&&(o="cpu",a="gpu");var s=0;return this.state.currentDP>0&&(s=(s=this.state.currentDP/this.state.totalDP*100).toFixed(2)),i.default.createElement("main",{className:"mapchart"},i.default.createElement("div",{className:"mapchart-legend-container"},i.default.createElement("div",{className:"mapchart-legend-button",onClick:this.switchMode},"switch to ",a," engine"),i.default.createElement("div",{className:"mapchart-legend-section"},i.default.createElement("div",{className:"mapchart-legend-heading"},"selected bank"),e),i.default.createElement("div",{className:"mapchart-legend-section-dial"},i.default.createElement("div",{className:"mapchart-legend-section-2col"},i.default.createElement("div",{className:"mapchart-legend-heading"},"opacity"),i.default.createElement(l.CircleSlider,{value:this.state.mapOpacity,onChange:this.mapOpacitySelection,min:10,max:255,stepSize:5,size:80,circleWidth:5,progressWidth:7,knobRadius:7,circleColor:"gray",progressColor:"#ffffff",knobColor:"#ffffff"}),i.default.createElement("div",{className:"mapchart-circ-value"},this.state.mapOpacity)),i.default.createElement("div",{className:"mapchart-legend-section-2col"},i.default.createElement("div",{className:"mapchart-legend-heading"},"scale"),i.default.createElement(l.CircleSlider,{value:this.state.mapScale,onChange:this.mapScaleSelection,min:1,max:100,stepSize:1,size:80,circleWidth:5,progressWidth:7,knobRadius:7,circleColor:"gray",progressColor:"#ffffff",knobColor:"#ffffff"}),i.default.createElement("div",{className:"mapchart-circ-value"},this.state.mapScale))),i.default.createElement("div",{className:"mapchart-legend-section-dial"},i.default.createElement("div",{className:"mapchart-legend-section-1col"},i.default.createElement("div",{className:"mapchart-legend-heading"},"dti bins"),i.default.createElement(l.CircleSlider,{value:this.state.chart2Bins,onChange:this.chart2BinSelection,min:1,max:100,stepSize:1,size:80,circleWidth:5,progressWidth:7,knobRadius:7,circleColor:"gray",progressColor:"#ffffff",knobColor:"#ffffff"}),i.default.createElement("div",{className:"mapchart-circ-value"},this.state.chart2Bins))),i.default.createElement("div",{className:"mapchart-legend-section-dial"},i.default.createElement("div",{className:"mapchart-legend-section-2col"},i.default.createElement("div",{className:"mapchart-legend-heading"},"risk bins"),i.default.createElement(l.CircleSlider,{value:this.state.chart1Bins,onChange:this.chart1BinSelection,min:1,max:100,stepSize:1,size:80,circleWidth:5,progressWidth:7,knobRadius:7,circleColor:"gray",progressColor:"#ffffff",knobColor:"#ffffff"}),i.default.createElement("div",{className:"mapchart-circ-value"},this.state.chart1Bins)),i.default.createElement("div",{className:"mapchart-legend-section-2col"},i.default.createElement("div",{className:"mapchart-legend-heading"},"credit bins"),i.default.createElement(l.CircleSlider,{value:this.state.chart3Bins,onChange:this.chart3BinSelection,min:1,max:100,stepSize:1,size:80,circleWidth:5,progressWidth:7,knobRadius:7,circleColor:"gray",progressColor:"#ffffff",knobColor:"#ffffff"}),i.default.createElement("div",{className:"mapchart-circ-value"},this.state.chart3Bins))),i.default.createElement("div",{className:"mapchart-legend-section"},i.default.createElement("div",{className:"mapchart-legend-heading"},"portfolio risk score"),i.default.createElement("ul",{className:"mapchart-key-ul"},i.default.createElement("li",{className:"mapchart-key-li"},i.default.createElement("span",{className:"mapchart-perf mapchart-sel0"})," ",i.default.createElement("span",{className:"mapchart-perf-title"},"0.000 - 0.196")),i.default.createElement("li",{className:"mapchart-key-li"},i.default.createElement("span",{className:"mapchart-perf mapchart-sel1"})," ",i.default.createElement("span",{className:"mapchart-perf-title"},"0.196 - 0.198")),i.default.createElement("li",{className:"mapchart-key-li"},i.default.createElement("span",{className:"mapchart-perf mapchart-sel2"})," ",i.default.createElement("span",{className:"mapchart-perf-title"},"0.198 - 0.200")),i.default.createElement("li",{className:"mapchart-key-li"},i.default.createElement("span",{className:"mapchart-perf mapchart-sel3"})," ",i.default.createElement("span",{className:"mapchart-perf-title"},"0.200 - 0.202")),i.default.createElement("li",{className:"mapchart-key-li"},i.default.createElement("span",{className:"mapchart-perf mapchart-sel4"})," ",i.default.createElement("span",{className:"mapchart-perf-title"},"0.202 - 0.2+"))),i.default.createElement("br",null),i.default.createElement("div",{className:"mapchart-legend-heading"},"total unpaid balance"),i.default.createElement("span",{className:"mapchart-perf"}," ",i.default.createElement("img",{src:"/img/legend-height.png",className:"legend-img"})," ")," ",i.default.createElement("div",{className:"mapchart-perf-cube"},"bar height")),i.default.createElement("div",{className:"mapchart-legend-section"},i.default.createElement("div",{className:"mapchart-legend-heading"},"area details"),n),i.default.createElement("div",{className:"mapchart-legend-sink"},i.default.createElement("div",{className:"mapchart-legend-button-small",onClick:this.resetInit},"reset all"))),i.default.createElement("div",{className:"mapchart-heading-body"},i.default.createElement("div",{className:"mapchart-heading-container"},i.default.createElement("div",{className:"mapchart-header-title"}," ",o," aggregated ",s,i.default.createElement("span",{className:"percent"},"%")," of ",parseFloat(this.state.totalDP).toLocaleString()," mortgages "),t)),i.default.createElement("div",{className:"mapchart-map-body"},r),i.default.createElement("div",{className:"mapchart-chart-body"},i.default.createElement("div",{className:"mapchart-col3-container"},i.default.createElement(u.default,{name:"chart1",label:"portfolio risk score histogram",ratio:.8,width:700,height:400,tickCount:5,data:this.state.chart1Data,domain:this.state.chart1Domain,brushDomain:this.state.chart1BrushDomain,active:this.state.active,onSelection:this.filterCharts})),i.default.createElement("div",{className:"mapchart-col3-container"},i.default.createElement(u.default,{name:"chart2",label:"debt to income histogram",ratio:.8,width:700,height:400,tickCount:5,data:this.state.chart2Data,domain:this.state.chart2Domain,brushDomain:this.state.chart2BrushDomain,active:this.state.active,onSelection:this.filterCharts})),i.default.createElement("div",{className:"mapchart-col3-container"},i.default.createElement(u.default,{name:"chart3",label:"credit score histogram",ratio:.8,width:700,height:400,tickCount:5,data:this.state.chart3Data,domain:this.state.chart3Domain,brushDomain:this.state.chart3BrushDomain,active:this.state.active,onSelection:this.filterCharts}))))}}]),e}();e.default=h},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])y(u)||!_(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(n,i){if(m(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function l(t,e){return t}function c(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return g(i)||(i=c(t,i,r)),i}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(v(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(y(e))return t.stylize("null","null")}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(E(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(w(n))return f(n)}var l,_="",O=!1,S=["{","}"];(h(n)&&(O=!0,S=["[","]"]),E(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(_=" "+RegExp.prototype.toString.call(n)),x(n)&&(_=" "+Date.prototype.toUTCString.call(n)),w(n)&&(_=" "+f(n)),0!==a.length||O&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=O?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)C(e,String(a))?o.push(p(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,e,n,r,i,!0))}),o}(t,n,r,s,a):a.map(function(e){return p(t,n,r,s,e,O)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(l,_,S)):S[0]+_+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),C(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=y(n)?c(t,u.value,null):c(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return"number"==typeof t}function g(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return _(t)&&"[object RegExp]"===O(t)}function _(t){return"object"==typeof t&&null!==t}function x(t){return _(t)&&"[object Date]"===O(t)}function w(t){return _(t)&&("[object Error]"===O(t)||t instanceof Error)}function E(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=b,e.isObject=_,e.isDate=x,e.isError=w,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(262);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(263),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(55),n(51))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},function(t,e){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},function(t,e,n){t.exports=n(269)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){(0,r.installParameterDefinitions)(),console.log("luma.gl: WebGL debug support installed")};var r=n(270),i=n(273);(void 0!==t?t:window).WebGLDebug=i,console.log("luma.gl: WebGL debug support imported")}).call(this,n(55))},function(t,e,n){"use strict";var r=n(271);Object.defineProperty(e,"__esModule",{value:!0}),e.installParameterDefinitions=function(){},e.TEXTURE_PARAMETERS=e.SAMPLER_PARAMETERS=e.RENDERBUFFER_PARAMETERS=e.PROGRAM_PARAMETERS=e.FRAMEBUFFER_STATUS=e.FRAMEBUFFER_ATTACHMENT_PARAMETERS=e.FENCE_SYNC_PARAMETERS=e.BUFFER_PARAMETERS=e.GLboolean=e.GLuint=e.GLint=e.GLfloat=e.GLenum=void 0;var i,o,a,s,u,l,c=r(n(272));e.GLenum="GLenum";e.GLfloat="GLfloat";e.GLint="GLint";e.GLuint="GLint";e.GLboolean="GLboolean";var f=(i={},(0,c.default)(i,34660,{webgl1:0}),(0,c.default)(i,34661,{webgl1:0}),i);e.BUFFER_PARAMETERS=f;e.FENCE_SYNC_PARAMETERS=[37138,37140,37139,37141];e.FRAMEBUFFER_ATTACHMENT_PARAMETERS=[36049,36048,36051,36050,33296,36052,33298,33299,33300,33301,33302,33303,33297];var p=(o={},(0,c.default)(o,36053,"Success. Framebuffer is correctly set up"),(0,c.default)(o,36054,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),(0,c.default)(o,36055,"Framebuffer has no attachment"),(0,c.default)(o,36057,"Framebuffer attachments do not have the same size"),(0,c.default)(o,36061,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),(0,c.default)(o,36182,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),o);e.FRAMEBUFFER_STATUS=p;var h=(a={},(0,c.default)(a,35712,{webgl1:0}),(0,c.default)(a,35714,{webgl1:0}),(0,c.default)(a,35715,{webgl1:0}),(0,c.default)(a,35717,{webgl1:0}),(0,c.default)(a,35721,{webgl1:0}),(0,c.default)(a,35718,{webgl1:0}),(0,c.default)(a,35967,{webgl2:0}),(0,c.default)(a,35971,{webgl2:0}),(0,c.default)(a,35382,{webgl2:0}),a);e.PROGRAM_PARAMETERS=h;var d=(s={},(0,c.default)(s,36162,{webgl1:0}),(0,c.default)(s,36163,{webgl1:0}),(0,c.default)(s,36164,{type:"GLenum",webgl1:32854}),(0,c.default)(s,36177,{webgl1:0}),(0,c.default)(s,36178,{webgl1:0}),(0,c.default)(s,36176,{webgl1:0}),(0,c.default)(s,36179,{webgl1:0}),(0,c.default)(s,36180,{webgl1:0}),(0,c.default)(s,36181,{webgl1:0}),(0,c.default)(s,36011,{webgl2:1}),s);e.RENDERBUFFER_PARAMETERS=d;var y=(u={},(0,c.default)(u,10240,{webgl2:!0}),(0,c.default)(u,10241,{webgl2:!0}),(0,c.default)(u,10242,{webgl2:!0}),(0,c.default)(u,10243,{webgl2:!0}),(0,c.default)(u,32882,{webgl2:!0}),(0,c.default)(u,33084,{webgl2:!0}),(0,c.default)(u,33085,{webgl2:!0}),(0,c.default)(u,34893,{webgl2:!0}),(0,c.default)(u,34892,{webgl2:!0}),(0,c.default)(u,33082,{webgl2:!0}),(0,c.default)(u,33083,{webgl2:!0}),u);e.SAMPLER_PARAMETERS=y;var v=(l={},(0,c.default)(l,10240,{type:"GLenum",webgl1:9729}),(0,c.default)(l,10241,{type:"GLenum",webgl1:9986}),(0,c.default)(l,10242,{type:"GLenum",webgl1:10497}),(0,c.default)(l,10243,{type:"GLenum",webgl1:10497}),(0,c.default)(l,32882,{type:"GLenum",webgl2:10497}),(0,c.default)(l,33084,{webgl2:0}),(0,c.default)(l,33085,{webgl2:1e3}),(0,c.default)(l,34893,{type:"GLenum",webgl2:515}),(0,c.default)(l,34892,{type:"GLenum",webgl2:0}),(0,c.default)(l,33082,{webgl2:-1e3}),(0,c.default)(l,33083,{webgl2:1e3}),(0,c.default)(l,4096,{webgl1:0}),(0,c.default)(l,4097,{webgl1:0}),l);e.TEXTURE_PARAMETERS=v},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){(function(e){WebGLDebugUtils=function(){var t;void 0===t&&(t=e);var n=function(e){t.console&&t.console.error?t.console.error(e):function(e){t.console&&t.console.log&&t.console.log(e)}(e)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},i=null,o=null;function a(t){if(null==i)for(var e in i={},o={},t)"number"==typeof t[e]&&(i[t[e]]=e,o[e]=t[e])}function s(){if(null==i)throw"WebGLDebugUtils.init(ctx) not called"}function u(t){s();var e=i[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function l(t,e,n,i){var a;if(void 0!==(a=r[t])&&(void 0!==(a=a[e])&&a[n])){if("object"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var s=a[n].enumBitwiseOr,l=0,c=[],f=0;f<s.length;++f){var p=o[s[f]];0!=(i&p)&&(l|=p,c.push(u(p)))}return l===i?c.join(" | "):u(i)}return u(i)}return null===i?"null":void 0===i?"undefined":i.toString()}function c(t,e,n){t.__defineGetter__(n,function(){return e[n]}),t.__defineSetter__(n,function(t){e[n]=t})}function f(t){var e=!!t.createTransformFeedback;e&&t.bindVertexArray(null);var n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r);for(var i=0;i<n;++i)t.disableVertexAttribArray(i),t.vertexAttribPointer(i,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(i,0),e&&t.vertexAttribDivisor(i,0);t.deleteBuffer(r);var o=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<o;++i)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null),e&&(t.bindTexture(t.TEXTURE_2D_ARRAY,null),t.bindTexture(t.TEXTURE_3D,null),t.bindSampler(i,null));if(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),e){t.drawBuffers([t.BACK]),t.readBuffer(t.BACK),t.bindBuffer(t.COPY_READ_BUFFER,null),t.bindBuffer(t.COPY_WRITE_BUFFER,null),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindBuffer(t.PIXEL_UNPACK_BUFFER,null);var a=t.getParameter(t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(i=0;i<a;++i)t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,i,null);var s=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);for(i=0;i<s;++i)t.bindBufferBase(t.UNIFORM_BUFFER,i,null);t.disable(t.RASTERIZER_DISCARD),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,0),t.pixelStorei(t.UNPACK_SKIP_IMAGES,0),t.pixelStorei(t.UNPACK_ROW_LENGTH,0),t.pixelStorei(t.UNPACK_SKIP_ROWS,0),t.pixelStorei(t.UNPACK_SKIP_PIXELS,0),t.pixelStorei(t.PACK_ROW_LENGTH,0),t.pixelStorei(t.PACK_SKIP_ROWS,0),t.pixelStorei(t.PACK_SKIP_PIXELS,0),t.hint(t.FRAGMENT_SHADER_DERIVATIVE_HINT,t.DONT_CARE)}for(;t.getError(););}return{init:a,mightBeEnum:function(t){return s(),void 0!==i[t]},glEnumToString:u,glFunctionArgToString:l,glFunctionArgsToString:function(t,e){for(var n="",r=e.length,i=0;i<r;++i)n+=(0==i?"":", ")+l(t,r,i,e[i]);return n},makeDebugContext:function t(e,r,i,o){o=o||e,a(e),r=r||function(t,e,r){for(var i="",o=r.length,a=0;a<o;++a)i+=(0==a?"":", ")+l(e,o,a,r[a]);n("WebGL error "+u(t)+" in "+e+"("+i+")")};var s={};function f(t,e){return function(){i&&i(e,arguments);var n=t[e].apply(t,arguments),a=o.getError();return 0!=a&&(s[a]=!0,r(a,e,arguments)),n}}var p={};for(var h in e)if("function"==typeof e[h])if("getExtension"!=h)p[h]=f(e,h);else{var d=f(e,h);p[h]=function(){var n=d.apply(e,arguments);return n?t(n,r,i,o):null}}else c(p,e,h);return p.getError=function(){for(var t in s)if(s.hasOwnProperty(t)&&s[t])return s[t]=!1,t;return e.NO_ERROR},p},makeLostContextSimulatingCanvas:function(e){var n,r,i=[],o=[],a={},s=1,u=!1,l=[],p=0,h=0,d=!1,y=0,v={};function g(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}e.getContext=function(i){return function(){var o=i.apply(e,arguments);if(o instanceof WebGLRenderingContext||t.WebGL2RenderingContext&&o instanceof WebGL2RenderingContext){if(o!=n){if(n)throw"got different context";r=t.WebGL2RenderingContext&&o instanceof WebGL2RenderingContext,a=function(t){for(var e in t)"function"==typeof t[e]?a[e]=x(t,e):c(a,t,e);a.getError=function(){if(_(),!u)for(;t=n.getError();)v[t]=!0;for(var t in v)if(v[t])return delete v[t],t;return a.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];r&&i.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var o=0;o<i.length;++o){var f=i[o];a[f]=function(e){return function(){if(_(),u)return null;var n=e.apply(t,arguments);return n.__webglDebugContextLostId__=s,l.push(n),n}}(t[f])}var p=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];r&&p.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var o=0;o<p.length;++o){var f=p[o];a[f]=function(e){return function(){return _(),u?null:e.apply(t,arguments)}}(a[f])}var h=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];r&&h.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var o=0;o<h.length;++o){var f=h[o];a[f]=function(e){return function(){return _(),!u&&e.apply(t,arguments)}}(a[f])}return a.checkFramebufferStatus=function(e){return function(){return _(),u?a.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(a.checkFramebufferStatus),a.getAttribLocation=function(e){return function(){return _(),u?-1:e.apply(t,arguments)}}(a.getAttribLocation),a.getVertexAttribOffset=function(e){return function(){return _(),u?0:e.apply(t,arguments)}}(a.getVertexAttribOffset),a.isContextLost=function(){return u},r&&(a.getFragDataLocation=function(e){return function(){return _(),u?-1:e.apply(t,arguments)}}(a.getFragDataLocation),a.clientWaitSync=function(e){return function(){return _(),u?a.WAIT_FAILED:e.apply(t,arguments)}}(a.clientWaitSync),a.getUniformBlockIndex=function(e){return function(){return _(),u?a.INVALID_INDEX:e.apply(t,arguments)}}(a.getUniformBlockIndex)),a}(n=o)}return a}return o}}(e.getContext);var m=function(t){i.push(g(t))},b=function(t){o.push(g(t))};function _(){++h,u||p==h&&e.loseContext()}function x(t,e){var n=t[e];return function(){if(_(),!u)return n.apply(t,arguments)}}function w(t){return{statusMessage:t,preventDefault:function(){d=!0}}}return function(t){var e=t.addEventListener;t.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":m(r);break;case"webglcontextrestored":b(r);break;default:e.apply(t,arguments)}}}(e),e.loseContext=function(){if(!u){for(u=!0,p=0,++s;n.getError(););!function(){for(var t=Object.keys(v),e=0;e<t.length;++e)delete v[t[e]]}(),v[n.CONTEXT_LOST_WEBGL]=!0;var t=w("context lost"),r=i.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](t);y>=0&&setTimeout(function(){e.restoreContext()},y)},0)}},e.restoreContext=function(){u&&o.length&&setTimeout(function(){if(!d)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var t=0;t<l.length;++t){var e=l[t];e instanceof WebGLBuffer?n.deleteBuffer(e):e instanceof WebGLFramebuffer?n.deleteFramebuffer(e):e instanceof WebGLProgram?n.deleteProgram(e):e instanceof WebGLRenderbuffer?n.deleteRenderbuffer(e):e instanceof WebGLShader?n.deleteShader(e):e instanceof WebGLTexture?n.deleteTexture(e):r&&(e instanceof WebGLQuery?n.deleteQuery(e):e instanceof WebGLSampler?n.deleteSampler(e):e instanceof WebGLSync?n.deleteSync(e):e instanceof WebGLTransformFeedback?n.deleteTransformFeedback(e):e instanceof WebGLVertexArrayObject&&n.deleteVertexArray(e))}}(),f(n),u=!1,h=0,d=!1;for(var t=o.slice(),e=w("context restored"),i=0;i<t.length;++i)t[i](e)},0)},e.loseContextInNCalls=function(t){if(u)throw"You can not ask a lost contet to be lost";p=h+t},e.getNumCalls=function(){return h},e.setRestoreTimeout=function(t){y=t},e},resetToInitialState:f}}(),t.exports=WebGLDebugUtils}).call(this,n(55))},function(t,e,n){"use strict";t.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(t,e,n){var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(i,o,a,s){"use strict";var u,l=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),f="function",p=Math.round,h=Math.abs,d=Date.now;function y(t,e,n){return setTimeout(w(t,n),e)}function v(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function m(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var b=m(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),_=m(function(t,e){return b(t,e,!0)},"merge","Use `assign`.");function x(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==f?t.apply(e&&e[0]||s,e):t}function O(t,e){return t===s?e:t}function S(t,e,n){g(k(e),function(e){t.addEventListener(e,n,!1)})}function P(t,e,n){g(k(e),function(e){t.removeEventListener(e,n,!1)})}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function k(t){return t.trim().split(/\s+/g)}function A(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function j(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];A(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function R(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<l.length;){if((r=(n=l[o])?n+i:e)in t)return r;o++}return s}var I=1;function L(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var D="ontouchstart"in i,F=R(i,"PointerEvent")!==s,N=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B=25,z=1,U=2,V=4,G=8,W=1,q=2,H=4,X=8,Z=16,Y=q|H,K=X|Z,J=Y|K,Q=["x","y"],$=["clientX","clientY"];function tt(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&n.handler(e)},this.init()}function et(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&z&&r-i==0,a=e&(V|G)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=nt(e));i>1&&!n.firstMultiple?n.firstMultiple=nt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,l=e.center=rt(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=st(u,l),e.distance=at(u,l),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==z&&o.eventType!==V||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var c=it(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=h(c.x)>h(c.y)?c.x:c.y,e.scale=a?function(t,e){return at(e[0],e[1],$)/at(t[0],t[1],$)}(a.pointers,r):1,e.rotation=a?function(t,e){return st(e[1],e[0],$)+st(t[1],t[0],$)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=G&&(u>B||a.velocity===s)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,f=it(u,l,c);r=f.x,i=f.y,n=h(f.x)>h(f.y)?f.x:f.y,o=ot(l,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var f=t.element;C(e.srcEvent.target,f)&&(f=e.srcEvent.target);e.target=f}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function nt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:p(t.pointers[n].clientX),clientY:p(t.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:p(t[0].clientX),y:p(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:p(n/e),y:p(r/e)}}function it(t,e,n){return{x:e/t||0,y:n/t||0}}function ot(t,e){return t===e?W:h(t)>=h(e)?t<0?q:H:e<0?X:Z}function at(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function st(t,e,n){n||(n=Q);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(L(this.element),this.evWin,this.domHandler)}};var ut={mousedown:z,mousemove:U,mouseup:V},lt="mousedown",ct="mousemove mouseup";function ft(){this.evEl=lt,this.evWin=ct,this.pressed=!1,tt.apply(this,arguments)}x(ft,tt,{handler:function(t){var e=ut[t.type];e&z&&0===t.button&&(this.pressed=!0),e&U&&1!==t.which&&(e=V),this.pressed&&(e&V&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var pt={pointerdown:z,pointermove:U,pointerup:V,pointercancel:G,pointerout:G},ht={2:"touch",3:"pen",4:"mouse",5:"kinect"},dt="pointerdown",yt="pointermove pointerup pointercancel";function vt(){this.evEl=dt,this.evWin=yt,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(dt="MSPointerDown",yt="MSPointerMove MSPointerUp MSPointerCancel"),x(vt,tt,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=pt[r],o=ht[t.pointerType]||t.pointerType,a="touch"==o,s=A(e,t.pointerId,"pointerId");i&z&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(V|G)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var gt={touchstart:z,touchmove:U,touchend:V,touchcancel:G},mt="touchstart",bt="touchstart touchmove touchend touchcancel";function _t(){this.evTarget=mt,this.evWin=bt,this.started=!1,tt.apply(this,arguments)}x(_t,tt,{handler:function(t){var e=gt[t.type];if(e===z&&(this.started=!0),this.started){var n=function(t,e){var n=M(t.touches),r=M(t.changedTouches);e&(V|G)&&(n=j(n.concat(r),"identifier",!0));return[n,r]}.call(this,t,e);e&(V|G)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var xt={touchstart:z,touchmove:U,touchend:V,touchcancel:G},wt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=wt,this.targetIds={},tt.apply(this,arguments)}x(Et,tt,{handler:function(t){var e=xt[t.type],n=function(t,e){var n=M(t.touches),r=this.targetIds;if(e&(z|U)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=M(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return C(t.target,u)}),e===z)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;i=0;for(;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(V|G)&&delete r[a[i].identifier],i++;if(!s.length)return;return[j(o.concat(s),"identifier",!0),s]}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Ot=2500,St=25;function Pt(){tt.apply(this,arguments);var t=w(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ft(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},Ot)}}x(Pt,tt,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(t,e){t&z?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(V|G)&&Ct.call(this,e)}).call(this,e,n);else if(i&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=St&&a<=St)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Tt=R(c.style,"touchAction"),kt=Tt!==s,At="auto",Mt="manipulation",jt="none",Rt="pan-x",It="pan-y",Lt=function(){if(!kt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();function Dt(t,e){this.manager=t,this.set(e)}Dt.prototype={set:function(t){"compute"==t&&(t=this.compute()),kt&&this.manager.element.style&&Lt[t]&&(this.manager.element.style[Tt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(T(t,jt))return jt;var e=T(t,Rt),n=T(t,It);if(e&&n)return jt;if(e||n)return e?Rt:It;if(T(t,Mt))return Mt;return At}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=T(r,jt)&&!Lt[jt],o=T(r,It)&&!Lt[It],a=T(r,Rt)&&!Lt[Rt];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}if(!a||!o)return i||o&&n&Y||a&&n&K?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Ft=1,Nt=2,Bt=4,zt=8,Ut=zt,Vt=16;function Gt(t){this.options=u({},this.defaults,t||{}),this.id=I++,this.manager=null,this.options.enable=O(this.options.enable,!0),this.state=Ft,this.simultaneous={},this.requireFail=[]}function Wt(t){return t&Vt?"cancel":t&zt?"end":t&Bt?"move":t&Nt?"start":""}function qt(t){return t==Z?"down":t==X?"up":t==q?"left":t==H?"right":""}function Ht(t,e){var n=e.manager;return n?n.get(t):t}function Xt(){Gt.apply(this,arguments)}function Zt(){Xt.apply(this,arguments),this.pX=null,this.pY=null}function Yt(){Xt.apply(this,arguments)}function Kt(){Gt.apply(this,arguments),this._timer=null,this._input=null}function Jt(){Xt.apply(this,arguments)}function Qt(){Xt.apply(this,arguments)}function $t(){Gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function te(t,e){return(e=e||{}).recognizers=O(e.recognizers,te.defaults.preset),new ee(t,e)}Gt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(v(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ht(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return v(t,"dropRecognizeWith",this)?this:(t=Ht(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(v(t,"requireFailure",this))return this;var e=this.requireFail;return-1===A(e,t=Ht(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this))return this;t=Ht(t,this);var e=A(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<zt&&r(e.options.event+Wt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=zt&&r(e.options.event+Wt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Ft)))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ut|Vt|32)&&(this.state=Ft),this.state=this.process(e),this.state&(Nt|Bt|zt|Vt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(Xt,Gt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(Nt|Bt),i=this.attrTest(t);return r&&(n&G||!i)?e|Vt:r||i?n&V?e|zt:e&Nt?e|Bt:Nt:32}}),x(Zt,Xt,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var t=this.options.direction,e=[];return t&Y&&e.push(It),t&K&&e.push(Rt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Y?(i=0===o?W:o<0?q:H,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?W:a<0?X:Z,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Xt.prototype.attrTest.call(this,t)&&(this.state&Nt||!(this.state&Nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=qt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x(Yt,Xt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Nt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(Kt,Gt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[At]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(V|G)&&!i)this.reset();else if(t.eventType&z)this.reset(),this._timer=y(function(){this.state=Ut,this.tryEmit()},e.time,this);else if(t.eventType&V)return Ut;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ut&&(t&&t.eventType&V?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),x(Jt,Xt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Nt)}}),x(Qt,Xt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Y|K,pointers:1},getTouchAction:function(){return Zt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Y|K)?e=t.overallVelocity:n&Y?e=t.overallVelocityX:n&K&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&h(e)>this.options.velocity&&t.eventType&V},emit:function(t){var e=qt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x($t,Gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Mt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&z&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=V)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=y(function(){this.state=Ut,this.tryEmit()},e.interval,this),Nt):Ut}return 32},failTimeout:function(){return this._timer=y(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ut&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Jt,{enable:!1}],[Yt,{enable:!1},["rotate"]],[Qt,{direction:Y}],[Zt,{direction:Y},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ee(t,e){this.options=u({},te.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function(t){var e=t.options.inputClass;return new(e||(F?vt:N?Et:D?Pt:ft))(t,et)}(this),this.touchAction=new Dt(this,this.options.touchAction),ne(this,!0),g(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ne(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,function(i,o){n=R(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}ee.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Ut)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Nt|Bt|zt)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Gt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(v(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(v(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=A(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return g(k(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return g(k(t),function(t){e?n[t]&&n[t].splice(A(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ne(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(te,{INPUT_START:z,INPUT_MOVE:U,INPUT_END:V,INPUT_CANCEL:G,STATE_POSSIBLE:Ft,STATE_BEGAN:Nt,STATE_CHANGED:Bt,STATE_ENDED:zt,STATE_RECOGNIZED:Ut,STATE_CANCELLED:Vt,STATE_FAILED:32,DIRECTION_NONE:W,DIRECTION_LEFT:q,DIRECTION_RIGHT:H,DIRECTION_UP:X,DIRECTION_DOWN:Z,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:K,DIRECTION_ALL:J,Manager:ee,Input:tt,TouchAction:Dt,TouchInput:Et,MouseInput:ft,PointerEventInput:vt,TouchMouseInput:Pt,SingleTouchInput:_t,Recognizer:Gt,AttrRecognizer:Xt,Tap:$t,Pan:Zt,Swipe:Qt,Pinch:Yt,Rotate:Jt,Press:Kt,on:S,off:P,each:g,merge:_,extend:b,assign:u,inherit:x,bindFn:w,prefixed:R}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=te,(r=function(){return te}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(1)),i=c(n(0)),o=n(12),a=c(n(277)),s=n(164),u=c(n(278)),l=c(n(165));function c(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var v=o.Deck.getPropTypes(i.default),g=o.Deck.defaultProps,m=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?y(t):e}(this,h(e).call(this,t))).state={width:0,height:0,viewState:t.initialViewState},n.children=[],(0,l.default)(y(y(n))),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,r.default.PureComponent),function(t,e,n){e&&p(t.prototype,e),n&&p(t,n)}(e,[{key:"componentDidMount",value:function(){var t=this.props.Deck||o.Deck;this.deck=this.deck||new t(Object.assign({},this.props,{initialViewState:null,canvas:this.deckCanvas,viewState:this._getViewState(this.props),onViewStateChange:this._onViewStateChange,onResize:this._onResize}))}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,o=t.layerIds,a=void 0===o?null:o;return this.deck.pickObject({x:e,y:n,radius:i,layerIds:a})}},{key:"pickMultipleObjects",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,o=t.layerIds,a=void 0===o?null:o,s=t.depth,u=void 0===s?10:s;return this.deck.pickMultipleObjects({x:e,y:n,radius:i,layerIds:a,depth:u})}},{key:"pickObjects",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,o=t.height,a=void 0===o?1:o,s=t.layerIds,u=void 0===s?null:s;return this.deck.pickObjects({x:e,y:n,width:i,height:a,layerIds:u})}},{key:"queryObject",value:function(t){o.log.removed("queryObject","pickObject")()}},{key:"queryVisibleObjects",value:function(t){o.log.removed("queryVisibleObjects","pickObjects")()}},{key:"_onResize",value:function(t){this.setState(t),this.props.onResize(t)}},{key:"_onViewStateChange",value:function(t){var e=this.props.onViewStateChange(t)||t.viewState;this.state.viewState&&this.setState({viewState:Object.assign({},this.state.viewState,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t.viewId,e))})}},{key:"_updateFromProps",value:function(t){if(this.deck){(t.viewports||t.viewport)&&o.log.removed("DeckGL.viewport(s)","DeckGL.views")();var e=(0,a.default)(t),n=e.layers,r=e.views,i=e.children,s=Object.assign({},t,{onViewStateChange:this._onViewStateChange,onResize:this._onResize,layers:n,views:r}),u=this._getViewState(t);u&&(s.viewState=u),this.deck.setProps(s),this.children=i}}},{key:"_getViewState",value:function(t){if(!t.viewState&&"latitude"in t&&"longitude"in t&&"zoom"in t){("maxZoom"in t||"minZoom"in t)&&o.log.removed("maxZoom/minZoom","viewState");var e=t.latitude,n=t.longitude,r=t.zoom,i=t.pitch,a=void 0===i?0:i,s=t.bearing;return{latitude:e,longitude:n,zoom:r,pitch:a,bearing:void 0===s?0:s}}return t.viewState||this.state.viewState}},{key:"_positionChildrenUnderViews",value:function(t){var e=(this.deck||{}).viewManager;if(!e||!e.views.length)return[];var n=e.views[0].id;return t.map(function(t,i){t.props.viewportId&&o.log.removed("viewportId","<View>")(),t.props.viewId&&o.log.removed("viewId","<View>")();var a=n,l=t;(0,s.inheritsFrom)(t.type,o.View)&&(a=t.props.id||n,l=t.props.children);var c=e.getViewport(a),f=e.getViewState(a);if(!c)return null;var p=c.x,h=c.y,d=c.width,y=c.height;l=(0,u.default)(l,{x:p,y:h,width:d,height:y,viewport:c,viewState:f});var v={position:"absolute",left:p,top:h,width:d,height:y},g="view-child-".concat(a,"-").concat(i);return(0,r.createElement)("div",{key:g,id:g,style:v},l)})}},{key:"render",value:function(){var t=this;this._updateFromProps(this.props);var e=this._positionChildrenUnderViews(this.children),n=Object.assign({},{position:"absolute",left:0,top:0},this.props.style),i=(0,r.createElement)("canvas",{ref:function(e){return t.deckCanvas=e},key:"deck-canvas",id:this.props.id,style:n});return e.push(i),(0,r.createElement)("div",{id:"deckgl-wrapper"},e)}}]),e}();e.default=m,m.propTypes=v,m.defaultProps=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.children,n=t.layers,s=t.views,u=[],l=[],c={};r.default.Children.forEach(a(e),function(t){if(t){var e=t.type;if((0,i.inheritsFrom)(e,o.Layer)){var n=new e(t.props);l.push(n)}else u.push(t);if(e!==o.View&&(0,i.inheritsFrom)(e,o.View)&&t.props.id){var r=new e(t.props);c[r.id]=r}}}),Object.keys(c).length>0&&(Array.isArray(s)?s.forEach(function(t){c[t.id]=t}):s&&(c[s.id]=s),s=Object.values(c));return{layers:n=l.length>0?l.concat(function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(n)):n,children:u,views:s}};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(1)),i=n(164),o=n(12);function a(t){return t?"function"==typeof t?(0,r.createElement)(o.View,{},t):Array.isArray(t)?t.map(a):((0,i.inheritsFrom)(t.type,o.View),t):t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(!e)return e;if("function"==typeof e)return e(n);if(Array.isArray(e))return e.map(function(e){return t(e,n)});return(0,r.cloneElement)(e,n)};var r=n(1)},function(t,e,n){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),(n=i(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else e=i;else t=i}return r(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r;function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(r=1,(i=t)<(n=0))return n;if(i>r)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=function(t,e,n){this.column=t,this.row=e,this.zoom=n};i.prototype.clone=function(){return new i(this.column,this.row,this.zoom)},i.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},i.prototype.sub=function(t){return this.clone()._sub(t)},i.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},i.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var o=a;function a(t,e){this.x=t,this.y=e}function s(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!s(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!s(t[r],e[r]))return!1;return!0}return t===e}function u(t,e,r,i){var o=new n(t,e,r,i);return function(t){return o.solve(t)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var l=u(.25,.1,.25,1);function c(t,e,n){return Math.min(n,Math.max(e,t))}function f(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}var p=1;function h(){return p++}function d(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function v(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function g(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function m(t){return Array.isArray(t)?t.map(m):"object"==typeof t&&t?v(t,m):t}var b={};function _(t){b[t]||("undefined"!=typeof console&&console.warn(t),b[t]=!0)}function x(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function w(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=t[n],e+=((a=t[i]).x-o.x)*(o.y+a.y);return e}var E=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),O=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,S=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,P={now:E,frame:function(t){var e=O(t);return{cancel:function(){return S(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var C=self.document.createElement("img");C.onload=function(){P.supportsWebp=!0},C.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var T={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(T);var k=function(t){function e(e,n,r){t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function A(t){var e=new self.XMLHttpRequest;for(var n in e.open(t.method||"GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}var M=function(t,e){var n=A(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));(n.status>=200&&n.status<300||0===n.status)&&n.response?e(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new k(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}};function j(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function R(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var I=function(t,e){void 0===e&&(e={}),f(this,e),this.type=t},L=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",f({error:e},n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),D=function(){};D.prototype.on=function(t,e){return this._listeners=this._listeners||{},j(t,e,this._listeners),this},D.prototype.off=function(t,e){return R(t,e,this._listeners),R(t,e,this._oneTimeListeners),this},D.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},j(t,e,this._oneTimeListeners),this},D.prototype.fire=function(t){"string"==typeof t&&(t=new I(t,arguments[1]||{}));var e=t.type;if(this.listens(e)){t.target=this;for(var n=0,r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];n<r.length;n+=1)r[n].call(this,t);for(var i=0,o=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];i<o.length;i+=1){var a=o[i];R(e,a,this._oneTimeListeners),a.call(this,t)}var s=this._eventedParent;s&&(f(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(t))}else t instanceof L&&console.error(t.error);return this},D.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},D.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var F={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-z-order":{type:"enum",values:{"viewport-y":{},source:{}},default:"viewport-y",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},N=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)};function B(t){var e=t.key,n=t.value;return n?[new N(e,n,"constants have been deprecated as of v8")]:[]}function z(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function U(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function V(t){return Array.isArray(t)?t.map(V):U(t)}var G=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),W=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}};W.prototype.concat=function(t){return new W(this,t)},W.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},W.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var q={kind:"null"},H={kind:"number"},X={kind:"string"},Z={kind:"boolean"},Y={kind:"color"},K={kind:"object"},J={kind:"value"},Q={kind:"collator"},$={kind:"formatted"};function tt(t,e){return{kind:"array",itemType:t,N:e}}function et(t){if("array"===t.kind){var e=et(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var nt=[q,H,X,Z,Y,$,K,tt(J)];function rt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!rt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=nt;n<r.length;n+=1)if(!rt(r[n],e))return null}return"Expected "+et(t)+" but found "+et(e)+" instead."}var it=e(function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var c=i.substr(0,u),f=i.substr(u+1,l-(u+1)).split(","),p=1;switch(c){case"rgba":if(4!==f.length)return null;p=a(f.pop());case"rgb":return 3!==f.length?null:[o(f[0]),o(f[1]),o(f[2]),p];case"hsla":if(4!==f.length)return null;p=a(f.pop());case"hsl":if(3!==f.length)return null;var h=(parseFloat(f[0])%360+360)%360/360,d=a(f[1]),y=a(f[2]),v=y<=.5?y*(d+1):y+d-y*d,g=2*y-v;return[r(255*s(g,v,h+1/3)),r(255*s(g,v,h)),r(255*s(g,v,h-1/3)),p];default:return null}}return null}}catch(t){}}).parseCSSColor,ot=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};ot.parse=function(t){if(t){if(t instanceof ot)return t;if("string"==typeof t){var e=it(t);if(e)return new ot(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},ot.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(r)+","+i+")"},ot.prototype.toArray=function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]},ot.black=new ot(0,0,0,1),ot.white=new ot(1,1,1,1),ot.transparent=new ot(0,0,0,0),ot.red=new ot(1,0,0,1);var at=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};at.prototype.compare=function(t,e){return this.collator.compare(t,e)},at.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var st=function(t,e,n){this.text=t,this.scale=e,this.fontStack=n},ut=function(t){this.sections=t};function lt(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ct(t){if(null===t)return q;if("string"==typeof t)return X;if("boolean"==typeof t)return Z;if("number"==typeof t)return H;if(t instanceof ot)return Y;if(t instanceof at)return Q;if(t instanceof ut)return $;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=ct(i[r]);if(e){if(e===o)continue;e=J;break}e=o}return tt(e||J,n)}return K}function ft(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof ot||t instanceof ut?t.toString():JSON.stringify(t)}ut.fromString=function(t){return new ut([new st(t,null,null)])},ut.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},ut.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),t.push(i)}return t};var pt=function(t,e){this.type=t,this.value=e};pt.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ot)return!0;if(e instanceof at)return!0;if(e instanceof ut)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],r=ct(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new pt(r,n)},pt.prototype.evaluate=function(){return this.value},pt.prototype.eachChild=function(){},pt.prototype.possibleOutputs=function(){return[this.value]},pt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ot?["rgba"].concat(this.value.toArray()):this.value instanceof ut?this.value.serialize():this.value};var ht=function(t){this.name="ExpressionEvaluationError",this.message=t};ht.prototype.toJSON=function(){return this.message};var dt={string:X,number:H,boolean:Z,object:K},yt=function(t,e){this.type=t,this.args=e};yt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in dt)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=dt[s],r++}else o=J;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=tt(o,a)}else n=dt[i];for(var u=[];r<t.length;r++){var l=e.parse(t[r],r,J);if(!l)return null;u.push(l)}return new yt(n,u)},yt.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!rt(this.type,ct(n)))return n;if(e===this.args.length-1)throw new ht("Expected value to be of type "+et(this.type)+", but found "+et(ct(n))+" instead.")}return null},yt.prototype.eachChild=function(t){this.args.forEach(t)},yt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},yt.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var vt=function(t){this.type=$,this.sections=t};vt.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var n=[],r=1;r<t.length-1;r+=2){var i=e.parse(t[r],1,J);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var a=t[r+1];if("object"!=typeof a||Array.isArray(a))return e.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,H)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,tt(X))))return null;n.push({text:i,scale:s,font:u})}return new vt(n)},vt.prototype.evaluate=function(t){return new ut(this.sections.map(function(e){return new st(ft(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},vt.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.text),r.scale&&t(r.scale),r.font&&t(r.font)}},vt.prototype.possibleOutputs=function(){return[void 0]},vt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.text.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),t.push(i)}return t};var gt={"to-boolean":Z,"to-color":Y,"to-number":H,"to-string":X},mt=function(t,e){this.type=t,this.args=e};mt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=gt[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,J);if(!a)return null;i.push(a)}return new mt(r,i)},mt.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof ot)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":lt(e[0],e[1],e[2],e[3])))return new ot(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ht(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new ht("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ut.fromString(ft(this.args[0].evaluate(t))):ft(this.args[0].evaluate(t))},mt.prototype.eachChild=function(t){this.args.forEach(t)},mt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},mt.prototype.serialize=function(){if("formatted"===this.type.kind)return new vt([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var bt=["Unknown","Point","LineString","Polygon"],_t=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};_t.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},_t.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?bt[this.feature.type]:this.feature.type:null},_t.prototype.properties=function(){return this.feature&&this.feature.properties||{}},_t.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=ot.parse(t)),e};var xt=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};xt.prototype.evaluate=function(t){return this._evaluate(t,this.args)},xt.prototype.eachChild=function(t){this.args.forEach(t)},xt.prototype.possibleOutputs=function(){return[void 0]},xt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},xt.parse=function(t,e){var n=t[0],r=xt.definitions[n];if(!r)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),s=null,u=0,l=a;u<l.length;u+=1){var c=l[u],f=c[0],p=c[1];s=new Ct(e.registry,e.path,null,e.scope);for(var h=[],d=!1,y=1;y<t.length;y++){var v=t[y],g=Array.isArray(f)?f[y-1]:f.type,m=s.parse(v,1+h.length,g);if(!m){d=!0;break}h.push(m)}if(!d)if(Array.isArray(f)&&f.length!==h.length)s.error("Expected "+f.length+" arguments, but found "+h.length+" instead.");else{for(var b=0;b<h.length;b++){var _=Array.isArray(f)?f[b]:f.type,x=h[b];s.concat(b+1).checkSubtype(_,x.type)}if(0===s.errors.length)return new xt(n,i,p,h)}}if(1===a.length)e.errors.push.apply(e.errors,s.errors);else{for(var w=(a.length?a:o).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(et).join(", ")+")":"("+et(e.type)+"...)"}).join(" | "),E=[],O=1;O<t.length;O++){var S=e.parse(t[O],1+E.length);if(!S)return null;E.push(et(S.type))}e.error("Expected arguments of type "+w+", but found ("+E.join(", ")+") instead.")}return null},xt.register=function(t,e){for(var n in xt.definitions=e,e)t[n]=xt};var wt=function(t,e,n){this.type=Q,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function Et(t){if(t instanceof xt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!Et(t)&&(e=!1)}),e}function Ot(t){if(t instanceof xt&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!Ot(t)&&(e=!1)}),e}function St(t,e){if(t instanceof xt&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!St(t,e)&&(n=!1)}),n}wt.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Z);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Z);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,X))?null:new wt(r,i,o)},wt.prototype.evaluate=function(t){return new at(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},wt.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},wt.prototype.possibleOutputs=function(){return[void 0]},wt.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Pt=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Pt.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Pt(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Pt.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Pt.prototype.eachChild=function(){},Pt.prototype.possibleOutputs=function(){return[void 0]},Pt.prototype.serialize=function(){return["var",this.name]};var Ct=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new W),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};function Tt(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)],r=t[a+1],e===n||e>n&&e<r)return a;if(n<e)i=a+1;else{if(!(n>e))throw new ht("Input is not a number.");o=a-1}}return Math.max(a-1,0)}Ct.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Ct.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new yt(e,[t]):"coerce"===n?new mt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof pt)&&function t(e){if(e instanceof Pt)return t(e.boundExpression);if(e instanceof xt&&"error"===e.name)return!1;if(e instanceof wt)return!1;var n=e instanceof mt||e instanceof yt,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof pt}),!!r&&Et(e)&&St(e,["zoom","heatmap-density","line-progress","is-supported-script"])}(o)){var u=new _t;try{o=new pt(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},Ct.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Ct(this.registry,r,e||null,i,this.errors)},Ct.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new G(r,t))},Ct.prototype.checkSubtype=function(t,e){var n=rt(t,e);return n&&this.error(n),n};var kt=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};function At(t,e,n){return t*(1-n)+e*n}kt.parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,H)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],u=r[a+1],l=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var f=e.parse(u,c,o);if(!f)return null;o=o||f.type,i.push([s,f])}return new kt(o,n,i)},kt.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Tt(e,r)].evaluate(t)},kt.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},kt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},kt.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Mt=Object.freeze({number:At,color:function(t,e,n){return new ot(At(t.r,e.r,n),At(t.g,e.g,n),At(t.b,e.b,n),At(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return At(t,e[r],n)})}}),jt=.95047,Rt=1,It=1.08883,Lt=4/29,Dt=6/29,Ft=3*Dt*Dt,Nt=Dt*Dt*Dt,Bt=Math.PI/180,zt=180/Math.PI;function Ut(t){return t>Nt?Math.pow(t,1/3):t/Ft+Lt}function Vt(t){return t>Dt?t*t*t:Ft*(t-Lt)}function Gt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Wt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function qt(t){var e=Wt(t.r),n=Wt(t.g),r=Wt(t.b),i=Ut((.4124564*e+.3575761*n+.1804375*r)/jt),o=Ut((.2126729*e+.7151522*n+.072175*r)/Rt);return{l:116*o-16,a:500*(i-o),b:200*(o-Ut((.0193339*e+.119192*n+.9503041*r)/It)),alpha:t.a}}function Ht(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=Rt*Vt(e),n=jt*Vt(n),r=It*Vt(r),new ot(Gt(3.2404542*n-1.5371385*e-.4985314*r),Gt(-.969266*n+1.8760108*e+.041556*r),Gt(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}var Xt={forward:qt,reverse:Ht,interpolate:function(t,e,n){return{l:At(t.l,e.l,n),a:At(t.a,e.a,n),b:At(t.b,e.b,n),alpha:At(t.alpha,e.alpha,n)}}},Zt={forward:function(t){var e=qt(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*zt;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Bt,n=t.c;return Ht({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}(t.h,e.h,n),c:At(t.c,e.c,n),l:At(t.l,e.l,n),alpha:At(t.alpha,e.alpha,n)}}},Yt=Object.freeze({lab:Xt,hcl:Zt}),Kt=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function Jt(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}Kt.interpolationFactor=function(t,e,r,i){var o=0;if("exponential"===t.name)o=Jt(e,t.base,r,i);else if("linear"===t.name)o=Jt(e,1,r,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(Jt(e,1,r,i))}return o},Kt.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,H)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=Y:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var f=o[c],p=o[c+1],h=c+3,d=c+4;if("number"!=typeof f)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(u.length&&u[u.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var y=e.parse(p,d,l);if(!y)return null;l=l||y.type,u.push([f,y])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Kt(l,n,r,i,u):e.error("Type "+et(l)+" is not interpolatable.")},Kt.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=Tt(e,r),a=e[o],s=e[o+1],u=Kt.interpolationFactor(this.interpolation,r,a,s),l=n[o].evaluate(t),c=n[o+1].evaluate(t);return"interpolate"===this.operator?Mt[this.type.kind.toLowerCase()](l,c,u):"interpolate-hcl"===this.operator?Zt.reverse(Zt.interpolate(Zt.forward(l),Zt.forward(c),u)):Xt.reverse(Xt.interpolate(Xt.forward(l),Xt.forward(c),u))},Kt.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Kt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Kt.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var Qt=function(t,e){this.type=t,this.args=e};Qt.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],u=e.parse(s,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!u)return null;n=n||u.type,i.push(u)}var l=r&&i.some(function(t){return rt(r,t.type)});return new Qt(l?J:n,i)},Qt.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length&&null===(e=r[n].evaluate(t));n+=1);return e},Qt.prototype.eachChild=function(t){this.args.forEach(t)},Qt.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Qt.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var $t=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};$t.prototype.evaluate=function(t){return this.result.evaluate(t)},$t.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},$t.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new $t(n,a):null},$t.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},$t.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t};var te=function(t,e,n){this.type=t,this.index=e,this.input=n};te.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,H),r=e.parse(t[2],2,tt(e.expectedType||J));if(!n||!r)return null;var i=r.type;return new te(i.itemType,n,r)},te.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ht("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new ht("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new ht("Array index must be an integer, but found "+e+" instead.");return n[e]},te.prototype.eachChild=function(t){t(this.index),t(this.input)},te.prototype.possibleOutputs=function(){return[void 0]},te.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ee=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};ee.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,f=s;c<f.length;c+=1){var p=f[c];if("number"!=typeof p&&"string"!=typeof p)return l.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,ct(p)))return null}else n=ct(p);if(void 0!==i[String(p)])return l.error("Branch labels must be unique.");i[String(p)]=o.length}var h=e.parse(u,a,r);if(!h)return null;r=r||h.type,o.push(h)}var d=e.parse(t[1],1,J);if(!d)return null;var y=e.parse(t[t.length-1],t.length-1,r);return y?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new ee(n,r,d,i,o,y):null},ee.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ct(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},ee.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},ee.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},ee.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i],s=r[t.cases[a]];void 0===s?(r[t.cases[a]]=n.length,n.push([t.cases[a],[a]])):n[s][1].push(a)}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,c=n;l<c.length;l+=1){var f=c[l],p=f[0],h=f[1];1===h.length?e.push(u(h[0])):e.push(h.map(u)),e.push(t.outputs[p].serialize())}return e.push(this.otherwise.serialize()),e};var ne=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};function re(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ie(t,e,n,r){return 0===r.compare(e,n)}function oe(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=Z,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,J);if(!o)return null;if(!re(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+et(o.type)+"'.");var a=e.parse(t[2],2,J);if(!a)return null;if(!re(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+et(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+et(o.type)+"' and '"+et(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new yt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new yt(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Q)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=ct(o),u=ct(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new ht('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=ct(o),c=ct(a);if("string"!==l.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}ne.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,Z);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new ne(n,r,s):null},ne.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},ne.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t(i),t(o)}t(this.otherwise)},ne.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},ne.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ae=oe("==",function(t,e,n){return e===n},ie),se=oe("!=",function(t,e,n){return e!==n},function(t,e,n,r){return!ie(0,e,n,r)}),ue=oe("<",function(t,e,n){return e<n},function(t,e,n,r){return r.compare(e,n)<0}),le=oe(">",function(t,e,n){return e>n},function(t,e,n,r){return r.compare(e,n)>0}),ce=oe("<=",function(t,e,n){return e<=n},function(t,e,n,r){return r.compare(e,n)<=0}),fe=oe(">=",function(t,e,n){return e>=n},function(t,e,n,r){return r.compare(e,n)>=0}),pe=function(t){this.type=H,this.input=t};pe.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+et(n.type)+" instead."):new pe(n):null},pe.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ht("Expected value to be of type string or array, but found "+et(ct(e))+" instead.")},pe.prototype.eachChild=function(t){t(this.input)},pe.prototype.possibleOutputs=function(){return[void 0]},pe.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var he={"==":ae,"!=":se,">":le,"<":ue,">=":fe,"<=":ce,array:yt,at:te,boolean:yt,case:ne,coalesce:Qt,collator:wt,format:vt,interpolate:Kt,"interpolate-hcl":Kt,"interpolate-lab":Kt,length:pe,let:$t,literal:pt,match:ee,number:yt,object:yt,step:kt,string:yt,"to-boolean":mt,"to-color":mt,"to-number":mt,"to-string":mt,var:Pt};function de(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=lt(n,r,i,a);if(s)throw new ht(s);return new ot(n/255*a,r/255*a,i/255*a,a)}function ye(t,e){return t in e}function ve(t,e){var n=e[t];return void 0===n?null:n}function ge(t){return{type:t}}function me(t){return{result:"success",value:t}}function be(t){return{result:"error",value:t}}function _e(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function xe(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function we(t){return!!t.expression&&t.expression.interpolated}function Ee(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Oe(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Se(t){return t}function Pe(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Ce(t,e,n,r,i){return Pe(typeof n===i?r[n]:void 0,t.default,e.default)}function Te(t,e,n){if("number"!==Ee(n))return Pe(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=Me(t.stops,n);return t.stops[i][1]}function ke(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==Ee(n))return Pe(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=Me(t.stops,n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=Mt[e.type]||Se;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=Yt[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)}function Ae(t,e,n){return"color"===e.type?n=ot.parse(n):"formatted"===e.type?n=ut.fromString(n.toString()):Ee(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Pe(n,t.default,e.default)}function Me(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)][0],r=t[a+1][0],e===n||e>n&&e<r)return a;n<e?i=a+1:n>e&&(o=a-1)}return Math.max(a-1,0)}xt.register(he,{error:[{kind:"error"},[X],function(t,e){var n=e[0];throw new ht(n.evaluate(t))}],typeof:[X,[J],function(t,e){return et(ct(e[0].evaluate(t)))}],"to-rgba":[tt(H,4),[Y],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Y,[H,H,H],de],rgba:[Y,[H,H,H,H],de],has:{type:Z,overloads:[[[X],function(t,e){return ye(e[0].evaluate(t),t.properties())}],[[X,K],function(t,e){var n=e[0],r=e[1];return ye(n.evaluate(t),r.evaluate(t))}]]},get:{type:J,overloads:[[[X],function(t,e){return ve(e[0].evaluate(t),t.properties())}],[[X,K],function(t,e){var n=e[0],r=e[1];return ve(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[J,[X],function(t,e){return ve(e[0].evaluate(t),t.featureState||{})}],properties:[K,[],function(t){return t.properties()}],"geometry-type":[X,[],function(t){return t.geometryType()}],id:[J,[],function(t){return t.id()}],zoom:[H,[],function(t){return t.globals.zoom}],"heatmap-density":[H,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[H,[],function(t){return t.globals.lineProgress||0}],"+":[H,ge(H),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[H,ge(H),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:H,overloads:[[[H,H],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)-r.evaluate(t)}],[[H],function(t,e){return-e[0].evaluate(t)}]]},"/":[H,[H,H],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)/r.evaluate(t)}],"%":[H,[H,H],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)%r.evaluate(t)}],ln2:[H,[],function(){return Math.LN2}],pi:[H,[],function(){return Math.PI}],e:[H,[],function(){return Math.E}],"^":[H,[H,H],function(t,e){var n=e[0],r=e[1];return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[H,[H],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[H,[H],function(t,e){var n=e[0];return Math.log(n.evaluate(t))/Math.LN10}],ln:[H,[H],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[H,[H],function(t,e){var n=e[0];return Math.log(n.evaluate(t))/Math.LN2}],sin:[H,[H],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[H,[H],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[H,[H],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[H,[H],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[H,[H],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[H,[H],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[H,ge(H),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[H,ge(H),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[H,[H],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[H,[H],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[H,[H],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[H,[H],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[Z,[X,J],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[Z,[J],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Z,[X],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Z,[X,J],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Z,[J],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Z,[X,J],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[Z,[J],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Z,[X,J],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Z,[J],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Z,[X,J],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[Z,[J],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Z,[J],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Z,[],function(t){return null!==t.id()}],"filter-type-in":[Z,[tt(X)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Z,[tt(J)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Z,[X,tt(J)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Z,[X,tt(J)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Z,overloads:[[[Z,Z],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)&&r.evaluate(t)}],[ge(Z),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:Z,overloads:[[[Z,Z],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)||r.evaluate(t)}],[ge(Z),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[Z,[Z],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Z,[X],function(t,e){var n=e[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[X,[X],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[X,[X],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[X,ge(J),function(t,e){return e.map(function(e){return ft(e.evaluate(t))}).join("")}],"resolved-locale":[X,[Q],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var je=function(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new _t,this._defaultValue="color"===(n=e).type&&Oe(n.default)?new ot(0,0,0,0):"color"===n.type?ot.parse(n.default)||null:void 0===n.default?null:n.default,this._enumValues="enum"===e.type?e.values:null};function Re(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in he}function Ie(t,e){var n=new Ct(he,[],function(t){var e={color:Y,string:X,number:H,enum:X,boolean:Z,formatted:$};return"array"===t.type?tt(e[t.value]||J,t.length):e[t.type]}(e)),r=n.parse(t,void 0,void 0,void 0,"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?me(new je(r,e)):be(n.errors)}je.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},je.prototype.evaluate=function(t,e,n){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null;try{var r=this.expression.evaluate(this._evaluator);if(null===r||void 0===r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new ht("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Le=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Ot(e.expression)};Le.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},Le.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var De=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Ot(e.expression),n instanceof Kt&&(this._interpolationType=n.interpolation)};function Fe(t,e){if("error"===(t=Ie(t,e)).result)return t;var n=t.value.expression,r=Et(n);if(!r&&!_e(e))return be([new G("","data expressions not supported")]);var i=St(n,["zoom"]);if(!i&&!xe(e))return be([new G("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof $t)n=t(e.result);else if(e instanceof Qt)for(var r=0,i=e.args;r<i.length;r+=1){var o=i[r];if(n=t(o))break}else(e instanceof kt||e instanceof Kt)&&e.input instanceof xt&&"zoom"===e.input.name&&(n=e);return n instanceof G?n:(e.eachChild(function(e){var r=t(e);r instanceof G?n=r:!n&&r?n=new G("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new G("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof G?be([o]):o instanceof Kt&&!we(e)?be([new G("",'"interpolate" expressions cannot be used with this property')]):me(o?new De(r?"camera":"composite",t.value,o):new Le(r?"constant":"source",t.value)):be([new G("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}De.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},De.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},De.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Kt.interpolationFactor(this._interpolationType,t,e,n):0};var Ne=function(t,e){this._parameters=t,this._specification=e,z(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||void 0!==e.property,l=s||!u,c=e.type||(we(n)?"exponential":"interval");if(a&&((e=z({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],ot.parse(t[1])]})),e.default?e.default=ot.parse(e.default):e.default=ot.parse(n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Yt[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=ke;else if("interval"===c)r=Te;else if("categorical"===c){r=Ce,i=Object.create(null);for(var f=0,p=e.stops;f<p.length;f+=1){var h=p[f];i[h[0]]=h[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=Ae}if(s){for(var d={},y=[],v=0;v<e.stops.length;v++){var g=e.stops[v],m=g[0].zoom;void 0===d[m]&&(d[m]={zoom:m,type:e.type,property:e.property,default:e.default,stops:[]},y.push(m)),d[m].stops.push([g[0].value,g[1]])}for(var b=[],_=0,x=y;_<x.length;_+=1){var w=x[_];b.push([d[w].zoom,t(d[w],n)])}return{kind:"composite",interpolationFactor:Kt.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:b.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return ke({stops:b,base:e.base},n,i).evaluate(i,r)}}}return l?{kind:"camera",interpolationFactor:"exponential"===c?Kt.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var a=t.zoom;return r(e,n,a,i,o)}}:{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Pe(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};function Be(t,e){if(Oe(t))return new Ne(t,e);if(Re(t)){var n=Fe(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=ot.parse(t)),{kind:"constant",evaluate:function(){return r}}}function ze(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Ee(n);if("object"!==u)return[new N(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],f=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=fn;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new N(e,n[l],'unknown property "'+l+'"'));continue}p=fn}s=s.concat(p({key:(e?e+".":e)+l,value:n[l],valueSpec:f,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var h in r)i[h]||r[h].required&&void 0===r[h].default&&void 0===n[h]&&s.push(new N(e,n,'missing required property "'+h+'"'));return s}function Ue(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||fn;if("array"!==Ee(e))return[new N(o,e,"array expected, "+Ee(e)+" found")];if(n.length&&e.length!==n.length)return[new N(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new N(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};i.$version<7&&(s.function=n.function),"object"===Ee(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function Ve(t){var e=t.key,n=t.value,r=t.valueSpec,i=Ee(n);return"number"!==i?[new N(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new N(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new N(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function Ge(t){var e,n,r,i=t.valueSpec,o=U(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===Ee(t.value.stops)&&"array"===Ee(t.value.stops[0])&&"object"===Ee(t.value.stops[0][0]),c=ze({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new N(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(Ue({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:f})),"array"===Ee(n)&&0===n.length&&e.push(new N(t.key,n,"array must have at least one stop")),e},default:function(t){return fn({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new N(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new N(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!we(t.valueSpec)&&c.push(new N(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!_e(t.valueSpec)?c.push(new N(t.key,t.value,"property functions not supported")):s&&!xe(t.valueSpec)&&c.push(new N(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new N(t.key,t.value,'"property" property is required')),c;function f(t){var e=[],o=t.value,s=t.key;if("array"!==Ee(o))return[new N(s,o,"array expected, "+Ee(o)+" found")];if(2!==o.length)return[new N(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==Ee(o[0]))return[new N(s,o,"object expected, "+Ee(o[0])+" found")];if(void 0===o[0].zoom)return[new N(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new N(s,o,"object stop key must have value")];if(r&&r>U(o[0].zoom))return[new N(s,o[0].zoom,"stop zoom values must appear in ascending order")];U(o[0].zoom)!==r&&(r=U(o[0].zoom),n=void 0,a={}),e=e.concat(ze({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ve,value:p}}))}else e=e.concat(p({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return e.concat(fn({key:s+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function p(t,r){var s=Ee(t.value),u=U(t.value),l=null!==t.value?t.value:r;if(e){if(s!==e)return[new N(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new N(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return _e(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new N(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new N(t.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new N(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new N(t.key,l,"integer expected, found "+u)]}}function We(t){var e=("property"===t.expressionContext?Fe:Ie)(V(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new N(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new N(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')]:"property"!==t.expressionContext||"layout"!==t.propertyType||Ot(e.value._styleExpression.expression)?[]:[new N(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')]}function qe(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(U(n))&&i.push(new N(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(U(n))&&i.push(new N(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function He(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!He(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Ne.deserialize=function(t){return new Ne(t._parameters,t._specification)},Ne.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Xe={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ze(t){if(null===t||void 0===t)return function(){return!0};He(t)||(t=Ke(t));var e=Ie(t,Xe);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function Ye(t,e){return t<e?-1:t>e?1:0}function Ke(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?Je(t[1],t[2],"=="):"!="===n?tn(Je(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Je(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Ke))):"all"===n?["all"].concat(t.slice(1).map(Ke)):"none"===n?["all"].concat(t.slice(1).map(Ke).map(tn)):"in"===n?Qe(t[1],t.slice(2)):"!in"===n?tn(Qe(t[1],t.slice(2))):"has"===n?$e(t[1]):"!has"!==n||tn($e(t[1]))}function Je(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Qe(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Ye)]]:["filter-in-small",t,["literal",e]]}}function $e(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function tn(t){return["!",t]}function en(t){return He(V(t.value))?We(z({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==Ee(n))return[new N(r,n,"array expected, "+Ee(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new N(r,n,"filter array must have at least 1 element")];switch(a=a.concat(qe({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),U(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===U(n[1])&&a.push(new N(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new N(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=Ee(n[1]))&&a.push(new N(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=Ee(n[s]),"$type"===U(n[1])?a=a.concat(qe({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new N(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Ee(n[1]),2!==n.length?a.push(new N(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new N(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function nn(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return fn({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new N(n,o,'unknown property "'+a+'"')];if("string"===Ee(o)&&_e(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new N(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var f=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new N(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Oe(V(o))&&"identity"===U(o.type)&&f.push(new N(n,o,'"text-font" does not support identity functions'))),f.concat(fn({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function rn(t){return nn(t,"paint")}function on(t){return nn(t,"layout")}function an(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new N(r,n,'either "type" or "ref" is required'));var a,s=U(n.type),u=U(n.ref);if(n.id)for(var l=U(n.id),c=0;c<t.arrayIndex;c++){var f=i.layers[c];U(f.id)===l&&e.push(new N(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new N(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){U(t.id)===u&&(a=t)}),a?a.ref?e.push(new N(r,n.ref,"ref cannot reference another ref layer")):s=U(a.type):e.push(new N(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],h=p&&U(p.type);p?"vector"===h&&"raster"===s?e.push(new N(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===h&&"raster"!==s?e.push(new N(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==h||n["source-layer"]?"raster-dem"===h&&"hillshade"!==s?e.push(new N(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===h&&p.lineMetrics||e.push(new N(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new N(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new N(r,n.source,'source "'+n.source+'" not found'))}else e.push(new N(r,n,'missing required property "source"'));return e=e.concat(ze({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return fn({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:en,layout:function(t){return ze({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return on(z({layerType:s},t))}}})},paint:function(t){return ze({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return rn(z({layerType:s},t))}}})}}}))}function sn(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new N(n,e,'"type" is required')];var o=U(e.type),a=[];switch(o){case"vector":case"raster":case"raster-dem":if(a=a.concat(ze({key:n,value:e,valueSpec:r["source_"+o.replace("-","_")],style:t.style,styleSpec:r})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new N(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":return ze({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r});case"video":return ze({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return ze({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return a.push(new N(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),a;default:return qe({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function un(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=Ee(e);if(void 0===e)return o;if("object"!==a)return o.concat([new N("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=u&&r[u[1]]&&r[u[1]].transition?o.concat(fn({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(fn({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new N(s,e[s],'unknown property "'+s+'"')])}return o}function ln(t){var e=t.value,n=t.key,r=Ee(e);return"string"!==r?[new N(n,e,"string expected, "+r+" found")]:[]}var cn={"*":function(){return[]},array:Ue,boolean:function(t){var e=t.value,n=t.key,r=Ee(e);return"boolean"!==r?[new N(n,e,"boolean expected, "+r+" found")]:[]},number:Ve,color:function(t){var e=t.key,n=t.value,r=Ee(n);return"string"!==r?[new N(e,n,"color expected, "+r+" found")]:null===it(n)?[new N(e,n,'color expected, "'+n+'" found')]:[]},constants:B,enum:qe,filter:en,function:Ge,layer:an,object:ze,source:sn,light:un,string:ln,formatted:function(t){return 0===ln(t).length?[]:We(t)}};function fn(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Oe(U(e))?Ge(t):n.expression&&Re(V(e))?We(t):n.type&&cn[n.type]?cn[n.type](t):ze(z({},t,{valueSpec:n.type?r[n.type]:n}))}function pn(t){var e=t.value,n=t.key,r=ln(t);return r.length?r:(-1===e.indexOf("{fontstack}")&&r.push(new N(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new N(n,e,'"glyphs" url must include a "{range}" token')),r)}function hn(t,e){e=e||F;var n=[];return n=n.concat(fn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:pn,"*":function(){return[]}}})),t.constants&&(n=n.concat(B({key:"constants",value:t.constants,style:t,styleSpec:e}))),dn(n)}function dn(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function yn(t){return function(){return dn(t.apply(this,arguments))}}hn.source=yn(sn),hn.light=yn(un),hn.layer=yn(an),hn.filter=yn(en),hn.paintProperty=yn(rn),hn.layoutProperty=yn(on);var vn=hn,gn=hn.light,mn=hn.paintProperty,bn=hn.layoutProperty;function _n(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1){var o=i[r];t.fire(new L(new Error(o.message))),n=!0}return n}var xn=En,wn=3;function En(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[wn+o],s=i[wn+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[wn+r.length],l=i[wn+r.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var f=n/e*t;this.min=-f,this.max=t+f}En.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},En.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},En.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},En.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{}),a},En.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var f=s[c];if(void 0===a[f]){var p=4*f;t<=l[p+2]&&e<=l[p+3]&&n>=l[p+0]&&r>=l[p+1]?(a[f]=!0,o.push(u[f])):a[f]=!1}}},En.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),f=s;f<=l;f++)for(var p=u;p<=c;p++){var h=this.d*p+f;if(i.call(this,t,e,n,r,h,o,a))return}},En.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},En.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=wn+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[wn+a]=o,i.set(s,o),o+=s.length}return i[wn+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[wn+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var On=self.ImageData,Sn={};function Pn(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Sn[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var Cn in Pn("Object",Object),xn.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},xn.deserialize=function(t){return new xn(t.buffer)},Pn("Grid",xn),Pn("Color",ot),Pn("Error",Error),Pn("StylePropertyFunction",Ne),Pn("StyleExpression",je,{omit:["_evaluator"]}),Pn("ZoomDependentExpression",De),Pn("ZoomConstantExpression",Le),Pn("CompoundExpression",xt,{omit:["_evaluate"]}),he)he[Cn]._classRegistryKey||Pn("Expression_"+Cn,he[Cn]);function Tn(t,e){if(null===t||void 0===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof On)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1){var a=o[i];r.push(Tn(a,e))}return r}if("object"==typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(Sn[u].omit.indexOf(c)>=0)){var f=t[c];l[c]=Sn[u].shallow.indexOf(c)>=0?f:Tn(f,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof t)}function kn(t){if(null===t||void 0===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof On)return t;if(Array.isArray(t))return t.map(kn);if("object"==typeof t){var e=t.$name||"Object",n=Sn[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];r[a]=Sn[e].shallow.indexOf(a)>=0?s:kn(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var An=function(){this.first=!0};An.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Mn={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function jn(t){for(var e=0,n=t;e<n.length;e+=1)if(In(n[e].charCodeAt(0)))return!0;return!1}function Rn(t){return!(Mn.Arabic(t)||Mn["Arabic Supplement"](t)||Mn["Arabic Extended-A"](t)||Mn["Arabic Presentation Forms-A"](t)||Mn["Arabic Presentation Forms-B"](t))}function In(t){return!(746!==t&&747!==t&&(t<4352||!(Mn["Bopomofo Extended"](t)||Mn.Bopomofo(t)||Mn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Mn["CJK Compatibility Ideographs"](t)||Mn["CJK Compatibility"](t)||Mn["CJK Radicals Supplement"](t)||Mn["CJK Strokes"](t)||!(!Mn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Mn["CJK Unified Ideographs Extension A"](t)||Mn["CJK Unified Ideographs"](t)||Mn["Enclosed CJK Letters and Months"](t)||Mn["Hangul Compatibility Jamo"](t)||Mn["Hangul Jamo Extended-A"](t)||Mn["Hangul Jamo Extended-B"](t)||Mn["Hangul Jamo"](t)||Mn["Hangul Syllables"](t)||Mn.Hiragana(t)||Mn["Ideographic Description Characters"](t)||Mn.Kanbun(t)||Mn["Kangxi Radicals"](t)||Mn["Katakana Phonetic Extensions"](t)||Mn.Katakana(t)&&12540!==t||!(!Mn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Mn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Mn["Unified Canadian Aboriginal Syllabics"](t)||Mn["Unified Canadian Aboriginal Syllabics Extended"](t)||Mn["Vertical Forms"](t)||Mn["Yijing Hexagram Symbols"](t)||Mn["Yi Syllables"](t)||Mn["Yi Radicals"](t))))}function Ln(t){return!(In(t)||function(t){return!!(Mn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Mn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Mn["Letterlike Symbols"](t)||Mn["Number Forms"](t)||Mn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Mn["Control Pictures"](t)&&9251!==t||Mn["Optical Character Recognition"](t)||Mn["Enclosed Alphanumerics"](t)||Mn["Geometric Shapes"](t)||Mn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Mn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Mn["CJK Symbols and Punctuation"](t)||Mn.Katakana(t)||Mn["Private Use Area"](t)||Mn["CJK Compatibility Forms"](t)||Mn["Small Form Variants"](t)||Mn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Dn(t,e){return!(!e&&(t>=1424&&t<=2303||Mn["Arabic Presentation Forms-A"](t)||Mn["Arabic Presentation Forms-B"](t))||t>=2304&&t<=3583||t>=3840&&t<=4255||Mn.Khmer(t))}var Fn,Nn=!1,Bn=null,zn=!1,Un=new D,Vn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return zn||null!=Vn.applyArabicShaping}},Gn=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new An,this.transition={})};Gn.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!Dn(r[n].charCodeAt(0),e))return!1;return!0}(t,Vn.isLoaded())},Gn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Gn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var Wn=function(t,e){this.property=t,this.value=e,this.expression=Be(void 0===e?t.specification.default:e,t.specification)};Wn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Wn.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var qn=function(t){this.property=t,this.value=new Wn(t,void 0)};qn.prototype.transitioned=function(t,e){return new Xn(this.property,this.value,e,f({},t.transition,this.transition),t.now)},qn.prototype.untransitioned=function(){return new Xn(this.property,this.value,null,{},0)};var Hn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Hn.prototype.getValue=function(t){return m(this._values[t].value.value)},Hn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new qn(this._values[t].property)),this._values[t].value=new Wn(this._values[t].property,null===e?void 0:m(e))},Hn.prototype.getTransition=function(t){return m(this._values[t].transition)},Hn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new qn(this._values[t].property)),this._values[t].transition=m(e)||void 0},Hn.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},Hn.prototype.transitioned=function(t,e){for(var n=new Zn(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},Hn.prototype.untransitioned=function(){for(var t=new Zn(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var Xn=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Xn.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(i))}return n};var Zn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Zn.prototype.possiblyEvaluate=function(t){for(var e=new Jn(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},Zn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var n=e[t];if(this._values[n].prior)return!0}return!1};var Yn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Yn.prototype.getValue=function(t){return m(this._values[t].value)},Yn.prototype.setValue=function(t,e){this._values[t]=new Wn(this._values[t].property,null===e?void 0:m(e))},Yn.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},Yn.prototype.possiblyEvaluate=function(t){for(var e=new Jn(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var Kn=function(t,e,n){this.property=t,this.value=e,this.parameters=n};Kn.prototype.isConstant=function(){return"constant"===this.value.kind},Kn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Kn.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var Jn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Jn.prototype.get=function(t){return this._values[t]};var Qn=function(t){this.specification=t};Qn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Qn.prototype.interpolate=function(t,e,n){var r=Mt[this.specification.type];return r?r(t,e,n):t};var $n=function(t){this.specification=t};$n.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Kn(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Kn(this,t.expression,e)},$n.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Kn(this,{kind:"constant",value:void 0},t.parameters);var r=Mt[this.specification.type];return r?new Kn(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},$n.prototype.evaluate=function(t,e,n,r){return"constant"===t.kind?t.value:t.evaluate(e,n,r)};var tr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new Kn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e),r=this._calculate(n,n,n,e);return new Kn(this,{kind:"constant",value:r},e)}if("camera"===t.expression.kind){var i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Kn(this,{kind:"constant",value:i},e)}return new Kn(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r){if("source"===t.kind){var i=t.evaluate(e,n,r);return this._calculate(i,i,i,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}($n),er=function(t){this.specification=t};er.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new Gn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Gn(Math.floor(e.zoom),e)),t.expression.evaluate(new Gn(Math.floor(e.zoom+1),e)),e)}},er.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},er.prototype.interpolate=function(t){return t};var nr=function(t){this.specification=t};nr.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},nr.prototype.interpolate=function(){return!1};var rr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],r=this.defaultPropertyValues[e]=new Wn(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new qn(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Pn("DataDrivenProperty",$n),Pn("DataConstantProperty",Qn),Pn("CrossFadedDataDrivenProperty",tr),Pn("CrossFadedProperty",er),Pn("ColorRampProperty",nr);var ir=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Yn(n.layout)),n.paint)){for(var r in this._transitionablePaint=new Hn(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){if(null!==e&&void 0!==e){var r="layers."+this.id+".layout."+t;if(this._validate(bn,r,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(null!==e&&void 0!==e){var r="layers."+this.id+".paint."+t;if(this._validate(mn,r,t,e,n))return!1}if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],o="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&e,a=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var s=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),s||a||o},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),g(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&_n(this,t.call(vn,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:F,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Kn&&_e(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(D),or={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ar=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},sr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ur(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i,o=(i=t.type,or[i].BYTES_PER_ELEMENT),a=n=lr(n,Math.max(e,o)),s=t.components||1;return r=Math.max(r,o),n+=o*s,{name:t.name,type:t.type,components:s,offset:a}}),size:lr(n,Math.max(r,e)),alignment:e}}function lr(t,e){return Math.ceil(t/e)*e}sr.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},sr.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},sr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},sr.prototype.clear=function(){this.length=0},sr.prototype.resize=function(t){this.reserve(t),this.length=t},sr.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},sr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var cr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=t,this.int16[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(sr);cr.prototype.bytesPerElement=4,Pn("StructArrayLayout2i4",cr);var fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=n,this.int16[o+3]=r,i},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(sr);fr.prototype.bytesPerElement=8,Pn("StructArrayLayout4i8",fr);var pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(sr);pr.prototype.bytesPerElement=12,Pn("StructArrayLayout2i4i12",pr);var hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=6*u,c=12*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,u},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=6*t,c=12*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=u,t},e}(sr);hr.prototype.bytesPerElement=12,Pn("StructArrayLayout4i4ub12",hr);var dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.uint16[l+0]=t,this.uint16[l+1]=e,this.uint16[l+2]=n,this.uint16[l+3]=r,this.uint16[l+4]=i,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=8*t;return this.uint16[l+0]=e,this.uint16[l+1]=n,this.uint16[l+2]=r,this.uint16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(sr);dr.prototype.bytesPerElement=16,Pn("StructArrayLayout8ui16",dr);var yr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint16[l+4]=i,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(sr);yr.prototype.bytesPerElement=16,Pn("StructArrayLayout4i4ui16",yr);var vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=t,this.float32[i+1]=e,this.float32[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(sr);vr.prototype.bytesPerElement=12,Pn("StructArrayLayout3f12",vr);var gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.uint32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.uint32[n+0]=e,t},e}(sr);gr.prototype.bytesPerElement=4,Pn("StructArrayLayout1ul4",gr);var mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c){var f=this.length;this.resize(f+1);var p=12*f,h=6*f;return this.int16[p+0]=t,this.int16[p+1]=e,this.int16[p+2]=n,this.int16[p+3]=r,this.int16[p+4]=i,this.int16[p+5]=o,this.uint32[h+3]=a,this.uint16[p+8]=s,this.uint16[p+9]=u,this.int16[p+10]=l,this.int16[p+11]=c,f},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,f){var p=12*t,h=6*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=o,this.int16[p+5]=a,this.uint32[h+3]=s,this.uint16[p+8]=u,this.uint16[p+9]=l,this.int16[p+10]=c,this.int16[p+11]=f,t},e}(sr);mr.prototype.bytesPerElement=24,Pn("StructArrayLayout6i1ul2ui2i24",mr);var br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(sr);br.prototype.bytesPerElement=12,Pn("StructArrayLayout2i2i2i12",br);var _r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=t,this.uint8[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=4*t;return this.uint8[r+0]=e,this.uint8[r+1]=n,t},e}(sr);_r.prototype.bytesPerElement=4,Pn("StructArrayLayout2ub4",_r);var xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h){var d=this.length;this.resize(d+1);var y=20*d,v=10*d,g=40*d;return this.int16[y+0]=t,this.int16[y+1]=e,this.uint16[y+2]=n,this.uint16[y+3]=r,this.uint32[v+2]=i,this.uint32[v+3]=o,this.uint32[v+4]=a,this.uint16[y+10]=s,this.uint16[y+11]=u,this.uint16[y+12]=l,this.float32[v+7]=c,this.float32[v+8]=f,this.uint8[g+36]=p,this.uint8[g+37]=h,d},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d){var y=20*t,v=10*t,g=40*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[y+10]=u,this.uint16[y+11]=l,this.uint16[y+12]=c,this.float32[v+7]=f,this.float32[v+8]=p,this.uint8[g+36]=h,this.uint8[g+37]=d,t},e}(sr);xr.prototype.bytesPerElement=40,Pn("StructArrayLayout2i2ui3ul3ui2f2ub40",xr);var wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h){var d=this.length;this.resize(d+1);var y=16*d,v=8*d;return this.int16[y+0]=t,this.int16[y+1]=e,this.int16[y+2]=n,this.int16[y+3]=r,this.uint16[y+4]=i,this.uint16[y+5]=o,this.uint16[y+6]=a,this.uint16[y+7]=s,this.uint16[y+8]=u,this.uint16[y+9]=l,this.uint16[y+10]=c,this.uint16[y+11]=f,this.uint16[y+12]=p,this.uint32[v+7]=h,d},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d){var y=16*t,v=8*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.int16[y+2]=r,this.int16[y+3]=i,this.uint16[y+4]=o,this.uint16[y+5]=a,this.uint16[y+6]=s,this.uint16[y+7]=u,this.uint16[y+8]=l,this.uint16[y+9]=c,this.uint16[y+10]=f,this.uint16[y+11]=p,this.uint16[y+12]=h,this.uint32[v+7]=d,t},e}(sr);wr.prototype.bytesPerElement=32,Pn("StructArrayLayout4i9ui1ul32",wr);var Er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.float32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.float32[n+0]=e,t},e}(sr);Er.prototype.bytesPerElement=4,Pn("StructArrayLayout1f4",Er);var Or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=t,this.int16[i+1]=e,this.int16[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(sr);Or.prototype.bytesPerElement=6,Pn("StructArrayLayout3i6",Or);var Sr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=2*r,o=4*r;return this.uint32[i+0]=t,this.uint16[o+2]=e,this.uint16[o+3]=n,r},e.prototype.emplace=function(t,e,n,r){var i=2*t,o=4*t;return this.uint32[i+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,t},e}(sr);Sr.prototype.bytesPerElement=8,Pn("StructArrayLayout1ul2ui8",Sr);var Pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=t,this.uint16[i+1]=e,this.uint16[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(sr);Pr.prototype.bytesPerElement=6,Pn("StructArrayLayout3ui6",Pr);var Cr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=t,this.uint16[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(sr);Cr.prototype.bytesPerElement=4,Pn("StructArrayLayout2ui4",Cr);var Tr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.uint16[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.uint16[n+0]=e,t},e}(sr);Tr.prototype.bytesPerElement=2,Pn("StructArrayLayout1ui2",Tr);var kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=t,this.float32[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(sr);kr.prototype.bytesPerElement=8,Pn("StructArrayLayout2f8",kr);var Ar=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=n,this.float32[o+3]=r,i},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(sr);Ar.prototype.bytesPerElement=16,Pn("StructArrayLayout4f16",Ar);var Mr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new o(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(ar);Mr.prototype.size=24;var jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Mr(this,t)},e}(mr);Pn("CollisionBoxArray",jr);var Rr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(ar);Rr.prototype.size=40;var Ir=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Rr(this,t)},e}(xr);Pn("PlacedSymbolArray",Ir);var Lr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(t){this._structArray.uint16[this._pos2+4]=t},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+5]=t},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+6]=t},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+7]=t},Object.defineProperties(e.prototype,n),e}(ar);Lr.prototype.size=32;var Dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Lr(this,t)},e}(wr);Pn("SymbolInstanceArray",Dr);var Fr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(ar);Fr.prototype.size=4;var Nr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new Fr(this,t)},e}(Er);Pn("GlyphOffsetArray",Nr);var Br=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(ar);Br.prototype.size=6;var zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Br(this,t)},e}(Or);Pn("SymbolLineVertexArray",zr);var Ur=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(ar);Ur.prototype.size=8;var Vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Ur(this,t)},e}(Sr);Pn("FeatureIndexArray",Vr);var Gr=ur([{name:"a_pos",components:2,type:"Int16"}],4),Wr=Gr.members,qr=(Gr.size,Gr.alignment,function(t){void 0===t&&(t=[]),this.segments=t});qr.prototype.prepareSegment=function(t,e,n){var r=this.segments[this.segments.length-1];return t>qr.MAX_VERTEX_ARRAY_LENGTH&&_("Max vertices per segment is "+qr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>qr.MAX_VERTEX_ARRAY_LENGTH)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(r)),r},qr.prototype.get=function(){return this.segments},qr.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},qr.simpleSegment=function(t,e,n,r){return new qr([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{}}])},qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pn("SegmentVector",qr);var Hr=function(t,e){return 256*(t=c(Math.floor(t),0,255))+c(Math.floor(e),0,255)},Xr=function(){this.ids=[],this.positions=[],this.indexed=!1};function Zr(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Xr.prototype.add=function(t,e,n,r){this.ids.push(t),this.positions.push(e,n,r)},Xr.prototype.getPositions=function(t){for(var e=0,n=this.ids.length-1;e<n;){var r=e+n>>1;this.ids[r]>=t?n=r:e=r+1}for(var i=[];this.ids[e]===t;){var o=this.positions[3*e],a=this.positions[3*e+1],s=this.positions[3*e+2];i.push({index:o,start:a,end:s}),e++}return i},Xr.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){if(!(r>=i)){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Zr(e,a,s),Zr(n,3*a,3*s),Zr(n,3*a+1,3*s+1),Zr(n,3*a+2,3*s+2)}t(e,n,r,s),t(e,n,s+1,i)}}(n,r,0,n.length-1),e.push(n.buffer,r.buffer),{ids:n,positions:r}},Xr.deserialize=function(t){var e=new Xr;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},Pn("FeaturePositionMap",Xr);var Yr=function(t,e){this.gl=t.gl,this.location=e},Kr=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Yr),Jr=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Yr),Qr=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Yr),$r=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Yr),ti=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Yr),ei=function(t){function e(e,n){t.call(this,e,n),this.current=ot.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Yr),ni=new Float32Array(16),ri=function(t){function e(e,n){t.call(this,e,n),this.current=ni}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Yr);function ii(t){return[Hr(255*t.r,255*t.g),Hr(255*t.b,255*t.a)]}var oi=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0};oi.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},oi.prototype.setConstantPatternPositions=function(){},oi.prototype.populatePaintArray=function(){},oi.prototype.updatePaintArray=function(){},oi.prototype.upload=function(){},oi.prototype.destroy=function(){},oi.prototype.setUniforms=function(t,e,n,r){e.set(r.constantOr(this.value))},oi.prototype.getBinding=function(t,e){return"color"===this.type?new ei(t,e):new Jr(t,e)},oi.serialize=function(t){var e=t.value,n=t.names,r=t.type;return{value:Tn(e),names:n,type:r}},oi.deserialize=function(t){var e=t.value,n=t.names,r=t.type;return new oi(kn(e),n,r)};var ai=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};ai.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ai.prototype.populatePaintArray=function(){},ai.prototype.updatePaintArray=function(){},ai.prototype.upload=function(){},ai.prototype.destroy=function(){},ai.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},ai.prototype.setUniforms=function(t,e,n,r,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&e.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&e.set(o.patternFrom)},ai.prototype.getBinding=function(t,e){return new ti(t,e)};var si=function(t,e,n,r){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};si.prototype.defines=function(){return[]},si.prototype.setConstantPatternPositions=function(){},si.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new Gn(0),e,{});if("color"===this.type)for(var o=ii(i),a=r;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<t;s++)n.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},si.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=ii(o),s=t;s<e;s++)i.emplace(s,a[0],a[1]);else{for(var u=t;u<e;u++)i.emplace(u,o);this.maxValue=Math.max(this.maxValue,o)}},si.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},si.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},si.prototype.setUniforms=function(t,e){e.set(0)},si.prototype.getBinding=function(t,e){return new Jr(t,e)};var ui=function(t,e,n,r,i,o){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new a};ui.prototype.defines=function(){return[]},ui.prototype.setConstantPatternPositions=function(){},ui.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new Gn(this.zoom),e,{}),o=this.expression.evaluate(new Gn(this.zoom+1),e,{});if("color"===this.type)for(var a=ii(i),s=ii(o),u=r;u<t;u++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var l=r;l<t;l++)n.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},ui.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=ii(o),u=ii(a),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var c=t;c<e;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},ui.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ui.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ui.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},ui.prototype.setUniforms=function(t,e,n){e.set(this.interpolationFactor(n.zoom))},ui.prototype.getBinding=function(t,e){return new Jr(t,e)};var li=function(t,e,n,r,i,o,a){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};li.prototype.defines=function(){return[]},li.prototype.setConstantPatternPositions=function(){},li.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=r.length;if(r.reserve(t),i.reserve(t),n&&e.patterns&&e.patterns[o]){var s=e.patterns[o],u=s.min,l=s.mid,c=s.max,f=n[u],p=n[l],h=n[c];if(!f||!p||!h)return;for(var d=a;d<t;d++)r.emplaceBack(p.tl[0],p.tl[1],p.br[0],p.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1]),i.emplaceBack(p.tl[0],p.tl[1],p.br[0],p.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1])}},li.prototype.updatePaintArray=function(t,e,n,r,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&n.patterns&&n.patterns[s]){var u=n.patterns[s],l=u.min,c=u.mid,f=u.max,p=i[l],h=i[c],d=i[f];if(!p||!h||!d)return;for(var y=t;y<e;y++)o.emplace(y,h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),a.emplace(y,h.tl[0],h.tl[1],h.br[0],h.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},li.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},li.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},li.prototype.setUniforms=function(t,e){e.set(0)},li.prototype.getBinding=function(t,e){return new Jr(t,e)};var ci=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Xr,this._bufferOffset=0};ci.createDynamic=function(t,e,n){var r=new ci,i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof Kn&&_e(a.property.specification)){var s=pi(o,t.type),u=a.property.specification.type,l=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)r.binders[o]=new ai(a.value.value,s,u),i.push("/u_"+o);else{var c=hi(o,u,"source");r.binders[o]=new li(a.value,s,u,l,e,c,t.id),i.push("/a_"+o)}else if("constant"===a.value.kind)r.binders[o]=new oi(a.value.value,s,u),i.push("/u_"+o);else if("source"===a.value.kind){var f=hi(o,u,"source");r.binders[o]=new si(a.value,s,u,f),i.push("/a_"+o)}else{var p=hi(o,u,"composite");r.binders[o]=new ui(a.value,s,u,l,e,p),i.push("/z_"+o)}}}return r.cacheKey=i.sort().join(""),r},ci.prototype.populatePaintArrays=function(t,e,n,r){for(var i in this.binders)this.binders[i].populatePaintArray(t,e,r);void 0!==e.id&&this._featureMap.add(+e.id,n,this._bufferOffset,t),this._bufferOffset=t},ci.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders)this.binders[n].setConstantPatternPositions(t,e)},ci.prototype.updatePaintArrays=function(t,e,n,r){var i=!1;for(var o in t)for(var a=0,s=this._featureMap.getPositions(+o);a<s.length;a+=1){var u=s[a],l=e.feature(u.index);for(var c in this.binders){var f=this.binders[c];if(!(f instanceof oi||f instanceof ai)&&!0===f.expression.isStateDependent){var p=n.paint.get(c);f.expression=p.value,f.updatePaintArray(u.start,u.end,l,t[o],r),i=!0}}}return i},ci.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},ci.prototype.getPaintVertexBuffers=function(){return this._buffers},ci.prototype.getUniforms=function(t,e){var n={};for(var r in this.binders)for(var i=this.binders[r],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];n[s]=i.getBinding(t,e[s])}return n},ci.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)for(var o=this.binders[i],a=0,s=o.uniformNames;a<s.length;a+=1){var u=s[a];o.setUniforms(t,e[u],r,n.get(i),u)}},ci.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof li){var i=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&e.push(i)}else(r instanceof si||r instanceof ui)&&r.paintVertexBuffer&&e.push(r.paintVertexBuffer)}this._buffers=e},ci.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof si||i instanceof ui)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},ci.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var fi=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=ci.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1};function pi(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function hi(t,e,n){var r={color:{source:kr,composite:Ar},number:{source:Er,composite:kr}},i=function(t){return{"line-pattern":{source:dr,composite:dr},"fill-pattern":{source:dr,composite:dr},"fill-extrusion-pattern":{source:dr,composite:dr}}[t]}(t);return i&&i[n]||r[e][n]}fi.prototype.populatePaintArrays=function(t,e,n,r){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,n,r);this.needsUpload=!0},fi.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,e,a,r)||this.needsUpload}},fi.prototype.get=function(t){return this.programConfigurations[t]},fi.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},fi.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Pn("ConstantBinder",oi),Pn("CrossFadedConstantBinder",ai),Pn("SourceExpressionBinder",si),Pn("CrossFadedCompositeBinder",li),Pn("CompositeExpressionBinder",ui),Pn("ProgramConfiguration",ci,{omit:["_buffers"]}),Pn("ProgramConfigurationSet",fi);var di=8192,yi={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function vi(t){for(var e=di/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<yi.min||a.x>yi.max||a.y<yi.min||a.y>yi.max)&&_("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function gi(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var mi=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new cr,this.indexArray=new Pr,this.segments=new qr,this.programConfigurations=new fi(Wr,t.layers,t.zoom)};function bi(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(Ti(i,e))return!0;if(Si(e,i,n))return!0}return!1}function _i(t,e){if(1===t.length&&1===t[0].length)return Ci(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(Ci(t,r[i]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(Ci(e,a[s]))return!0;for(var u=0;u<e.length;u++)if(Ei(a,e[u]))return!0}return!1}function xi(t,e,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++){var a=t[o];if(a.length>=3)for(var s=0;s<i.length;s++)if(Ti(a,i[s]))return!0;if(wi(a,i,n))return!0}return!1}function wi(t,e,n){if(t.length>1){if(Ei(t,e))return!0;for(var r=0;r<e.length;r++)if(Si(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(Si(t[i],e,n))return!0;return!1}function Ei(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(Oi(r,i,e[o],e[o+1]))return!0;return!1}function Oi(t,e,n,r){return x(t,n,r)!==x(e,n,r)&&x(t,e,n)!==x(t,e,r)}function Si(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Pi(t,e[i-1],e[i])<r)return!0;return!1}function Pi(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):i>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function Ci(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function Ti(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ki(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].maxValue}function Ai(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Mi(t,e,n,r,i){if(!e[0]&&!e[1])return t;var a=o.convert(e);"viewport"===n&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++){for(var l=t[u],c=[],f=0;f<l.length;f++)c.push(l[f].sub(a._mult(i)));s.push(c)}return s}mi.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Gn(this.zoom),o)){var u=vi(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},mi.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},mi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},mi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mi.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Wr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},mi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mi.prototype.addFeature=function(t,e,n){for(var r=0,i=e;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var s=a[o],u=s.x,l=s.y;if(!(u<0||u>=di||l<0||l>=di)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=c.vertexLength;gi(this.layoutVertexArray,u,l,-1,-1),gi(this.layoutVertexArray,u,l,1,-1),gi(this.layoutVertexArray,u,l,1,1),gi(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(f,f+1,f+2),this.indexArray.emplaceBack(f,f+3,f+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{})},Pn("CircleBucket",mi,{omit:["layers"]});var ji={paint:new rr({"circle-radius":new $n(F.paint_circle["circle-radius"]),"circle-color":new $n(F.paint_circle["circle-color"]),"circle-blur":new $n(F.paint_circle["circle-blur"]),"circle-opacity":new $n(F.paint_circle["circle-opacity"]),"circle-translate":new Qn(F.paint_circle["circle-translate"]),"circle-translate-anchor":new Qn(F.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qn(F.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qn(F.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new $n(F.paint_circle["circle-stroke-width"]),"circle-stroke-color":new $n(F.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new $n(F.paint_circle["circle-stroke-opacity"])})},Ri="undefined"!=typeof Float32Array?Float32Array:Array;function Ii(){var t=new Ri(9);return Ri!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Li(){var t=new Ri(3);return Ri!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Di(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function Fi(t,e,n){var r=new Ri(3);return r[0]=t,r[1]=e,r[2]=n,r}Math.PI;var Ni,Bi=Di,zi=(Ni=Li(),function(t,e,n,r,i,o){var a,s=void 0;for(e||(e=3),n||(n=0),a=r?Math.min(r*e+n,t.length):t.length,s=n;s<a;s+=e)Ni[0]=t[s],Ni[1]=t[s+1],Ni[2]=t[s+2],i(Ni,Ni,o),t[s]=Ni[0],t[s+1]=Ni[1],t[s+2]=Ni[2];return t});function Ui(){var t=new Ri(4);return Ri!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Vi(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}function Gi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}var Wi=function(){var t=Ui();return function(e,n,r,i,o,a){var s,u=void 0;for(n||(n=4),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function qi(){var t=new Ri(4);return Ri!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}Li(),Fi(1,0,0),Fi(0,1,0),qi(),qi(),Ii(),function(){var t;t=new Ri(2),Ri!=Float32Array&&(t[0]=0,t[1]=0)}();var Hi=function(t){function e(e){t.call(this,e,ji)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new mi(t)},e.prototype.queryRadius=function(t){var e=t;return ki("circle-radius",this,e)+ki("circle-stroke-width",this,e)+Ai(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=Mi(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),f=c?u:function(t,e,n){return u.map(function(t){return t.map(function(t){return Xi(t,e,n)})})}(0,s,o),p=c?l*a:l,h=0,d=r;h<d.length;h+=1)for(var y=0,v=d[h];y<v.length;y+=1){var g=v[y],m=c?g:Xi(g,s,o),b=p,_=Gi([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=_[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=o.cameraToCenterDistance/_[3]),bi(f,m,b))return!0}return!1},e}(ir);function Xi(t,e,n){var r=Gi([],[t.x,t.y,0,1],e);return new o((r[0]/r[3]+1)*n.width*.5,(r[1]/r[3]+1)*n.height*.5)}var Zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(mi);function Yi(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function Ki(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=Yi({},{width:r,height:i},n);Ji(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function Ji(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,f=0;f<i.width*o;f++)s[c+f]=a[l+f];return e}Pn("HeatmapBucket",Zi,{omit:["layers"]});var Qi=function(t,e){Yi(this,t,1,e)};Qi.prototype.resize=function(t){Ki(this,t,1)},Qi.prototype.clone=function(){return new Qi({width:this.width,height:this.height},new Uint8Array(this.data))},Qi.copy=function(t,e,n,r,i){Ji(t,e,n,r,i,1)};var $i=function(t,e){Yi(this,t,4,e)};$i.prototype.resize=function(t){Ki(this,t,4)},$i.prototype.clone=function(){return new $i({width:this.width,height:this.height},new Uint8Array(this.data))},$i.copy=function(t,e,n,r,i){Ji(t,e,n,r,i,4)},Pn("AlphaImage",Qi),Pn("RGBAImage",$i);var to={paint:new rr({"heatmap-radius":new $n(F.paint_heatmap["heatmap-radius"]),"heatmap-weight":new $n(F.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qn(F.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nr(F.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qn(F.paint_heatmap["heatmap-opacity"])})};function eo(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new $i({width:256,height:1},n)}var no=function(t){function e(e){t.call(this,e,to),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Zi(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=eo(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(ir),ro={paint:new rr({"hillshade-illumination-direction":new Qn(F.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qn(F.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qn(F.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qn(F.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qn(F.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qn(F.paint_hillshade["hillshade-accent-color"])})},io=function(t){function e(e){t.call(this,e,ro)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(ir),oo=ur([{name:"a_pos",components:2,type:"Int16"}],4),ao=oo.members,so=(oo.size,oo.alignment,lo),uo=lo;function lo(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,f=c?e[0]*n:t.length,p=co(t,0,f,n,!0),h=[];if(!p)return h;if(c&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=co(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(xo(a));for(s.sort(mo),i=0;i<s.length;i++)bo(s[i],n),n=fo(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)s=t[d],u=t[d+1],s<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return po(p,h,n,r,i,l),h}function co(t,e,n,r,i){var o,a;if(i===jo(t,e,n,r)>0)for(o=e;o<n;o+=r)a=ko(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=ko(o,t[o],t[o+1],a);return a&&So(a,a.next)&&(Ao(a),a=a.next),a}function fo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!So(r,r.next)&&0!==Oo(r.prev,r,r.next))r=r.next;else{if(Ao(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function po(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=_o(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?yo(t,r,i,o):ho(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Ao(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?po(t=vo(t,e,n),e,n,r,i,o,2):2===a&&go(t,e,n,r,i,o):po(fo(t),e,n,r,i,o,1);break}}}function ho(t){var e=t.prev,n=t,r=t.next;if(Oo(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(wo(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Oo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function yo(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Oo(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=_o(s,u,e,n,r),p=_o(l,c,e,n,r),h=t.prevZ,d=t.nextZ;h&&h.z>=f&&d&&d.z<=p;){if(h!==t.prev&&h!==t.next&&wo(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Oo(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&wo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Oo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&wo(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Oo(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&wo(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Oo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function vo(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!So(i,o)&&Po(i,r,r.next,o)&&Co(i,o)&&Co(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Ao(r),Ao(r.next),r=t=o),r=r.next}while(r!==t);return r}function go(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Eo(a,s)){var u=To(a,s);return a=fo(a,a.next),u=fo(u,u.next),po(a,e,n,r,i,o),void po(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function mo(t,e){return t.x-e.x}function bo(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,f=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&wo(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&Co(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=To(e,t);fo(n,n.next)}}function _o(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function xo(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function wo(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Eo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Po(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Co(t,e)&&Co(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Oo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function So(t,e){return t.x===e.x&&t.y===e.y}function Po(t,e,n,r){return!!(So(t,e)&&So(n,r)||So(t,r)&&So(n,e))||Oo(t,e,n)>0!=Oo(t,e,r)>0&&Oo(n,r,t)>0!=Oo(n,r,e)>0}function Co(t,e){return Oo(t.prev,t,t.next)<0?Oo(t,e,t.next)>=0&&Oo(t,t.prev,e)>=0:Oo(t,e,t.prev)<0||Oo(t,t.next,e)<0}function To(t,e){var n=new Mo(t.i,t.x,t.y),r=new Mo(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ko(t,e,n,r){var i=new Mo(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ao(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Mo(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jo(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}lo.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(jo(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(jo(t,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,h=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[p]-t[d])*(t[h+1]-t[p+1])-(t[p]-t[h])*(t[d+1]-t[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},lo.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},so.default=uo;var Ro=e(function(t,e){t.exports=function(){function t(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function e(t,e){return t<e?-1:t>e?1:0}return function(n,r,i,o,a){!function e(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);e(n,r,Math.max(i,Math.floor(r-u*c/s+f)),Math.min(o,Math.floor(r+(s-u)*c/s+f)),a)}var p=n[r],h=i,d=o;for(t(n,i,r),a(n[o],p)>0&&t(n,i,o);h<d;){for(t(n,h,d),h++,d--;a(n[h],p)<0;)h++;for(;a(n[d],p)>0;)d--}0===a(n[i],p)?t(n,i,d):t(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(n,r,i||0,o||n.length-1,a||e)}}()});function Io(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=w(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(Ro(o[u],e,1,o[u].length-1,Lo),o[u]=o[u].slice(0,e));return o}function Lo(t,e){return e.area-t.area}function Do(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function Fo(t,e,n,r,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{}),f=l.evaluate({zoom:r},n,{}),p=l.evaluate({zoom:r+1},n,{});o[c]=!0,o[f]=!0,o[p]=!0,n.patterns[u.id]={min:c,mid:f,max:p}}}return n}var No=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new cr,this.indexArray=new Pr,this.indexArray2=new Cr,this.programConfigurations=new fi(ao,t.layers,t.zoom),this.segments=new qr,this.segments2=new qr};No.prototype.populate=function(t,e){this.features=[],this.hasPattern=Do("fill",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Gn(this.zoom),o)){var u=vi(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(Fo("fill",this.layers,l,this.zoom,e)):this.addFeature(l,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index)}}},No.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},No.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,e)}},No.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},No.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},No.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ao),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},No.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},No.prototype.addFeature=function(t,e,n,r){for(var i=0,o=Io(e,500);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),f=c.vertexLength,p=[],h=[],d=0,y=a;d<y.length;d+=1){var v=y[d];if(0!==v.length){v!==a[0]&&h.push(p.length/2);var g=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),m=g.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(m+v.length-1,m),p.push(v[0].x),p.push(v[0].y);for(var b=1;b<v.length;b++)this.layoutVertexArray.emplaceBack(v[b].x,v[b].y),this.indexArray2.emplaceBack(m+b-1,m+b),p.push(v[b].x),p.push(v[b].y);g.vertexLength+=v.length,g.primitiveLength+=v.length}}for(var _=so(p,h),x=0;x<_.length;x+=3)this.indexArray.emplaceBack(f+_[x],f+_[x+1],f+_[x+2]);c.vertexLength+=s,c.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r)},Pn("FillBucket",No,{omit:["layers","features"]});var Bo={paint:new rr({"fill-antialias":new Qn(F.paint_fill["fill-antialias"]),"fill-opacity":new $n(F.paint_fill["fill-opacity"]),"fill-color":new $n(F.paint_fill["fill-color"]),"fill-outline-color":new $n(F.paint_fill["fill-outline-color"]),"fill-translate":new Qn(F.paint_fill["fill-translate"]),"fill-translate-anchor":new Qn(F.paint_fill["fill-translate-anchor"]),"fill-pattern":new tr(F.paint_fill["fill-pattern"])})},zo=function(t){function e(e){t.call(this,e,Bo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new No(t)},e.prototype.queryRadius=function(){return Ai(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return _i(Mi(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e}(ir),Uo=ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Vo=Uo.members,Go=(Uo.size,Uo.alignment,Math.pow(2,13));function Wo(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Go)+a,i*Go*2,o*Go*2,Math.round(s))}var qo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new pr,this.indexArray=new Pr,this.programConfigurations=new fi(Vo,t.layers,t.zoom),this.segments=new qr};function Ho(t,e){return t.x===e.x&&(t.x<0||t.x>di)||t.y===e.y&&(t.y<0||t.y>di)}function Xo(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>di})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>di})}qo.prototype.populate=function(t,e){this.features=[],this.hasPattern=Do("fill-extrusion",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Gn(this.zoom),o)){var u=vi(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(Fo("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index)}}},qo.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,e)}},qo.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},qo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Vo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},qo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qo.prototype.addFeature=function(t,e,n,r){for(var i=0,o=Io(e,500);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=0,p=a;f<p.length;f+=1){var h=p[f];if(0!==h.length&&!Xo(h))for(var d=0,y=0;y<h.length;y++){var v=h[y];if(y>=1){var g=h[y-1];if(!Ho(v,g)){c.vertexLength+4>qr.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var m=v.sub(g)._perp()._unit(),b=g.dist(v);d+b>32768&&(d=0),Wo(this.layoutVertexArray,v.x,v.y,m.x,m.y,0,0,d),Wo(this.layoutVertexArray,v.x,v.y,m.x,m.y,0,1,d),d+=b,Wo(this.layoutVertexArray,g.x,g.y,m.x,m.y,0,0,d),Wo(this.layoutVertexArray,g.x,g.y,m.x,m.y,0,1,d);var _=c.vertexLength;this.indexArray.emplaceBack(_,_+2,_+1),this.indexArray.emplaceBack(_+1,_+2,_+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>qr.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var x=[],w=[],E=c.vertexLength,O=0,S=a;O<S.length;O+=1){var P=S[O];if(0!==P.length){P!==a[0]&&w.push(x.length/2);for(var C=0;C<P.length;C++){var T=P[C];Wo(this.layoutVertexArray,T.x,T.y,0,0,1,1,0),x.push(T.x),x.push(T.y)}}}for(var k=so(x,w),A=0;A<k.length;A+=3)this.indexArray.emplaceBack(E+k[A],E+k[A+2],E+k[A+1]);c.primitiveLength+=k.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r)},Pn("FillExtrusionBucket",qo,{omit:["layers","features"]});var Zo={paint:new rr({"fill-extrusion-opacity":new Qn(F["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new $n(F["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qn(F["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qn(F["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tr(F["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new $n(F["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new $n(F["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qn(F["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Yo=function(t){function e(e){t.call(this,e,Zo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new qo(t)},e.prototype.queryRadius=function(){return Ai(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return _i(Mi(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),r)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(ir),Ko=ur([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Jo=Ko.members,Qo=(Ko.size,Ko.alignment,$o);function $o(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(ta,this,e)}function ta(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function ea(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}$o.types=["Unknown","Point","LineString","Polygon"],$o.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,a=0,s=0,u=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new o(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},$o.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},$o.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=$o.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+s)/o;t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<u.length;r++)f[r]=u[r][0];c(u=f);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=ea(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var p={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p};var na=ra;function ra(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ia,this,e),this.length=this._features.length}function ia(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function oa(t,e,n){if(3===t){var r=new na(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}ra.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Qo(this._pbf,e,this.extent,this._keys,this._values)};var aa={VectorTile:function(t,e){this.layers=t.readFields(oa,{},e)},VectorTileFeature:Qo,VectorTileLayer:na},sa=aa.VectorTileFeature.types,ua=63,la=Math.cos(Math.PI/180*37.5),ca=.5,fa=Math.pow(2,14)/ca;function pa(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(ua*n.x)+128,Math.round(ua*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*ca&63)<<2,a*ca>>6)}var ha=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new hr,this.indexArray=new Pr,this.programConfigurations=new fi(Jo,t.layers,t.zoom),this.segments=new qr};function da(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(fa-1)}ha.prototype.populate=function(t,e){this.features=[],this.hasPattern=Do("line",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Gn(this.zoom),o)){var u=vi(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(Fo("line",this.layers,l,this.zoom,e)):this.addFeature(l,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index)}}},ha.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ha.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,e)}},ha.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ha.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ha.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Jo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ha.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ha.prototype.addFeature=function(t,e,n,r){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(t,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,c=e;l<c.length;l+=1){var f=c[l];this.addLine(f,t,o,a,s,u,n,r)}},ha.prototype.addLine=function(t,e,n,r,i,o,a,s){var u=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(u={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var l="Polygon"===sa[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var f=0;f<c-1&&t[f].equals(t[f+1]);)f++;if(!(c<(l?3:2))){u&&(u.tileTotal=function(t,e,n){for(var r,i,o=0,a=f;a<n-1;a++)r=t[a],i=t[a+1],o+=r.dist(i);return o}(t,0,c)),"bevel"===n&&(i=1.05);var p=di/(512*this.overscaling)*15,h=t[f],d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var y,v,g,m=r,b=l?"butt":r,_=!0,x=void 0,w=void 0,E=void 0,O=void 0;this.e1=this.e2=this.e3=-1,l&&(y=t[c-2],O=h.sub(y)._unit()._perp());for(var S=f;S<c;S++)if(!(w=l&&S===c-1?t[f+1]:t[S+1])||!t[S].equals(w)){O&&(E=O),y&&(x=y),y=t[S],O=w?w.sub(y)._unit()._perp():E;var P=(E=E||O).add(O);0===P.x&&0===P.y||P._unit();var C=P.x*O.x+P.y*O.y,T=0!==C?1/C:1/0,k=C<la&&x&&w;if(k&&S>f){var A=y.dist(x);if(A>2*p){var M=y.sub(y.sub(x)._mult(p/A)._round());this.distance+=M.dist(x),this.addCurrentVertex(M,this.distance,E.mult(1),0,0,!1,d,u),x=M}}var j=x&&w,R=j?n:w?m:b;if(j&&"round"===R&&(T<o?R="miter":T<=2&&(R="fakeround")),"miter"===R&&T>i&&(R="bevel"),"bevel"===R&&(T>2&&(R="flipbevel"),T<i&&(R="miter")),x&&(this.distance+=y.dist(x)),"miter"===R)P._mult(T),this.addCurrentVertex(y,this.distance,P,0,0,!1,d,u);else if("flipbevel"===R){if(T>100)P=O.clone().mult(-1);else{var I=E.x*O.y-E.y*O.x>0?-1:1,L=T*E.add(O).mag()/E.sub(O).mag();P._perp()._mult(L*I)}this.addCurrentVertex(y,this.distance,P,0,0,!1,d,u),this.addCurrentVertex(y,this.distance,P.mult(-1),0,0,!1,d,u)}else if("bevel"===R||"fakeround"===R){var D=E.x*O.y-E.y*O.x>0,F=-Math.sqrt(T*T-1);if(D?(g=0,v=F):(v=0,g=F),_||this.addCurrentVertex(y,this.distance,E,v,g,!1,d,u),"fakeround"===R){for(var N=Math.floor(8*(.5-(C-.5))),B=void 0,z=0;z<N;z++)B=O.mult((z+1)/(N+1))._add(E)._unit(),this.addPieSliceVertex(y,this.distance,B,D,d,u);this.addPieSliceVertex(y,this.distance,P,D,d,u);for(var U=N-1;U>=0;U--)B=E.mult((U+1)/(N+1))._add(O)._unit(),this.addPieSliceVertex(y,this.distance,B,D,d,u)}w&&this.addCurrentVertex(y,this.distance,O,-v,-g,!1,d,u)}else"butt"===R?(_||this.addCurrentVertex(y,this.distance,E,0,0,!1,d,u),w&&this.addCurrentVertex(y,this.distance,O,0,0,!1,d,u)):"square"===R?(_||(this.addCurrentVertex(y,this.distance,E,1,1,!1,d,u),this.e1=this.e2=-1),w&&this.addCurrentVertex(y,this.distance,O,-1,-1,!1,d,u)):"round"===R&&(_||(this.addCurrentVertex(y,this.distance,E,0,0,!1,d,u),this.addCurrentVertex(y,this.distance,E,1,1,!0,d,u),this.e1=this.e2=-1),w&&(this.addCurrentVertex(y,this.distance,O,-1,-1,!0,d,u),this.addCurrentVertex(y,this.distance,O,0,0,!1,d,u)));if(k&&S<c-1){var V=y.dist(w);if(V>2*p){var G=y.add(w.sub(y)._mult(p/V)._round());this.distance+=G.dist(y),this.addCurrentVertex(G,this.distance,O.mult(1),0,0,!1,d,u),y=G}}_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,s)}},ha.prototype.addCurrentVertex=function(t,e,n,r,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;s&&(e=da(e,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),pa(l,t,u,o,!1,r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),pa(l,t,u,o,!0,-i,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>fa/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,i,o,a))},ha.prototype.addPieSliceVertex=function(t,e,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=da(e,o)),pa(a,t,n,!1,r,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},Pn("LineBucket",ha,{omit:["layers","features"]});var ya=new rr({"line-cap":new Qn(F.layout_line["line-cap"]),"line-join":new $n(F.layout_line["line-join"]),"line-miter-limit":new Qn(F.layout_line["line-miter-limit"]),"line-round-limit":new Qn(F.layout_line["line-round-limit"])}),va={paint:new rr({"line-opacity":new $n(F.paint_line["line-opacity"]),"line-color":new $n(F.paint_line["line-color"]),"line-translate":new Qn(F.paint_line["line-translate"]),"line-translate-anchor":new Qn(F.paint_line["line-translate-anchor"]),"line-width":new $n(F.paint_line["line-width"]),"line-gap-width":new $n(F.paint_line["line-gap-width"]),"line-offset":new $n(F.paint_line["line-offset"]),"line-blur":new $n(F.paint_line["line-blur"]),"line-dasharray":new er(F.paint_line["line-dasharray"]),"line-pattern":new tr(F.paint_line["line-pattern"]),"line-gradient":new nr(F.paint_line["line-gradient"])}),layout:ya},ga=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new Gn(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=f({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}($n))(va.paint.properties["line-width"].specification);ga.useIntegerZoom=!0;var ma=function(t){function e(e){t.call(this,e,va)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=eo(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=ga.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new ha(t)},e.prototype.queryRadius=function(t){var e=t,n=ba(ki("line-width",this,e),ki("line-gap-width",this,e)),r=ki("line-offset",this,e);return n/2+Math.abs(r)+Ai(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,a,s){var u=Mi(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*ba(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){for(var n=[],r=new o(0,0),i=0;i<t.length;i++){for(var a=t[i],s=[],u=0;u<a.length;u++){var l=a[u-1],c=a[u],f=a[u+1],p=0===u?r:c.sub(l)._unit()._perp(),h=u===a.length-1?r:f.sub(c)._unit()._perp(),d=p._add(h)._unit(),y=d.x*h.x+d.y*h.y;d._mult(1/y),s.push(d._mult(e)._add(c))}n.push(s)}return n}(r,c*s)),xi(u,r,l)},e}(ir);function ba(t,e){return e>0?e+2*t:t}var _a=ur([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),xa=ur([{name:"a_projected_pos",components:3,type:"Float32"}],4),wa=(ur([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ur([{name:"a_placed",components:2,type:"Uint8"}],4)),Ea=(ur([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Oa=ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Sa(t,e,n){return t.sections.forEach(function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Vn.applyArabicShaping&&(t=Vn.applyArabicShaping(t)),t}(t.text,e,n)}),t}ur([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),ur([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),ur([{type:"Float32",name:"offsetX"}]),ur([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Pa={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Ca=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(o);function Ta(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new Gn(t+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new Gn(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new Gn(a.min)),max:n.evaluate(new Gn(a.max))},propertyValue:e.value}}Pn("Anchor",Ca);var ka=aa.VectorTileFeature.types,Aa=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ma(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function ja(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}var Ra=function(t){this.layoutVertexArray=new yr,this.indexArray=new Pr,this.programConfigurations=t,this.segments=new qr,this.dynamicLayoutVertexArray=new vr,this.opacityVertexArray=new gr,this.placedSymbolArray=new Ir};Ra.prototype.upload=function(t,e,n,r){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_a.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,xa.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Aa,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t)},Ra.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Pn("SymbolBuffers",Ra);var Ia=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new qr,this.collisionVertexArray=new _r};Ia.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,wa.members,!0)},Ia.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Pn("CollisionBuffers",Ia);var La=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ta(this.zoom,e["text-size"]),this.iconSizeData=Ta(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r="viewport-y"===n.get("symbol-z-order");this.sortFeaturesByY=r&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.sourceID=t.sourceID};La.prototype.createArrays=function(){this.text=new Ra(new fi(_a.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Ra(new fi(_a.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new Ia(br,Ea.members,Cr),this.collisionCircle=new Ia(br,Oa.members,Pr),this.glyphOffsetArray=new Nr,this.lineVertexArray=new zr,this.symbolInstances=new Dr},La.prototype.calculateGlyphDependencies=function(t,e,n,r){for(var i=0;i<t.length;i++)if(e[t.charCodeAt(i)]=!0,n&&r){var o=Pa[t.charAt(i)];o&&(e[o.charCodeAt(0)]=!0)}},La.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0;if(this.features=[],s||u){for(var l=e.iconDependencies,c=e.glyphDependencies,f=new Gn(this.zoom),p=0,h=t;p<h.length;p+=1){var d=h[p],y=d.feature,v=d.index,g=d.sourceLayerIndex;if(n._featureFilter(f,y)){var m=void 0;if(s){var b=n.getValueAndResolveTokens("text-field",y);m=Sa(b instanceof ut?b:ut.fromString(b),n,y)}var _=void 0;if(u&&(_=n.getValueAndResolveTokens("icon-image",y)),m||_){var x={text:m,icon:_,index:v,sourceLayerIndex:g,geometry:vi(y),properties:y.properties,type:ka[y.type]};if(void 0!==y.id&&(x.id=y.id),this.features.push(x),_&&(l[_]=!0),m)for(var w=i.evaluate(y,{}).join(","),E="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),O=0,S=m.sections;O<S.length;O+=1){var P=S[O],C=jn(m.toString()),T=P.fontStack||w,k=c[T]=c[T]||{};this.calculateGlyphDependencies(P.text,k,E,C)}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var l=0;l<t.length;l++){var c=t[l],f=c.geometry,p=c.text?c.text.toString():null;if(p){var h=u(p,f),d=u(p,f,!0);if(h in n&&d in e&&n[h]!==e[d]){var y=s(h,d,f),v=a(h,d,r[y].geometry);delete e[h],delete n[d],n[u(p,r[v].geometry,!0)]=v,r[y].geometry=null}else h in n?a(h,d,f):d in e?s(h,d,f):(o(l),e[h]=i-1,n[d]=i-1)}else o(l)}return r.filter(function(t){return t.geometry})}(this.features))}},La.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},La.prototype.isEmpty=function(){return 0===this.symbolInstances.length},La.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},La.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},La.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},La.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},La.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,l){for(var c=t.indexArray,f=t.layoutVertexArray,p=t.dynamicLayoutVertexArray,h=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),d=this.glyphOffsetArray.length,y=h.vertexLength,v=0,g=e;v<g.length;v+=1){var m=g[v],b=m.tl,_=m.tr,x=m.bl,w=m.br,E=m.tex,O=h.vertexLength,S=m.glyphOffset[1];Ma(f,s.x,s.y,b.x,S+b.y,E.x,E.y,n),Ma(f,s.x,s.y,_.x,S+_.y,E.x+E.w,E.y,n),Ma(f,s.x,s.y,x.x,S+x.y,E.x,E.y+E.h,n),Ma(f,s.x,s.y,w.x,S+w.y,E.x+E.w,E.y+E.h,n),ja(p,s,0),c.emplaceBack(O,O+1,O+2),c.emplaceBack(O+1,O+2,O+3),h.vertexLength+=4,h.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(m.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,y,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{})},La.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},La.prototype.addCollisionDebugVertices=function(t,e,n,r,i,a,s,u){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),c=l.vertexLength,f=i.layoutVertexArray,p=i.collisionVertexArray,h=s.anchorX,d=s.anchorY;if(this._addCollisionDebugVertex(f,p,a,h,d,new o(t,e)),this._addCollisionDebugVertex(f,p,a,h,d,new o(n,e)),this._addCollisionDebugVertex(f,p,a,h,d,new o(n,r)),this._addCollisionDebugVertex(f,p,a,h,d,new o(t,r)),l.vertexLength+=4,u){var y=i.indexArray;y.emplaceBack(c,c+1,c+2),y.emplaceBack(c,c+2,c+3),l.primitiveLength+=2}else{var v=i.indexArray;v.emplaceBack(c,c+1),v.emplaceBack(c+1,c+2),v.emplaceBack(c+2,c+3),v.emplaceBack(c+3,c),l.primitiveLength+=4}},La.prototype.addDebugCollisionBoxes=function(t,e,n){for(var r=t;r<e;r++){var i=this.collisionBoxArray.get(r),o=i.x1,a=i.y1,s=i.x2,u=i.y2,l=i.radius>0;this.addCollisionDebugVertices(o,a,s,u,l?this.collisionCircle:this.collisionBox,i.anchorPoint,n,l)}},La.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},La.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=t.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},o.iconFeatureIndex=l.featureIndex;break}}return o},La.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},La.prototype.hasTextData=function(){return this.text.segments.get().length>0},La.prototype.hasIconData=function(){return this.icon.segments.get().length>0},La.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},La.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},La.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),n=e.vertexStartIndex+4*e.numGlyphs,r=e.vertexStartIndex;r<n;r+=4)this.text.indexArray.emplaceBack(r,r+1,r+2),this.text.indexArray.emplaceBack(r+1,r+2,r+3)},La.prototype.sortFeatures=function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var e=[],n=0;n<this.symbolInstances.length;n++)e.push(n);for(var r=Math.sin(t),i=Math.cos(t),o=[],a=[],s=0;s<this.symbolInstances.length;s++){var u=this.symbolInstances.get(s);o.push(0|Math.round(r*u.anchorX+i*u.anchorY)),a.push(u.featureIndex)}e.sort(function(t,e){return o[t]-o[e]||a[e]-a[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,c=e;l<c.length;l+=1){var f=c[l],p=this.symbolInstances.get(f);this.featureSortOrder.push(p.featureIndex),p.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(p.horizontalPlacedTextSymbolIndex),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(p.verticalPlacedTextSymbolIndex);var h=this.icon.placedSymbolArray.get(f);if(h.numGlyphs){var d=h.vertexStartIndex;this.icon.indexArray.emplaceBack(d,d+1,d+2),this.icon.indexArray.emplaceBack(d+1,d+2,d+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Pn("SymbolBucket",La,{omit:["layers","collisionBoxArray","features","compareText"]}),La.MAX_GLYPHS=65535,La.addDynamicAttributes=ja;var Da=new rr({"symbol-placement":new Qn(F.layout_symbol["symbol-placement"]),"symbol-spacing":new Qn(F.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qn(F.layout_symbol["symbol-avoid-edges"]),"symbol-z-order":new Qn(F.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qn(F.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Qn(F.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qn(F.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qn(F.layout_symbol["icon-rotation-alignment"]),"icon-size":new $n(F.layout_symbol["icon-size"]),"icon-text-fit":new Qn(F.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qn(F.layout_symbol["icon-text-fit-padding"]),"icon-image":new $n(F.layout_symbol["icon-image"]),"icon-rotate":new $n(F.layout_symbol["icon-rotate"]),"icon-padding":new Qn(F.layout_symbol["icon-padding"]),"icon-keep-upright":new Qn(F.layout_symbol["icon-keep-upright"]),"icon-offset":new $n(F.layout_symbol["icon-offset"]),"icon-anchor":new $n(F.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qn(F.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qn(F.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qn(F.layout_symbol["text-rotation-alignment"]),"text-field":new $n(F.layout_symbol["text-field"]),"text-font":new $n(F.layout_symbol["text-font"]),"text-size":new $n(F.layout_symbol["text-size"]),"text-max-width":new $n(F.layout_symbol["text-max-width"]),"text-line-height":new Qn(F.layout_symbol["text-line-height"]),"text-letter-spacing":new $n(F.layout_symbol["text-letter-spacing"]),"text-justify":new $n(F.layout_symbol["text-justify"]),"text-anchor":new $n(F.layout_symbol["text-anchor"]),"text-max-angle":new Qn(F.layout_symbol["text-max-angle"]),"text-rotate":new $n(F.layout_symbol["text-rotate"]),"text-padding":new Qn(F.layout_symbol["text-padding"]),"text-keep-upright":new Qn(F.layout_symbol["text-keep-upright"]),"text-transform":new $n(F.layout_symbol["text-transform"]),"text-offset":new $n(F.layout_symbol["text-offset"]),"text-allow-overlap":new Qn(F.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Qn(F.layout_symbol["text-ignore-placement"]),"text-optional":new Qn(F.layout_symbol["text-optional"])}),Fa={paint:new rr({"icon-opacity":new $n(F.paint_symbol["icon-opacity"]),"icon-color":new $n(F.paint_symbol["icon-color"]),"icon-halo-color":new $n(F.paint_symbol["icon-halo-color"]),"icon-halo-width":new $n(F.paint_symbol["icon-halo-width"]),"icon-halo-blur":new $n(F.paint_symbol["icon-halo-blur"]),"icon-translate":new Qn(F.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qn(F.paint_symbol["icon-translate-anchor"]),"text-opacity":new $n(F.paint_symbol["text-opacity"]),"text-color":new $n(F.paint_symbol["text-color"]),"text-halo-color":new $n(F.paint_symbol["text-halo-color"]),"text-halo-width":new $n(F.paint_symbol["text-halo-width"]),"text-halo-blur":new $n(F.paint_symbol["text-halo-blur"]),"text-translate":new Qn(F.paint_symbol["text-translate"]),"text-translate-anchor":new Qn(F.paint_symbol["text-translate-anchor"])}),layout:Da},Na=function(t){function e(e){t.call(this,e,Fa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,r=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||Re(i.value)?r:(n=e.properties,r.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new La(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(ir),Ba={paint:new rr({"background-color":new Qn(F.paint_background["background-color"]),"background-pattern":new er(F.paint_background["background-pattern"]),"background-opacity":new Qn(F.paint_background["background-opacity"])})},za=function(t){function e(e){t.call(this,e,Ba)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ir),Ua={paint:new rr({"raster-opacity":new Qn(F.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qn(F.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qn(F.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qn(F.paint_raster["raster-brightness-max"]),"raster-saturation":new Qn(F.paint_raster["raster-saturation"]),"raster-contrast":new Qn(F.paint_raster["raster-contrast"]),"raster-resampling":new Qn(F.paint_raster["raster-resampling"]),"raster-fade-duration":new Qn(F.paint_raster["raster-fade-duration"])})},Va=function(t){function e(e){t.call(this,e,Ua)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ir),Ga=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t)},e}(ir),Wa={circle:Hi,heatmap:no,hillshade:io,fill:zo,"fill-extrusion":Yo,line:ma,symbol:Na,background:za,raster:Va};function qa(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var f=c[l],p=a.length-1;p>=0;p--){var h=a[p];if(!(f.w>h.w||f.h>h.h)){if(f.x=h.x,f.y=h.y,u=Math.max(u,f.y+f.h),s=Math.max(s,f.x+f.w),f.w===h.w&&f.h===h.h){var d=a.pop();p<a.length&&(a[p]=d)}else f.h===h.h?(h.x+=f.w,h.w-=f.w):f.w===h.w?(h.y+=f.h,h.h-=f.h):(a.push({x:h.x+f.w,y:h.y,w:h.w-f.w,h:f.h}),h.y+=f.h,h.h-=f.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}var Ha=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},Xa={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Xa.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Xa.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Xa.tlbr.get=function(){return this.tl.concat(this.br)},Xa.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ha.prototype,Xa);var Za=function(t,e){var n={},r={},i=[];for(var o in t){var a=t[o],s={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(s),n[o]=new Ha(s,a)}for(var u in e){var l=e[u],c={x:0,y:0,w:l.data.width+2,h:l.data.height+2};i.push(c),r[u]=new Ha(c,l)}var f=qa(i),p=f.w,h=f.h,d=new $i({width:p||1,height:h||1});for(var y in t){var v=t[y],g=n[y].paddedRect;$i.copy(v.data,d,{x:0,y:0},{x:g.x+1,y:g.y+1},v.data)}for(var m in e){var b=e[m],_=r[m].paddedRect,x=_.x+1,w=_.y+1,E=b.data.width,O=b.data.height;$i.copy(b.data,d,{x:0,y:0},{x:x,y:w},b.data),$i.copy(b.data,d,{x:0,y:O-1},{x:x,y:w-1},{width:E,height:1}),$i.copy(b.data,d,{x:0,y:0},{x:x,y:w+O},{width:E,height:1}),$i.copy(b.data,d,{x:E-1,y:0},{x:x-1,y:w},{width:1,height:O}),$i.copy(b.data,d,{x:0,y:0},{x:x+E,y:w},{width:1,height:O})}this.image=d,this.iconPositions=n,this.patternPositions=r};Pn("ImagePosition",Ha),Pn("ImageAtlas",Za);var Ya=self.HTMLImageElement,Ka=self.HTMLCanvasElement,Ja=self.HTMLVideoElement,Qa=self.ImageData,$a=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};$a.prototype.update=function(t,e){var n=t.width,r=t.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!e||!1!==e.premultiply)),i?(this.size=[n,r],t instanceof Ya||t instanceof Ka||t instanceof Ja||t instanceof Qa?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof Ya||t instanceof Ka||t instanceof Ja||t instanceof Qa?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},$a.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},$a.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},$a.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ts=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,p=n?-1:1,h=t[e+f];for(f+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+t[e+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},es=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+h]=255&a,h+=d,a/=256,l-=8);t[n+h-d]|=128*y},ns=rs;function rs(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function is(t){return t.type===rs.Bytes?t.readVarint()+t.pos:t.pos+1}function os(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function as(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function ss(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function us(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ls(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function cs(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function fs(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function ps(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function hs(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function ds(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function ys(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function vs(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function gs(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function ms(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}rs.Varint=0,rs.Fixed64=1,rs.Bytes=2,rs.Fixed32=5,rs.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=vs(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=ms(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=vs(this.buf,this.pos)+4294967296*vs(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=vs(this.buf,this.pos)+4294967296*ms(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=ts(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=ts(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return os(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return os(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return os(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return os(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return os(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return os(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=is(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=is(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=is(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=is(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=is(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=is(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=is(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=is(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=is(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===rs.Varint)for(;this.buf[this.pos++]>127;);else if(e===rs.Bytes)this.pos=this.readVarint()+this.pos;else if(e===rs.Fixed32)this.pos+=4;else{if(e!==rs.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),gs(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),gs(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),gs(this.buf,-1&t,this.pos),gs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),gs(this.buf,-1&t,this.pos),gs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&as(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),es(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),es(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&as(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,rs.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,ss,e)},writePackedSVarint:function(t,e){this.writeMessage(t,us,e)},writePackedBoolean:function(t,e){this.writeMessage(t,fs,e)},writePackedFloat:function(t,e){this.writeMessage(t,ls,e)},writePackedDouble:function(t,e){this.writeMessage(t,cs,e)},writePackedFixed32:function(t,e){this.writeMessage(t,ps,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,hs,e)},writePackedFixed64:function(t,e){this.writeMessage(t,ds,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,ys,e)},writeBytesField:function(t,e){this.writeTag(t,rs.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,rs.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,rs.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,rs.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,rs.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,rs.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,rs.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,rs.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,rs.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,rs.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var bs=3;function _s(t,e,n){1===t&&n.readMessage(xs,e)}function xs(t,e,n){if(3===t){var r=n.readMessage(ws,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;e.push({id:i,bitmap:new Qi({width:a+2*bs,height:s+2*bs},o),metrics:{width:a,height:s,left:u,top:l,advance:c}})}}function ws(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}var Es=bs,Os=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,d(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function Ss(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Os.prototype.send=function(t,e,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var o=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(i),data:Tn(e,o)},o)},Os.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?Tn(t):null,data:Tn(e,r)},r)};if("<response>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(kn(r.error)):e&&e(null,kn(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,kn(r.data),o);else if(void 0!==r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=kn(r.data);this.parent.getWorkerSource(r.sourceMapId,a[0],s.source)[a[1]](s,o)}else this.parent[r.type](kn(r.data))}},Os.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Ps=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=ks(0,t,e,n)};Ps.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Ps.prototype.url=function(t,e){var n,r,i,o,a,s=(n=this.x,r=this.y,i=this.z,o=Ss(256*n,256*(r=Math.pow(2,i)-r-1),i),a=Ss(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)};var Cs=function(t,e){this.wrap=t,this.canonical=e,this.key=ks(t,e.z,e.x,e.y)},Ts=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Ps(n,+r,+i),this.key=ks(e,t,r,i)};function ks(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}Ts.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Ts.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Ts(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ts(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Ts.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Ts.prototype.children=function(t){if(this.overscaledZ>=t)return[new Ts(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Ts(e,this.wrap,e,n,r),new Ts(e,this.wrap,e,n+1,r),new Ts(e,this.wrap,e,n,r+1),new Ts(e,this.wrap,e,n+1,r+1)]},Ts.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Ts.prototype.wrapped=function(){return new Ts(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ts.prototype.unwrapTo=function(t){return new Ts(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Ts.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ts.prototype.toUnwrapped=function(){return new Cs(this.wrap,this.canonical)},Ts.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ts.prototype.toCoordinate=function(){return new i(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},Pn("CanonicalTileID",Ps),Pn("OverscaledTileID",Ts,{omit:["posMatrix"]});var As=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return _('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.dim=e.height;this.border=Math.max(Math.ceil(e.height/2),1),this.stride=this.dim+2*this.border,this.data=new Int32Array(this.stride*this.stride);for(var i=e.data,o="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,a=0;a<r;a++)for(var s=0;s<r;s++){var u=4*(a*r+s);this.set(s,a,o(i[u],i[u+1],i[u+2]))}for(var l=0;l<r;l++)this.set(-1,l,this.get(0,l)),this.set(r,l,this.get(r-1,l)),this.set(l,-1,this.get(l,0)),this.set(l,r,this.get(l,r-1));this.set(-1,-1,this.get(0,0)),this.set(r,-1,this.get(r-1,0)),this.set(-1,r,this.get(0,r-1)),this.set(r,r,this.get(r-1,r-1))};As.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},As.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},As.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},As.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},As.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},As.prototype.getPixels=function(){return new $i({width:this.dim+2*this.border,height:this.dim+2*this.border},new Uint8Array(this.data.buffer))},As.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=c(r,-this.border,this.dim+this.border),u=c(i,-this.border,this.dim+this.border),l=c(o,-this.border,this.dim+this.border),f=c(a,-this.border,this.dim+this.border),p=-e*this.dim,h=-n*this.dim,d=l;d<f;d++)for(var y=s;y<u;y++)this.set(y,d,t.get(y+p,d+h))},Pn("DEMData",As);var Ms=ur([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),js=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};js.prototype.encode=function(t){return this._stringToNumber[t]},js.prototype.decode=function(t){return this._numberToString[t]};var Rs=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Is={geometry:{configurable:!0}};Is.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Is.geometry.set=function(t){this._geometry=t},Rs.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Rs.prototype,Is);var Ls=function(){this.state={},this.stateChanges={}};Ls.prototype.updateState=function(t,e,n){var r=String(e);this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},f(this.stateChanges[t][r],n)},Ls.prototype.getState=function(t,e){var n=String(e),r=this.state[t]||{},i=this.stateChanges[t]||{};return f({},r[n],i[n])},Ls.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Ls.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),f(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}if(this.stateChanges={},0!==Object.keys(n).length)for(var a in t)t[a].setFeatureState(n,e)};var Ds=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new xn(di,16,0),this.featureIndexArray=n||new Vr};function Fs(t,e){return e-t}Ds.prototype.insert=function(t,e,n,r,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var a=0;a<e.length;a++){for(var s=e[a],u=[1/0,1/0,-1/0,-1/0],l=0;l<s.length;l++){var c=s[l];u[0]=Math.min(u[0],c.x),u[1]=Math.min(u[1],c.y),u[2]=Math.max(u[2],c.x),u[3]=Math.max(u[3],c.y)}u[0]<di&&u[1]<di&&u[2]>=0&&u[3]>=0&&this.grid.insert(o,u[0],u[1],u[2],u[3])}},Ds.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new aa.VectorTile(new ns(this.rawTileData)).layers,this.sourceLayerCoder=new js(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ds.prototype.query=function(t,e,n){var r=this;this.loadVTLayers();for(var i=t.params||{},o=di/t.tileSize/t.scale,a=Ze(i.filter),s=t.queryGeometry,u=t.queryPadding*o,l=1/0,c=1/0,f=-1/0,p=-1/0,h=0;h<s.length;h++)for(var d=s[h],y=0;y<d.length;y++){var v=d[y];l=Math.min(l,v.x),c=Math.min(c,v.y),f=Math.max(f,v.x),p=Math.max(p,v.y)}var g=this.grid.query(l-u,c-u,f+u,p+u);g.sort(Fs);for(var m,b={},_=function(u){var l=g[u];if(l!==m){m=l;var c=r.featureIndexArray.get(l),f=null;r.loadMatchingFeature(b,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,a,i.layers,e,function(e,i){f||(f=vi(e));var a={};return e.id&&(a=n.getState(i.sourceLayer||"_geojsonTileLayer",e.id)),i.queryIntersectsFeature(s,e,a,f,r.z,t.transform,o,t.posMatrix)})}},x=0;x<g.length;x++)_(x);return b},Ds.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s){var u=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new Gn(this.tileID.overscaledZ),c))for(var f=0;f<u.length;f++){var p=u[f];if(!(o&&o.indexOf(p)<0)){var h=a[p];if(h&&(!s||s(c,h))){var d=new Rs(c,this.z,this.x,this.y);d.layer=h.serialize();var y=t[p];void 0===y&&(y=t[p]=[]),y.push({featureIndex:r,feature:d})}}}}},Ds.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o){var a={};this.loadVTLayers();for(var s=Ze(r),u=0,l=t;u<l.length;u+=1){var c=l[u];this.loadMatchingFeature(a,e,n,c,s,i,o)}return a},Ds.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},Pn("FeatureIndex",Ds,{omit:["rawTileData","sourceLayerCoder"]});var Ns=function(t,e){this.tileID=t,this.uid=h(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};Ns.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<P.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Ns.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ns.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a,o.stateDependentLayers=a.filter(function(t){return t.isStateDependent()});for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof La){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(o).queryRadius(a))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new jr},Ns.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ns.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Ns.prototype.getBucket=function(t){return this.buckets[t.id]},Ns.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new $a(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new $a(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Ns.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,scale:r,tileSize:this.tileSize,posMatrix:s,transform:o,params:i,queryPadding:this.queryPadding*a},t,e):{}},Ns.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=e?e.sourceLayer:"",i=n._geojsonTileLayer||n[r];if(i)for(var o=Ze(e&&e.filter),a=this.tileID.canonical,s=a.z,u=a.x,l=a.y,c={z:s,x:u,y:l},f=0;f<i.length;f++){var p=i.feature(f);if(o(new Gn(this.tileID.overscaledZ),p)){var h=new Rs(p,s,u,l);h.tile=c,t.push(h)}}}},Ns.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Ns.prototype.setMask=function(t,e){if(!s(this.mask,t)&&(this.mask=t,this.clearMask(),!s(t,{0:!0}))){var n=new fr,r=new Pr;this.segments=new qr,this.segments.prepareSegment(0,n,r);for(var i=Object.keys(t),a=0;a<i.length;a++){var u=t[i[a]],l=di>>u.z,c=new o(u.x*l,u.y*l),f=new o(c.x+l,c.y+l),p=this.segments.prepareSegment(4,n,r);n.emplaceBack(c.x,c.y,c.x,c.y),n.emplaceBack(f.x,c.y,f.x,c.y),n.emplaceBack(c.x,f.y,c.x,f.y),n.emplaceBack(f.x,f.y,f.x,f.y);var h=p.vertexLength;r.emplaceBack(h,h+1,h+2),r.emplaceBack(h+1,h+2,h+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,Ms.members),this.maskedIndexBuffer=e.createIndexBuffer(r)}},Ns.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ns.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ns.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ns.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ns.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(r).queryRadius(i))))}}},Ns.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ns.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()},Ns.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ns.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=P.now()+t};var Bs={horizontal:1,vertical:2,horizontalOnly:3},zs=function(){this.text="",this.sectionIndex=[],this.sections=[]};zs.fromFeature=function(t,e){for(var n=new zs,r=0;r<t.sections.length;r++){var i=t.sections[r];n.sections.push({scale:i.scale||1,fontStack:i.fontStack||e}),n.text+=i.text;for(var o=0;o<i.text.length;o++)n.sectionIndex.push(r)}return n},zs.prototype.length=function(){return this.text.length},zs.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},zs.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},zs.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;r&&Ln(r)&&!Pa[t[n+1]]||i&&Ln(i)&&!Pa[t[n-1]]||!Pa[t[n]]?e+=t[n]:e+=Pa[t[n]]}return e}(this.text)},zs.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Us[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Us[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},zs.prototype.substring=function(t,e){var n=new zs;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},zs.prototype.toString=function(){return this.text},zs.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)};var Us={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vs={};function Gs(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Ws(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function qs(t,e,n,r,i,o){for(var a=null,s=Gs(e,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],f=Gs(e-c.x,n,i,o)+c.badness;f<=s&&(a=c,s=f)}return{index:t,x:e,priorBreak:a,badness:s}}function Hs(t,e,n,r){if(!n)return[];if(!t)return[];for(var i,o=[],a=function(t,e,n,r){for(var i=0,o=0;o<t.length();o++){var a=t.getSection(o),s=r[a.fontStack],u=s&&s[t.getCharCode(o)];u&&(i+=u.metrics.advance*a.scale+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),s=0,u=0;u<t.length();u++){var l=t.getSection(u),c=t.getCharCode(u),f=r[l.fontStack],p=f&&f[c];p&&!Us[c]&&(s+=p.metrics.advance*l.scale+e),u<t.length()-1&&(Vs[c]||!((i=c)<11904)&&(Mn["Bopomofo Extended"](i)||Mn.Bopomofo(i)||Mn["CJK Compatibility Forms"](i)||Mn["CJK Compatibility Ideographs"](i)||Mn["CJK Compatibility"](i)||Mn["CJK Radicals Supplement"](i)||Mn["CJK Strokes"](i)||Mn["CJK Symbols and Punctuation"](i)||Mn["CJK Unified Ideographs Extension A"](i)||Mn["CJK Unified Ideographs"](i)||Mn["Enclosed CJK Letters and Months"](i)||Mn["Halfwidth and Fullwidth Forms"](i)||Mn.Hiragana(i)||Mn["Ideographic Description Characters"](i)||Mn["Kangxi Radicals"](i)||Mn["Katakana Phonetic Extensions"](i)||Mn.Katakana(i)||Mn["Vertical Forms"](i)||Mn["Yi Radicals"](i)||Mn["Yi Syllables"](i)))&&o.push(qs(u+1,s,a,o,Ws(c,t.getCharCode(u+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(qs(t.length(),s,a,o,0,!0))}function Xs(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Zs(t,e,n,r,i){if(i){var o=t[r],a=e[o.fontStack],s=a&&a[o.glyph];if(s)for(var u=s.metrics.advance*o.scale,l=(t[r].x+u)*i,c=n;c<=r;c++)t[c].x-=l}}Vs[10]=!0,Vs[32]=!0,Vs[38]=!0,Vs[40]=!0,Vs[41]=!0,Vs[43]=!0,Vs[45]=!0,Vs[47]=!0,Vs[173]=!0,Vs[183]=!0,Vs[8203]=!0,Vs[8208]=!0,Vs[8211]=!0,Vs[8231]=!0,t.createCommonjsModule=e,t.Point=o,t.window=self,t.browser=P,t.uuid=function(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()},t.validateUuid=function(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},t.storageAvailable=function(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}},t.warnOnce=_,t.postData=function(t,e,n){var r=A(f(t,{method:"POST"}));return r.onerror=function(){n(new Error(r.statusText))},r.onload=function(){r.status>=200&&r.status<300?n(null,r.response):n(new k(r.statusText,r.status,t.url))},r.send(e),{cancel:function(){return r.abort()}}},t.getJSON=function(t,e){var n=A(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&n.response){var r;try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r)}else 401===n.status&&t.url.match(/mapbox.com/)?e(new k(n.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",n.status,t.url)):e(new k(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},t.getImage=function(t,e){return M(t,function(t,n){if(t)e(t);else if(n){var r=new self.Image,i=self.URL||self.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)},r.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var o=new self.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(o):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},t.ResourceType=T,t.RGBAImage=$i,t.potpack=qa,t.ImagePosition=Ha,t.Texture=$a,t.getArrayBuffer=M,t.parseGlyphPBF=function(t){return new ns(t).readFields(_s,[])},t.isChar=Mn,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.AlphaImage=Qi,t.styleSpec=F,t.endsWith=y,t.extend=f,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.Evented=D,t.validateStyle=vn,t.validateLight=gn,t.emitValidationErrors=_n,t.Color=ot,t.number=At,t.Properties=rr,t.Transitionable=Hn,t.Transitioning=Zn,t.PossiblyEvaluated=Jn,t.DataConstantProperty=Qn,t.uniqueId=h,t.Actor=Os,t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.wrap=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},t.clamp=c,t.Event=I,t.ErrorEvent=L,t.OverscaledTileID=Ts,t.EXTENT=di,t.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,a=0;a<t.length;a++)e=Math.min(e,t[a].column),n=Math.min(n,t[a].row),r=Math.max(r,t[a].column),o=Math.max(o,t[a].row);var s=r-e,u=o-n,l=Math.max(s,u),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new i((e+r)/2,(n+o)/2,0).zoomTo(c)},t.CanonicalTileID=Ps,t.StructArrayLayout4i8=fr,t.rasterBoundsAttributes=Ms,t.SegmentVector=qr,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.ValidationError=N,t.bindAll=d,t.isEqual=s,t.Tile=Ns,t.Coordinate=i,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.SourceFeatureState=Ls,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.create=function(){var t=new Ri(16);return Ri!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],p=e[10],h=e[11],d=e[12],y=e[13],v=e[14],g=e[15],m=n*s-r*a,b=n*u-i*a,_=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,O=c*y-f*d,S=c*v-p*d,P=c*g-h*d,C=f*v-p*y,T=f*g-h*y,k=p*g-h*v,A=m*k-b*T+_*C+x*P-w*S+E*O;return A?(A=1/A,t[0]=(s*k-u*T+l*C)*A,t[1]=(i*T-r*k-o*C)*A,t[2]=(y*E-v*w+g*x)*A,t[3]=(p*w-f*E-h*x)*A,t[4]=(u*P-a*k-l*S)*A,t[5]=(n*k-i*P+o*S)*A,t[6]=(v*_-d*E-g*b)*A,t[7]=(c*E-p*_+h*b)*A,t[8]=(a*T-s*P+l*O)*A,t[9]=(r*P-n*T-o*O)*A,t[10]=(d*w-y*_+g*m)*A,t[11]=(f*_-c*w-h*m)*A,t[12]=(s*S-a*C-u*O)*A,t[13]=(n*C-r*S+i*O)*A,t[14]=(y*b-d*x-v*m)*A,t[15]=(c*x-f*b+p*m)*A,t):null},t.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],p=e[9],h=e[10],d=e[11],y=e[12],v=e[13],g=e[14],m=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*s+x*f+w*y,t[1]=b*i+_*u+x*p+w*v,t[2]=b*o+_*l+x*h+w*g,t[3]=b*a+_*c+x*d+w*m,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*s+x*f+w*y,t[5]=b*i+_*u+x*p+w*v,t[6]=b*o+_*l+x*h+w*g,t[7]=b*a+_*c+x*d+w*m,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*s+x*f+w*y,t[9]=b*i+_*u+x*p+w*v,t[10]=b*o+_*l+x*h+w*g,t[11]=b*a+_*c+x*d+w*m,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*s+x*f+w*y,t[13]=b*i+_*u+x*p+w*v,t[14]=b*o+_*l+x*h+w*g,t[15]=b*a+_*c+x*d+w*m,t},t.translate=function(t,e,n){var r=n[0],i=n[1],o=n[2],a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,p=void 0,h=void 0,d=void 0,y=void 0,v=void 0,g=void 0;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(a=e[0],s=e[1],u=e[2],l=e[3],c=e[4],f=e[5],p=e[6],h=e[7],d=e[8],y=e[9],v=e[10],g=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=l,t[4]=c,t[5]=f,t[6]=p,t[7]=h,t[8]=d,t[9]=y,t[10]=v,t[11]=g,t[12]=a*r+c*i+d*o+e[12],t[13]=s*r+f*i+y*o+e[13],t[14]=u*r+p*i+v*o+e[14],t[15]=l*r+h*i+g*o+e[15]),t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=p*i-u*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=p*i-u*r,t},t.perspective=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=void 0;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t},t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.create$1=Ui,t.normalize=Vi,t.transformMat4=Gi,t.forEach=Wi,t.getSizeData=Ta,t.evaluateSizeForFeature=function(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/256:"composite"===t.functionType?At(n.lowerSize/256,n.upperSize/256,r.uSizeT):r.uSize},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.propertyValue,i=t.zoomRange,o=t.sizeRange,a=c(Be(r,n.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var s=t.propertyValue,u=t.zoomRange;return{uSizeT:c(Be(s,n.specification).interpolationFactor(e,u.min,u.max),0,1),uSize:0}},t.SIZE_PACK_FACTOR=256,t.addDynamicAttributes=ja,t.properties=Fa,t.WritingMode=Bs,t.multiPolygonIntersectsBufferedPoint=bi,t.multiPolygonIntersectsMultiPolygon=_i,t.multiPolygonIntersectsBufferedMultiLine=xi,t.polygonIntersectsPolygon=function(t,e){for(var n=0;n<t.length;n++)if(Ti(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(Ti(t,e[r]))return!0;return!!Ei(t,e)},t.distToSegmentSquared=Pi,t.SymbolInstanceArray=Dr,t.StyleLayer=ir,t.createStyleLayer=function(t){return"custom"===t.type?new Ga(t):new Wa[t.type](t)},t.clone=m,t.filterObject=g,t.mapObject=v,t.registerForPluginAvailability=function(t){return Bn?t({pluginURL:Bn,completionCallback:Fn}):Un.once("pluginAvailable",t),t},t.evented=Un,t.ZoomHistory=An,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.createLayout=ur,t.ProgramConfiguration=ci,t.Uniform1i=Kr,t.Uniform1f=Jr,t.Uniform2f=Qr,t.Uniform4f=ti,t.Uniform3f=$r,t.UniformMatrix4f=ri,t.create$2=Ii,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.create$3=Li,t.length=Di,t.fromValues=Fi,t.normalize$1=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.len=Bi,t.forEach$1=zi,t.UniformColor=ei,t.StructArrayLayout2i4=cr,t.StructArrayLayout2ui4=Cr,t.StructArrayLayout3ui6=Pr,t.StructArrayLayout1ui2=Tr,t.UnwrappedTileID=Cs,t.create$4=function(){var t=new Ri(4);return Ri!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.ease=l,t.bezier=u,t.EvaluationParameters=Gn,t.setRTLTextPlugin=function(t,e){if(Nn)throw new Error("setRTLTextPlugin cannot be called multiple times.");Nn=!0,Bn=P.resolveURL(t),Fn=function(t){t?(Nn=!1,Bn=null,e&&e(t)):zn=!0},Un.fire(new I("pluginAvailable",{pluginURL:Bn,completionCallback:Fn}))},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.featureFilter=Ze,t.Anchor=Ca,t.GLYPH_PBF_BORDER=Es,t.shapeText=function(t,e,n,r,i,o,a,s,u,l,c){var f=zs.fromFeature(t,n);c===Bs.vertical&&f.verticalizePunctuation();var p,h=[],d={positionedGlyphs:h,text:f,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:c},y=Vn.processBidirectionalText,v=Vn.processStyledBidirectionalText;if(y&&1===f.sections.length){p=[];for(var g=0,m=y(f.toString(),Hs(f,s,r,e));g<m.length;g+=1){var b=m[g],_=new zs;_.text=b,_.sections=f.sections;for(var x=0;x<b.length;x++)_.sectionIndex.push(0);p.push(_)}}else if(v){p=[];for(var w=0,E=v(f.text,f.sectionIndex,Hs(f,s,r,e));w<E.length;w+=1){var O=E[w],S=new zs;S.text=O[0],S.sectionIndex=O[1],S.sections=f.sections,p.push(S)}}else p=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(i,s)),i=s}return i<r.length&&n.push(t.substring(i,r.length)),n}(f,Hs(f,s,r,e));return function(t,e,n,r,i,o,a,s,u){for(var l=0,c=-17,f=0,p=t.positionedGlyphs,h="right"===o?1:"left"===o?0:.5,d=0,y=n;d<y.length;d+=1){var v=y[d];v.trim();var g=v.getMaxScale();if(v.length()){for(var m=p.length,b=0;b<v.length();b++){var _=v.getSection(b),x=v.getCharCode(b),w=24*(g-_.scale),E=e[_.fontStack],O=E&&E[x];O&&(In(x)&&a!==Bs.horizontal?(p.push({glyph:x,x:l,y:w,vertical:!0,scale:_.scale,fontStack:_.fontStack}),l+=u*_.scale+s):(p.push({glyph:x,x:l,y:c+w,vertical:!1,scale:_.scale,fontStack:_.fontStack}),l+=O.metrics.advance*_.scale+s))}if(p.length!==m){var S=l-s;f=Math.max(S,f),Zs(p,e,m,p.length-1,h)}l=0,c+=r*g}else c+=r}var P=Xs(i),C=P.horizontalAlign,T=P.verticalAlign;!function(t,e,n,r,i,o,a){for(var s=(e-n)*i,u=(-r*a+.5)*o,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(p,h,C,T,f,r,n.length);var k=c- -17;t.top+=-T*k,t.bottom=t.top+k,t.left+=-C*f,t.right=t.left+f}(d,e,p,i,o,a,c,s,l),!!h.length&&(d.text=d.text.toString(),d)},t.shapeIcon=function(t,e,n){var r=Xs(n),i=r.horizontalAlign,o=r.verticalAlign,a=e[0],s=e[1],u=a-t.displaySize[0]*i,l=u+t.displaySize[0],c=s-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:u,right:l}},t.allowsVerticalWritingMode=jn,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!Rn(n[e].charCodeAt(0)))return!1;return!0},t.classifyRings=Io,t.SymbolBucket=La,t.register=Pn,t.FeatureIndex=Ds,t.CollisionBoxArray=jr,t.DictionaryCoder=js,t.LineBucket=ha,t.FillBucket=No,t.FillExtrusionBucket=qo,t.ImageAtlas=Za,t.mvt=aa,t.Protobuf=ns,t.DEMData=As,t.vectorTile=aa,t.Point$1=o,t.pbf=ns,t.plugin=Vn}),r(0,function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||void 0===t||null===t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}var r=function(t){t&&this.replace(t)};function i(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],f=t[a],p=t[a+1];if(!p)return!1;var h=c.angleTo(f)-f.angleTo(p);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:h}),l+=h;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=f.dist(p)}return!0}function o(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function a(t,e,n){return t?.6*e*n:0}function s(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function u(e,n,r,u,l,c){for(var f=a(r,l,c),p=s(r,u)*c,h=0,d=o(e)/2,y=0;y<e.length-1;y++){var v=e[y],g=e[y+1],m=v.dist(g);if(h+m>d){var b=(d-h)/m,_=t.number(v.x,g.x,b),x=t.number(v.y,g.y,b),w=new t.Anchor(_,x,g.angleTo(v),y);return w._round(),!f||i(e,w,p,f,n)?w:void 0}h+=m}}function l(e,n,r,u,l,c,f,p,h){var d=a(u,c,f),y=s(u,l),v=y*f,g=0===e[0].x||e[0].x===h||0===e[0].y||e[0].y===h;return n-v<n/4&&(n=v+n/4),function e(n,r,a,s,u,l,c,f,p){for(var h=l/2,d=o(n),y=0,v=r-a,g=[],m=0;m<n.length-1;m++){for(var b=n[m],_=n[m+1],x=b.dist(_),w=_.angleTo(b);v+a<y+x;){var E=((v+=a)-y)/x,O=t.number(b.x,_.x,E),S=t.number(b.y,_.y,E);if(O>=0&&O<p&&S>=0&&S<p&&v-h>=0&&v+h<=d){var P=new t.Anchor(O,S,w,m);P._round(),s&&!i(n,P,l,s,u)||g.push(P)}}y+=x}return f||g.length||c||(g=e(n,y/2,a,s,u,l,c,!0,p)),g}(e,g?n/2*p%n:(y/2+2*c)*f*p%n,n,d,r,v,g,!1,h)}r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];i._layerConfigs[s.id]=s;var u=i._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter)}for(var l=0,c=r;l<c.length;l+=1){var f=c[l];delete i._layerConfigs[f],delete i._layers[f]}this.familiesBySource={};for(var p=0,h=function(t){for(var e={},r=0;r<t.length;r++){var i=n(t[r]),o=e[i];o||(o=e[i]=[]),o.push(t[r])}var a=[];for(var s in e)a.push(e[s]);return a}(t.values(this._layerConfigs));p<h.length;p+=1){var d=h[p].map(function(t){return i._layers[t.id]}),y=d[0];if("none"!==y.visibility){var v=y.source||"",g=i.familiesBySource[v];g||(g=i.familiesBySource[v]={});var m=y.sourceLayer||"_geojsonTileLayer",b=g[m];b||(b=g[m]=[]),b.push(d)}}};var c=function(e,n,r,i,o,a,s,u,l,c,f,p){var h=s.top*u-l,d=s.bottom*u+l,y=s.left*u-l,v=s.right*u+l;if(this.boxStartIndex=e.length,c){var g=d-h,m=v-y;g>0&&(g=Math.max(10*u,g),this._addLineCollisionCircles(e,n,r,r.segment,m,g,i,o,a,f))}else{if(p){var b=new t.Point(y,h),_=new t.Point(v,h),x=new t.Point(y,d),w=new t.Point(v,d),E=p*Math.PI/180;b._rotate(E),_._rotate(E),x._rotate(E),w._rotate(E),y=Math.min(b.x,_.x,x.x,w.x),v=Math.max(b.x,_.x,x.x,w.x),h=Math.min(b.y,_.y,x.y,w.y),d=Math.max(b.y,_.y,x.y,w.y)}e.emplaceBack(r.x,r.y,y,h,v,d,i,o,a,0,0)}this.boxEndIndex=e.length};c.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,l){var c=o/2,f=Math.floor(i/c)||1,p=1+.4*Math.log(l)/Math.LN2,h=Math.floor(f*p/2),d=-o/2,y=n,v=r+1,g=d,m=-i/2,b=m-i/4;do{if(--v<0){if(g>m)return;v=0;break}g-=e[v].dist(y),y=e[v]}while(g>b);for(var _=e[v].dist(e[v+1]),x=-h;x<f+h;x++){var w=x*c,E=m+w;if(w<0&&(E+=w),w>i&&(E+=w-i),!(E<g)){for(;g+_<E;){if(g+=_,++v+1>=e.length)return;_=e[v].dist(e[v+1])}var O=E-g,S=e[v],P=e[v+1].sub(S)._unit()._mult(O)._add(S)._round(),C=Math.abs(E-d)<c?0:.8*(E-d);t.emplaceBack(P.x,P.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,C)}}};var f=h,p=h;function h(t,e){if(!(this instanceof h))return new h(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||d,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function d(t,e){return t<e?-1:t>e?1:0}function y(e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=e[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<i)&&(i=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>s)&&(s=c.y)}var p=a-i,h=s-o,d=Math.min(p,h),y=d/2,m=new f(null,v);if(0===d)return new t.Point(i,o);for(var b=i;b<a;b+=d)for(var _=o;_<s;_+=d)m.push(new g(b+y,_+y,y,e));for(var x=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new g(n/e,r/e,0,t)}(e),w=m.length;m.length;){var E=m.pop();(E.d>x.d||!x.d)&&(x=E,r&&console.log("found best %d after %d probes",Math.round(1e4*E.d)/1e4,w)),E.max-x.d<=n||(y=E.h/2,m.push(new g(E.p.x-y,E.p.y-y,y,e)),m.push(new g(E.p.x+y,E.p.y-y,y,e)),m.push(new g(E.p.x-y,E.p.y+y,y,e)),m.push(new g(E.p.x+y,E.p.y+y,y,e)),w+=4)}return r&&(console.log("num probes: "+w),console.log("best distance: "+x.d)),x.p}function v(t,e){return e.max-t.max}function g(e,n,r,i){this.p=new t.Point(e,n),this.h=r,this.d=function(e,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],s=0,u=a.length,l=u-1;s<u;l=s++){var c=a[s],f=a[l];c.y>e.y!=f.y>e.y&&e.x<(f.x-c.x)*(e.y-c.y)/(f.y-c.y)+c.x&&(r=!r),i=Math.min(i,t.distToSegmentSquared(e,c,f))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}h.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},f.default=p;var m=t.createCommonjsModule(function(t){t.exports=function(t,e){var n,r,i,o,a,s,u,l;for(n=3&t.length,r=t.length-n,i=e,a=3432918353,s=461845907,l=0;l<r;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),b=m,_=m,x=t.createCommonjsModule(function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}});function w(e,n,r,i,o,a){e.createArrays();var s=512*e.overscaling;e.tilePixelRatio=t.EXTENT/s,e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var f=e.textSizeData.zoomRange,p=f.min,h=f.max;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new t.EvaluationParameters(p)),l["text-size"].possiblyEvaluate(new t.EvaluationParameters(h))]}if("composite"===e.iconSizeData.functionType){var d=e.iconSizeData.zoomRange,y=d.min,v=d.max;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new t.EvaluationParameters(y)),l["icon-size"].possiblyEvaluate(new t.EvaluationParameters(v))]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),c.textMaxSize=l["text-size"].possiblyEvaluate(new t.EvaluationParameters(18));for(var g=24*u.get("text-line-height"),m="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),b=u.get("text-keep-upright"),_=0,x=e.features;_<x.length;_+=1){var w=x[_],O=u.get("text-font").evaluate(w,{}).join(","),S=r,P={},C=w.text;if(C){var T=C.toString(),k=u.get("text-offset").evaluate(w,{}).map(function(t){return 24*t}),A=24*u.get("text-letter-spacing").evaluate(w,{}),M=t.allowsLetterSpacing(T)?A:0,j=u.get("text-anchor").evaluate(w,{}),R=u.get("text-justify").evaluate(w,{}),I="point"===u.get("symbol-placement")?24*u.get("text-max-width").evaluate(w,{}):0;P.horizontal=t.shapeText(C,n,O,I,g,j,R,M,k,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(T)&&m&&b&&(P.vertical=t.shapeText(C,n,O,I,g,j,R,M,k,24,t.WritingMode.vertical))}var L=void 0;if(w.icon){var D=i[w.icon];D&&(L=t.shapeIcon(o[w.icon],u.get("icon-offset").evaluate(w,{}),u.get("icon-anchor").evaluate(w,{})),void 0===e.sdfIcons?e.sdfIcons=D.sdf:e.sdfIcons!==D.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),D.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(P.horizontal||L)&&E(e,w,P,L,S,c)}a&&e.generateCollisionDebugBuffers()}function E(e,n,r,i,o,a){var s=a.layoutTextSize.evaluate(n,{}),f=a.layoutIconSize.evaluate(n,{}),p=a.textMaxSize.evaluate(n,{});void 0===p&&(p=s);var h=e.layers[0].layout,d=h.get("text-offset").evaluate(n,{}),v=h.get("icon-offset").evaluate(n,{}),g=s/24,m=e.tilePixelRatio*g,_=e.tilePixelRatio*p/24,x=e.tilePixelRatio*f,w=e.tilePixelRatio*h.get("symbol-spacing"),E=h.get("text-padding")*e.tilePixelRatio,C=h.get("icon-padding")*e.tilePixelRatio,T=h.get("text-max-angle")/180*Math.PI,k="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),A="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),M=h.get("symbol-placement"),j=w/2,R=function(s,u){u.x<0||u.x>=t.EXTENT||u.y<0||u.y>=t.EXTENT||function(e,n,r,i,o,a,s,u,l,f,p,h,d,y,v,g,m,_,x,w,E){var P,C,T=e.addToLineVertexArray(n,r),k=0,A=0,M=0,j=b(i.horizontal?i.horizontal.text:""),R=[];if(i.horizontal){var I=a.layout.get("text-rotate").evaluate(x,{});P=new c(s,r,n,u,l,f,i.horizontal,p,h,d,e.overscaling,I),A+=S(e,n,i.horizontal,a,d,x,y,T,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,R,w,E),i.vertical&&(M+=S(e,n,i.vertical,a,d,x,y,T,t.WritingMode.vertical,R,w,E))}var L=P?P.boxStartIndex:e.collisionBoxArray.length,D=P?P.boxEndIndex:e.collisionBoxArray.length;if(o){var F=function(e,n,r,i,o,a){var s,u,l,c,f=n.image,p=r.layout,h=n.top-1/f.pixelRatio,d=n.left-1/f.pixelRatio,y=n.bottom+1/f.pixelRatio,v=n.right+1/f.pixelRatio;if("none"!==p.get("icon-text-fit")&&o){var g=v-d,m=y-h,b=p.get("text-size").evaluate(a,{})/24,_=o.left*b,x=o.right*b,w=o.top*b,E=x-_,O=o.bottom*b-w,S=p.get("icon-text-fit-padding")[0],P=p.get("icon-text-fit-padding")[1],C=p.get("icon-text-fit-padding")[2],T=p.get("icon-text-fit-padding")[3],k="width"===p.get("icon-text-fit")?.5*(O-m):0,A="height"===p.get("icon-text-fit")?.5*(E-g):0,M="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?E:g,j="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?O:m;s=new t.Point(_+A-T,w+k-S),u=new t.Point(_+A+P+M,w+k-S),l=new t.Point(_+A+P+M,w+k+C+j),c=new t.Point(_+A-T,w+k+C+j)}else s=new t.Point(d,h),u=new t.Point(v,h),l=new t.Point(v,y),c=new t.Point(d,y);var R=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(R){var I=Math.sin(R),L=Math.cos(R),D=[L,-I,I,L];s._matMult(D),u._matMult(D),c._matMult(D),l._matMult(D)}return[{tl:s,tr:u,bl:c,br:l,tex:f.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,x),N=a.layout.get("icon-rotate").evaluate(x,{});C=new c(s,r,n,u,l,f,o,v,g,!1,e.overscaling,N),k=4*F.length;var B=e.iconSizeData,z=null;"source"===B.functionType?(z=[t.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(x,{})])[0]>O&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===B.functionType&&((z=[t.SIZE_PACK_FACTOR*E.compositeIconSizes[0].evaluate(x,{}),t.SIZE_PACK_FACTOR*E.compositeIconSizes[1].evaluate(x,{})])[0]>O||z[1]>O)&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,F,z,_,m,x,!1,n,T.lineStartIndex,T.lineLength)}var U=C?C.boxStartIndex:e.collisionBoxArray.length,V=C?C.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=t.SymbolBucket.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(n.x,n.y,R.length>0?R[0]:-1,R.length>1?R[1]:-1,j,L,D,U,V,u,A,M,k,0)}(e,u,s,r,i,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,m,E,k,d,x,C,A,v,n,o,a)};if("line"===M)for(var I=0,L=function(e,n,r,i,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var f=u[c],p=u[c+1];f.x<0&&p.x<0||(f.x<0?f=new t.Point(0,f.y+(p.y-f.y)*((0-f.x)/(p.x-f.x)))._round():p.x<0&&(p=new t.Point(0,f.y+(p.y-f.y)*((0-f.x)/(p.x-f.x)))._round()),f.y<0&&p.y<0||(f.y<0?f=new t.Point(f.x+(p.x-f.x)*((0-f.y)/(p.y-f.y)),0)._round():p.y<0&&(p=new t.Point(f.x+(p.x-f.x)*((0-f.y)/(p.y-f.y)),0)._round()),f.x>=i&&p.x>=i||(f.x>=i?f=new t.Point(i,f.y+(p.y-f.y)*((i-f.x)/(p.x-f.x)))._round():p.x>=i&&(p=new t.Point(i,f.y+(p.y-f.y)*((i-f.x)/(p.x-f.x)))._round()),f.y>=o&&p.y>=o||(f.y>=o?f=new t.Point(f.x+(p.x-f.x)*((o-f.y)/(p.y-f.y)),o)._round():p.y>=o&&(p=new t.Point(f.x+(p.x-f.x)*((o-f.y)/(p.y-f.y)),o)._round()),l&&f.equals(l[l.length-1])||(l=[f],a.push(l)),l.push(p)))))}return a}(n.geometry,0,0,t.EXTENT,t.EXTENT);I<L.length;I+=1)for(var D=L[I],F=0,N=l(D,w,T,r.vertical||r.horizontal,i,24,_,e.overscaling,t.EXTENT);F<N.length;F+=1){var B=N[F],z=r.horizontal;z&&P(e,z.text,j,B)||R(D,B)}else if("line-center"===M)for(var U=0,V=n.geometry;U<V.length;U+=1){var G=V[U];if(G.length>1){var W=u(G,T,r.vertical||r.horizontal,i,24,_);W&&R(G,W)}}else if("Polygon"===n.type)for(var q=0,H=t.classifyRings(n.geometry,0);q<H.length;q+=1){var X=H[q],Z=y(X,16);R(X[0],new t.Anchor(Z.x,Z.y,0))}else if("LineString"===n.type)for(var Y=0,K=n.geometry;Y<K.length;Y+=1){var J=K[Y];R(J,new t.Anchor(J[0].x,J[0].y,0))}else if("Point"===n.type)for(var Q=0,$=n.geometry;Q<$.length;Q+=1)for(var tt=0,et=$[Q];tt<et.length;tt+=1){var nt=et[tt];R([nt],new t.Anchor(nt.x,nt.y,0))}}b.murmur3=_,b.murmur2=x;var O=65535;function S(e,n,r,i,o,a,s,u,l,c,f,p){var h=function(e,n,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=r.layout.get("text-offset").evaluate(o,{}).map(function(t){return 24*t}),l=n.positionedGlyphs,c=[],f=0;f<l.length;f++){var p=l[f],h=a[p.fontStack],d=h&&h[p.glyph];if(d){var y=d.rect;if(y){var v=t.GLYPH_PBF_BORDER+1,g=d.metrics.advance*p.scale/2,m=i?[p.x+g,p.y]:[0,0],b=i?[0,0]:[p.x+g+u[0],p.y+u[1]],_=(d.metrics.left-v)*p.scale-g+b[0],x=(-d.metrics.top-v)*p.scale+b[1],w=_+y.w*p.scale,E=x+y.h*p.scale,O=new t.Point(_,x),S=new t.Point(w,x),P=new t.Point(_,E),C=new t.Point(w,E);if(i&&p.vertical){var T=new t.Point(-g,g),k=-Math.PI/2,A=new t.Point(5,0);O._rotateAround(k,T)._add(A),S._rotateAround(k,T)._add(A),P._rotateAround(k,T)._add(A),C._rotateAround(k,T)._add(A)}if(s){var M=Math.sin(s),j=Math.cos(s),R=[j,-M,M,j];O._matMult(R),S._matMult(R),P._matMult(R),C._matMult(R)}c.push({tl:O,tr:S,bl:P,br:C,tex:y,writingMode:n.writingMode,glyphOffset:m})}}}return c}(0,r,i,o,a,f),d=e.textSizeData,y=null;return"source"===d.functionType?(y=[t.SIZE_PACK_FACTOR*i.layout.get("text-size").evaluate(a,{})])[0]>O&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((y=[t.SIZE_PACK_FACTOR*p.compositeTextSizes[0].evaluate(a,{}),t.SIZE_PACK_FACTOR*p.compositeTextSizes[1].evaluate(a,{})])[0]>O||y[1]>O)&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,h,y,s,o,a,l,n,u.lineStartIndex,u.lineLength),c.push(e.text.placedSymbolArray.length-1),4*h.length}function P(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}var C=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=t.potpack(r),f=c.w,p=c.h,h=new t.AlphaImage({width:f||1,height:p||1});for(var d in e){var y=e[d];for(var v in y){var g=y[+v];if(g&&0!==g.bitmap.width&&0!==g.bitmap.height){var m=n[d][v].rect;t.AlphaImage.copy(g.bitmap,h,{x:0,y:0},{x:m.x+1,y:m.y+1},g.bitmap)}}}this.image=h,this.positions=n};t.register("GlyphAtlas",C);var T=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};function k(e,n){for(var r=new t.EvaluationParameters(n),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}T.prototype.parse=function(e,n,r,i){var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var a=new t.DictionaryCoder(Object.keys(e.layers).sort()),s=new t.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var u,l,c,f,p={},h={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=n.familiesBySource[this.source];for(var y in d){var v=e.layers[y];if(v){1===v.version&&t.warnOnce('Vector tile source "'+o.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var g=a.encode(y),m=[],b=0;b<v.length;b++){var _=v.feature(b);m.push({feature:_,index:b,sourceLayerIndex:g})}for(var x=0,E=d[y];x<E.length;x+=1){var O=E[x],S=O[0];S.minzoom&&o.zoom<Math.floor(S.minzoom)||S.maxzoom&&o.zoom>=S.maxzoom||"none"!==S.visibility&&(k(O,o.zoom),(p[S.id]=S.createBucket({index:s.bucketLayerIDs.length,layers:O,zoom:o.zoom,pixelRatio:o.pixelRatio,overscaling:o.overscaling,collisionBoxArray:o.collisionBoxArray,sourceLayerIndex:g,sourceID:o.source})).populate(m,h),s.bucketLayerIDs.push(O.map(function(t){return t.id})))}}}var P=t.mapObject(h.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(P).length?r.send("getGlyphs",{uid:this.uid,stacks:P},function(t,e){u||(u=t,l=e,M.call(o))}):l={};var T=Object.keys(h.iconDependencies);T.length?r.send("getImages",{icons:T},function(t,e){u||(u=t,c=e,M.call(o))}):c={};var A=Object.keys(h.patternDependencies);function M(){if(u)return i(u);if(l&&c&&f){var e=new C(l),n=new t.ImageAtlas(c,f);for(var r in p){var o=p[r];o instanceof t.SymbolBucket?(k(o.layers,this.zoom),w(o,l,e.positions,c,n.iconPositions,this.showCollisionBoxes)):o.hasPattern&&(o instanceof t.LineBucket||o instanceof t.FillBucket||o instanceof t.FillExtrusionBucket)&&(k(o.layers,this.zoom),o.addFeatures(h,n.patternPositions))}this.status="done",i(null,{buckets:t.values(p).filter(function(t){return!t.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n})}}A.length?r.send("getImages",{icons:A},function(t,e){u||(u=t,f=e,M.call(o))}):f={},M.call(this)};var A="undefined"!=typeof performance,M={getEntriesByName:function(t){return!!(A&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(A&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(A&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(A&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(A&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},j=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},M.mark(this._marks.start)};function R(e,n){var r=t.getArrayBuffer(e.request,function(e,r){e?n(e):r&&n(null,{vectorTile:new t.mvt.VectorTile(new t.Protobuf(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires})});return function(){r.cancel(),n()}}j.prototype.finish=function(){M.mark(this._marks.end);var t=M.getEntriesByName(this._marks.measure);return 0===t.length&&(M.measure(this._marks.measure,this._marks.start,this._marks.end),t=M.getEntriesByName(this._marks.measure),M.clearMarks(this._marks.start),M.clearMarks(this._marks.end),M.clearMeasures(this._marks.measure)),t},M.Performance=j;var I=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||R,this.loading={},this.loaded={}};I.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new M.Performance(e.request),a=this.loading[i]=new T(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return a.status="done",r.loaded[i]=a,n(e);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(o){var f=o.finish();f&&(c.resourceTiming=JSON.parse(JSON.stringify(f)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,l,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},I.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},I.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},I.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var L=function(){this.loaded={}};L.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=new t.DEMData(r,o,i);this.loaded=this.loaded||{},this.loaded[r]=a,n(null,a)},L.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var D={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function F(t){var e=0;if(t&&t.length>0){e+=Math.abs(N(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(N(t[n]))}return e}function N(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(B(t[o][0])-B(e[0]))*Math.sin(B(n[1]));s=s*D.RADIUS*D.RADIUS/2}return s}function B(t){return t*Math.PI/180}var z={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return F(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=F(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:N};function U(t,e){return function(n){return t(n,e)}}function V(t,e){e=!!e,t[0]=G(t[0],e);for(var n=1;n<t.length;n++)t[n]=G(t[n],!e);return t}function G(t,e){return function(t){return z.ring(t)>=0}(t)===e?t:t.reverse()}var W=t.mvt.VectorTileFeature.prototype.toGeoJSON,q=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};q.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var f=c[l];u.push(new t.Point(f[0],f[1]))}o.push(u)}return o},q.prototype.toGeoJSON=function(t,e,n){return W.call(this,t,e,n)};var H=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};H.prototype.feature=function(t){return new q(this._features[t])};var X=t.vectorTile.VectorTileFeature,Z=Y;function Y(t,e){this.options=e||{},this.features=t,this.length=t.length}function K(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}Y.prototype.feature=function(t){return new K(this.features[t],this.options.extent)},K.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},K.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},K.prototype.toGeoJSON=X.prototype.toGeoJSON;var J=tt,Q=tt,$=Z;function tt(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,et,t.layers[n])}(e,n),n.finish()}function et(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,nt,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,st,o[n])}function nt(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,rt,t),e.writeVarintField(3,n.type),e.writeMessage(4,at,n)}function rt(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var f=c+":"+l,p=a[f];void 0===p&&(i.push(l),p=i.length-1,a[f]=p),e.writeVarint(p)}}function it(t,e){return(e<<3)+(7&t)}function ot(t){return t<<1^t>>31}function at(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),e.writeVarint(it(1,l));for(var c=3===r?u.length-1:u.length,f=0;f<c;f++){1===f&&1!==r&&e.writeVarint(it(2,c-1));var p=u[f].x-i,h=u[f].y-o;e.writeVarint(ot(p)),e.writeVarint(ot(h)),i+=p,o+=h}3===r&&e.writeVarint(it(7,1))}}function st(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function ut(t,e,n,r){lt(t,n,r),lt(e,2*n,2*r),lt(e,2*n+1,2*r+1)}function lt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ct(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function ft(t,e,n,r,i){return new pt(t,e,n,r,i)}function pt(t,e,n,r,i){e=e||ht,n=n||dt,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=n(t[o]);!function t(e,n,r,i,o,a){if(!(o-i<=r)){var s=Math.floor((i+o)/2);!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*c/s+f)),Math.min(o,Math.floor(r+(s-u)*c/s+f)),a)}var p=n[2*r+a],h=i,d=o;for(ut(e,n,i,r),n[2*o+a]>p&&ut(e,n,i,o);h<d;){for(ut(e,n,h,d),h++,d--;n[2*h+a]<p;)h++;for(;n[2*d+a]>p;)d--}n[2*i+a]===p?ut(e,n,i,d):ut(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,n,s,i,o,a%2),t(e,n,r,i,s-1,a+1),t(e,n,r,s+1,o,a+1)}}(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function ht(t){return t[0]}function dt(t){return t[1]}function yt(t){this.options=xt(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function vt(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function gt(t){return{type:"Feature",id:t.id,properties:mt(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,r}function mt(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return xt(xt({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function bt(t){return t/360+.5}function _t(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function xt(t,e){for(var n in e)t[n]=e[n];return t}function wt(t){return t.x}function Et(t){return t.y}function Ot(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function St(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Pt(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)Pt(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)Pt(t,e[r][i])}(i),i}function Pt(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Ct(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)Tt(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)Tt(i[l],s);else if("LineString"===o)kt(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)s=[],kt(i[l],s,a,!1),t.push(St(u,"LineString",s,e.properties));return}At(i,s,a,!1)}else if("Polygon"===o)At(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)Ct(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];At(i[l],c,a,!0),s.push(c)}}t.push(St(u,o,s,e.properties))}}function Tt(t,e){e.push(Mt(t[0])),e.push(jt(t[1])),e.push(0)}function kt(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=Mt(t[s][0]),l=jt(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=e[n],c=e[n+1],f=e[r],p=e[r+1],h=n+3;h<r;h+=3){var d=Ot(e[h],e[h+1],l,c,f,p);if(d>a)o=h,a=d;else if(d===a){var y=Math.abs(h-s);y<u&&(o=h,u=y)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function At(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];kt(t[i],o,n,r),e.push(o)}}function Mt(t){return t/360+.5}function jt(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Rt(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],f=c.geometry,p=c.type,h=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(h>=n&&d<r)u.push(c);else if(!(d<n||h>=r)){var y=[];if("Point"===p||"MultiPoint"===p)It(f,y,n,r,i);else if("LineString"===p)Lt(f,y,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)Ft(f,y,n,r,i,!1);else if("Polygon"===p)Ft(f,y,n,r,i,!0);else if("MultiPolygon"===p)for(var v=0;v<f.length;v++){var g=[];Ft(f[v],g,n,r,i,!0),g.length&&y.push(g)}if(y.length){if(s.lineMetrics&&"LineString"===p){for(v=0;v<y.length;v++)u.push(St(c.id,p,y[v],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===y.length?(p="LineString",y=y[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===y.length?"Point":"MultiPoint"),u.push(St(c.id,p,y,c.tags))}}}return u.length?u:null}function It(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function Lt(t,e,n,r,i,o,a){for(var s,u,l=Dt(t),c=0===i?Bt:zt,f=t.start,p=0;p<t.length-3;p+=3){var h=t[p],d=t[p+1],y=t[p+2],v=t[p+3],g=t[p+4],m=0===i?h:d,b=0===i?v:g,_=!1;a&&(s=Math.sqrt(Math.pow(h-v,2)+Math.pow(d-g,2))),m<n?b>=n&&(u=c(l,h,d,v,g,n),a&&(l.start=f+s*u)):m>=r?b<r&&(u=c(l,h,d,v,g,r),a&&(l.start=f+s*u)):Nt(l,h,d,y),b<n&&m>=n&&(u=c(l,h,d,v,g,n),_=!0),b>r&&m<=r&&(u=c(l,h,d,v,g,r),_=!0),!o&&_&&(a&&(l.end=f+s*u),e.push(l),l=Dt(t)),a&&(f+=s)}var x=t.length-3;h=t[x],d=t[x+1],y=t[x+2],(m=0===i?h:d)>=n&&m<=r&&Nt(l,h,d,y),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&Nt(l,l[0],l[1],l[2]),l.length&&e.push(l)}function Dt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Ft(t,e,n,r,i,o){for(var a=0;a<t.length;a++)Lt(t[a],e,n,r,i,o,!1)}function Nt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function Bt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function zt(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function Ut(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Vt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Vt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(Vt(o.geometry[s][l],e));i.push(u)}n.push(St(o.id,a,i,o.tags))}return n}function Vt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function Gt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(Wt(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var f=[];for(i=0;i<l[r].length;i+=2)f.push(Wt(l[r][i],l[r][i+1],e,o,a,s));u.geometry.push(f)}}return t.transformed=!0,t}function Wt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function qt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,Ht(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,f=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),f>a.maxY&&(a.maxY=f)}return a}function Ht(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Xt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Xt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)Xt(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in c={},e.tags)c[f]=e.tags[f];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function Xt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function Zt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Ct(n,t.features[r],e,r);else"Feature"===t.type?Ct(n,t,e):Ct(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=Rt(t,1,-1-n,n,0,-1,2,e),o=Rt(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=Rt(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=Ut(i,1).concat(r)),o&&(r=r.concat(Ut(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yt(t,e,n){return 32*((1<<t)*n+e)+t}function Kt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new H(r.features),o=J(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}J.fromVectorTileJs=Q,J.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new Z(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return tt({layers:n})},J.GeoJSONWrapper=$,pt.prototype={range:function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var f=l.pop(),p=l.pop(),h=l.pop();if(p-h<=a)for(var d=h;d<=p;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var y=Math.floor((h+p)/2);s=e[2*y],u=e[2*y+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[y]);var v=(f+1)%2;(0===f?n<=s:r<=u)&&(l.push(h),l.push(y-1),l.push(v)),(0===f?i>=s:o>=u)&&(l.push(y+1),l.push(p),l.push(v))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),f=a.pop();if(c-f<=o)for(var p=f;p<=c;p++)ct(e[2*p],e[2*p+1],n,r)<=u&&s.push(t[p]);else{var h=Math.floor((f+c)/2),d=e[2*h],y=e[2*h+1];ct(d,y,n,r)<=u&&s.push(t[h]);var v=(l+1)%2;(0===l?n-i<=d:r-i<=y)&&(a.push(f),a.push(h-1),a.push(v)),(0===l?n+i>=d:r+i>=y)&&(a.push(h+1),a.push(c),a.push(v))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}},yt.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;for(var r,i,o=[],a=0;a<t.length;a++)t[a].geometry&&o.push((r=a,{x:bt((i=t[a].geometry.coordinates)[0]),y:_t(i[1]),zoom:1/0,index:r,parentId:-1}));this.trees[this.options.maxZoom+1]=ft(o,wt,Et,this.options.nodeSize,Float32Array),e&&console.timeEnd(n);for(var s=this.options.maxZoom;s>=this.options.minZoom;s--){var u=+Date.now();o=this._cluster(o,s),this.trees[s]=ft(o,wt,Et,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",s,o.length,+Date.now()-u)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=u.range(bt(n),_t(o),bt(i),_t(r)),c=[],f=0;f<l.length;f++){var p=u.points[l[f]];c.push(p.numPoints?gt(p):this.points[p.index])}return c},getChildren:function(t){var e=t>>5,n=t%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],l=0;l<s.length;l++){var c=i.points[s[l]];c.parentId===t&&u.push(c.numPoints?gt(c):this.points[c.index])}if(0===u.length)throw new Error(r);return u},getLeaves:function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,r,i){for(var o=this.getChildren(e),a=0;a<o.length;a++){var s=o[a].properties;if(s&&s.cluster?i+s.point_count<=r?i+=s.point_count:i=this._appendLeaves(t,s.cluster_id,n,r,i):i<r?i++:t.push(o[a]),t.length===n)break}return i},_addTileFeatures:function(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=e[t[a]],u={type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?mt(s):this.points[s.index].properties},l=s.numPoints?s.id:this.points[s.index].id;void 0!==l&&(u.id=l),o.features.push(u)}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=0;i<t.length;i++){var o=t[i];if(!(o.zoom<=e)){o.zoom=e;var a=this.trees[e+1],s=a.within(o.x,o.y,r),u=o.numPoints||1,l=o.x*u,c=o.y*u,f=null;this.options.reduce&&(f=this.options.initial(),this._accumulate(f,o));for(var p=(i<<5)+(e+1),h=0;h<s.length;h++){var d=a.points[s[h]];if(!(d.zoom<=e)){d.zoom=e;var y=d.numPoints||1;l+=d.x*y,c+=d.y*y,u+=y,d.parentId=p,this.options.reduce&&this._accumulate(f,d)}}1===u?n.push(o):(o.parentId=p,n.push(vt(l/u,c/u,p,u,f)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.index].properties);this.options.reduce(t,n)}},Zt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Zt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,f=Yt(e,n,r),p=this.tiles[f];if(!p&&(l>1&&console.time("creation"),p=this.tiles[f]=qt(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var h="z"+e;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(p.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==t.length){l>1&&console.time("clipping");var y,v,g,m,b,_,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,O=1+x;y=v=g=m=null,b=Rt(t,c,n-x,n+E,0,p.minX,p.maxX,u),_=Rt(t,c,n+w,n+O,0,p.minX,p.maxX,u),t=null,b&&(y=Rt(b,c,r-x,r+E,1,p.minY,p.maxY,u),v=Rt(b,c,r+w,r+O,1,p.minY,p.maxY,u),b=null),_&&(g=Rt(_,c,r-x,r+E,1,p.minY,p.maxY,u),m=Rt(_,c,r+w,r+O,1,p.minY,p.maxY,u),_=null),l>1&&console.timeEnd("clipping"),s.push(y||[],e+1,2*n,2*r),s.push(v||[],e+1,2*n,2*r+1),s.push(g||[],e+1,2*n+1,2*r),s.push(m||[],e+1,2*n+1,2*r+1)}}},Zt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=Yt(t,e=(e%a+a)%a,n);if(this.tiles[s])return Gt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,f=n;!u&&l>0;)l--,c=Math.floor(c/2),f=Math.floor(f/2),u=this.tiles[Yt(l,c,f)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,f),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,f,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?Gt(this.tiles[s],i):null):null};var Jt=function(e){function n(t,n,r){e.call(this,t,n,Kt),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var e=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(n&&n.request&&n.request.collectResourceTiming)&&new M.Performance(n.request);this.loadGeoJSON(n,function(i,o){if(i||!o)return e(i);if("object"!=typeof o)return e(new Error("Input data is not a valid GeoJSON object."));!function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(U(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=V(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(U(V,e))),t}(e,n);default:return e}}(o,!0);try{t._geoJSONIndex=n.cluster?(a=n.superclusterOptions,new yt(a)).load(o.features):new Zt(o,n.geojsonVtOptions)}catch(i){return e(i)}t.loaded={};var a,s={};if(r){var u=r.finish();u&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(u)))}e(null,s)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded,i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},n.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},n.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},n}(I),Qt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:I,geojson:Jt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Qt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Qt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Qt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Qt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Qt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Qt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Qt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Qt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Qt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},Qt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Qt.prototype.loadRTLTextPlugin=function(e,n,r){try{t.plugin.isLoaded()||(this.self.importScripts(n),r(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){r(t.toString())}},Qt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},Qt.prototype.getWorkerSource=function(t,e,n){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var i={send:function(e,n,i){r.actor.send(e,n,i,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t))}return this.workerSources[t][e][n]},Qt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new L),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new Qt(self),Qt}),r(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(e,n,r){var i=t.window.document.createElement(e);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},r=t.window.document?t.window.document.documentElement.style:null;function i(t){if(!r)return null;for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var s=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",l,l),t.window.removeEventListener("test",l,l)}catch(t){u=!1}n.addEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&u?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},n.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&u?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};n.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,n){var r=e.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new t.Point(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},n.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var f={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return 0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":"https://events.mapbox.com/events/v2"},REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},p="See https://www.mapbox.com/api-documentation/#access-tokens";function h(t,e){var n=_(f.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!f.REQUIRE_ACCESS_TOKEN)return x(t);if(!(e=e||f.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+p);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+p);return t.params.push("access_token="+e),x(t)}function d(t){return 0===t.indexOf("mapbox:")}var y=function(t,e){if(!d(t))return t;var n=_(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),h(n,e)},v=function(t,e,n,r){var i=_(t);return d(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,h(i,r)):(i.path+=""+e+n,x(i))},g=/(\.(png|jpg)\d*)(?=$)/,m=function(e,n,r){if(!n||!d(n))return e;var i=_(e),o=t.browser.devicePixelRatio>=2||512===r?"@2x":"",a=t.browser.supportsWebp?".webp":"$1";return i.path=i.path.replace(g,""+o+a),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(f.ACCESS_TOKEN||""))}(i.params),x(i)},b=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _(t){var e=t.match(b);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function x(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var w=function(){this.eventData={anonId:null,lastSuccess:null,accessToken:f.ACCESS_TOKEN},this.queue=[],this.pending=!1,this.pendingRequest=null};w.prototype.postTurnstileEvent=function(t){f.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return/(mapbox\.c)(n|om)/i.test(t)})&&this.queueRequest(Date.now())},w.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()},w.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n="mapbox.turnstileEventData:"+(f.ACCESS_TOKEN||""),r=t.storageAvailable("localStorage"),i=!!this.eventData.accessToken&&this.eventData.accessToken!==f.ACCESS_TOKEN;if(i&&(this.eventData.anonId=this.eventData.lastSuccess=null),(!this.eventData.anonId||!this.eventData.lastSuccess)&&r)try{var o=t.window.localStorage.getItem(n);o&&(this.eventData=JSON.parse(o))}catch(e){t.warnOnce("Unable to read from LocalStorage")}t.validateUuid(this.eventData.anonId)||(this.eventData.anonId=t.uuid(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var s=new Date(this.eventData.lastSuccess),u=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;i=i||l>=1||l<-1||s.getDate()!==u.getDate()}if(!i)return this.processRequests();var c=_(f.EVENTS_URL);c.params.push("access_token="+(f.ACCESS_TOKEN||""));var p={url:x(c),headers:{"Content-Type":"text/plain"}},h=JSON.stringify([{event:"appUserTurnstile",created:new Date(a).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.50.0","enabled.telemetry":!1,userId:this.eventData.anonId}]);this.pendingRequest=t.postData(p,h,function(i){if(e.pendingRequest=null,!i){if(e.eventData.lastSuccess=a,e.eventData.accessToken=f.ACCESS_TOKEN,r)try{t.window.localStorage.setItem(n,JSON.stringify(e.eventData))}catch(e){t.warnOnce("Unable to write to LocalStorage")}e.processRequests()}})}};var E=new w,O=E.postTurnstileEvent.bind(E),S=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};S.prototype.isLoaded=function(){return this.loaded},S.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e],i=r.ids,o=r.callback;this._notify(i,o)}this.requestors=[]}},S.prototype.getImage=function(t){return this.images[t]},S.prototype.addImage=function(t,e){this.images[t]=e},S.prototype.removeImage=function(t){delete this.images[t],delete this.patterns[t]},S.prototype.listImages=function(){return Object.keys(this.images)},S.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},S.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},S.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},S.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var r=this.getImage(e);if(!r)return null;var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);return this.patterns[e]={bin:i,position:o},this._updatePatternAtlas(),o},S.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},S.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,f=this.images[s].data,p=f.width,h=f.height;t.RGBAImage.copy(f,a,{x:0,y:0},{x:l,y:c},{width:p,height:h}),t.RGBAImage.copy(f,a,{x:0,y:h-1},{x:l,y:c-1},{width:p,height:1}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:l,y:c+h},{width:p,height:1}),t.RGBAImage.copy(f,a,{x:p-1,y:0},{x:l-1,y:c},{width:1,height:h}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:l+p,y:c},{width:1,height:h})}this.dirty=!0};var P=T,C=1e20;function T(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function k(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var u=0;u<n;u++)r[u]=t[u*e+s];for(A(r,i,o,a,n),u=0;u<n;u++)t[u*e+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(A(r,i,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(i[s])}}function A(t,e,n,r,i){n[0]=0,r[0]=-C,r[1]=+C;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+C}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}T.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?C:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?C:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(k(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),k(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var M=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};M.prototype.setURL=function(t){this.url=t},M.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1){var u=s[a];i.push({stack:o,id:u})}t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))e(null,{stack:n,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],M.loadGlyphRange(n,s,r.url,r.requestTransform,function(t,e){if(e)for(var n in e)o.glyphs[+n]=e[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(t,e);delete o.requests[s]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}})},M.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&(t.isChar["CJK Unified Ideographs"](r)||t.isChar["Hangul Syllables"](r))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new M.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},M.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i(function(t,e){if(!d(t))return t;var n=_(t);return n.path="/fonts/v1"+n.path,h(n,e)}(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n.data);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},M.TinySDF=P;var j=function(){this.specification=t.styleSpec.light.position};j.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},j.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var R=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new j,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),I=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(R),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e){if(!this._validate(t.validateLight,e))for(var n in e){var r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n){return t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),L=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};L.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},L.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,u=s/2,l=e.length%2==1,c=-r;c<=r;c++)for(var f=this.nextRow+r+c,p=this.width*f,h=l?-e[e.length-1]:0,d=e[0],y=1,v=0;v<this.width;v++){for(;d<v/s;)h=d,d+=e[y],l&&y===e.length-1&&(d+=e[0]),y++;var g=Math.abs(v-h*s),m=Math.abs(v-d*s),b=Math.min(g,m),_=y%2==1,x=void 0;if(n){var w=r?c/r*(u+1):0;if(_){var E=u-Math.abs(w);x=Math.sqrt(b*b+E*E)}else x=u-Math.sqrt(b*b+w*w)}else x=(_?1:-1)*b;this.data[3+4*(p+v)]=Math.max(0,Math.min(255,x+128))}var O={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,O},L.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var D=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],s=new e.Actor(a,r,this.id);s.name="Worker "+o,this.actors.push(s)}};function F(e,n,r){var i=function(e,n){if(e)return r(e);if(n){var i=t.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),r(null,i)}};return e.url?t.getJSON(n(y(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}D.prototype.broadcast=function(e,n,r){r=r||function(){},t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r)},D.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},D.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=t.Actor;var N=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};N.prototype.wrap=function(){return new N(t.wrap(this.lng,-180,180),this.lat)},N.prototype.toArray=function(){return[this.lng,this.lat]},N.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},N.prototype.toBounds=function(t){var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new B(new N(this.lng-n,this.lat-e),new N(this.lng+n,this.lat+e))},N.convert=function(t){if(t instanceof N)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new N(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new N(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var B=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};B.prototype.setNorthEast=function(t){return this._ne=t instanceof N?new N(t.lng,t.lat):N.convert(t),this},B.prototype.setSouthWest=function(t){return this._sw=t instanceof N?new N(t.lng,t.lat):N.convert(t),this},B.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof N)e=t,n=t;else{if(!(t instanceof B))return Array.isArray(t)?t.every(Array.isArray)?this.extend(B.convert(t)):this.extend(N.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new N(e.lng,e.lat),this._ne=new N(n.lng,n.lat)),this},B.prototype.getCenter=function(){return new N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},B.prototype.getSouthWest=function(){return this._sw},B.prototype.getNorthEast=function(){return this._ne},B.prototype.getNorthWest=function(){return new N(this.getWest(),this.getNorth())},B.prototype.getSouthEast=function(){return new N(this.getEast(),this.getSouth())},B.prototype.getWest=function(){return this._sw.lng},B.prototype.getSouth=function(){return this._sw.lat},B.prototype.getEast=function(){return this._ne.lng},B.prototype.getNorth=function(){return this._ne.lat},B.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},B.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},B.prototype.isEmpty=function(){return!(this._sw&&this._ne)},B.convert=function(t){return!t||t instanceof B?t:new B(t)};var z=function(t,e,n){this.bounds=B.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};z.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},z.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),r=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),i=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<r&&t.y>=n&&t.y<i},z.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},z.prototype.latY=function(e,n){var r=t.clamp(Math.sin(Math.PI/180*e),-.9999,.9999),i=Math.pow(2,n)/(2*Math.PI);return Math.pow(2,n-1)+.5*Math.log((1+r)/(1-r))*-i};var U=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(r,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new z(r.bounds,e.minzoom,e.maxzoom)),O(r.tiles),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var r=m(e.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function o(t,r){return e.aborted?n(null):t&&404!==t.status?n(t):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",i,o.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",i,o.bind(this),e.workerID)},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),V=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=F(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new z(r.bounds,e.minzoom,e.maxzoom)),O(r.tiles),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=m(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),G=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=m(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=t.browser.getImageData(i),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",a,function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(V),W=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1}},r.workerOptions)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r,this.workerID),this},n.prototype._updateWorkerData=function(e){var n=this,r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(e,n){var r=this,i=void 0===e.workerID?"loadTile":"reloadTile",o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(i,o,function(t,o){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),q=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(e,n){var r=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(i,o){i?r.fire(new t.ErrorEvent(i)):o&&(r.image=t.browser.getImageData(o),e&&(r.coordinates=e),n&&n(),r._finishLoading())})},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){this.coordinates=e;var n=this.map,r=e.map(function(t){return n.transform.locationCoordinate(N.convert(t)).zoomTo(0)}),i=this.centerCoord=t.getCoordinatesCenter(r);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.tileID=new t.CanonicalTileID(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var o=r.map(function(e){var n=e.zoomTo(i.zoom);return new t.Point(Math.round((n.column-i.column)*t.EXTENT),Math.round((n.row-i.row)*t.EXTENT))});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(o[2].x,o[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),H=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var o=i[r];e.urls.push(e.map._transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(q),X=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(q),Z={vector:U,raster:V,"raster-dem":G,geojson:W,video:H,image:q,canvas:X},Y=function(e,n,r,i){var o=new Z[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function K(t,e,n,r,i){var o=i.maxPitchScaleFactor(),a=t.tilesIn(n,o);a.sort(J);for(var s=[],u=0,l=a;u<l.length;u+=1){var c=l[u];s.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(e,t._state,c.queryGeometry,c.scale,r,i,o,t.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}var f=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],f=u[l]=u[l]||{},p=e[l]=e[l]||[],h=0,d=c;h<d.length;h+=1){var y=d[h];f[y.featureIndex]||(f[y.featureIndex]=!0,p.push(y.feature))}}return e}(s);for(var p in f)f[p].forEach(function(e){var n=t.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=n});return f}function J(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var Q=function(t,e){this.max=t,this.onRemove=e,this.reset()};Q.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},Q.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Q.prototype.has=function(t){return t.wrapped().key in this.data},Q.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Q.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Q.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Q.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},Q.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var $=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};$.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},$.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},$.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var tt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},et=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};et.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},et.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},et.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=e.attributes[r.name];void 0!==i&&t.enableVertexAttribArray(i)}},et.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[tt[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},et.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var nt=function(e){this.context=e,this.default=t.Color.transparent,this.current=this.default,this.dirty=!1};nt.prototype.get=function(){return this.current},nt.prototype.setDefault=function(){this.set(this.default)},nt.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a&&!0!==this.dirty||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)};var rt=function(t){this.context=t,this.default=1,this.current=this.default,this.dirty=!1};rt.prototype.get=function(){return this.current},rt.prototype.setDefault=function(){this.set(this.default)},rt.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.clearDepth(t),this.current=t,this.dirty=!1)};var it=function(t){this.context=t,this.default=0,this.current=this.default,this.dirty=!1};it.prototype.get=function(){return this.current},it.prototype.setDefault=function(){this.set(this.default)},it.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.clearStencil(t),this.current=t,this.dirty=!1)};var ot=function(t){this.context=t,this.default=[!0,!0,!0,!0],this.current=this.default,this.dirty=!1};ot.prototype.get=function(){return this.current},ot.prototype.setDefault=function(){this.set(this.default)},ot.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&!0!==this.dirty||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)};var at=function(t){this.context=t,this.default=!0,this.current=this.default,this.dirty=!1};at.prototype.get=function(){return this.current},at.prototype.setDefault=function(){this.set(this.default)},at.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.depthMask(t),this.current=t,this.dirty=!1)};var st=function(t){this.context=t,this.default=255,this.current=this.default,this.dirty=!1};st.prototype.get=function(){return this.current},st.prototype.setDefault=function(){this.set(this.default)},st.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.stencilMask(t),this.current=t,this.dirty=!1)};var ut=function(t){this.context=t,this.default={func:t.gl.ALWAYS,ref:0,mask:255},this.current=this.default,this.dirty=!1};ut.prototype.get=function(){return this.current},ut.prototype.setDefault=function(){this.set(this.default)},ut.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask&&!0!==this.dirty||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)};var lt=function(t){this.context=t;var e=this.context.gl;this.default=[e.KEEP,e.KEEP,e.KEEP],this.current=this.default,this.dirty=!1};lt.prototype.get=function(){return this.current},lt.prototype.setDefault=function(){this.set(this.default)},lt.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&!0!==this.dirty||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)};var ct=function(t){this.context=t,this.default=!1,this.current=this.default,this.dirty=!1};ct.prototype.get=function(){return this.current},ct.prototype.setDefault=function(){this.set(this.default)},ct.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}};var ft=function(t){this.context=t,this.default=[0,1],this.current=this.default,this.dirty=!1};ft.prototype.get=function(){return this.current},ft.prototype.setDefault=function(){this.set(this.default)},ft.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&!0!==this.dirty||(this.context.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)};var pt=function(t){this.context=t,this.default=!1,this.current=this.default,this.dirty=!1};pt.prototype.get=function(){return this.current},pt.prototype.setDefault=function(){this.set(this.default)},pt.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}};var ht=function(t){this.context=t,this.default=t.gl.LESS,this.current=this.default,this.dirty=!1};ht.prototype.get=function(){return this.current},ht.prototype.setDefault=function(){this.set(this.default)},ht.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.depthFunc(t),this.current=t,this.dirty=!1)};var dt=function(t){this.context=t,this.default=!1,this.current=this.default,this.dirty=!1};dt.prototype.get=function(){return this.current},dt.prototype.setDefault=function(){this.set(this.default)},dt.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}};var yt=function(t){this.context=t;var e=this.context.gl;this.default=[e.ONE,e.ZERO],this.current=this.default,this.dirty=!1};yt.prototype.get=function(){return this.current},yt.prototype.setDefault=function(){this.set(this.default)},yt.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&!0!==this.dirty||(this.context.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)};var vt=function(e){this.context=e,this.default=t.Color.transparent,this.current=this.default,this.dirty=!1};vt.prototype.get=function(){return this.current},vt.prototype.setDefault=function(){this.set(this.default)},vt.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a&&!0!==this.dirty||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)};var gt=function(t){this.context=t,this.default=this.context.gl.FUNC_ADD,this.current=this.default,this.dirty=!1};gt.prototype.get=function(){return this.current},gt.prototype.setDefault=function(){this.set(this.default)},gt.prototype.set=function(t){t===this.current&&!0!==this.dirty||(this.context.gl.blendEquation(t),this.current=t,this.dirty=!1)};var mt=function(t){this.context=t,this.default=!1,this.current=this.default,this.dirty=!1};mt.prototype.get=function(){return this.current},mt.prototype.setDefault=function(){this.set(this.default)},mt.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}};var bt=function(t){this.context=t;var e=this.context.gl;this.default=e.BACK,this.current=this.default,this.dirty=!1};bt.prototype.get=function(){return this.current},bt.prototype.setDefault=function(){this.set(this.default)},bt.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.cullFace(t),this.current=t,this.dirty=!1)};var _t=function(t){this.context=t;var e=this.context.gl;this.default=e.CCW,this.current=this.default,this.dirty=!1};_t.prototype.get=function(){return this.current},_t.prototype.setDefault=function(){this.set(this.default)},_t.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.frontFace(t),this.current=t,this.dirty=!1)};var xt=function(t){this.context=t,this.default=null,this.current=this.default,this.dirty=!1};xt.prototype.get=function(){return this.current},xt.prototype.setDefault=function(){this.set(this.default)},xt.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.useProgram(t),this.current=t,this.dirty=!1)};var wt=function(t){this.context=t,this.default=t.gl.TEXTURE0,this.current=this.default,this.dirty=!1};wt.prototype.get=function(){return this.current},wt.prototype.setDefault=function(){this.set(this.default)},wt.prototype.set=function(t){this.current===t&&!0!==this.dirty||(this.context.gl.activeTexture(t),this.current=t,this.dirty=!1)};var Et=function(t){this.context=t;var e=this.context.gl;this.default=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.current=this.default,this.dirty=!1};Et.prototype.get=function(){return this.current},Et.prototype.setDefault=function(){this.set(this.default)},Et.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&!0!==this.dirty||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)};var Ot=function(t){this.context=t,this.default=null,this.current=this.default,this.dirty=!1};Ot.prototype.get=function(){return this.current},Ot.prototype.setDefault=function(){this.set(this.default)},Ot.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}};var St=function(t){this.context=t,this.default=null,this.current=this.default,this.dirty=!1};St.prototype.get=function(){return this.current},St.prototype.setDefault=function(){this.set(this.default)},St.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}};var Pt=function(t){this.context=t,this.default=null,this.current=this.default,this.dirty=!1};Pt.prototype.get=function(){return this.current},Pt.prototype.setDefault=function(){this.set(this.default)},Pt.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}};var Ct=function(t){this.context=t,this.default=null,this.current=this.default,this.dirty=!1};Ct.prototype.get=function(){return this.current},Ct.prototype.setDefault=function(){this.set(this.default)},Ct.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}};var Tt=function(t){this.context=t,this.default=null,this.current=this.default,this.dirty=!1};Tt.prototype.get=function(){return this.current},Tt.prototype.setDefault=function(){this.set(this.default)},Tt.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1};var kt=function(t){this.context=t,this.default=null,this.current=this.default,this.dirty=!1};kt.prototype.get=function(){return this.current},kt.prototype.setDefault=function(){this.set(this.default)},kt.prototype.set=function(t){(this.current!==t&&this.context.extVertexArrayObject||!0===this.dirty)&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t,this.dirty=!1)};var At=function(t){this.context=t,this.default=4,this.current=this.default,this.dirty=!1};At.prototype.get=function(){return this.current},At.prototype.setDefault=function(){this.set(this.default)},At.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}};var Mt=function(t){this.context=t,this.default=!1,this.current=this.default,this.dirty=!1};Mt.prototype.get=function(){return this.current},Mt.prototype.setDefault=function(){this.set(this.default)},Mt.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}};var jt=function(t){this.context=t,this.default=!1,this.current=this.default,this.dirty=!1};jt.prototype.get=function(){return this.current},jt.prototype.setDefault=function(){this.set(this.default)},jt.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}};var Rt=function(t,e){this.context=t,this.default=null,this.current=this.default,this.dirty=!1,this.parent=e};Rt.prototype.get=function(){return this.current};var It=function(t){function e(e,n){t.call(this,e,n),this.dirty=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDefault=function(){this.set(this.default)},e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(Rt),Lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDefault=function(){this.set(this.default)},e.prototype.set=function(t){if(this.current!==t||!0===this.dirty){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Rt),Dt=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=t.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new It(t,i),this.depthAttachment=new Lt(t,i)};Dt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var Ft=function(t,e,n){this.func=t,this.mask=e,this.range=n};Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);var Nt=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};Nt.disabled=new Nt({func:519,mask:0},0,0,7680,7680,7680);var Bt=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Bt.disabled=new Bt(Bt.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Bt.unblended=new Bt(Bt.Replace,t.Color.transparent,[!0,!0,!0,!0]),Bt.alphaBlended=new Bt([1,771],t.Color.transparent,[!0,!0,!0,!0]);var zt=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};zt.disabled=new zt(!1,1029,2305),zt.backCCW=new zt(!0,1029,2305);var Ut=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new nt(this),this.clearDepth=new rt(this),this.clearStencil=new it(this),this.colorMask=new ot(this),this.depthMask=new at(this),this.stencilMask=new st(this),this.stencilFunc=new ut(this),this.stencilOp=new lt(this),this.stencilTest=new ct(this),this.depthRange=new ft(this),this.depthTest=new pt(this),this.depthFunc=new ht(this),this.blend=new dt(this),this.blendFunc=new yt(this),this.blendColor=new vt(this),this.blendEquation=new gt(this),this.cullFace=new mt(this),this.cullFaceSide=new bt(this),this.frontFace=new _t(this),this.program=new xt(this),this.activeTexture=new wt(this),this.viewport=new Et(this),this.bindFramebuffer=new Ot(this),this.bindRenderbuffer=new St(this),this.bindTexture=new Pt(this),this.bindVertexBuffer=new Ct(this),this.bindElementBuffer=new Tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new kt(this),this.pixelStoreUnpack=new At(this),this.pixelStoreUnpackPremultiplyAlpha=new Mt(this),this.pixelStoreUnpackFlipY=new jt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};Ut.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ut.prototype.createIndexBuffer=function(t,e){return new $(this,t,e)},Ut.prototype.createVertexBuffer=function(t,e,n){return new et(this,t,e,n)},Ut.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},Ut.prototype.createFramebuffer=function(t,e){return new Dt(this,t,e)},Ut.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Ut.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Ut.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Ut.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Ut.prototype.setColorMode=function(e){t.isEqual(e.blendFunction,Bt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Ut.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Vt=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=Y(n,r,i,this),this._tiles={},this._cache=new Q(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(Wt)},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in n._tiles)n._isIdRenderable(+i,e)&&r.push(+i);return e?r.sort(function(e,r){var i=n._tiles[e].tileID,o=n._tiles[r].tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}):r.sort(Wt)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){for(var n=t.overscaledZ-1;n>=e;n--){var r=t.scaledTo(n);if(!r)return;var i=String(r.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(r))return this._cache.get(r)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){var r={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var u=this._tiles[s];this._setTileReloadTimer(s,u)}}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(qt(this._source.type)){for(var l={},c={},f=0,p=Object.keys(u);f<p.length;f+=1){var h=p[f],d=u[h],y=r._tiles[h];if(y&&!(y.fadeEndTime&&y.fadeEndTime<=t.browser.now())){var v=r.findLoadedParent(d,a);v&&(r._addTile(v.tileID),l[v.tileID.key]=v.tileID),c[h]=d}}for(var g in this._retainLoadedChildren(c,o,s,u),l)u[g]||(r._coveredTiles[g]=!0,u[g]=l[g])}for(var m in u)r._tiles[m].clearFadeHold();for(var b=0,_=t.keysDifference(this._tiles,u);b<_.length;b+=1){var x=_[b],w=r._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(r.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||r._removeTile(x)}}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],f=this._addTile(c);r[c.key]=c,f.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,r);for(var p=0,h=t;p<h.length;p+=1){var d=h[p],y=this._tiles[d.key];if(!y.hasData()){if(e+1>this._source.maxzoom){var v=d.children(this._source.maxzoom)[0],g=this.getTile(v);if(g&&g.hasData()){r[v.key]=v;continue}}else{var m=d.children(this._source.maxzoom);if(r[m[0].key]&&r[m[1].key]&&r[m[2].key]&&r[m[3].key])continue}for(var b=y.wasRequested(),_=d.overscaledZ-1;_>=o;--_){var x=d.scaledTo(_);if(i[x.key])break;if(i[x.key]=!0,!(y=this.getTile(x))&&b&&(y=this._addTile(x)),y&&(r[x.key]=x,b=y.wasRequested(),y.hasData()))break}}}return r},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n){for(var r=[],i=this.getIds(),o=1/0,a=1/0,s=-1/0,u=-1/0,l=e[0].zoom,c=0;c<e.length;c++){var f=e[c];o=Math.min(o,f.column),a=Math.min(a,f.row),s=Math.max(s,f.column),u=Math.max(u,f.row)}for(var p=0;p<i.length;p++){var h=this._tiles[i[p]];if(!h.holdingForFade()){var d=h.tileID,y=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),v=n*h.queryPadding*t.EXTENT/h.tileSize/y,g=[Gt(d,new t.Coordinate(o,a,l)),Gt(d,new t.Coordinate(s,u,l))];if(g[0].x-v<t.EXTENT&&g[0].y-v<t.EXTENT&&g[1].x+v>=0&&g[1].y+v>=0){for(var m=[],b=0;b<e.length;b++)m.push(Gt(d,e[b]));r.push({tile:h,tileID:d,queryGeometry:[m],scale:y})}}}return r},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=e.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(qt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)},n.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},n}(t.Evented);function Gt(e,n){var r=n.zoomTo(e.canonical.z);return new t.Point((r.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*t.EXTENT,(r.row-e.canonical.y)*t.EXTENT)}function Wt(t,e){return t%32-e%32||e-t}function qt(t){return"raster"===t||"image"===t||"video"===t}function Ht(){return new t.window.Worker(zr.workerUrl)}Vt.maxOverzooming=10,Vt.maxUnderzooming=3;var Xt,Zt=function(){this.active={}};function Yt(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach(function(t){t in n&&(r[t]=n[t])}),r}function Kt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Yt(t[r],e[t[r].ref]));return t}Zt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Zt.workerCount;)this.workers.push(new Ht);return this.active[t]=!0,this.workers.slice()},Zt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},Zt.workerCount=Math.max(Math.floor(t.browser.hardwareConcurrency/2),1);var Jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Qt(t,e,n){n.push({command:Jt.addSource,args:[t,e[t]]})}function $t(t,e,n){e.push({command:Jt.removeSource,args:[t]}),n[t]=!0}function te(t,e,n,r){$t(t,n,r),Qt(t,e,n)}function ee(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;return!0}function ne(e,n,r,i,o,a){var s;for(s in e=e||{},n=n||{},e)e.hasOwnProperty(s)&&(t.isEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.isEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function re(t){return t.id}function ie(t,e){return t[e.id]=e,t}var oe=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};oe.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},oe.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},oe.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},oe.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},oe.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},oe.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],f=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-f,y1:c-f,x2:l+f,y2:c+f})}return o?a.filter(o):a}var p={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,r,this._queryCell,a,p,o),i?a.length>0:a},oe.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[],c={hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,u,this._queryCellCircle,l,c,i),r?l.length>0:l},oe.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},oe.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},oe.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},oe.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,f=0,p=l;f<p.length;f+=1){var h=p[f];if(!u.box[h]){u.box[h]=!0;var d=4*h;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[h]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[h],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var y=this.circleCells[i];if(null!==y)for(var v=this.circles,g=0,m=y;g<m.length;g+=1){var b=m[g];if(!u.circle[b]){u.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(v[_],v[_+1],v[_+2],t,e,n,r)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var x=v[_],w=v[_+1],E=v[_+2];o.push({key:this.circleKeys[b],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},oe.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var f=this.bboxes,p=0,h=c;p<h.length;p+=1){var d=h[p];if(!l.box[d]){l.box[d]=!0;var y=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[y+0],f[y+1],f[y+2],f[y+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var v=this.circleCells[i];if(null!==v)for(var g=this.circles,m=0,b=v;m<b.length;m+=1){var _=b[m];if(!l.circle[_]){l.circle[_]=!0;var x=3*_;if(this._circlesCollide(g[x],g[x+1],g[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}},oe.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),p=u;p<=c;p++)for(var h=l;h<=f;h++){var d=this.xCellCount*h+p;if(i.call(this,t,e,n,r,d,o,a,s))return}},oe.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},oe.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},oe.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},oe.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var f=u-s,p=c-l;return f*f+p*p<=n*n};var ae=t.properties.layout;function se(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.identity(a),t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):(t.scale(a,a,[i.width/2,-i.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function ue(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.multiply(a,a,e),t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/i.width,2/i.height,1])),a}function le(e,n){var r=[e.x,e.y,0,1];be(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function ce(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function fe(e,n,r,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom,ae.properties[i?"text-size":"icon-size"]),f=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var h=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,y=r.transform.width/r.transform.height,v=!1,g=0;g<d.length;g++){var m=d.get(g);if(m.hidden||m.writingMode===t.WritingMode.vertical&&!v)me(m.numGlyphs,p);else{v=!1;var b=[m.anchorX,m.anchorY,0,1];if(t.transformMat4(b,b,n),ce(b,f)){var _=.5+b[3]/r.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(l,c,m),w=s?x*_:x/_,E=new t.Point(m.anchorX,m.anchorY),O=le(E,o).point,S={},P=de(m,w,!1,u,n,o,a,e.glyphOffsetArray,h,p,O,E,S,y);v=P.useVertical,(P.notEnoughRoom||v||P.needsFlipping&&de(m,w,!0,u,n,o,a,e.glyphOffsetArray,h,p,O,E,S,y).notEnoughRoom)&&me(m.numGlyphs,p)}else me(m.numGlyphs,p)}}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function pe(t,e,n,r,i,o,a,s,u,l,c,f){var p=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,y=e.getoffsetX(s.glyphStartIndex),v=e.getoffsetX(p-1),g=ve(t*y,n,r,i,o,a,s.segment,h,d,u,l,c,f);if(!g)return null;var m=ve(t*v,n,r,i,o,a,s.segment,h,d,u,l,c,f);return m?{first:g,last:m}:null}function he(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function de(e,n,r,i,o,a,s,u,l,c,f,p,h,d){var y,v=n/24,g=e.lineOffsetX*n,m=e.lineOffsetY*n;if(e.numGlyphs>1){var b=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=pe(v,u,g,m,r,f,p,e,l,a,h,!1);if(!w)return{notEnoughRoom:!0};var E=le(w.first.point,s).point,O=le(w.last.point,s).point;if(i&&!r){var S=he(e.writingMode,E,O,d);if(S)return S}y=[w.first];for(var P=e.glyphStartIndex+1;P<b-1;P++)y.push(ve(v*u.getoffsetX(P),g,m,r,f,p,e.segment,_,x,l,a,h,!1));y.push(w.last)}else{if(i&&!r){var C=le(p,o).point,T=e.lineStartIndex+e.segment+1,k=new t.Point(l.getx(T),l.gety(T)),A=le(k,o),M=A.signedDistanceFromCamera>0?A.point:ye(p,k,C,1,o),j=he(e.writingMode,C,M,d);if(j)return j}var R=ve(v*u.getoffsetX(e.glyphStartIndex),g,m,r,f,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,h,!1);if(!R)return{notEnoughRoom:!0};y=[R]}for(var I=0,L=y;I<L.length;I+=1){var D=L[I];t.addDynamicAttributes(c,D.point,D.angle)}return{}}function ye(t,e,n,r,i){var o=le(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function ve(e,n,r,i,o,a,s,u,l,c,f,p,h){var d=i?e-n:e+n,y=d>0?1:-1,v=0;i&&(y*=-1,v=Math.PI),y<0&&(v+=Math.PI);for(var g=y>0?u+s:u+s+1,m=g,b=o,_=o,x=0,w=0,E=Math.abs(d);x+w<=E;){if((g+=y)<u||g>=l)return null;if(_=b,void 0===(b=p[g])){var O=new t.Point(c.getx(g),c.gety(g)),S=le(O,f);if(S.signedDistanceFromCamera>0)b=p[g]=S.point;else{var P=g-y;b=ye(0===x?a:new t.Point(c.getx(P),c.gety(P)),O,_,E-x+1,f)}}x+=w,w=_.dist(b)}var C=(E-x)/w,T=b.sub(_),k=T.mult(C)._add(_);return k._add(T._unit()._perp()._mult(r*y)),{point:k,angle:v+Math.atan2(b.y-_.y,b.x-_.x),tileDistance:h?{prevTileDistance:g-y===m?0:c.gettileUnitDistanceFromAnchor(g-y),lastSegmentViewportDistance:E-x}:null}}var ge=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function me(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(ge,3*r)}}function be(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var _e=function(t,e,n){void 0===e&&(e=new oe(t.width+200,t.height+200,25)),void 0===n&&(n=new oe(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function xe(t,e,n){t[e+4]=n?1:0}function we(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}_e.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},_e.prototype.approximateTileDistance=function(t,e,n,r,i){var o=i?1:r/this.pitchfactor,a=t.lastSegmentViewportDistance*n;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},_e.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,l,c,f,p,h){var d=[],y=this.projectAnchor(l,o.anchorX,o.anchorY),v=u/24,g=o.lineOffsetX*u,m=o.lineOffsetY*u,b=new t.Point(o.anchorX,o.anchorY),_=pe(v,s,g,m,!1,le(b,c).point,b,o,a,c,{},!0),x=!1,w=!1,E=!0,O=y.perspectiveRatio*i,S=1/(i*r),P=0,C=0;_&&(P=this.approximateTileDistance(_.first.tileDistance,_.first.angle,S,y.cameraDistance,p),C=this.approximateTileDistance(_.last.tileDistance,_.last.angle,S,y.cameraDistance,p));for(var T=0;T<e.length;T+=5){var k=e[T],A=e[T+1],M=e[T+2],j=e[T+3];if(!_||j<-P||j>C)xe(e,T,!1);else{var R=this.projectPoint(l,k,A),I=M*O;if(d.length>0){var L=R.x-d[d.length-4],D=R.y-d[d.length-3];if(I*I*2>L*L+D*D&&T+8<e.length){var F=e[T+8];if(F>-P&&F<C){xe(e,T,!1);continue}}}var N=T/5;d.push(R.x,R.y,I,N),xe(e,T,!0);var B=R.x-I,z=R.y-I,U=R.x+I,V=R.y+I;if(E=E&&this.isOffscreen(B,z,U,V),w=w||this.isInsideGrid(B,z,U,V),!n&&this.grid.hitTestCircle(R.x,R.y,I,h)){if(!f)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:d,offscreen:E}},_e.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.Point(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var f={},p={},h=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));h<d.length;h+=1){var y=d[h],v=y.key;if(void 0===f[v.bucketInstanceId]&&(f[v.bucketInstanceId]={}),!f[v.bucketInstanceId][v.featureIndex]){var g=[new t.Point(y.x1,y.y1),new t.Point(y.x2,y.y1),new t.Point(y.x2,y.y2),new t.Point(y.x1,y.y2)];t.polygonIntersectsPolygon(n,g)&&(f[v.bucketInstanceId][v.featureIndex]=!0,void 0===p[v.bucketInstanceId]&&(p[v.bucketInstanceId]=[]),p[v.bucketInstanceId].push(v.featureIndex))}}return p},_e.prototype.insertCollisionBox=function(t,e,n,r,i){var o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])},_e.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},_e.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return be(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},_e.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return be(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},_e.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return be(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},_e.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},_e.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var Ee=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};Ee.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Oe=function(t,e,n,r,i){this.text=new Ee(t?t.text:null,e,n,i),this.icon=new Ee(t?t.icon:null,e,r,i)};Oe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Se=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},Pe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};Pe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var Ce=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new _e(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Pe(n)};function Te(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}Ce.prototype.placeLayerTile=function(e,n,r,i){var o=n.getBucket(e),a=n.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=n.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.EXTENT,f=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),p=se(f,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,we(n,1,this.transform.zoom)),h=se(f,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,we(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,f,p,h,l,c,r,n.holdingForFade(),i,s)}},Ce.prototype.placeLayerBucket=function(e,n,r,i,o,a,s,u,l,c){var f=e.layers[0].layout,p=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),h=f.get("text-optional"),d=f.get("icon-optional"),y=f.get("text-allow-overlap"),v=f.get("icon-allow-overlap"),g=y&&(v||!e.hasIconData()||d),m=v&&(y||!e.hasTextData()||h),b=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);for(var _=0;_<e.symbolInstances.length;_++){var x=e.symbolInstances.get(_);if(!l[x.crossTileID]){if(u){this.placements[x.crossTileID]=new Se(!1,!1,!1);continue}var w=!1,E=!1,O=!0,S=null,P=null,C=null,T=0,k=0,A=e.collisionArrays[_];A.textFeatureIndex&&(T=A.textFeatureIndex),A.textBox&&(w=(S=this.collisionIndex.placeCollisionBox(A.textBox,f.get("text-allow-overlap"),a,n,b.predicate)).box.length>0,O=O&&S.offscreen);var M=A.textCircles;if(M){var j=e.text.placedSymbolArray.get(x.horizontalPlacedTextSymbolIndex),R=t.evaluateSizeForFeature(e.textSizeData,p,j);P=this.collisionIndex.placeCollisionCircles(M,f.get("text-allow-overlap"),o,a,j,e.lineVertexArray,e.glyphOffsetArray,R,n,r,s,"map"===f.get("text-pitch-alignment"),b.predicate),w=f.get("text-allow-overlap")||P.circles.length>0,O=O&&P.offscreen}A.iconFeatureIndex&&(k=A.iconFeatureIndex),A.iconBox&&(E=(C=this.collisionIndex.placeCollisionBox(A.iconBox,f.get("icon-allow-overlap"),a,n,b.predicate)).box.length>0,O=O&&C.offscreen);var I=h||0===x.numGlyphVertices&&0===x.numVerticalGlyphVertices,L=d||0===x.numIconVertices;I||L?L?I||(E=E&&w):w=E&&w:E=w=E&&w,w&&S&&this.collisionIndex.insertCollisionBox(S.box,f.get("text-ignore-placement"),e.bucketInstanceId,T,b.ID),E&&C&&this.collisionIndex.insertCollisionBox(C.box,f.get("icon-ignore-placement"),e.bucketInstanceId,k,b.ID),w&&P&&this.collisionIndex.insertCollisionCircles(P.circles,f.get("text-ignore-placement"),e.bucketInstanceId,T,b.ID),this.placements[x.crossTileID]=new Se(w||g,E||m,O||e.justReloaded),l[x.crossTileID]=!0}}e.justReloaded=!1},Ce.prototype.commit=function(t,e){this.commitTime=e;var n=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,i=t?t.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new Oe(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new Oe(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var u in i){var l=i[u];if(!this.opacities[u]){var c=new Oe(l,r,!1,!1);c.isHidden()||(this.opacities[u]=c,n=n||l.text.placed||l.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},Ce.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},Ce.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var r=t.layers[0].layout,i=new Oe(null,0,!1,!1,!0),o=r.get("text-allow-overlap"),a=r.get("icon-allow-overlap"),s=new Oe(null,0,o&&(a||!t.hasIconData()||r.get("icon-optional")),a&&(o||!t.hasTextData()||r.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(n);for(var u=0;u<t.symbolInstances.length;u++){var l=t.symbolInstances.get(u),c=e[l.crossTileID],f=this.opacities[l.crossTileID];c?f=i:f||(f=s,this.opacities[l.crossTileID]=f),e[l.crossTileID]=!0;var p=l.numGlyphVertices>0||l.numVerticalGlyphVertices>0,h=l.numIconVertices>0;if(p){for(var d=De(f.text),y=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,v=0;v<y;v++)t.text.opacityVertexArray.emplaceBack(d);t.text.placedSymbolArray.get(l.horizontalPlacedTextSymbolIndex).hidden=f.text.isHidden(),l.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).hidden=f.text.isHidden())}if(h){for(var g=De(f.icon),m=0;m<l.numIconVertices/4;m++)t.icon.opacityVertexArray.emplaceBack(g);t.icon.placedSymbolArray.get(u).hidden=f.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var b=t.collisionArrays[u];if(b){b.textBox&&Te(t.collisionBox.collisionVertexArray,f.text.placed,!1),b.iconBox&&Te(t.collisionBox.collisionVertexArray,f.icon.placed,!1);var _=b.textCircles;if(_&&t.hasCollisionCircleData())for(var x=0;x<_.length;x+=5){var w=c||0===_[x+4];Te(t.collisionCircle.collisionVertexArray,f.text.placed,w)}}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},Ce.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},Ce.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Ce.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},Ce.prototype.setStale=function(){this.stale=!0};var ke=Math.pow(2,25),Ae=Math.pow(2,24),Me=Math.pow(2,17),je=Math.pow(2,16),Re=Math.pow(2,9),Ie=Math.pow(2,8),Le=Math.pow(2,1);function De(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*ke+e*Ae+n*Me+e*je+n*Re+e*Ie+n*Le+e}var Fe=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Fe.prototype.continuePlacement=function(t,e,n,r,i){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(r,o,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var Ne=function(t,e,n,r,i,o){this.placement=new Ce(t,i,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Ne.prototype.isDone=function(){return this._done},Ne.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[i._currentPlacementIndex]],u=i.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(i._inProgressLayer||(i._inProgressLayer=new Fe),i._inProgressLayer.continuePlacement(r[s.source],i.placement,i._showCollisionBoxes,s,a))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},Ne.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var Be=512/t.EXTENT/2,ze=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};ze.prototype.getScaledCoordinates=function(e,n){var r=n.canonical.z-this.tileID.canonical.z,i=Be/Math.pow(2,r);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*i)}},ze.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Ue=function(){this.maxCrossTileID=0};Ue.prototype.generate=function(){return++this.maxCrossTileID};var Ve=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ve.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},Ve.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,i)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var f=e.symbolInstances.get(c);f.crossTileID||(f.crossTileID=n.generate(),i[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ze(t,e.symbolInstances,e.bucketInstanceId),!0},Ve.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[t][o.crossTileID]}},Ve.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var Ge=function(){this.layerIndexes={},this.crossTileIDs=new Ue,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ge.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Ve);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Ge.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var We=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},qe=t.pick(Jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),He=t.pick(Jt,["setCenter","setZoom","setBearing","setPitch"]),Xe=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new D((Xt||(Xt=new Zt),Xt),this),this.imageManager=new S,this.glyphManager=new M(r._transformRequest,i.localIdeographFontFamily),this.lineAtlas=new L(256,512),this.crossTileSymbolIndex=new Ge,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates();var a=this;this._rtlTextPluginCallback=n.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!d(e);e=function(t,e){if(!d(t))return t;var n=_(t);return n.path="/styles/v1"+n.path,h(n,e)}(e,n.accessToken);var o=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)})},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},n.prototype._load=function(e,n){var r=this;if(!n||!We(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)r.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=function(e,n,r){var i,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(n(v(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){u=null,a||(a=t,i=e,c())}),l=t.getImage(n(v(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){l=null,a||(a=t,o=e,c())});function c(){if(a)r(a);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var s in i){var u=i[s],l=u.width,c=u.height,f=u.x,p=u.y,h=u.sdf,d=u.pixelRatio,y=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,y,{x:f,y:p},{x:0,y:0},{width:l,height:c}),n[s]={data:y,pixelRatio:d,sdf:h}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(r._spriteRequest=null,e)r.fire(new t.ErrorEvent(e));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=Kt(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var u=s[a];(u=t.createStyleLayer(u)).setEventedParent(r,{layer:{id:u.id}}),r._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=r[n],o=this._layers[i];"custom"!==o.type&&e.push(o.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var o=this._updatedSources[i];"reload"===o?this._reloadSource(i):"clear"===o&&this._clearSource(i)}for(var a in this._updatedPaintProps)this._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire(new t.Event("data",{dataType:"style"}))}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var u=0,l=this._order;u<l.length;u+=1){var c=l[u],f=this._layers[c];f.recalculate(e),!f.isHidden(e.zoom)&&f.source&&(this.sourceCaches[f.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),We(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=Kt(e.layers);var r=function(e,n){if(!e)return[{command:Jt.setStyle,args:[n]}];var r=[];try{if(!t.isEqual(e.version,n.version))return[{command:Jt.setStyle,args:[n]}];t.isEqual(e.center,n.center)||r.push({command:Jt.setCenter,args:[n.center]}),t.isEqual(e.zoom,n.zoom)||r.push({command:Jt.setZoom,args:[n.zoom]}),t.isEqual(e.bearing,n.bearing)||r.push({command:Jt.setBearing,args:[n.bearing]}),t.isEqual(e.pitch,n.pitch)||r.push({command:Jt.setPitch,args:[n.pitch]}),t.isEqual(e.sprite,n.sprite)||r.push({command:Jt.setSprite,args:[n.sprite]}),t.isEqual(e.glyphs,n.glyphs)||r.push({command:Jt.setGlyphs,args:[n.glyphs]}),t.isEqual(e.transition,n.transition)||r.push({command:Jt.setTransition,args:[n.transition]}),t.isEqual(e.light,n.light)||r.push({command:Jt.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in e=e||{},n=n||{},e)e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||$t(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.isEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&ee(e,n,o)?r.push({command:Jt.setGeoJSONSourceData,args:[o,n[o].data]}):te(o,n,r,i)):Qt(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:Jt.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){e=e||[],n=n||[];var i,o,a,s,u,l,c,f=e.map(re),p=n.map(re),h=e.reduce(ie,{}),d=n.reduce(ie,{}),y=f.slice(),v=Object.create(null);for(i=0,o=0;i<f.length;i++)a=f[i],d.hasOwnProperty(a)?o++:(r.push({command:Jt.removeLayer,args:[a]}),y.splice(y.indexOf(a,o),1));for(i=0,o=0;i<p.length;i++)a=p[p.length-1-i],y[y.length-1-i]!==a&&(h.hasOwnProperty(a)?(r.push({command:Jt.removeLayer,args:[a]}),y.splice(y.lastIndexOf(a,y.length-o),1)):o++,l=y[y.length-i],r.push({command:Jt.addLayer,args:[d[a],l]}),y.splice(y.length-i,0,a),v[a]=!0);for(i=0;i<p.length;i++)if(s=h[a=p[i]],u=d[a],!v[a]&&!t.isEqual(s,u))if(t.isEqual(s.source,u.source)&&t.isEqual(s["source-layer"],u["source-layer"])&&t.isEqual(s.type,u.type)){for(c in ne(s.layout,u.layout,r,a,null,Jt.setLayoutProperty),ne(s.paint,u.paint,r,a,null,Jt.setPaintProperty),t.isEqual(s.filter,u.filter)||r.push({command:Jt.setFilter,args:[a,u.filter]}),t.isEqual(s.minzoom,u.minzoom)&&t.isEqual(s.maxzoom,u.maxzoom)||r.push({command:Jt.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ne(s[c],u[c],r,a,c.slice(6),Jt.setPaintProperty):t.isEqual(s[c],u[c])||r.push({command:Jt.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ne(s[c],u[c],r,a,c.slice(6),Jt.setPaintProperty):t.isEqual(s[c],u[c])||r.push({command:Jt.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:Jt.removeLayer,args:[a]}),l=y[y.lastIndexOf(a)+1],r.push({command:Jt.addLayer,args:[u,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Jt.setStyle,args:[n]}]}return r}(this.serialize(),e).filter(function(t){return!(t.command in He)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in qe)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Vt(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(We(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n){this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.isEqual(r.filter,n))return null===n||void 0===n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",n)||(r.filter=t.clone(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?t.isEqual(i.getLayoutProperty(n),r)||(i.setLayoutProperty(n,r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},n.prototype.setPaintProperty=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?t.isEqual(i.getPaintProperty(n),r)||(i.setPaintProperty(n,r)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r],a=parseInt(e.id,10);void 0!==o?"vector"!==o.getSource().type||i?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(i,a,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n],o=parseInt(e.id,10);if(void 0!==i)if("vector"!==i.getSource().type||r){if(!(isNaN(o)||o<0))return i.getFeatureState(r,o);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],i=0,o=t;i<o.length;i+=1){var a=o[i][r];if(a)for(var s=0,u=a;s<u.length;s+=1){var l=u[s];e.push(l)}}return e},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[],c=e.map(function(t){return r.pointCoordinate(t)});for(var f in this.sourceCaches)n.layers&&!i[f]||l.push(K(this.sourceCaches[f],this._layers,c,n,r));return this.placement&&l.push(function(t,e,n,r,i,o){for(var a={},s=i.queryRenderedSymbols(n),u=[],l=0,c=Object.keys(s).map(Number);l<c.length;l+=1){var f=c[l];u.push(o[f])}u.sort(J);for(var p=function(){var e=d[h],n=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,r.filter,r.layers,t);for(var i in n){var o=a[i]=a[i]||[],u=n[i];u.sort(function(t,n){var r=e.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-t.featureIndex});for(var l=0,c=u;l<c.length;l+=1){var f=c[l];o.push(f.feature)}}},h=0,d=u;h<d.length;h+=1)p();var y=function(n){a[n].forEach(function(r){var i=t[n],o=e[i.source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o})};for(var v in a)y(v);return a}(this._layers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(l)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in e)if(!t.isEqual(e[i],n[i])){r=!0;break}if(r){var o={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(o)}},n.prototype._validate=function(e,n,r,i,o){return(!o||!1!==o.validate)&&We(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i){for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=l[u],f=this._layers[c];if("symbol"===f.type){if(!s[f.source]){var p=this.sourceCaches[f.source];s[f.source]=p.getRenderableIds(!0).map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var h=this.crossTileSymbolIndex.addLayer(f,s[f.source],e.center.lng);o=o||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new Ne(e,this._order,d,n,r,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var y=0,v=this._order;y<v.length;y+=1){var g=v[y],m=this._layers[g];"symbol"===m.type&&this.placement.updateLayerOpacities(m,s[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n}(t.Evented);Xe.getSourceType=function(t){return Z[t]},Xe.setSourceType=function(t,e){Z[t]=e},Xe.registerForPluginAvailability=t.registerForPluginAvailability;var Ze=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ye={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_color(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"\nuniform vec2 u_texsize;\nuniform sampler2D u_image;\nuniform float u_fade;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_fade) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_fade) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec4 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileZoomRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileZoomRatio, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n\nvoid main() {\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform float u_vertical_gradient;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize highp float base\n    #pragma mapbox: initialize highp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_fade);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_height_factor;\nuniform vec4 u_scale;\nuniform float u_vertical_gradient;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_texsize;\nuniform float u_fade;\nuniform mediump vec4 u_scale;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float pixelRatio = u_scale.x;\n    float tileZoomRatio = u_scale.y;\n    float fromScale = u_scale.z;\n    float toScale = u_scale.w;\n\n    vec2 display_size_a = vec2((pattern_br_a.x - pattern_tl_a.x) / pixelRatio, (pattern_br_a.y - pattern_tl_a.y) / pixelRatio);\n    vec2 display_size_b = vec2((pattern_br_b.x - pattern_tl_b.x) / pixelRatio, (pattern_br_b.y - pattern_tl_b.y) / pixelRatio);\n\n    vec2 pattern_size_a = vec2(display_size_a.x * fromScale / tileZoomRatio, display_size_a.y);\n    vec2 pattern_size_b = vec2(display_size_b.x * toScale / tileZoomRatio, display_size_b.y);\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_a.y + 2.0) / 2.0) / pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (pattern_size_b.y + 2.0) / 2.0) / pattern_size_b.y);\n    vec2 pos_a = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n    // float tileRatio = u_scale.y;\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 256.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 256.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},Ke=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Je=function(t){var e=Ye[t],n={};e.fragmentSource=e.fragmentSource.replace(Ke,function(t,e,r,i,o){return n[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(Ke,function(t,e,r,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return n[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = a_"+o+";\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})};for(var Qe in Ye)Je(Qe);var $e=Ye,tn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};tn.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,n,r,i,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},tn.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var f=u;f<s;f++)c.disableVertexAttribArray(f)}e.enableAttributes(c,t);for(var p=0,h=n;p<h.length;p+=1)h[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,y=n;d<y.length;d+=1){var v=y[d];v.bind(),v.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},tn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var en=function(e,n,r,i,o){var a=e.gl;this.program=a.createProgram();var s=r.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));o&&s.push("#define OVERDRAW_INSPECTOR;");var u=s.concat($e.prelude.fragmentSource,n.fragmentSource).join("\n"),l=s.concat($e.prelude.vertexSource,n.vertexSource).join("\n"),c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,u),a.compileShader(c),a.attachShader(this.program,c);var f=a.createShader(a.VERTEX_SHADER);a.shaderSource(f,l),a.compileShader(f),a.attachShader(this.program,f);for(var p=r.layoutAttributes||[],h=0;h<p.length;h++)a.bindAttribLocation(this.program,h,p[h].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},y=0;y<this.numAttributes;y++){var v=a.getActiveAttrib(this.program,y);v&&(this.attributes[v.name]=a.getAttribLocation(this.program,v.name))}for(var g=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),m=0;m<g;m++){var b=a.getActiveUniform(this.program,m);b&&(d[b.name]=a.getUniformLocation(this.program,b.name))}this.fixedUniforms=i(e,d),this.binderUniforms=r.getUniforms(e,d)};function nn(e,n,r){var i=1/we(r,1,n.transform.tileZoom),o=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,n.transform.tileZoom)/o,s=a*(r.tileID.canonical.x+r.tileID.wrap*o),u=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,u>>16],u_pixel_coord_lower:[65535&s,65535&u]}}en.prototype.draw=function(t,e,n,r,i,o,a,s,u,l,c,f,p,h,d,y){var v,g=t.gl;for(var m in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[m].set(a[m]);h&&h.setUniforms(t,this.binderUniforms,f,{zoom:p});for(var b=(v={},v[g.LINES]=2,v[g.TRIANGLES]=3,v[g.LINE_STRIP]=1,v)[e],_=0,x=c.get();_<x.length;_+=1){var w=x[_],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new tn)).bind(t,this,u,h?h.getPaintVertexBuffers():[],l,w.vertexOffset,d,y),g.drawElements(e,w.primitiveLength*b,g.UNSIGNED_SHORT,w.primitiveOffset*b*2)}};var rn=function(e,n,r){var i=n.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=t.create$2();"viewport"===i.properties.get("anchor")&&t.fromRotation(s,-n.transform.angle),t.transformMat3(a,a,s);var u=i.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r}},on=function(e,n,r,i,o,a){return t.extend(rn(e,n,r),nn(o,n,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},an=function(e,n,r){var i=t.create();t.ortho(i,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:r,u_opacity:n}},sn=function(t){return{u_matrix:t}},un=function(e,n,r,i){return t.extend(sn(e),nn(r,n,i))},ln=function(t,e){return{u_matrix:t,u_world:e}},cn=function(e,n,r,i,o){return t.extend(un(e,n,r,i),{u_world:o})},fn=function(t,e,n,r){var i,o,a=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=we(n,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}},pn=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},hn=function(t,e,n){var r=we(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},dn=function(t,e){return{u_matrix:t,u_color:e}},yn=function(t){return{u_matrix:t}},vn=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:we(e,1,n),u_intensity:r}},gn=function(e,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);return"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle),{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),!0),u_image:0,u_latrange:function(e,n){var r=n.toCoordinate(),i=new t.Coordinate(r.column,r.row+1,r.zoom);return[e.transform.coordinateLocation(r).lat,e.transform.coordinateLocation(i).lat]}(e,n.tileID),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}},mn=function(e,n){var r=e.dem.dim,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[2*r,2*r],u_zoom:e.tileID.overscaledZ,u_maxzoom:n}},bn=function(t,e,n){var r=t.transform;return{u_matrix:On(t,e,n),u_ratio:1/we(e,1,r.zoom),u_gl_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},_n=function(e,n,r){return t.extend(bn(e,n,r),{u_image:0})},xn=function(e,n,r,i){var o=e.transform,a=En(n,o);return{u_matrix:On(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/we(n,1,o.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,a,i.fromScale,i.toScale],u_fade:i.t,u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},wn=function(e,n,r,i,o){var a=e.transform,s=e.lineAtlas,u=En(n,a),l="round"===r.layout.get("line-cap"),c=s.getDash(i.from,l),f=s.getDash(i.to,l),p=c.width*o.fromScale,h=f.width*o.toScale;return t.extend(bn(e,n,r),{u_patternscale_a:[u/p,-c.height/2],u_patternscale_b:[u/h,-f.height/2],u_sdfgamma:s.width/(256*Math.min(p,h)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:f.y,u_mix:o.t})};function En(t,e){return 1/we(t,1,e.tileZoom)}function On(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Sn=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(i.paint.get("raster-hue-rotate"))};var o,a},Pn=function(t,e,n,r,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Cn=function(e,n,r,i,o,a,s,u,l,c,f){var p=o.transform;return t.extend(Pn(e,n,r,i,o,a,s,u,l,c),{u_gamma_scale:i?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_is_halo:+f})},Tn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},kn=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from),o=n.imageManager.getPattern(t.to),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,f=c*(r.tileID.canonical.x+r.tileID.wrap*l),p=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/we(r,1,n.transform.tileZoom),u_pixel_coord_upper:[f>>16,p>>16],u_pixel_coord_lower:[65535&f,65535&p]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},An={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},extrusionTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:pn,collisionCircle:pn,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_image:new t.Uniform1i(e,n.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Mn(e,n){for(var r=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],s=r.slice(i+1);jn(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}function jn(e,n,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var u=n.children(1/0),l=0;l<u.length;l++)jn(e,u[l],r.slice(a),i,o);return}}var c=n.overscaledZ-e.overscaledZ,f=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));o[f.key]=o[f.key]||f}function Rn(t,e,n,r,i){for(var o=t.context,a=o.gl,s=i?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),u=0;u<r.length;u++){var l=r[u],c=e.getTile(l),f=c.getBucket(n);if(f){var p=i?f.collisionCircle:f.collisionBox;p&&s.draw(o,i?a.TRIANGLES:a.LINES,Ft.disabled,Nt.disabled,t.colorModeForRenderPass(),zt.disabled,hn(l.posMatrix,t.transform,c),n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,t.transform.zoom,null,null,p.collisionVertexBuffer)}}}var In=t.identity(new Float32Array(16)),Ln=t.properties.layout;function Dn(e,n,r,i,o,a,s,u,l,c,f,p){for(var h,d,y=e.context,v=y.gl,g=e.transform,m="map"===u,b="map"===l,_=m&&"point"!==r.layout.get("symbol-placement"),x=m&&!b&&!_,w=b?e.depthModeForSublayer(0,Ft.ReadOnly):Ft.disabled,E=0,O=i;E<O.length;E+=1){var S=O[E],P=n.getTile(S),C=P.getBucket(r);if(C){var T=o?C.text:C.icon;if(T&&T.segments.get().length){var k=T.programConfigurations.get(r.id),A=o||C.sdfIcons,M=o?C.textSizeData:C.iconSizeData;h||(h=e.useProgram(A?"symbolSDF":"symbolIcon",k),d=t.evaluateSizeForZoom(M,g.zoom,Ln.properties[o?"text-size":"icon-size"])),y.activeTexture.set(v.TEXTURE0);var j=void 0;if(o)P.glyphAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),j=P.glyphAtlasTexture.size;else{var R=1!==r.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear,I=b||0!==g.pitch;P.imageAtlasTexture.bind(A||e.options.rotating||e.options.zooming||R||I?v.LINEAR:v.NEAREST,v.CLAMP_TO_EDGE),j=P.imageAtlasTexture.size}var L=we(P,1,e.transform.zoom),D=se(S.posMatrix,b,m,e.transform,L),F=ue(S.posMatrix,b,m,e.transform,L);_&&fe(C,S.posMatrix,e,o,D,F,b,c);var N=e.translatePosMatrix(S.posMatrix,P,a,s),B=_?In:D,z=e.translatePosMatrix(F,P,a,s,!0),U=void 0;if(A){var V=0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);U=Cn(M.functionType,d,x,b,e,N,B,z,o,j,!0),V&&Fn(T,r,e,h,w,f,p,U),U.u_is_halo=0}else U=Pn(M.functionType,d,x,b,e,N,B,z,o,j);Fn(T,r,e,h,w,f,p,U)}}}}function Fn(t,e,n,r,i,o,a,s){var u=n.context,l=u.gl;r.draw(u,l.TRIANGLES,i,o,a,zt.disabled,s,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,e.paint,n.transform.zoom,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Nn(t,e,n,r,i,o,a){var s,u,l,c,f,p=t.context.gl,h=n.paint.get("fill-pattern"),d=h&&h.constantOr(1),y=n.getCrossfadeParameters();a?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(u=d?"fillPattern":"fill",s=p.TRIANGLES);for(var v=0,g=r;v<g.length;v+=1){var m=g[v],b=e.getTile(m);if(!d||b.patternsLoaded()){var _=b.getBucket(n);if(_){var x=_.programConfigurations.get(n.id),w=t.useProgram(u,x);d&&(t.context.activeTexture.set(p.TEXTURE0),b.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(y));var E=h.constantOr(null);if(E&&b.imageAtlas){var O=b.imageAtlas.patternPositions[E.to],S=b.imageAtlas.patternPositions[E.from];O&&S&&x.setConstantPatternPositions(O,S)}var P=t.translatePosMatrix(m.posMatrix,b,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=_.indexBuffer2,f=_.segments2;var C=[p.drawingBufferWidth,p.drawingBufferHeight];l="fillOutlinePattern"===u&&d?cn(P,t,y,b,C):ln(P,C)}else c=_.indexBuffer,f=_.segments,l=d?un(P,t,y,b):sn(P);w.draw(t.context,s,i,t.stencilModeForClipping(m),o,zt.disabled,l,n.id,_.layoutVertexBuffer,c,f,n.paint,t.transform.zoom,x)}}}}function Bn(e,n){var r=e.context,i=r.gl,o=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new t.Texture(r,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:t.Color.transparent}),r.setStencilMode(Nt.disabled),r.setDepthMode(new Ft(i.LEQUAL,Ft.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}function zn(t,e,n){var r=e.viewportFrame;if(r){var i=t.context,o=i.gl;i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.useProgram("extrusionTexture").draw(i,o.TRIANGLES,Ft.disabled,Nt.disabled,t.colorModeForRenderPass(),zt.disabled,an(t,n,0),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}function Un(t,e,n,r,i,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var l=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=gn(t,e,n);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?l.draw(a,s.TRIANGLES,r,i,o,zt.disabled,c,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):l.draw(a,s.TRIANGLES,r,i,o,zt.disabled,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function Vn(e,n,r,i,o,a,s){var u=e.context,l=u.gl;if(n.dem&&n.dem.data){var c=n.dem.dim,f=n.dem.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(n.tileSize),n.demTexture){var p=n.demTexture;p.update(f,{premultiply:!1}),p.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(u,f,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var h=n.fbo;if(!h){var d=new t.Texture(u,{width:c,height:c,data:null},l.RGBA);d.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=n.fbo=u.createFramebuffer(c,c)).colorAttachment.set(d.texture)}u.bindFramebuffer.set(h.framebuffer),u.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,o,a,s,zt.disabled,mn(n,i),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Gn(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),f=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-f)>Math.abs(e.tileID.overscaledZ-f),h=p&&e.refreshedUponExpiration?1:t.clamp(p?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}function Wn(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),u=Ft.disabled,l=Nt.disabled,c=e.colorModeForRenderPass(),f="$debug";s.draw(i,o.LINE_STRIP,u,l,c,zt.disabled,dn(a,t.Color.red),f,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var p=function(t,e,n,r){r=r||1;var i,o,a,s,u,l,c,f,p=[];for(i=0,o=t.length;i<o;i++)if(u=qn[t[i]]){for(f=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?f=null:(l=e+u[1][a]*r,c=200-u[1][a+1]*r,f&&p.push(f.x,f.y,l,c),f={x:l,y:c});e+=u[0]*r}return p}(r.toString(),50,0,5),h=new t.StructArrayLayout2i4,d=new t.StructArrayLayout2ui4,y=0;y<p.length;y+=2)h.emplaceBack(p[y],p[y+1]),d.emplaceBack(y,y+1);for(var v=i.createVertexBuffer(h,Ze.members),g=i.createIndexBuffer(d),m=t.SegmentVector.simpleSegment(0,0,h.length/2,h.length/2),b=n.getTile(r).tileSize,_=t.EXTENT/(Math.pow(2,e.transform.zoom-r.overscaledZ)*b),x=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<x.length;w++){var E=x[w];s.draw(i,o.LINES,u,l,c,zt.disabled,dn(t.translate([],a,[_*E[0],_*E[1],0]),t.Color.white),f,v,g,m)}s.draw(i,o.LINES,u,l,c,zt.disabled,dn(a,t.Color.black),f,v,g,m)}var qn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Hn={symbol:function(t,e,n,r){if("translucent"===t.renderPass){var i=Nt.disabled,o=t.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&Dn(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),i,o),0!==n.paint.get("text-opacity").constantOr(1)&&Dn(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),i,o),e.map.showCollisionBoxes&&function(t,e,n,r){Rn(t,e,n,r,!1),Rn(t,e,n,r,!0)}(t,e,n,r)}},circle:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=t.context,u=s.gl,l=t.depthModeForSublayer(0,Ft.ReadOnly),c=Nt.disabled,f=t.colorModeForRenderPass(),p=0;p<r.length;p++){var h=r[p],d=e.getTile(h),y=d.getBucket(n);if(y){var v=y.programConfigurations.get(n.id);t.useProgram("circle",v).draw(s,u.TRIANGLES,l,c,f,zt.disabled,fn(t,h,d,n),n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,v)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=e.depthModeForSublayer(0,Ft.ReadOnly),u=Nt.disabled,l=new Bt([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4))}}(o,e,r),o.clear({color:t.Color.transparent});for(var c=0;c<i.length;c++){var f=i[c];if(!n.hasRenderableParent(f)){var p=n.getTile(f),h=p.getBucket(r);if(h){var d=h.programConfigurations.get(r.id),y=e.useProgram("heatmap",d),v=e.transform.zoom;y.draw(o,a.TRIANGLES,s,u,l,zt.disabled,vn(f.posMatrix,p,v,r.paint.get("heatmap-intensity")),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Ft.disabled,Nt.disabled,e.colorModeForRenderPass(),zt.disabled,function(e,n,r,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:r,u_color_ramp:i,u_opacity:n.paint.get("heatmap-opacity")}}(e,n,0,1),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,Ft.ReadOnly),u=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),f=c.constantOr(1),p=r.paint.get("line-gradient"),h=r.getCrossfadeParameters(),d=l?"lineSDF":f?"linePattern":p?"lineGradient":"line",y=e.context,v=y.gl,g=!0;if(p){y.activeTexture.set(v.TEXTURE0);var m=r.gradientTexture;if(!r.gradient)return;m||(m=r.gradientTexture=new t.Texture(y,r.gradient,v.RGBA)),m.bind(v.LINEAR,v.CLAMP_TO_EDGE)}for(var b=0,_=i;b<_.length;b+=1){var x=_[b],w=n.getTile(x);if(!f||w.patternsLoaded()){var E=w.getBucket(r);if(E){var O=E.programConfigurations.get(r.id),S=e.context.program.get(),P=e.useProgram(d,O),C=g||P.program!==S,T=c.constantOr(null);if(T&&w.imageAtlas){var k=w.imageAtlas.patternPositions[T.to],A=w.imageAtlas.patternPositions[T.from];k&&A&&O.setConstantPatternPositions(k,A)}var M=l?wn(e,w,r,l,h):f?xn(e,w,r,h):p?_n(e,w,r):bn(e,w,r);l&&(C||e.lineAtlas.dirty)?(y.activeTexture.set(v.TEXTURE0),e.lineAtlas.bind(y)):f&&(y.activeTexture.set(v.TEXTURE0),w.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),O.updatePatternPaintBuffers(h)),P.draw(y,v.TRIANGLES,s,e.stencilModeForClipping(x),u,zt.disabled,M,r.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,r.paint,e.transform.zoom,O),g=!1}}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern").constantOr(1)||1!==o.constantOr(t.Color.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";e.renderPass===u&&Nn(e,n,r,i,e.depthModeForSublayer(1,"opaque"===e.renderPass?Ft.ReadWrite:Ft.ReadOnly),s,!1),"translucent"===e.renderPass&&r.paint.get("fill-antialias")&&Nn(e,n,r,i,e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly),s,!0)}},"fill-extrusion":function(t,e,n,r){0!==n.paint.get("fill-extrusion-opacity")&&("offscreen"===t.renderPass?(Bn(t,n),function(t,e,n,r,i,o,a){for(var s=t.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),f=n.getCrossfadeParameters(),p=0,h=r;p<h.length;p+=1){var d=h[p],y=e.getTile(d),v=y.getBucket(n);if(v){var g=v.programConfigurations.get(n.id),m=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(t.context.activeTexture.set(u.TEXTURE0),y.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),g.updatePatternPaintBuffers(f));var b=l.constantOr(null);if(b&&y.imageAtlas){var _=y.imageAtlas.patternPositions[b.to],x=y.imageAtlas.patternPositions[b.from];_&&x&&g.setConstantPatternPositions(_,x)}var w=t.translatePosMatrix(d.posMatrix,y,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),E=n.paint.get("fill-extrusion-vertical-gradient"),O=c?on(w,t,E,d,f,y):rn(w,t,E);m.draw(s,s.gl.TRIANGLES,i,o,a,zt.backCCW,O,n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,n.paint,t.transform.zoom,g)}}}(t,e,n,r,new Ft(t.context.gl.LEQUAL,Ft.ReadWrite,[0,1]),Nt.disabled,t.colorModeForRenderPass())):"translucent"===t.renderPass&&zn(t,n,n.paint.get("fill-extrusion-opacity")))},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,Ft.ReadOnly),s=Nt.disabled,u=t.colorModeForRenderPass(),l=0,c=r;l<c.length;l+=1){var f=c[l],p=e.getTile(f);p.needsHillshadePrepare&&"offscreen"===t.renderPass?Vn(t,p,n,o,a,s,u):"translucent"===t.renderPass&&Un(t,p,n,a,s,u)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity"))for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=Nt.disabled,l=t.colorModeForRenderPass(),c=r.length&&r[0].overscaledZ,f=0,p=r;f<p.length;f+=1){var h=p[f],d=t.depthModeForSublayer(h.overscaledZ-c,1===n.paint.get("raster-opacity")?Ft.ReadWrite:Ft.ReadOnly,o.LESS),y=e.getTile(h),v=t.transform.calculatePosMatrix(h.toUnwrapped(),!0);y.registerFadeDuration(n.paint.get("raster-fade-duration"));var g=e.findLoadedParent(h,0),m=Gn(y,g,e,n,t.transform),b=void 0,_=void 0,x="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),y.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),g?(g.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,g.tileID.overscaledZ-y.tileID.overscaledZ),_=[y.tileID.canonical.x*b%1,y.tileID.canonical.y*b%1]):y.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var w=Sn(v,_||[0,0],b||1,m,n);a instanceof q?s.draw(i,o.TRIANGLES,d,u,l,zt.disabled,w,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments?s.draw(i,o.TRIANGLES,d,u,l,zt.disabled,w,n.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments,n.paint,t.transform.zoom):s.draw(i,o.TRIANGLES,d,u,l,zt.disabled,w,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=l||1!==r.a||1!==i?"translucent":"opaque";if(t.renderPass===c){var f=Nt.disabled,p=t.depthModeForSublayer(0,"opaque"===c?Ft.ReadWrite:Ft.ReadOnly),h=t.colorModeForRenderPass(),d=t.useProgram(l?"backgroundPattern":"background"),y=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var v=n.getCrossfadeParameters(),g=0,m=y;g<m.length;g+=1){var b=m[g],_=t.transform.calculatePosMatrix(b.toUnwrapped()),x=l?kn(_,i,t,l,{tileID:b,tileSize:u},v):Tn(_,i,r);d.draw(o,a.TRIANGLES,p,f,h,zt.disabled,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)Wn(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState()),"3d"===i.renderingMode&&(t.setCustomLayerDefaults(),Bn(t,n),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else"translucent"===t.renderPass&&("3d"===i.renderingMode?zn(t,n,1):(t.setCustomLayerDefaults(),r.setStencilMode(Nt.disabled),r.setDepthMode(Ft.disabled),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)))}},Xn=function(e,n){this.context=new Ut(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Vt.maxUnderzooming+Vt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new Ge};function Zn(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function Yn(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,f=e.dx<0,p=o;p<a;p++){var h=u*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,p+f-e.y0))+e.x0;i(Math.floor(d),Math.ceil(h),p)}}function Kn(t,e,n,r,i,o){var a,s=Zn(t,e),u=Zn(e,n),l=Zn(n,t);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy&&Yn(l,s,r,i,o),u.dy&&Yn(l,u,r,i,o)}Xn.prototype.resize=function(e,n){var r=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1){var a=o[i];this.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Xn.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Ze.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Ze.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ze.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var u=this.context.gl;this.stencilClearMode=new Nt({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},Xn.prototype.clearStencil=function(){var e=this.context,n=e.gl,r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Ft.disabled,this.stencilClearMode,Bt.disabled,zt.disabled,yn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Xn.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(Bt.disabled),e.setDepthMode(Ft.disabled);var r=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=i++;r.draw(e,n.TRIANGLES,Ft.disabled,new Nt({func:n.ALWAYS,mask:0},u,255,n.KEEP,n.KEEP,n.REPLACE),Bt.disabled,zt.disabled,yn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},Xn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Nt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},Xn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Bt([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Bt.unblended:Bt.alphaBlended},Xn.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,i=r-1+this.depthRange;return new Ft(n||this.context.gl.LEQUAL,e,[i,r])},Xn.prototype.render=function(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var r=this.style._order,i=this.style.sourceCaches;for(var o in i){var a=i[o];a.used&&a.prepare(this.context)}var s,u={},l={},c={};for(var f in i){var p=i[f];u[f]=p.getVisibleCoordinates(),l[f]=u[f].slice().reverse(),c[f]=p.getVisibleCoordinates(!0).reverse()}for(var h in i){var d=i[h],y=d.getSource();if("raster"===y.type||"raster-dem"===y.type){for(var v=[],g=0,m=u[h];g<m.length;g+=1){var b=m[g];v.push(d.getTile(b))}Mn(v,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var _=0,x=r;_<x.length;_+=1){var w=x[_],E=this.style._layers[w];if(E.hasOffscreenPass()&&!E.isHidden(this.transform.zoom)){var O=l[E.source];("custom"===E.type||O.length)&&this.renderLayer(this,i[E.source],E,O)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[r[this.currentLayer]],P=i[S.source],C=u[S.source];S.source!==s&&P&&(this.clearStencil(),P.getSource().isTileClipped&&this._renderTileClippingMasks(C)),this.renderLayer(this,P,S,C),s=S.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<r.length;this.currentLayer++){var T=this.style._layers[r[this.currentLayer]],k=i[T.source],A=("symbol"===T.type?c:l)[T.source];T.source!==s&&k&&(this.clearStencil(),k.getSource().isTileClipped&&this._renderTileClippingMasks(u[T.source])),this.renderLayer(this,k,T,A),s=T.source}if(this.options.showTileBoundaries)for(var M in i){Hn.debug(this,i[M],u[M]);break}this.setCustomLayerDefaults()},Xn.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},Xn.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,Hn[n.type](t,e,n,r))},Xn.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:we(n,r[0],this.transform.zoom),o?r[1]:we(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},Xn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},Xn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},Xn.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),n=this.imageManager.getPattern(t.to);return!e||!n},Xn.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new en(this.context,$e[t],e,An[t],this._showOverdrawInspector)),this.cache[n]},Xn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Xn.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var Jn=function(t,e,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new N(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Qn={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Jn.prototype.clone=function(){var t=new Jn(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Qn.minZoom.get=function(){return this._minZoom},Qn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Qn.maxZoom.get=function(){return this._maxZoom},Qn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Qn.renderWorldCopies.get=function(){return this._renderWorldCopies},Qn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Qn.worldSize.get=function(){return this.tileSize*this.scale},Qn.centerPoint.get=function(){return this.size._div(2)},Qn.size.get=function(){return new t.Point(this.width,this.height)},Qn.bearing.get=function(){return-this.angle/Math.PI*180},Qn.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$4(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Qn.pitch.get=function(){return this._pitch/Math.PI*180},Qn.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Qn.fov.get=function(){return this._fov/Math.PI*180},Qn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Qn.zoom.get=function(){return this._zoom},Qn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Qn.center.get=function(){return this._center},Qn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Jn.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Jn.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0),0),i=this.pointCoordinate(new t.Point(this.width,0),0),o=this.pointCoordinate(new t.Point(this.width,this.height),0),a=this.pointCoordinate(new t.Point(0,this.height),0),s=Math.floor(Math.min(r.column,i.column,o.column,a.column)),u=Math.floor(Math.max(r.column,i.column,o.column,a.column)),l=s-1;l<=u+1;l++)0!==l&&n.push(new t.UnwrappedTileID(l,e));return n},Jn.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=this.pointCoordinate(this.centerPoint,n),o=new t.Point(i.column-.5,i.row-.5);return function(e,n,r,i){void 0===i&&(i=!0);var o=1<<e,a={};function s(n,s,u){var l,c,f,p;if(u>=0&&u<=o)for(l=n;l<s;l++)c=Math.floor(l/o),f=(l%o+o)%o,0!==c&&!0!==i||(p=new t.OverscaledTileID(r,c,e,f,u),a[p.key]=p)}return Kn(n[0],n[1],n[2],0,o,s),Kn(n[2],n[3],n[0],0,o,s),Object.keys(a).map(function(t){return a[t]})}(n,[this.pointCoordinate(new t.Point(0,0),n),this.pointCoordinate(new t.Point(this.width,0),n),this.pointCoordinate(new t.Point(this.width,this.height),n),this.pointCoordinate(new t.Point(0,this.height),n)],e.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)})},Jn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Qn.unmodified.get=function(){return this._unmodified},Jn.prototype.zoomScale=function(t){return Math.pow(2,t)},Jn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Jn.prototype.project=function(e){return new t.Point(this.lngX(e.lng),this.latY(e.lat))},Jn.prototype.unproject=function(t){return new N(this.xLng(t.x),this.yLat(t.y))},Qn.x.get=function(){return this.lngX(this.center.lng)},Qn.y.get=function(){return this.latY(this.center.lat)},Qn.point.get=function(){return new t.Point(this.x,this.y)},Jn.prototype.lngX=function(t){return(180+t)*this.worldSize/360},Jn.prototype.latY=function(e){return e=t.clamp(e,-this.maxValidLatitude,this.maxValidLatitude),(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},Jn.prototype.xLng=function(t){return 360*t/this.worldSize-180},Jn.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},Jn.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},Jn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Jn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Jn.prototype.locationCoordinate=function(e){return new t.Coordinate(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Jn.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new N(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},Jn.prototype.pointCoordinate=function(e,n){void 0===n&&(n=this.tileZoom);var r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var o=r[3],a=i[3],s=r[0]/o,u=i[0]/a,l=r[1]/o,c=i[1]/a,f=r[2]/o,p=i[2]/a,h=f===p?0:(0-f)/(p-f);return new t.Coordinate(t.number(s,u,h)/this.tileSize,t.number(l,c,h)/this.tileSize,this.zoom)._zoomTo(n)},Jn.prototype.coordinatePoint=function(e){var n=e.zoomTo(this.zoom),r=[n.column*this.tileSize,n.row*this.tileSize,0,1];return t.transformMat4(r,r,this.pixelMatrix),new t.Point(r[0]/r[3],r[1]/r[3])},Jn.prototype.getBounds=function(){return(new B).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Jn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new B([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jn.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jn.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},Jn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var f=this.latRange;o=this.latY(f[1]),e=(a=this.latY(f[0]))-o<l.y?l.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=this.lngX(p[0]),n=(u=this.lngX(p[1]))-s<l.x?l.x/(u-s):0}var h=Math.max(n||0,e||0);if(h)return this.center=this.unproject(new t.Point(n?(u+s)/2:this.x,e?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(h),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,y=l.y/2;d-y<o&&(i=o+y),d+y>a&&(i=a-y)}if(this.lngRange){var v=this.x,g=l.x/2;v-g<s&&(r=s+g),v+g>u&&(r=u-g)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:this.x,void 0!==i?i:this.y))),this._unmodified=c,this._constraining=!1}},Jn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),i=this.x,o=this.y,a=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),s=new Float64Array(16);t.perspective(s,this._fov,this.width/this.height,1,a),t.scale(s,s,[1,-1,1]),t.translate(s,s,[0,0,-this.cameraToCenterDistance]),t.rotateX(s,s,this._pitch),t.rotateZ(s,s,this.angle),t.translate(s,s,[-i,-o,0]),this.mercatorMatrix=t.scale([],s,[this.worldSize,this.worldSize,this.worldSize]);var u=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));t.scale(s,s,[1,1,u,1]),this.projMatrix=s;var l=this.width%2/2,c=this.height%2/2,f=Math.cos(this.angle),p=Math.sin(this.angle),h=i-Math.round(i)+f*l+p*c,d=o-Math.round(o)+f*c+p*l,y=new Float64Array(s);if(t.translate(y,y,[h>.5?h-1:h,d>.5?d-1:d,0]),this.alignedProjMatrix=y,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),s,this.projMatrix),!(s=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)).zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Jn.prototype,Qn);var $n=function(){var e,n,r,i;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,300),n=!1)},function(){return n=!0,r||i(),r})};$n.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},$n.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},$n.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},$n.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},$n.prototype._updateHashUnthrottled=function(){var e=this.getHashString();t.window.history.replaceState(t.window.history.state,"",e)};var tr=function(e){function r(r,i,o,a){void 0===a&&(a={});var s=n.mousePos(i.getCanvasContainer(),o),u=i.unproject(s);e.call(this,r,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),er=function(e){function r(r,i,o){var a=n.touchPos(i.getCanvasContainer(),o),s=a.map(function(t){return i.unproject(t)}),u=a.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.Point(0,0)),l=i.unproject(u);e.call(this,r,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),nr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),rr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};rr.prototype.isEnabled=function(){return!!this._enabled},rr.prototype.isActive=function(){return!!this._active},rr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},rr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rr.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},rr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},rr.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=n.mousePos(this._el,e);this._around=N.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},rr.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),f=u(c);n.zoom=t.number(s,a,f),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},rr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var ir=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};ir.prototype.isEnabled=function(){return!!this._enabled},ir.prototype.isActive=function(){return!!this._active},ir.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ir.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ir.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=this._lastPos=n.mousePos(this._el,e),this._active=!0)},ir.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=e,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(r.x,e.x),o=Math.max(r.x,e.x),a=Math.min(r.y,e.y),s=Math.max(r.y,e.y);n.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}},ir.prototype._onMouseUp=function(e){if(0===e.button){var r=this._startPos,i=n.mousePos(this._el,e);this._finish(),n.suppressClick(),r.x===i.x&&r.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},ir.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},ir.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},ir.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var or=t.bezier(0,0,.25,1),ar=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};ar.prototype.isEnabled=function(){return"disabled"!==this._state},ar.prototype.isActive=function(){return"active"===this._state},ar.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},ar.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},ar.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=n.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==n.mouseButton(e))return;this._eventButton=0}n.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=n.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},ar.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},ar.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._startPos,i=this._lastPos,o=.8*(r.x-i.x),a=-.5*(r.y-i.y),s=n.bearing-o,u=n.pitch-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([t.browser.now(),this._map._normalizeBearing(s,c[1])]),n.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=u),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},ar.prototype._onMouseUp=function(t){if(n.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},ar.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},ar.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),n.enableDrag()},ar.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},ar.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=i[i.length-2],l=n._normalizeBearing(r,u[1]),c=s[1]-a[1],f=c<0?-1:1,p=(s[0]-a[0])/1e3;if(0!==c&&0!==p){var h=Math.abs(c*(.25/p));h>180&&(h=180);var d=h/180;l+=f*h*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:or,noMoveStart:!0},{originalEvent:t})}else o()}},ar.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},ar.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var sr=t.bezier(0,0,.3,1),ur=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};ur.prototype.isEnabled=function(){return"disabled"!==this._state},ur.prototype.isActive=function(){return"active"===this._state},ur.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},ur.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},ur.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==n.mouseButton(e)||(n.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},ur.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(n.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},ur.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=n.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},ur.prototype._onMove=function(e){e.preventDefault();var r=n.mousePos(this._el,e);this._lastPos.equals(r)||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=r,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},ur.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},ur.prototype._onMouseUp=function(t){if(0===n.mouseButton(t))switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},ur.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},ur.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},ur.prototype._unbind=function(){n.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onTouchEnd),n.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.removeEventListener(t.window.document,"mouseup",this._onMouseUp),n.removeEventListener(t.window,"blur",this._onBlur)},ur.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},ur.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var u=s/750,l=a.mult(-u/2);this._map.panBy(l,{duration:1e3*u,easing:sr,noMoveStart:!0},{originalEvent:t})}}},ur.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},ur.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var lr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function cr(t){return t*(2-t)}lr.prototype.isEnabled=function(){return!!this._enabled},lr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},lr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},lr.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:cr,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var fr=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};fr.prototype.isEnabled=function(){return!!this._enabled},fr.prototype.isActive=function(){return!!this._active},fr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},fr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},fr.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},fr.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},fr.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},fr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var pr=t.bezier(0,0,.15,1),hr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};hr.prototype.isEnabled=function(){return!!this._enabled},hr.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},hr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},hr.prototype.disableRotation=function(){this._rotationDisabled=!0},hr.prototype.enableRotation=function(){this._rotationDisabled=!1},hr.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var r=n.mousePos(this._el,e.touches[0]),i=n.mousePos(this._el,e.touches[1]),o=r.add(i).div(2);this._startVec=r.sub(i),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],n.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.addEventListener(t.window.document,"touchend",this._onEnd)}},hr.prototype._getTouchEventData=function(t){var e=n.mousePos(this._el,t.touches[0]),r=n.mousePos(this._el,t.touches[1]),i=e.sub(r);return{vec:i,center:e.add(r).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},hr.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},hr.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},hr.prototype._onEnd=function(e){n.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onEnd);var r=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new t.Event(r+"end",{originalEvent:e})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:e});else{var s=o[o.length-1],u=o[0],l=a.transform.scaleZoom(i*s[1]),c=a.transform.scaleZoom(i*u[1]),f=l-c,p=(s[0]-u[0])/1e3,h=s[2];if(0!==p&&l!==c){var d=.15*f/p;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var y=1e3*Math.abs(d/(12*.15)),v=l+d*y/2e3;v<0&&(v=0),a.easeTo({zoom:v,duration:y,easing:pr,around:this._aroundCenter?a.getCenter():a.unproject(h),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},hr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var dr={scrollZoom:rr,boxZoom:ir,dragRotate:ar,dragPan:ur,keyboard:lr,doubleClickZoom:fr,touchZoomRotate:hr},yr=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(t,e){return t=B.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){if("number"==typeof(i=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}if(t.isEqual(Object.keys(i.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var a=[(i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2],s=Math.min(i.padding.right,i.padding.left),u=Math.min(i.padding.top,i.padding.bottom);i.offset=[i.offset[0]+a[0],i.offset[1]+a[1]];var l=this.transform,c=l.project(N.convert(e)),f=l.project(N.convert(n)),p=c.rotate(-r*Math.PI/180),h=f.rotate(-r*Math.PI/180),d=new t.Point(Math.max(p.x,h.x),Math.max(p.y,h.y)),y=new t.Point(Math.min(p.x,h.x),Math.min(p.y,h.y)),v=t.Point.convert(i.offset),g=d.sub(y),m=(l.width-2*s-2*Math.abs(v.x))/g.x,b=(l.height-2*u-2*Math.abs(v.y))/g.y;if(!(b<0||m<0))return i.center=l.unproject(c.add(f).div(2)),i.zoom=Math.min(l.scaleZoom(l.scale*Math.min(m,b)),i.maxZoom),i.bearing=r,i;t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(n=t.extend(e,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=N.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,f=i.centerPoint.add(t.Point.convert(e.offset)),p=i.pointLocation(f),h=N.convert(e.center||p);this._normalizeCenter(h);var d,y,v=i.project(p),g=i.project(h).sub(v),m=i.zoomScale(u-o);return e.around&&(d=N.convert(e.around),y=i.locationPoint(d)),this._zooming=u!==o,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,u,e)),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,c,e)),d)i.setLocationAtPoint(d,y);else{var p=i.zoomScale(i.zoom-o),h=u>o?Math.min(2,m):Math.max(.5,m),b=Math.pow(h,1-e),_=i.unproject(v.add(g.mult(e*b)).mult(p));i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,f)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){var r=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,f=i.zoomScale(u-o),p=i.centerPoint.add(t.Point.convert(e.offset)),h=i.pointLocation(p),d=N.convert(e.center||h);this._normalizeCenter(d);var y=i.project(h),v=i.project(d).sub(y),g=e.curve,m=Math.max(i.width,i.height),b=m/f,_=v.mag();if("minZoom"in e){var x=t.clamp(Math.min(e.minZoom,o,u),i.minZoom,i.maxZoom),w=m/i.zoomScale(x-o);g=Math.sqrt(w/_*2)}var E=g*g;function O(t){var e=(b*b-m*m+(t?-1:1)*E*E*_*_)/(2*(t?b:m)*E*_);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function P(t){return(Math.exp(t)+Math.exp(-t))/2}var C=O(0),T=function(t){return P(C)/P(C+g*t)},k=function(t){return m*((P(C)*(S(e=C+g*t)/P(e))-S(C))/E)/_;var e},A=(O(1)-C)/g;if(Math.abs(_)<1e-6||!isFinite(A)){if(Math.abs(m-b)<1e-6)return this.easeTo(e,n);var M=b<m?-1:1;A=Math.abs(Math.log(b/m))/g,k=function(){return 0},T=function(t){return Math.exp(M*g*t)}}if("duration"in e)e.duration=+e.duration;else{var j="screenSpeed"in e?+e.screenSpeed/g:+e.speed;e.duration=1e3*A/j}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,!1),this._ease(function(e){var f=e*A,h=1/T(f);i.zoom=1===e?u:o+i.scaleZoom(h),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,c,e));var g=1===e?d:i.unproject(y.add(v.mult(k(f))).mult(h));i.setLocationAtPoint(i.renderWorldCopies?g.wrap():g,p),r._fireMoveEvents(n)},function(){return r._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),vr=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};vr.prototype.getDefaultPosition=function(){return"bottom-right"},vr.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},vr.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},vr.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:f.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,r){return n.value&&(t+=n.key+"="+n.value+(r<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},vr.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},vr.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},vr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var gr=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};gr.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},gr.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},gr.prototype.getDefaultPosition=function(){return"bottom-left"},gr.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},gr.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},gr.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var mr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};mr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},mr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},mr.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},mr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var br=t.window.HTMLImageElement,_r=t.window.HTMLElement,xr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},wr=function(r){function i(e){var i=this;if(null!=(e=t.extend({},xr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var o=new Jn(e.minZoom,e.maxZoom,e.renderWorldCopies);r.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new mr,this._controls=[];var a=e.transformRequest;if(this._transformRequest=a?function(t,e){return a(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof _r))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var r=t.getCanvasContainer(),i=null,o=!1,a=null;for(var s in dr)t[s]=new dr[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);n.addEventListener(r,"mouseout",function(e){t.fire(new tr("mouseout",t,e))}),n.addEventListener(r,"mousedown",function(i){o=!0,a=n.mousePos(r,i);var s=new tr("mousedown",t,i);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(i),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(i),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(i))}),n.addEventListener(r,"mouseup",function(e){var n=t.dragRotate.isActive();i&&!n&&t.fire(new tr("contextmenu",t,i)),i=null,o=!1,t.fire(new tr("mouseup",t,e))}),n.addEventListener(r,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new tr("mousemove",t,e))}}),n.addEventListener(r,"mouseover",function(e){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new tr("mouseover",t,e))}),n.addEventListener(r,"touchstart",function(n){var r=new er("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))},{passive:!1}),n.addEventListener(r,"touchmove",function(e){t.fire(new er("touchmove",t,e))},{passive:!1}),n.addEventListener(r,"touchend",function(e){t.fire(new er("touchend",t,e))}),n.addEventListener(r,"touchcancel",function(e){t.fire(new er("touchcancel",t,e))}),n.addEventListener(r,"click",function(i){var o=n.mousePos(r,i);(o.equals(a)||o.dist(a)<e.clickTolerance)&&t.fire(new tr("click",t,i))}),n.addEventListener(r,"dblclick",function(e){var n=new tr("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),n.addEventListener(r,"contextmenu",function(e){var n=t.dragRotate.isActive();o||n?o&&(i=e):t.fire(new tr("contextmenu",t,e)),e.preventDefault()}),n.addEventListener(r,"wheel",function(n){e.interactive&&t.stop();var r=new nr("wheel",t,n);t.fire(r),r.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,e),this._hash=e.hash&&(new $n).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new vr({customAttribution:e.customAttribution})),this.addControl(new gr,e.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){i.fire(new t.Event(e.dataType+"dataloading",e))})}r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i;var o={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return i.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},i.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(B.convert(t)),this._update()},i.prototype.setMinZoom=function(t){if((t=null===t||void 0===t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null===t||void 0===t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.project=function(t){return this.transform.locationPoint(N.convert(t))},i.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype.on=function(t,e,n){var i,o=this;if(void 0===n)return r.prototype.on.call(this,t,e);var a=function(){if("mouseenter"===t||"mouseover"===t){var r=!1;return{layer:e,listener:n,delegates:{mousemove:function(i){var a=o.getLayer(e)?o.queryRenderedFeatures(i.point,{layers:[e]}):[];a.length?r||(r=!0,n.call(o,new tr(t,o,i.originalEvent,{features:a}))):r=!1},mouseout:function(){r=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(o.getLayer(e)?o.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(o,new tr(t,o,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(o,new tr(t,o,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(i={},i[t]=function(t){var r=o.getLayer(e)?o.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(o,t),delete t.features)},i)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)o.on(s,a.delegates[s]);return this},i.prototype.off=function(t,e,n){if(void 0===n)return r.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===e&&a.listener===n){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},i.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(e,n){if((!n||!1!==n.diff&&!n.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){t.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new Xe(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof br){var a=t.browser.getImageData(n),s=a.width,u=a.height,l=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:u},l),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,f=n.height,p=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:f},new Uint8Array(p)),pixelRatio:i,sdf:o})}},i.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0)},i.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,i)})},i.prototype._resizeCanvas=function(e,n){var r=t.window.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},e.webGLContextAttributes),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?this.painter=new Xn(r,this.transform):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},i.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=t.browser.now();this.style.zoomHistory.update(n,r);var i=new t.EvaluationParameters(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this.triggerRepaint(),this},i.prototype.remove=function(){this._hash&&this._hash.remove(),this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[];var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Er(this._canvasContainer),Er(this._controlContainer),Er(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},i.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint=t,this._update()},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(i.prototype,o),i}(yr);function Er(t){t.parentNode&&t.parentNode.removeChild(t)}var Or={showCompass:!0,showZoom:!0},Sr=function(e){var r=this;this.options=t.extend({},Or,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return r._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return r._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return r._map.resetNorth()}),this._compassArrow=n.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Pr(t,e,n){if(t=new N(t.lng,t.lat),e){var r=new N(t.lng-360,t.lat),i=new N(t.lng+360,t.lat),o=n.locationPoint(t).distSqr(e);n.locationPoint(r).distSqr(e)<o?t=r:n.locationPoint(i).distSqr(e)<o&&(t=i)}for(;Math.abs(t.lng-n.center.lng)>180;){var a=n.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=n.width&&a.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}Sr.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Sr.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ar(t,{button:"left",element:this._compass}),n.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Sr.prototype.onRemove=function(){n.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),n.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Sr.prototype._createButton=function(t,e,r){var i=n.create("button",t,this._container);return i.type="button",i.setAttribute("aria-label",e),i.addEventListener("click",r),i};var Cr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tr(t,e,n){var r=t.classList;for(var i in Cr)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}var kr,Ar=function(e){function r(r){if(e.call(this),(arguments[0]instanceof t.window.HTMLElement||2===arguments.length)&&(r=t.extend({element:r},arguments[1])),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div");var i=n.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var o=n.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var u=0,l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<l.length;u+=1){var c=l[u],f=n.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",c.rx),f.setAttributeNS(null,"ry",c.ry),s.appendChild(f)}var p=n.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var h=n.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(h);var d=n.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");var y=n.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(y);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var m=n.createNS("http://www.w3.org/2000/svg","circle");m.setAttributeNS(null,"fill","#000000"),m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"cx","5.5"),m.setAttributeNS(null,"cy","5.5"),m.setAttributeNS(null,"r","5.4999962");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),g.appendChild(m),g.appendChild(b),a.appendChild(s),a.appendChild(p),a.appendChild(d),a.appendChild(v),a.appendChild(g),i.appendChild(a),this._element.appendChild(i),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=N.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Pr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Cr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Tr(this._element,this._anchor,"marker"))},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r}(t.Evented),Mr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},jr=function(e){function r(n){e.call(this),this.options=t.extend({},Mr,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==kr?r(kr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){kr="denied"!==t.state,r(kr)}):(kr=!!t.window.navigator.geolocation,r(kr)),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),n.remove(this._container),this._map=void 0},r.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},r.prototype._updateCamera=function(t){var e=new N(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy;this._map.fitBounds(e.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},r.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},r.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ar(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),Rr={maxWidth:100,unit:"metric"},Ir=function(e){this.options=t.extend({},Rr,e),t.bindAll(["_onMove","setUnit"],this)};function Lr(t,e,n){var r,i,o,a,s,u,l=n&&n.maxWidth||100,c=t._container.clientHeight/2,f=(r=t.unproject([0,c]),i=t.unproject([l,c]),o=Math.PI/180,a=r.lat*o,s=i.lat*o,u=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(u,1)));if(n&&"imperial"===n.unit){var p=3.2808*f;p>5280?Dr(e,l,p/5280,"mi"):Dr(e,l,p,"ft")}else n&&"nautical"===n.unit?Dr(e,l,f/1852,"nm"):Dr(e,l,f,"m")}function Dr(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:1)),u=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),t.style.width=e*u+"px",t.innerHTML=s+r}Ir.prototype.getDefaultPosition=function(){return"bottom-left"},Ir.prototype._onMove=function(){Lr(this._map,this._container,this.options)},Ir.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ir.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ir.prototype.setUnit=function(t){this.options.unit=t,Lr(this._map,this._container,this.options)};var Fr=function(){this._fullscreen=!1,t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Fr.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=n.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._container},Fr.prototype.onRemove=function(){n.remove(this._container),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Fr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Fr.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Fr.prototype._isFullscreen=function(){return this._fullscreen},Fr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Fr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var Nr={closeButton:!0,closeOnClick:!0,className:""},Br=function(e){function r(n){e.call(this),this.options=t.extend(Object.create(Nr),n),t.bindAll(["_update","_onClickClose"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=N.convert(t),this._pos=null,this._update(),this},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},r.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},r.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Pr(this._lngLat,this._pos,this._map.transform));var r=this._pos=this._map.project(this._lngLat),i=this.options.anchor,o=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=r.y+o.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<s/2?a.push("left"):r.x>this._map.transform.width-s/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var l=r.add(o[i]).round();n.setTransform(this._container,Cr[i]+" translate("+l.x+"px,"+l.y+"px)"),Tr(this._container,i,"popup")}},r.prototype._onClickClose=function(){this.remove()},r}(t.Evented),zr={version:"0.50.0",supported:e,setRTLTextPlugin:t.setRTLTextPlugin,Map:wr,NavigationControl:Sr,GeolocateControl:jr,AttributionControl:vr,ScaleControl:Ir,FullscreenControl:Fr,Popup:Br,Marker:Ar,Style:Xe,LngLat:N,LngLatBounds:B,Point:t.Point,Evented:t.Evented,config:f,get accessToken(){return f.ACCESS_TOKEN},set accessToken(t){f.ACCESS_TOKEN=t},get workerCount(){return Zt.workerCount},set workerCount(t){Zt.workerCount=t},workerUrl:""};return zr}),n}()},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),o=n(398);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={name:void 0},n.callFilter=n.debounce(n.callFilter.bind(n),150),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.PureComponent),r(e,[{key:"componentDidMount",value:function(){this.setState({name:this.props.name})}},{key:"debounce",value:function(t,e){console.log("debounce init");var n=void 0;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){return t.apply(r,i)},e)}}},{key:"callFilter",value:function(t,e){this.props.onSelection(t,e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.name,r=e.ratio,a=e.width,s=e.height,u=e.tickCount,l=e.label,c=e.data,f=e.domain,p=e.active,h=e.brushDomain;e.onSelection;return i.default.createElement("div",null,i.default.createElement("svg",{style:{height:"0",width:"0"}},i.default.createElement("defs",null,i.default.createElement("linearGradient",{id:"chartGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},i.default.createElement("stop",{offset:"0%",style:{stopColor:"rgb(200, 200, 200)",stopOpacity:1}}),i.default.createElement("stop",{offset:"100%",style:{stopColor:"rgb(255,255,255)",stopOpacity:1}})))),i.default.createElement("br",null),i.default.createElement(o.VictoryChart,{style:{parent:{position:"absolute"}},domainPadding:{x:40*r},domain:{x:f},padding:{left:60*r,right:40*r,top:20*r,bottom:120*r},width:a,height:s,containerComponent:i.default.createElement(o.VictoryBrushContainer,{allowDrag:!0,disable:p,brushDimension:"x",defaultBrushArea:"all",brushDomain:{x:h},onBrushDomainChange:function(e,n){t.callFilter(e,n)},brushStyle:{stroke:"transparent",fill:"white",fillOpacity:.1}}),animate:{duration:250,easing:"quadInOut"}},i.default.createElement(o.VictoryBar,{name:n,data:c,alignment:"start",style:{data:{fill:function(t,e){return e?"rgb(8,81,156)":"url(#chartGradient)"}}},x:"x",y:"y"}),i.default.createElement(o.VictoryAxis,{dependentAxis:!0,tickFormat:function(t){return parseFloat(t)/1e3+"K"},style:{axis:{strokeWidth:0},grid:{stroke:"rgba(255,255,255,0.2)",strokeWidth:1},tickLabels:{fontSize:15*r,fill:"white",padding:10}}}),i.default.createElement(o.VictoryAxis,{label:l,tickCount:u,tickFormat:function(t){return t},style:{axis:{stroke:"white"},axisLabel:{fontFamily:"'Cabin', sans-serif",fontVariant:"small-caps",padding:30*r,fontSize:30*r,fill:"white"},ticks:{stroke:"gray",size:4},tickLabels:{fontSize:15*r,fill:"white",padding:5}}})))}}]),e}();e.default=a},function(t,e,n){var r=n(15),i=n(285),o=n(35),a=n(168),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,f=l.hasOwnProperty,p=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?p:s).test(a(t))}},function(t,e,n){var r=n(103),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(286),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(68)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(137),i=n(113);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=o?o(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),a?i(n,l,c):r(n,l,c)}return n}},function(t,e,n){var r=n(138),i=n(114);t.exports=function(t){return r(function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e})}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(171),i=n(166),o=n(47),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){var n=800,r=16,i=Date.now;t.exports=function(t){var e=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(90),i=n(77),o="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(90),i=n(139),o=n(77),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){(function(t){var r=n(167),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(173)(t))},function(t,e,n){var r=n(175)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(176),i=n(178);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},function(t,e,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n(301)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)}),e});t.exports=o},function(t,e,n){var r=n(302),i=500;t.exports=function(t){var e=r(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(145),i="Expected a function";function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(304),i=n(120),o=n(146);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(305),i=n(306),o=n(307),a=n(308),s=n(309);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(119);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(119),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(119),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(119),i="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(121),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(121);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(121);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(121);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(122);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(122);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(122);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(122);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(103),i=n(94),o=n(46),a=n(104),s=1/0,u=r?r.prototype:void 0,l=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},function(t,e,n){var r=n(137),i=n(118),o=n(115),a=n(35),s=n(105);t.exports=function(t,e,n,u){if(!a(t))return t;for(var l=-1,c=(e=i(e,t)).length,f=c-1,p=t;null!=p&&++l<c;){var h=s(e[l]),d=n;if(l!=f){var y=p[h];void 0===(d=u?u(y,h,p):void 0)&&(d=a(y)?y:o(e[l+1])?[]:{})}r(p,h,d),p=p[h]}return t}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(118),i=n(117),o=n(46),a=n(115),s=n(139),u=n(105);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,f=!1;++l<c;){var p=u(e[l]);if(!(f=null!=t&&n(t,p)))break;t=t[p]}return f||++l!=c?f:!!(c=null==t?0:t.length)&&s(c)&&a(p,c)&&(o(t)||i(t))}},function(t,e,n){var r=n(147),i=n(325);t.exports=function t(e,n,o,a,s){var u=-1,l=e.length;for(o||(o=i),s||(s=[]);++u<l;){var c=e[u];n>0&&o(c)?n>1?t(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},function(t,e,n){var r=n(103),i=n(117),o=n(46),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(143);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(35),i=n(116),o=n(329),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(81),i=n(69),o=n(41);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(s[t],t,s)}}var l=t(e,n,a);return l>-1?s[u?e[l]:l]:void 0}}},function(t,e,n){var r=n(332),i=n(348),o=n(192);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(181),i=n(182),o=1,a=2;t.exports=function(t,e,n,s){var u=n.length,l=u,c=!s;if(null==t)return!l;for(t=Object(t);u--;){var f=n[u];if(c&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<l;){var p=(f=n[u])[0],h=t[p],d=f[1];if(c&&f[2]){if(void 0===h&&!(p in t))return!1}else{var y=new r;if(s)var v=s(h,d,p,t,e,y);if(!(void 0===v?i(d,h,o|a,s,y):v))return!1}}return!0}},function(t,e,n){var r=n(120);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(120),i=n(146),o=n(145),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(181),i=n(183),o=n(341),a=n(343),s=n(151),u=n(46),l=n(140),c=n(141),f=1,p="[object Arguments]",h="[object Array]",d="[object Object]",y=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,v,g,m){var b=u(t),_=u(e),x=b?h:s(t),w=_?h:s(e),E=(x=x==p?d:x)==d,O=(w=w==p?d:w)==d,S=x==w;if(S&&l(t)){if(!l(e))return!1;b=!0,E=!1}if(S&&!E)return m||(m=new r),b||c(t)?i(t,e,n,v,g,m):o(t,e,x,n,v,g,m);if(!(n&f)){var P=E&&y.call(t,"__wrapped__"),C=O&&y.call(e,"__wrapped__");if(P||C){var T=P?t.value():t,k=C?e.value():e;return m||(m=new r),g(T,k,n,v,m)}}return!!S&&(m||(m=new r),a(t,e,n,v,g,m))}},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(103),i=n(342),o=n(93),a=n(183),s=n(185),u=n(150),l=1,c=2,f="[object Boolean]",p="[object Date]",h="[object Error]",d="[object Map]",y="[object Number]",v="[object RegExp]",g="[object Set]",m="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",x="[object DataView]",w=r?r.prototype:void 0,E=w?w.valueOf:void 0;t.exports=function(t,e,n,r,w,O,S){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!O(new i(t),new i(e)));case f:case p:case y:return o(+t,+e);case h:return t.name==e.name&&t.message==e.message;case v:case m:return t==e+"";case d:var P=s;case g:var C=r&l;if(P||(P=u),t.size!=e.size&&!C)return!1;var T=S.get(t);if(T)return T==e;r|=c,S.set(t,e);var k=a(P(t),P(e),r,w,O,S);return S.delete(t),k;case b:if(E)return E.call(t)==E.call(e)}return!1}},function(t,e,n){var r=n(68).Uint8Array;t.exports=r},function(t,e,n){var r=n(344),i=1,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,s,u){var l=n&i,c=r(t),f=c.length;if(f!=r(e).length&&!l)return!1;for(var p=f;p--;){var h=c[p];if(!(l?h in e:o.call(e,h)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var y=!0;u.set(t,e),u.set(e,t);for(var v=l;++p<f;){var g=t[h=c[p]],m=e[h];if(a)var b=l?a(m,g,h,e,t,u):a(g,m,h,t,e,u);if(!(void 0===b?g===m||s(g,m,n,a,u):b)){y=!1;break}v||(v="constructor"==h)}if(y&&!v){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(y=!1)}return u.delete(t),u.delete(e),y}},function(t,e,n){var r=n(186),i=n(187),o=n(41);t.exports=function(t){return r(t,o,i)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(89)(n(68),"DataView");t.exports=r},function(t,e,n){var r=n(89)(n(68),"Promise");t.exports=r},function(t,e,n){var r=n(191),i=n(41);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(182),i=n(350),o=n(178),a=n(144),s=n(191),u=n(192),l=n(105),c=1,f=2;t.exports=function(t,e){return a(t)&&s(e)?u(l(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,c|f)}}},function(t,e,n){var r=n(143);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(193),i=n(81),o=n(194),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=a(s+u,0)),r(t,i(e,3),u)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(90),i=n(46),o=n(77),a="[object String]";t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&r(t)==a}},function(t,e,n){var r=n(94);t.exports=function(t,e){return r(e,function(e){return t[e]})}},function(t,e,n){var r=n(93);t.exports=function(t,e){for(var n=-1,i=t.length,o=0,a=[];++n<i;){var s=t[n],u=e?e(s):s;if(!n||!r(u,l)){var l=u;a[o++]=0===s?0:s}}return a}},function(t,e,n){var r=n(94),i=n(81),o=n(358),a=n(362),s=n(142),u=n(363),l=n(47);t.exports=function(t,e,n){var c=-1;e=r(e.length?e:[l],s(i));var f=o(t,function(t,n,i){return{criteria:r(e,function(e){return e(t)}),index:++c,value:t}});return a(f,function(t,e){return u(t,e,n)})}},function(t,e,n){var r=n(152),i=n(69);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,function(t,r,i){o[++n]=e(t,r,i)}),o}},function(t,e,n){var r=n(360)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var r=n(69);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(364);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var l=r(o[i],a[i]);if(l)return i>=u?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(104);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,a=r(t),s=void 0!==e,u=null===e,l=e==e,c=r(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}},function(t,e,n){var r=n(366),i=n(114),o=n(195);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&i(e,n,a)&&(n=a=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),a=void 0===a?e<n?1:-1:o(a),r(e,n,a,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,i,o){for(var a=-1,s=r(n((e-t)/(i||1)),0),u=Array(s);s--;)u[o?s:++a]=t,t+=i;return u}},function(t,e,n){var r=n(189),i=n(202),o=n(150),a=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=a},function(t,e,n){var r=n(148),i=n(200),o=n(201),a=n(94),s=n(142),u=n(149),l=200;t.exports=function(t,e,n,c){var f=-1,p=i,h=!0,d=t.length,y=[],v=e.length;if(!d)return y;n&&(e=a(e,s(n))),c?(p=o,h=!1):e.length>=l&&(p=u,h=!1,e=new r(e));t:for(;++f<d;){var g=t[f],m=null==n?g:n(g);if(g=c||0!==g?g:0,h&&m==m){for(var b=v;b--;)if(e[b]===m)continue t;y.push(g)}else p(e,m,c)||y.push(g)}return y}},function(t,e,n){var r=n(69),i=n(77);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){var r=n(186),i=n(371),o=n(180);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(147),i=n(198),o=n(187),a=n(188),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(373),i=n(374),o=n(81),a=n(46);t.exports=function(t,e){return function(n,s){var u=a(n)?r:i,l=e?e():{};return u(n,t,o(s,2),l)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}},function(t,e,n){var r=n(152);t.exports=function(t,e,n,i){return r(t,function(t,r,o){e(i,t,n(t),o)}),i}},function(t,e,n){var r=n(152);t.exports=function(t,e){var n;return r(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}},function(t,e,n){var r=n(377);t.exports=function(t,e){return function(n,i){return r(n,t,e(i),{})}}},function(t,e,n){var r=n(123);t.exports=function(t,e,n,i){return r(t,function(t,r,o){e(i,n(t),r,o)}),i}},function(t,e){t.exports=function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}},function(t,e,n){var r=n(35),i=n(380),o=n(196),a="Expected a function",s=Math.max,u=Math.min;t.exports=function(t,e,n){var l,c,f,p,h,d,y=0,v=!1,g=!1,m=!0;if("function"!=typeof t)throw new TypeError(a);function b(e){var n=l,r=c;return l=c=void 0,y=e,p=t.apply(r,n)}function _(t){var n=t-d;return void 0===d||n>=e||n<0||g&&t-y>=f}function x(){var t=i();if(_(t))return w(t);h=setTimeout(x,function(t){var n=e-(t-d);return g?u(n,f-(t-y)):n}(t))}function w(t){return h=void 0,m&&l?b(t):(l=c=void 0,p)}function E(){var t=i(),n=_(t);if(l=arguments,c=this,d=t,n){if(void 0===h)return function(t){return y=t,h=setTimeout(x,e),v?b(t):p}(d);if(g)return h=setTimeout(x,e),b(d)}return void 0===h&&(h=setTimeout(x,e)),p}return e=o(e)||0,r(n)&&(v=!!n.leading,f=(g="maxWait"in n)?s(o(n.maxWait)||0,e):f,m="trailing"in n?!!n.trailing:m),E.cancel=function(){void 0!==h&&clearTimeout(h),y=0,l=d=c=h=void 0},E.flush=function(){return void 0===h?p:w(i())},E}},function(t,e,n){var r=n(68);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(153),i=n(179),o=n(204),a=n(205),s=n(46),u=n(384),l="Expected a function",c=8,f=32,p=128,h=256;t.exports=function(t){return i(function(e){var n=e.length,i=n,d=r.prototype.thru;for(t&&e.reverse();i--;){var y=e[i];if("function"!=typeof y)throw new TypeError(l);if(d&&!v&&"wrapper"==a(y))var v=new r([],!0)}for(i=v?i:n;++i<n;){y=e[i];var g=a(y),m="wrapper"==g?o(y):void 0;v=m&&u(m[0])&&m[1]==(p|c|f|h)&&!m[4].length&&1==m[9]?v[a(m[0])].apply(v,m[3]):1==y.length&&u(y)?v[g]():v.thru(y)}return function(){var t=arguments,r=t[0];if(v&&1==t.length&&s(r))return v.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}},function(t,e,n){var r=n(190),i=r&&new r;t.exports=i},function(t,e){t.exports={}},function(t,e,n){var r=n(155),i=n(204),o=n(205),a=n(385);t.exports=function(t){var e=o(t),n=a[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var s=i(n);return!!s&&t===s[0]}},function(t,e,n){var r=n(155),i=n(153),o=n(154),a=n(46),s=n(77),u=n(386),l=Object.prototype.hasOwnProperty;function c(t){if(s(t)&&!a(t)&&!(t instanceof r)){if(t instanceof i)return t;if(l.call(t,"__wrapped__"))return u(t)}return new i(t)}c.prototype=o.prototype,c.prototype.constructor=c,t.exports=c},function(t,e,n){var r=n(155),i=n(153),o=n(387);t.exports=function(t){if(t instanceof r)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=o(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(47);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(390),i=n(151),o=n(185),a=n(391),s="[object Map]",u="[object Set]";t.exports=function(t){return function(e){var n=i(e);return n==s?o(e):n==u?a(e):r(e,t(e))}}},function(t,e,n){var r=n(94);t.exports=function(t,e){return r(e,function(e){return[e,t[e]]})}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}},function(t,e){!function(t,e){for(var n in e)t[n]=e[n]}(e,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";t.exports=n(2)},function(t,e,n){t.exports=n(7)},function(t,e,n){"use strict";var r=n(3),i=n(4);n(5);var o=n(6);function a(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw(e=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",e.framesToPop=1,e}var s={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function u(t,e,n){this.props=t,this.context=e,this.refs=i,this.updater=n||s}function l(t,e,n){this.props=t,this.context=e,this.refs=i,this.updater=n||s}function c(){}u.prototype.isReactComponent={},u.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&a("85"),this.updater.enqueueSetState(this,t,e,"setState")},u.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},c.prototype=u.prototype;var f=l.prototype=new c;function p(t,e,n){this.props=t,this.context=e,this.refs=i,this.updater=n||s}f.constructor=l,r(f,u.prototype),f.isPureReactComponent=!0;var h=p.prototype=new c;h.constructor=p,r(h,u.prototype),h.unstable_isAsyncReactComponent=!0,h.render=function(){return this.props.children};var d={Component:u,PureComponent:l,AsyncComponent:p},y={current:null},v=Object.prototype.hasOwnProperty,g="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,m={key:!0,ref:!0,__self:!0,__source:!0};function b(t,e,n,r,i,o,a){return{$$typeof:g,type:t,key:e,ref:n,props:a,_owner:o}}b.createElement=function(t,e,n){var r,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),void 0===e.__self||e.__self,void 0===e.__source||e.__source,e)v.call(e,r)&&!m.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return b(t,o,a,0,0,y.current,i)},b.createFactory=function(t){var e=b.createElement.bind(null,t);return e.type=t,e},b.cloneAndReplaceKey=function(t,e){return b(t.type,e,t.ref,t._self,t._source,t._owner,t.props)},b.cloneElement=function(t,e,n){var i=r({},t.props),o=t.key,a=t.ref,s=(t._self,t._source,t._owner);if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=y.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)v.call(e,l)&&!m.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==u?u[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return b(t.type,o,a,0,0,s,i)},b.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===g};var _="function"==typeof Symbol&&Symbol.iterator,x="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,w=/\/+/g,E=[];function O(t,e,n,r){if(E.length){var i=E.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function S(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>E.length&&E.push(t)}function P(t,e,n,r){var i=typeof t;if("undefined"!==i&&"boolean"!==i||(t=null),null===t||"string"===i||"number"===i||"object"===i&&t.$$typeof===x)return n(r,t,""===e?"."+C(t,0):e),1;var o=0;if(e=""===e?".":e+":",Array.isArray(t))for(var s=0;s<t.length;s++){var u=e+C(i=t[s],s);o+=P(i,u,n,r)}else if("function"==typeof(u=_&&t[_]||t["@@iterator"]))for(t=u.call(t),s=0;!(i=t.next()).done;)o+=P(i=i.value,u=e+C(i,s++),n,r);else"object"===i&&a("31","[object Object]"==(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n,"");return o}function C(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function T(t,e){t.func.call(t.context,e,t.count++)}function k(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?A(t,r,n,o.thatReturnsArgument):null!=t&&(b.isValidElement(t)&&(t=b.cloneAndReplaceKey(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(w,"$&/")+"/")+n)),r.push(t))}function A(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(w,"$&/")+"/"),e=O(e,o,r,i),null==t||P(t,"",k,e),S(e)}var M={forEach:function(t,e,n){if(null==t)return t;e=O(null,null,e,n),null==t||P(t,"",T,e),S(e)},map:function(t,e,n){if(null==t)return t;var r=[];return A(t,r,null,e,n),r},count:function(t){return null==t?0:P(t,"",o.thatReturnsNull,null)},toArray:function(t){var e=[];return A(t,e,null,o.thatReturnsArgument),e}};t.exports={Children:{map:M.map,forEach:M.forEach,count:M.count,toArray:M.toArray,only:function(t){return b.isValidElement(t)||a("143"),t}},Component:d.Component,PureComponent:d.PureComponent,unstable_AsyncComponent:d.AsyncComponent,createElement:b.createElement,cloneElement:b.cloneElement,isValidElement:b.isValidElement,createFactory:b.createFactory,version:"16.0.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:y,assign:r}}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(s[l]=n[l]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(e.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";n.r(e);var r=n(0);class i{constructor(t,e){this.setCurrentStepIndexFromArray=(t=>{for(let e=0;e<this.countSteps;e++)if(t<=this.stepsArray[e])return this.stepIndex=e,!0;return!1}),this.stepsArray=t,this.countSteps=this.stepsArray.length-1,this.stepIndex=0,this.setCurrentStepIndexFromArray(e)}getAngle(){return Math.min(this.getAnglePoint()*this.stepIndex,2*Math.PI-Number.EPSILON)-1e-5}getCurrentStep(){return this.stepsArray[this.stepIndex]}updateStepIndexFromValue(t){this.setCurrentStepIndexFromArray(t)||(this.stepIndex=this.countSteps)}updateStepIndexFromAngle(t){const e=Math.round(t/this.getAnglePoint());e<this.countSteps?this.stepIndex=e:this.stepIndex=this.countSteps}getAnglePoint(){return 2*Math.PI/this.countSteps}}class o{constructor(t){this.container=t,this.setPosition({x:0,y:0})}setPosition(t){if(!this.container)return;const e=this.container.getBoundingClientRect(),n=e.width;this.center=n/2,this.relativeX=t.clientX-e.left,this.relativeY=t.clientY-e.top}getNewSliderAngle(){return(Math.atan2(this.relativeY-this.center,this.relativeX-this.center)+3*Math.PI/2)%(2*Math.PI)}}const a=(t,e,n,r,i)=>{const o=[];return o.push("M"+t),o.push(t+e),o.push("A"),o.push(e),o.push(e),o.push(0),o.push(n),o.push(1),o.push(r),o.push(i),o.join(" ")};class s extends r.Component{constructor(t){super(t),this.updateAngle=(t=>{this.circleSliderHelper.updateStepIndexFromAngle(t);const e=this.circleSliderHelper.getCurrentStep();this.setState({angle:t,currentStepValue:e}),this.props.onChange(e)}),this.updateSlider=(()=>{const t=this.mouseHelper.getNewSliderAngle();Math.abs(t-this.state.angle)<Math.PI&&this.updateAngle(t)}),this.updateSliderFromProps=(t=>{const{stepSize:e}=this.props,n=Math.round(t/e)*e;this.circleSliderHelper.updateStepIndexFromValue(n),this.setState({angle:this.circleSliderHelper.getAngle(),currentStepValue:n})}),this.getCenter=(()=>this.props.size/2),this.getAngle=(()=>this.state.angle+Math.PI/2),this.getPointPosition=(()=>{const t=this.getCenter(),e=this.getAngle();return{x:t+this.radius*Math.cos(e),y:t+this.radius*Math.sin(e)}}),this.getStepsArray=((t,e)=>{const n=[];for(let r=0;r<this.countSteps;r++)n.push(t+r*e);return n}),this.getPath=(()=>{const t=this.getCenter(),e=this.getAngle()<1.5*Math.PI?0:1,{x:n,y:r}=this.getPointPosition();return a(t,this.radius,e,n,r)}),this.handleMouseMove=(t=>{t.preventDefault(),this.setState({isMouseMove:!0}),this.mouseHelper.setPosition(t),this.updateSlider()}),this.handleMouseUp=(t=>{t.preventDefault(),this.setState({isMouseMove:!1}),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}),this.handleMouseDown=(t=>{this.props.disabled||(t.preventDefault(),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp))}),this.handleTouchMove=(t=>{const e=t.targetTouches,n=e.length,r=e.item(n-1);this.mouseHelper.setPosition(r),this.updateSlider()}),this.handleTouchUp=(()=>{window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchUp)}),this.handleTouchStart=(()=>{this.props.disabled||(window.addEventListener("touchmove",this.handleTouchMove),window.addEventListener("touchend",this.handleTouchUp))}),this.state={angle:0,currentStepValue:0,isMouseMove:!1};const{min:e,max:n,stepSize:r,value:o,circleWidth:s,progressWidth:u,knobRadius:l}=this.props;this.maxLineWidth=Math.max(s,u),this.radius=this.getCenter()-Math.max(this.maxLineWidth,2*l)/2,this.countSteps=1+(n-e)/r,this.stepsArray=this.getStepsArray(e,r),this.circleSliderHelper=new i(this.stepsArray,o)}componentDidMount(){this.mouseHelper=new o(this.svg),this.setState({angle:this.circleSliderHelper.getAngle(),currentStepValue:this.circleSliderHelper.getCurrentStep()})}componentWillReceiveProps(t){this.props.value===t.value||this.state.isMouseMove||this.updateSliderFromProps(t.value)}render(){const{size:t,progressColor:e,knobColor:n,circleColor:i,disabled:o,shadow:a,circleWidth:s,progressWidth:u,knobRadius:l,showTooltip:c,tooltipSize:f,tooltipColor:p}=this.props,h=a?"5px":"0px",{x:d,y:y}=this.getPointPosition(),v=this.getCenter();return r.createElement("svg",{ref:t=>this.svg=t,width:`${t}px`,height:`${t}px`,viewBox:`0 0 ${t} ${t}`,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart,style:{padding:h,boxSizing:"border-box"}},r.createElement("g",null,r.createElement("circle",{style:{strokeWidth:s,stroke:i,fill:"none"},r:this.radius,cx:v,cy:v}),r.createElement("path",{style:{strokeLinecap:"round",strokeWidth:u,stroke:e,fill:"none"},d:this.getPath()}),a&&r.createElement("filter",{id:"dropShadow",filterUnits:"userSpaceOnUse"},r.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),r.createElement("feOffset",{dx:"2",dy:"2"}),r.createElement("feComponentTransfer",null,r.createElement("feFuncA",{type:"linear",slope:"0.3"})),r.createElement("feMerge",null,r.createElement("feMergeNode",null),r.createElement("feMergeNode",{in:"SourceGraphic"}))),r.createElement("circle",{style:{fill:n,cursor:o?"not-allowed":"pointer"},filter:a?"url(#dropShadow)":"none",r:l,cx:d,cy:y}),c&&r.createElement("text",{x:t/2,y:t/2+f/3,textAnchor:"middle",fontSize:f,fontFamily:"Arial",fill:p},this.state.currentStepValue)))}}s.defaultProps={circleColor:"#e9eaee",size:180,value:0,progressColor:"#007aff",knobColor:"#fff",circleWidth:5,progressWidth:20,knobRadius:20,stepSize:1,min:0,max:100,disabled:!1,shadow:!0,showTooltip:!1,tooltipSize:32,tooltipColor:"#333",onChange:()=>({})},n.d(e,"CircleSlider",function(){return s})}]))},function(t,e,n){window,t.exports=function(t){var e=window.webpackHotUpdatecuXfilter;window.webpackHotUpdatecuXfilter=function(t,n){!function(t,e){if(_[t]&&b[t]){for(var n in b[t]=!1,e)Object.prototype.hasOwnProperty.call(e,n)&&(d[n]=e[n]);0==--v&&0===g&&O()}}(t,n),e&&e(t,n)};var n,r=!0,i="91e834e82c440a7c87ed",o=1e4,a={},s=[],u=[];function l(t){var e=P[t];if(!e)return C;var r=function(r){return e.hot.active?(P[r]?-1===P[r].parents.indexOf(t)&&P[r].parents.push(t):(s=[t],n=r),-1===e.children.indexOf(r)&&e.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+t),s=[]),C(r)},i=function(t){return{configurable:!0,enumerable:!0,get:function(){return C[t]},set:function(e){C[t]=e}}};for(var o in C)Object.prototype.hasOwnProperty.call(C,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,i(o));return r.e=function(t){return"ready"===f&&p("prepare"),g++,C.e(t).then(e,function(t){throw e(),t});function e(){g--,"prepare"===f&&(m[t]||E(t),0===g&&0===v&&O())}},r.t=function(t,e){return 1&e&&(t=r(t)),C.t(t,-2&e)},r}var c=[],f="idle";function p(t){f=t;for(var e=0;e<c.length;e++)c[e].call(null,t)}var h,d,y,v=0,g=0,m={},b={},_={};function x(t){return+t+""===t?+t:t}function w(t){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=t,p("check"),function(t){return t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=C.p+""+i+".hot-update.json";r.open("GET",o,!0),r.timeout=t,r.send(null)}catch(t){return n(t)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(t){return void n(t)}e(t)}}})}(o).then(function(t){if(!t)return p("idle"),null;b={},m={},_=t.c,y=t.h,p("prepare");var e=new Promise(function(t,e){h={resolve:t,reject:e}});return d={},E(0),"prepare"===f&&0===g&&0===v&&O(),e})}function E(t){_[t]?(b[t]=!0,v++,function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=C.p+""+t+"."+i+".hot-update.js",e.appendChild(n)}(t)):m[t]=!0}function O(){p("ready");var t=h;if(h=null,t)if(r)Promise.resolve().then(function(){return S(r)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&e.push(x(n));t.resolve(e)}}function S(e){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,o,u,l;function c(t){for(var e=[t],n={},r=e.slice().map(function(t){return{chain:[t],id:t}});r.length>0;){var i=r.pop(),o=i.id,a=i.chain;if((u=P[o])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var s=0;s<u.parents.length;s++){var l=u.parents[s],c=P[l];if(c){if(c.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([l]),moduleId:o,parentId:l};-1===e.indexOf(l)&&(c.hot._acceptedDependencies[o]?(n[l]||(n[l]=[]),h(n[l],[o])):(delete n[l],e.push(l),r.push({chain:a.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];-1===t.indexOf(r)&&t.push(r)}}e=e||{};var v={},g=[],m={},b=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var w in d)if(Object.prototype.hasOwnProperty.call(d,w)){var E;l=x(w);var O=!1,S=!1,T=!1,k="";switch((E=d[w]?c(l):{type:"disposed",moduleId:w}).chain&&(k="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":e.onDeclined&&e.onDeclined(E),e.ignoreDeclined||(O=new Error("Aborted because of self decline: "+E.moduleId+k));break;case"declined":e.onDeclined&&e.onDeclined(E),e.ignoreDeclined||(O=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+k));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(E),e.ignoreUnaccepted||(O=new Error("Aborted because "+l+" is not accepted"+k));break;case"accepted":e.onAccepted&&e.onAccepted(E),S=!0;break;case"disposed":e.onDisposed&&e.onDisposed(E),T=!0;break;default:throw new Error("Unexception type "+E.type)}if(O)return p("abort"),Promise.reject(O);if(S)for(l in m[l]=d[l],h(g,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,l)&&(v[l]||(v[l]=[]),h(v[l],E.outdatedDependencies[l]));T&&(h(g,[E.moduleId]),m[l]=b)}var A,M=[];for(r=0;r<g.length;r++)l=g[r],P[l]&&P[l].hot._selfAccepted&&M.push({module:l,errorHandler:P[l].hot._selfAccepted});p("dispose"),Object.keys(_).forEach(function(t){!1===_[t]&&function(t){delete installedChunks[t]}(t)});for(var j,R,I=g.slice();I.length>0;)if(l=I.pop(),u=P[l]){var L={},D=u.hot._disposeHandlers;for(o=0;o<D.length;o++)(n=D[o])(L);for(a[l]=L,u.hot.active=!1,delete P[l],delete v[l],o=0;o<u.children.length;o++){var F=P[u.children[o]];F&&(A=F.parents.indexOf(l))>=0&&F.parents.splice(A,1)}}for(l in v)if(Object.prototype.hasOwnProperty.call(v,l)&&(u=P[l]))for(R=v[l],o=0;o<R.length;o++)j=R[o],(A=u.children.indexOf(j))>=0&&u.children.splice(A,1);for(l in p("apply"),i=y,m)Object.prototype.hasOwnProperty.call(m,l)&&(t[l]=m[l]);var N=null;for(l in v)if(Object.prototype.hasOwnProperty.call(v,l)&&(u=P[l])){R=v[l];var B=[];for(r=0;r<R.length;r++)if(j=R[r],n=u.hot._acceptedDependencies[j]){if(-1!==B.indexOf(n))continue;B.push(n)}for(r=0;r<B.length;r++){n=B[r];try{n(R)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:l,dependencyId:R[r],error:t}),e.ignoreErrored||N||(N=t)}}}for(r=0;r<M.length;r++){var z=M[r];l=z.module,s=[l];try{C(l)}catch(t){if("function"==typeof z.errorHandler)try{z.errorHandler(t)}catch(n){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,originalError:t}),e.ignoreErrored||N||(N=n),N||(N=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:l,error:t}),e.ignoreErrored||N||(N=t)}}return N?(p("fail"),Promise.reject(N)):(p("idle"),new Promise(function(t){t(g)}))}var P={};function C(e){if(P[e])return P[e].exports;var r=P[e]={i:e,l:!1,exports:{},hot:function(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(t,n){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var r=0;r<t.length;r++)e._acceptedDependencies[t[r]]=n||function(){};else e._acceptedDependencies[t]=n||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._declinedDependencies[t[n]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var n=e._disposeHandlers.indexOf(t);n>=0&&e._disposeHandlers.splice(n,1)},check:w,apply:S,status:function(t){if(!t)return f;c.push(t)},addStatusHandler:function(t){c.push(t)},removeStatusHandler:function(t){var e=c.indexOf(t);e>=0&&c.splice(e,1)},data:a[t]};return n=void 0,e}(e),parents:(u=s,s=[],u),children:[]};return t[e].call(r.exports,r,r.exports,l(e)),r.l=!0,r.exports}return C.m=t,C.c=P,C.d=function(t,e,n){C.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},C.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},C.t=function(t,e){if(1&e&&(t=C(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(C.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)C.d(n,r,function(e){return t[e]}.bind(null,r));return n},C.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return C.d(e,"a",e),e},C.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},C.p="",C.h=function(){return i},l(25)(C.s=25)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(t){var r,i=n(41),o=n(19),a=n(47),s=n(48),u=n(49);t&&t.ArrayBuffer&&(r=n(51));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),c="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=l||c;e.protocol=3;var p=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=i(p),d={type:"error",data:"parser error"},y=n(52);function v(t,e,n){for(var r=new Array(t.length),i=s(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},a=0;a<t.length;a++)o(a,t[a],i)}e.encodePacket=function(n,r,i,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof i&&(o=i,i=null);var a=void 0===n.data?void 0:n.data.buffer||n.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=p[t.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}(n,r,o);if(y&&a instanceof t.Blob)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(f)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,e.encodePacket(t,n,!0,r)},i.readAsArrayBuffer(t.data)}(t,n,r);var i=new Uint8Array(1);return i[0]=p[t.type],r(new y([i.buffer,t.data]))}(n,r,o);if(a&&a.base64)return function(t,n){return o("b"+e.packets[t.type]+t.data.data)}(n);var s=p[n.type];return void 0!==n.data&&(s+=i?u.encode(String(n.data),{strict:!1}):String(n.data)),o(""+s)},e.encodeBase64Packet=function(n,r){var i,o="b"+e.packets[n.type];if(y&&n.data instanceof t.Blob){var a=new FileReader;return a.onload=function(){var t=a.result.split(",")[1];r(o+t)},a.readAsDataURL(n.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(t){for(var s=new Uint8Array(n.data),u=new Array(s.length),l=0;l<s.length;l++)u[l]=s[l];i=String.fromCharCode.apply(null,u)}return o+=t.btoa(i),r(o)},e.decodePacket=function(t,n,r){if(void 0===t)return d;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=u.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return d;var i=t.charAt(0);return Number(i)==i&&h[i]?t.length>1?{type:h[i],data:t.substring(1)}:{type:h[i]}:d}i=new Uint8Array(t)[0];var o=a(t,1);return y&&"blob"===n&&(o=new y([o])),{type:h[i],data:o}},e.decodeBase64Packet=function(t,e){var n=h[t.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:t.substr(1)}};var i=r.decode(t.substr(1));return"blob"===e&&y&&(i=new y([i])),{type:n,data:i}},e.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var i=o(t);return n&&i?y&&!f?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void v(t,function(t,r){e.encodePacket(t,!!i&&n,!1,function(t){r(null,function(t){return t.length+":"+t}(t))})},function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);var i;if("function"==typeof n&&(r=n,n=null),""===t)return r(d,0,1);for(var o,a,s="",u=0,l=t.length;u<l;u++){var c=t.charAt(u);if(":"===c){if(""===s||s!=(o=Number(s)))return r(d,0,1);if(s!=(a=t.substr(u+1,o)).length)return r(d,0,1);if(a.length){if(i=e.decodePacket(a,n,!1),d.type===i.type&&d.data===i.data)return r(d,0,1);if(!1===r(i,u+o,l))return}u+=o,s=""}else s+=c}return""!==s?r(d,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));v(t,function(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})},function(t,e){var r=e.reduce(function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2},0),i=new Uint8Array(r),o=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);n=r.buffer}i[o++]=e?0:1;var s=n.byteLength.toString();for(a=0;a<s.length;a++)i[o++]=parseInt(s[a]);for(i[o++]=255,r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),n(i.buffer)})},e.encodePayloadAsBlob=function(t,n){v(t,function(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,e[0]=0}var o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),a=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)a[i]=parseInt(o[i]);if(a[o.length]=255,y){var s=new y([e.buffer,a.buffer,t]);n(null,s)}})},function(t,e){return n(new y(e))})},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var i=t,o=[];i.byteLength>0;){for(var s=new Uint8Array(i),u=0===s[0],l="",c=1;255!==s[c];c++){if(l.length>310)return r(d,0,1);l+=s[c]}i=a(i,2+l.length),l=parseInt(l);var f=a(i,0,l);if(u)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(t){var p=new Uint8Array(f);for(f="",c=0;c<p.length;c++)f+=String.fromCharCode(p[c])}o.push(f),i=a(i,l)}var h=o.length;o.forEach(function(t,i){r(e.decodePacket(t,n,!0),i,h)})}}).call(this,n(0))},function(t,e,n){(function(r){function i(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}(e=t.exports=n(33)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())}).call(this,n(4))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,f=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!c){var t=s(p);c=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(r){function i(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}(e=t.exports=n(53)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())}).call(this,n(4))},function(t,e,n){(t.exports=n(27)(!1)).push([t.i,"",""])},function(t,e){var n=1e3,r=6e4,i=36e5,o=24*i;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var s=typeof t;if("string"===s&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===s&&!1===isNaN(t))return e.long?function(t){return a(t,o,"day")||a(t,i,"hour")||a(t,r,"minute")||a(t,n,"second")||t+" ms"}(t):function(t){return t>=o?Math.round(t/o)+"d":t>=i?Math.round(t/i)+"h":t>=r?Math.round(t/r)+"m":t>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){var r=n(34)("socket.io-parser"),i=n(1),o=n(36),a=n(14),s=n(15);function u(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=u,e.Decoder=f;var l=e.ERROR+'"encode error"';function c(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var i=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===i)return l;n+=i}return r("encoded %j as %s",t,n),n}function f(){this.reconstructor=null}function p(t){this.reconPack=t,this.buffers=[]}function h(t){return{type:e.ERROR,data:"parser error: "+t}}u.prototype.encode=function(t,n){r("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?function(t,e){o.removeBlobs(t,function(t){var n=o.deconstructPacket(t),r=c(n.packet),i=n.buffers;i.unshift(r),e(i)})}(t,n):n([c(t)])},i(f.prototype),f.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n=0,i={type:Number(t.charAt(0))};if(null==e.types[i.type])return h("unknown packet type "+i.type);if(e.BINARY_EVENT===i.type||e.BINARY_ACK===i.type){for(var o="";"-"!==t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!==t.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===t.charAt(n+1))for(i.nsp="";++n&&","!==(u=t.charAt(n))&&(i.nsp+=u,n!==t.length););else i.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(i.id="";++n;){var u;if(null==(u=t.charAt(n))||Number(u)!=u){--n;break}if(i.id+=t.charAt(n),n===t.length)break}i.id=Number(i.id)}if(t.charAt(++n)){var l=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(n));if(!1===l||i.type!==e.ERROR&&!a(l))return h("invalid payload");i.data=l}return r("decoded %s as %j",t,i),i}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){(function(e){var r=n(39);t.exports=function(t){var n=t.xdomain,i=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(t){}if(!n)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(this,n(0))},function(t,e,n){var r=n(2),i=n(1);function o(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=o,i(o.prototype),o.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},o.prototype.onPacket=function(t){this.emit("packet",t)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var a=n.exec(t||""),s={},u=14;u--;)s[r[u]]=a[u]||"";return-1!=i&&-1!=o&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(e){t.exports=function(t){return n&&e.Buffer.isBuffer(t)||r&&(t instanceof e.ArrayBuffer||i(t))};var n="function"==typeof e.Buffer&&"function"==typeof e.Buffer.isBuffer,r="function"==typeof e.ArrayBuffer,i=r&&"function"==typeof e.ArrayBuffer.isView?e.ArrayBuffer.isView:function(t){return t.buffer instanceof e.ArrayBuffer}}).call(this,n(0))},function(t,e,n){var r=n(37),i=n(22),o=n(1),a=n(10),s=n(23),u=n(24),l=n(3)("socket.io-client:manager"),c=n(21),f=n(58),p=Object.prototype.hasOwnProperty;function h(t,e){if(!(this instanceof h))return new h(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=h,h.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},h.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},h.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},o(h.prototype),h.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},h.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},h.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(t,e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=s(n,"open",function(){i.onopen(),t&&t()}),a=s(n,"error",function(e){if(l("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var u=this._timeout;l("connect attempt will timeout after %d",u);var c=setTimeout(function(){l("connect attempt timed out after %d",u),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",u)},u);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(a),this},h.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(s(t,"data",u(this,"ondata"))),this.subs.push(s(t,"ping",u(this,"onping"))),this.subs.push(s(t,"pong",u(this,"onpong"))),this.subs.push(s(t,"error",u(this,"onerror"))),this.subs.push(s(t,"close",u(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",u(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(t){this.decoder.add(t)},h.prototype.ondecoded=function(t){this.emit("packet",t)},h.prototype.onerror=function(t){l("error",t),this.emitAll("error",t)},h.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new i(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",o),n.on("connect",function(){n.id=r.generateId(t)}),this.autoConnect&&o()}function o(){~c(r.connecting,n)||r.connecting.push(n)}return n},h.prototype.destroy=function(t){var e=c(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},h.prototype.packet=function(t){l("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},h.prototype.cleanup=function(){l("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(t){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(l("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(l("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(l("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},h.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){(function(t){var r=n(11),i=n(40),o=n(54),a=n(55);e.polling=function(e){var n=!1,a=!1,s=!1!==e.jsonp;if(t.location){var u="https:"===location.protocol,l=location.port;l||(l=u?443:80),n=e.hostname!==location.hostname||l!==e.port,a=e.secure!==u}if(e.xdomain=n,e.xscheme=a,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!s)throw new Error("JSONP disabled");return new o(e)},e.websocket=a}).call(this,n(0))},function(t,e,n){var r=n(12),i=n(5),o=n(2),a=n(6),s=n(20),u=n(7)("engine.io-client:polling");t.exports=c;var l=null!=new(n(11))({xdomain:!1}).responseType;function c(t){var e=t&&t.forceBase64;l&&!e||(this.supportsBinary=!1),r.call(this,t)}a(c,r),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause=function(t){var e=this;function n(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||n()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||n()}))}else n()},c.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},c.prototype.onData=function(t){var e=this;u("polling got data %s",t),o.decodePayload(t,this.socket.binaryType,function(t,n,r){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},c.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},c.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},c.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){(function(e){var r=n(46),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.exports=function t(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var i=0,s=n.length;i<s;i++)if(t(n[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof Blob||a&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&t(n[u]))return!0;return!1}}).call(this,n(42).Buffer)},function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,a={},s=0,u=0;function l(t){var e="";do{e=i[t%o]+e,t=Math.floor(t/o)}while(t>0);return e}function c(){var t=l(+new Date);return t!==r?(s=0,r=t):t+"."+l(s++)}for(;u<o;u++)a[i[u]]=u;c.encode=l,c.decode=function(t){var e=0;for(u=0;u<t.length;u++)e=e*o+a[t.charAt(u)];return e},t.exports=c},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(10),i=n(1),o=n(57),a=n(23),s=n(24),u=n(3)("socket.io-client:socket"),l=n(5),c=n(19);t.exports=h;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;function h(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",s(this,"onopen")),a(t,"packet",s(this,"onpacket")),a(t,"close",s(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},h.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},h.prototype.emit=function(t){if(f.hasOwnProperty(t))return p.apply(this,arguments),this;var e=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:c(e))?r.BINARY_EVENT:r.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},h.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},h.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?l.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:r.CONNECT,query:t})}else this.packet({type:r.CONNECT})},h.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},h.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===r.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},h.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},h.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);u("sending ack %j",i),e.packet({type:c(i)?r.BINARY_ACK:r.ACK,id:t,data:i})}}},h.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(t){return this.flags.compress=t,this},h.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(26);var r=n(30);e.default=r.cuXfilter},function(t,e,n){var r=n(8);"string"==typeof r&&(r=[[t.i,r,""]]);var i=n(28)(r,{hmr:!0,transform:void 0,insertInto:void 0});r.locals&&(t.exports=r.locals),t.hot.accept(8,function(){var e=n(8);if("string"==typeof e&&(e=[[t.i,e,""]]),!function(t,e){var n,r=0;for(n in t){if(!e||t[n]!==e[n])return!1;r++}for(n in e)r--;return 0===r}(r.locals,e.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(e)}),t.hot.dispose(function(){i()})},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),e}}(),o=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),a=null,s=0,u=[],l=n(29);function c(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(v(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(v(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function p(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function d(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),y(e,t.attrs),p(t,e),e}function y(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function v(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var u=s++;n=a||(a=d(e)),r=m.bind(null,n,u,!1),i=m.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=l(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(e),r=function(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){h(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return c(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}for(t&&c(f(t,e),e),o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete r[s.id]}}}};var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function m(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cuXfilter=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(31)),o=n(59);e.cuXfilter=function(){function t(e,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"arrow";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=e,this.url=n,this.connected=!1,this.size=0,this.schema=[],this.childDimension={},this.engine=r,this.useSessions=i,this.load_type=o,this.updateEvent=new CustomEvent("updateEvent",{detail:"some other tab made changes to dimensions/groupbys"})}return r(t,[{key:"init",value:function(t){var e=this;return new Promise(function(t,n){fetch(e.url+"/cuXfilter",{method:"GET",credentials:"include"}).then(function(r){e.socket=(0,i.default)(e.url,{path:"/cuXfilter"}),e.socket.on("connect",function(){console.log("connected to server"),e.tryConnecting(1,function(e){-1===e?n("check if server is running"):t(e)})}),e.socket.on("disconnect",function(){e.connected=!1}),e.initSocketListeners()})})}},{key:"tryConnecting",value:function(t,e){var n=this;t<3?this.socket.emit("init",this.dataset,this.engine,this.useSessions,function(r,i){r?n.tryConnecting(t+1,function(t){"function"==typeof e&&e(t)}):(n.connected=!0,n.loadData(function(t){"function"==typeof e&&e(t)}))}):(e(-1),console.log("could not connect, check if server container is running and gdf environment is activated"))}},{key:"initSocketListeners",value:function(){var t=this;this.socket.on("update_size",function(e,n,r){t.dataset===e&&t.engine===n&&(t.size=parseInt(r),dispatchEvent(new CustomEvent("updateSizeEvent",{detail:{dataset:e}})))}),this.socket.on("all_updates_complete",function(e,n){t.dataset===e&&t.engine===n&&dispatchEvent(new CustomEvent("allUpdatesComplete",{detail:{dataset:e}}))}),this.socket.on("session_ended",function(e,n,r){n==t.engine&&(t.connected=!1,console.log("connection ended by neighboring tab"))}),this.socket.on("update_hist",function(e,n,r){n==t.engine&&(t.childDimension[e].histogram=JSON.parse(JSON.parse(r).data),t.childDimension[e].updateMaxMin(),dispatchEvent(new CustomEvent("updateHistEvent",{detail:{column:e}})))}),this.socket.on("update_dimension",function(e,n,r){n==t.engine&&(t.childDimension[e].value=JSON.parse(JSON.parse(r).data),t.childDimension[e].updateMaxMin(),dispatchEvent(new CustomEvent("updateDimensionEvent",{detail:{column:e}})))}),this.socket.on("update_group",function(e,n,r,i){r==t.engine&&(t.childDimension[e].childGroup[e+n].value=JSON.parse(JSON.parse(i).data),dispatchEvent(new CustomEvent("updateGroupEvent",{detail:{column:e,aggregate:JSON.parse(n)}})))})}},{key:"loadData",value:function(t){var e=this;if(this.connected){var n=Date.now();this.socket.emit("load_data",this.dataset,this.engine,this.load_type,function(r,i){i=JSON.parse(i),e.initMetaData(function(e){i.browserTime=(Date.now()-n)/1e3,"function"==typeof t&&t(i)})})}else t("Not connected")}},{key:"initMetaData",value:function(t){this.connected?(this.getSize(),this.getSchema(function(e){"function"==typeof t&&t(e)})):console.log("Not connected")}},{key:"getSchema",value:function(t){var e=this;if(this.connected){var n=Date.now();this.socket.emit("get_schema",this.dataset,this.engine,function(r,i){(i=JSON.parse(i)).browserTime=(Date.now()-n)/1e3,e.schema=i.data.replace(/[\[\]']+/g,"").split(", "),i.data="successfully loaded schema",t(i)})}else console.log("Not connected")}},{key:"getSize",value:function(){this.connected?this.socket.emit("size",this.dataset,this.engine):console.log("Not connected")}},{key:"isConnected",value:function(){return this.connected}},{key:"dimension",value:function(t,e){return this.childDimension[t]=new o.Dimension(t,this.dataset,this.socket,this.engine),this.childDimension[t]}},{key:"resetAllFilters",value:function(){this.socket.emit("reset_all_filters",this.dataset,this.engine)}},{key:"endSession",value:function(){var t=this;return new Promise(function(e,n){var r=Date.now();t.socket.emit("endSession",t.dataset,t.engine,function(i,o){i?n(i):((o=JSON.parse(o)).browserTime=(Date.now()-r)/1e3,t.connected=!1,e(o))})})}}]),t}()},function(t,e,n){var r=n(32),i=n(10),o=n(16),a=n(3)("socket.io-client");t.exports=e=u;var s=e.managers={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i=r(t),u=i.source,l=i.id,c=i.path,f=s[l]&&c in s[l].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||f?(a("ignoring socket cache for %s",u),n=o(u,e)):(s[l]||(a("new io instance for %s",u),s[l]=o(u,e)),n=s[l]),i.query&&!e.query&&(e.query=i.query),n.socket(i.path,e)}e.protocol=i.protocol,e.connect=u,e.Manager=n(16),e.Socket=n(22)},function(t,e,n){(function(e){var r=n(13),i=n(3)("socket.io-client:url");t.exports=function(t,n){var o=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),i("parse %s",t),o=r(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var a=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+a+":"+o.port,o.href=o.protocol+"://"+a+(n&&n.port===o.port?"":":"+o.port),o}}).call(this,n(0))},function(t,e,n){function r(t){var n;function r(){if(r.enabled){var t=r,i=+new Date,o=i-(n||i);t.diff=o,t.prev=n,t.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(t,o),a.splice(u,1),u--}return n}),e.formatArgs.call(t,a),(r.log||e.log||console.log.bind(console)).apply(t,a)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),r.destroy=i,"function"==typeof e.init&&e.init(r),e.instances.push(r),r}function i(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(9),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,n){(function(r){function i(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}(e=t.exports=n(35)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())}).call(this,n(4))},function(t,e,n){function r(t){var n;function r(){if(r.enabled){var t=r,i=+new Date,o=i-(n||i);t.diff=o,t.prev=n,t.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(t,o),a.splice(u,1),u--}return n}),e.formatArgs.call(t,a),(r.log||e.log||console.log.bind(console)).apply(t,a)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),r.destroy=i,"function"==typeof e.init&&e.init(r),e.instances.push(r),r}function i(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(9),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,n){(function(t){var r=n(14),i=n(15),o=Object.prototype.toString,a="function"==typeof t.Blob||"[object BlobConstructor]"===o.call(t.Blob),s="function"==typeof t.File||"[object FileConstructor]"===o.call(t.File);e.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=function t(e,n){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(r(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s],n);return a}if("object"==typeof e&&!(e instanceof Date)){for(var u in a={},e)a[u]=t(e[u],n);return a}return e}(n,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(r(e))for(var i=0;i<e.length;i++)e[i]=t(e[i],n);else if("object"==typeof e)for(var o in e)e[o]=t(e[o],n);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,o=t;!function t(u,l,c){if(!u)return u;if(a&&u instanceof Blob||s&&u instanceof File){n++;var f=new FileReader;f.onload=function(){c?c[l]=this.result:o=this.result,--n||e(o)},f.readAsArrayBuffer(u)}else if(r(u))for(var p=0;p<u.length;p++)t(u[p],p,u);else if("object"==typeof u&&!i(u))for(var h in u)t(u[h],h,u)}(o),n||e(o)}}).call(this,n(0))},function(t,e,n){t.exports=n(38),t.exports.parser=n(2)},function(t,e,n){(function(e){var r=n(17),i=n(1),o=n(7)("engine.io-client:socket"),a=n(21),s=n(2),u=n(13),l=n(5);function c(t,n){if(!(this instanceof c))return new c(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var r="object"==typeof e&&e;r.global===r&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=c,c.priorWebsocketSuccess=!1,i(c.prototype),c.protocol=s.protocol,c.Socket=c,c.Transport=n(12),c.transports=n(17),c.parser=n(2),c.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=s.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new r[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},c.prototype.open=function(){var t;if(this.rememberUpgrade&&c.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},c.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},c.prototype.probe=function(t){o('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(o('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;c.priorWebsocketSuccess="websocket"===e.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),p(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())})}else{o('probe transport "%s" failed',t);var a=new Error("probe error");a.transport=e.name,r.emit("upgradeError",a)}}))}function a(){n||(n=!0,p(),e.close(),e=null)}function s(n){var i=new Error("probe error: "+n);i.transport=e.name,a(),o('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",i)}function u(){s("transport closed")}function l(){s("socket closed")}function f(t){e&&t.name!==e.name&&(o('"%s" works - aborting "%s"',t.name,e.name),a())}function p(){e.removeListener("open",i),e.removeListener("error",s),e.removeListener("close",u),r.removeListener("close",l),r.removeListener("upgrading",f)}c.priorWebsocketSuccess=!1,e.once("open",i),e.once("error",s),e.once("close",u),this.once("close",l),this.once("upgrading",f),e.open()},c.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",c.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},c.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},c.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},c.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},c.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},c.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},c.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},c.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},c.prototype.write=c.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},c.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},c.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}function e(){t.onClose("forced close"),o("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},c.prototype.onError=function(t){o("socket error %j",t),c.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},c.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},c.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~a(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,n(0))},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,n){(function(e){var r=n(11),i=n(18),o=n(1),a=n(6),s=n(7)("engine.io-client:polling-xhr");function u(){}function l(t){if(i.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}}function c(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function f(){for(var t in c.requests)c.requests.hasOwnProperty(t)&&c.requests[t].abort()}t.exports=l,t.exports.Request=c,a(l,i),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new c(t)},l.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},l.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},o(c.prototype),c.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new r(t),i=this;try{s("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}catch(t){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){i.onLoad()},n.onerror=function(){i.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState)try{var t=n.getResponseHeader("Content-Type");i.supportsBinary&&"application/octet-stream"===t&&(n.responseType="arraybuffer")}catch(t){}4===n.readyState&&(200===n.status||1223===n.status?i.onLoad():setTimeout(function(){i.onError(n.status)},0))},s("xhr data %s",this.data),n.send(this.data)}catch(t){return void setTimeout(function(){i.onError(t)},0)}e.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},c.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},c.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(t){}e.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},c.prototype.hasXDR=function(){return void 0!==e.XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},c.requestsCount=0,c.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",f):e.addEventListener&&e.addEventListener("beforeunload",f,!1))}).call(this,n(0))},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(43),i=n(44),o=n(45);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=s(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,p=0;p<u;p++)if(l(t,o+p)!==l(e,p)){f=!1;break}if(f)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,r){return V(z(e,t.length-n),t,n,r)}function _(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return _(t,e,n,r)}function w(t,e,n,r){return V(U(e),t,n,r)}function E(t,e,n,r){return V(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,l=t[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=P));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),l=this.slice(r,i),c=t.slice(e,n),f=0;f<s;++f)if(l[f]!==c[f]){o=l[f],a=c[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function k(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function A(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function I(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,o){return o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||j(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||j(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:z(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(0))},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=l(t),r=n[0],a=n[1],s=new o(3*(r+a)/4-a),u=0,c=a>0?r-4:r,f=0;f<c;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;return 2===a&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,s[u++]=255&e),1===a&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e),s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(f(t,a,a+16383>s?s:a+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function f(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(c(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,p=n?-1:1,h=t[e+f];for(f+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+t[e+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+h]=255&a,h+=d,a/=256,l-=8);t[n+h-d]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),a=e,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},function(t,e){function n(){}t.exports=function(t,e,r){var i=!1;return r=r||n,o.count=t,0===t?e():o;function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/utf8js v2.1.2 by @mathias */!function(o){var a=(t&&t.exports,"object"==typeof r&&r);a.global!==a&&a.window;var s,u,l,c=String.fromCharCode;function f(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function p(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function h(t,e){return c(t>>e&63|128)}function d(t,e){if(0==(4294967168&t))return c(t);var n="";return 0==(4294965248&t)?n=c(t>>6&31|192):0==(4294901760&t)?(p(t,e)||(t=65533),n=c(t>>12&15|224),n+=h(t,6)):0==(4292870144&t)&&(n=c(t>>18&7|240),n+=h(t,12),n+=h(t,6)),n+c(63&t|128)}function y(){if(l>=u)throw Error("Invalid byte index");var t=255&s[l];if(l++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function v(t){var e,n;if(l>u)throw Error("Invalid byte index");if(l==u)return!1;if(e=255&s[l],l++,0==(128&e))return e;if(192==(224&e)){if((n=(31&e)<<6|y())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&e)){if((n=(15&e)<<12|y()<<6|y())>=2048)return p(n,t)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(n=(7&e)<<18|y()<<12|y()<<6|y())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var g={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=f(t),i=r.length,o=-1,a="";++o<i;)a+=d(r[o],n);return a},decode:function(t,e){var n=!1!==(e=e||{}).strict;s=f(t),u=s.length,l=0;for(var r,i=[];!1!==(r=v(n));)i.push(r);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=c((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=c(e);return i}(i)}};void 0===(i=function(){return g}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(50)(t),n(0))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,r,i,o,a,s=.75*t.length,u=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(e=0;e<u;e+=4)r=n[t.charCodeAt(e)],i=n[t.charCodeAt(e+1)],o=n[t.charCodeAt(e+2)],a=n[t.charCodeAt(e+3)],f[l++]=r<<2|i>>4,f[l++]=(15&i)<<4|o>>2,f[l++]=(3&o)<<6|63&a;return c}}()},function(t,e,n){(function(e){var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function a(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}t[e]=r}}}t.exports=r?i?e.Blob:function(t,e){return a(t),new Blob(t,e||{})}:o?function(t,e){e=e||{};var r=new n;a(t);for(var i=0;i<t.length;i++)r.append(t[i]);return e.type?r.getBlob(e.type):r.getBlob()}:void 0}).call(this,n(0))},function(t,e,n){function r(t){var n;function r(){if(r.enabled){var t=r,i=+new Date,o=i-(n||i);t.diff=o,t.prev=n,t.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(t,o),a.splice(u,1),u--}return n}),e.formatArgs.call(t,a),(r.log||e.log||console.log.bind(console)).apply(t,a)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),r.destroy=i,"function"==typeof e.init&&e.init(r),e.instances.push(r),r}function i(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(9),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,n){(function(e){var r=n(18),i=n(6);t.exports=l;var o,a=/\n/g,s=/\\n/g;function u(){}function l(t){r.call(this,t),this.query=this.query||{},o||(e.___eio||(e.___eio=[]),o=e.___eio),this.index=o.length;var n=this;o.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=u)},!1)}i(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},l.prototype.doWrite=function(t,e){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=u,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function l(){c(),e()}function c(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(t)}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),c(),t=t.replace(s,"\\\n"),this.area.value=t.replace(a,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&l()}:this.iframe.onload=l}}).call(this,n(0))},function(t,e,n){(function(e){var r,i=n(12),o=n(2),a=n(5),s=n(6),u=n(20),l=n(7)("engine.io-client:websocket"),c=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{r=n(56)}catch(t){}var f=c;function p(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=c&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(f=r),i.call(this,t)}f||"undefined"!=typeof window||(f=r),t.exports=p,s(p,i),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new f(t,e):new f(t):new f(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},p.prototype.write=function(t){var n=this;this.writable=!1;for(var r=t.length,i=0,a=r;i<a;i++)!function(t){o.encodePacket(t,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var o={};t.options&&(o.compress=t.options.compress),n.perMessageDeflate&&("string"==typeof i?e.Buffer.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,o)}catch(t){l("websocket closed before onclose event")}--r||(n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0))})}(t[i])},p.prototype.onClose=function(){i.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},p.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===p.prototype.name)}}).call(this,n(0))},function(t,e){},function(t,e){t.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dimension=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(60);n(61);var o=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.parent_dataset=n,this.max=0,this.min=0,this.socket=r,this.filters=[],this.childGroup={},this.engine=i,this.value={},this.histogram={X:{},Y:{}}}return r(t,[{key:"getMax",value:function(){return this.updateMaxMin(),this.max}},{key:"getMin",value:function(){return this.updateMaxMin(),this.min}},{key:"loadDimension",value:function(){var t=this;return new Promise(function(e,n){var r=Date.now();t.socket.emit("dimension_load",t.name,t.parent_dataset,t.engine,function(i,o){0==i?((o=JSON.parse(o)).browserTime=(Date.now()-r)/1e3,t.updateMaxMin(),e(o)):n(i)})})}},{key:"updateMaxMin",value:function(){var t=this;this.socket.emit("dimension_get_max_min",this.name,this.parent_dataset,this.engine,function(e,n){n=JSON.parse(n),t.max=parseFloat(n.data.split(",")[0].split("(")[1]),t.min=parseFloat(n.data.split(",")[1].split(")")[0])})}},{key:"getHist",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:640;this.socket.emit("dimension_get_hist",this.name,this.parent_dataset,t,this.engine)}},{key:"filterOrder",value:function(t,e,n){this.socket.emit("dimension_filter_order",t,this.name,this.parent_dataset,e,n,this.engine)}},{key:"resetThenFilter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.filters.length=0,this.filter(t,e,!0)}},{key:"filter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1;if(null==t&&null==e)r=!0,this.resetFilters();else if(null!==t&&null==e)if(Array.isArray(t)){r=!0;var i=t;this.filterRange(i,n)}else e=t,t="==";else Array.isArray(e)&&0==e.length&&(r=!0,this.resetFilters());0==r&&(this.filters.push(t+""+e),this.socket.emit("dimension_filter",this.name,this.parent_dataset,t,e,this.engine,n))}},{key:"filterRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t[0],r=t[1];this.filters.push(">"+n),this.filters.push("<"+r),Date.now(),this.socket.emit("dimension_filter_range",this.name,this.parent_dataset,n,r,this.engine,e)}},{key:"resetFilters",value:function(){this.filters.length=0,this.socket.emit("dimension_reset_filters",this.name,this.parent_dataset,this.engine)}},{key:"top",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.filterOrder("top",t,e.toString())}},{key:"bottom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.filterOrder("bottom",t,e.toString())}},{key:"all",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.filterOrder("all","null",t.toString())}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==t&&((t={})[this.name]=["mean"]);var e=this.name+JSON.stringify(t);return this.childGroup[e]=new i.Group(this.name,this.parent_dataset,this.socket,t,this.engine),this.childGroup[e]}}]),t}();e.Dimension=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.parent_dataset=n,this.socket=r,this.agg=i,this.size=0,this.engine=o,this.value={}}return r(t,[{key:"loadGroup",value:function(){var t=this;return new Promise(function(e,n){var r=Date.now();t.socket.emit("groupby_load",t.name,t.parent_dataset,JSON.stringify(t.agg),t.engine,function(i,o){0==i?(o=JSON.parse(o),t.size=parseInt(o.size),o.browserTime=(Date.now()-r)/1e3,e(o)):n(i)})})}},{key:"filterOrder",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.socket.emit("groupby_filter_order",t,this.name,this.parent_dataset,e,n,JSON.stringify(this.agg),this.engine)}},{key:"top",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e){var n=Object.keys(this.agg)[0];e=n+"_"+this.agg[n][0]}this.filterOrder("top",t,e)}},{key:"bottom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e){var n=Object.keys(this.agg)[0];e=n+"_"+this.agg[n][0]}this.filterOrder("bottom",t,e)}},{key:"all",value:function(){this.filterOrder("all","null","null")}}]),t}();e.Group=i},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])y(u)||!_(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(n,i){if(m(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function l(t,e){return t}function c(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return g(i)||(i=c(t,i,r)),i}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return a.forEach(function(t,n){e[t]=!0}),e}();if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),w(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(E(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(w(n))return f(n)}var l,_="",O=!1,S=["{","}"];return h(n)&&(O=!0,S=["[","]"]),E(n)&&(_=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(_=" "+RegExp.prototype.toString.call(n)),x(n)&&(_=" "+Date.prototype.toUTCString.call(n)),w(n)&&(_=" "+f(n)),0!==a.length||O&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=O?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)C(e,String(a))?o.push(p(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,e,n,r,i,!0))}),o}(t,n,r,s,a):a.map(function(e){return p(t,n,r,s,e,O)}),t.seen.pop(),function(t,e,n){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(l,_,S)):S[0]+_+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),C(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=y(n)?c(t,u.value,null):c(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function h(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return"number"==typeof t}function g(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return _(t)&&"[object RegExp]"===O(t)}function _(t){return"object"==typeof t&&null!==t}function x(t){return _(t)&&"[object Date]"===O(t)}function w(t){return _(t)&&("[object Error]"===O(t)||t instanceof Error)}function E(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(o)&&(o=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=b,e.isObject=_,e.isDate=x,e.isError=w,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(62);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(63),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,n(0),n(4))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}]).default},function(t,e,n){},function(t){t.exports={banks:["Ally Bank","AmTrust","AmeriHome Mortgage","Amerisave","Bank of America","Bishops Gate Mortgage","Caliber Funding","CashCall","Chicago Mortgage","Citi","Ditech","FDIC","Fedral Home of Chicago","Fifth Third Bank","Flagstar Bank","Franklin America","Freedom Mortgage","Fremont Bank","GMAC","Guild Mortgage","HSBC","HomeBridge","Homeward Mortgage","Impac Mortgage","Irwin Mortgage","JP Morgan Chase","LoanDepot.com","Metlife","NYCB","Nationstar Mortgage","Other","PHH Mortgage","PNC","PennyMac","Prospect Mortgage","Provident Funding","Pulte Mortgage","Quicken Loans","Regions","Sierra Pacific Mortgage","Stearns Lending","Stonegate Mortgage","Suntrust","US Bank","USAA","Unknown","Wells Fargo"]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=o(n(1));o(n(397));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default.Component),r(e,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return i.default.createElement("h1",null,"Sorry could not find page.")}}]),e}();e.default=a},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"easeLinear",function(){return c}),n.d(r,"easeQuad",function(){return h}),n.d(r,"easeQuadIn",function(){return f}),n.d(r,"easeQuadOut",function(){return p}),n.d(r,"easeQuadInOut",function(){return h}),n.d(r,"easeCubic",function(){return v}),n.d(r,"easeCubicIn",function(){return d}),n.d(r,"easeCubicOut",function(){return y}),n.d(r,"easeCubicInOut",function(){return v}),n.d(r,"easePoly",function(){return b}),n.d(r,"easePolyIn",function(){return g}),n.d(r,"easePolyOut",function(){return m}),n.d(r,"easePolyInOut",function(){return b}),n.d(r,"easeSin",function(){return O}),n.d(r,"easeSinIn",function(){return w}),n.d(r,"easeSinOut",function(){return E}),n.d(r,"easeSinInOut",function(){return O}),n.d(r,"easeExp",function(){return C}),n.d(r,"easeExpIn",function(){return S}),n.d(r,"easeExpOut",function(){return P}),n.d(r,"easeExpInOut",function(){return C}),n.d(r,"easeCircle",function(){return A}),n.d(r,"easeCircleIn",function(){return T}),n.d(r,"easeCircleOut",function(){return k}),n.d(r,"easeCircleInOut",function(){return A}),n.d(r,"easeBounce",function(){return V}),n.d(r,"easeBounceIn",function(){return U}),n.d(r,"easeBounceOut",function(){return V}),n.d(r,"easeBounceInOut",function(){return G}),n.d(r,"easeBack",function(){return H}),n.d(r,"easeBackIn",function(){return W}),n.d(r,"easeBackOut",function(){return q}),n.d(r,"easeBackInOut",function(){return H}),n.d(r,"easeElastic",function(){return Y}),n.d(r,"easeElasticIn",function(){return Z}),n.d(r,"easeElasticOut",function(){return Y}),n.d(r,"easeElasticInOut",function(){return K});var i={};n.r(i),n.d(i,"scaleBand",function(){return Oo}),n.d(i,"scalePoint",function(){return So}),n.d(i,"scaleIdentity",function(){return Qo}),n.d(i,"scaleLinear",function(){return Jo}),n.d(i,"scaleLog",function(){return aa}),n.d(i,"scaleOrdinal",function(){return Eo}),n.d(i,"scaleImplicit",function(){return wo}),n.d(i,"scalePow",function(){return ua}),n.d(i,"scaleSqrt",function(){return la}),n.d(i,"scaleQuantile",function(){return ca}),n.d(i,"scaleQuantize",function(){return fa}),n.d(i,"scaleThreshold",function(){return pa}),n.d(i,"scaleTime",function(){return Mu}),n.d(i,"scaleUtc",function(){return ju}),n.d(i,"schemeCategory10",function(){return Iu}),n.d(i,"schemeCategory20b",function(){return Lu}),n.d(i,"schemeCategory20c",function(){return Du}),n.d(i,"schemeCategory20",function(){return Fu}),n.d(i,"interpolateCubehelixDefault",function(){return Nu}),n.d(i,"interpolateRainbow",function(){return Vu}),n.d(i,"interpolateWarm",function(){return Bu}),n.d(i,"interpolateCool",function(){return zu}),n.d(i,"interpolateViridis",function(){return Wu}),n.d(i,"interpolateMagma",function(){return qu}),n.d(i,"interpolateInferno",function(){return Hu}),n.d(i,"interpolatePlasma",function(){return Xu}),n.d(i,"scaleSequential",function(){return Zu});var o={};n.r(o),n.d(o,"arc",function(){return Op}),n.d(o,"area",function(){return Ap}),n.d(o,"line",function(){return kp}),n.d(o,"pie",function(){return Rp}),n.d(o,"areaRadial",function(){return Bp}),n.d(o,"radialArea",function(){return Bp}),n.d(o,"lineRadial",function(){return Np}),n.d(o,"radialLine",function(){return Np}),n.d(o,"pointRadial",function(){return zp}),n.d(o,"linkHorizontal",function(){return Zp}),n.d(o,"linkVertical",function(){return Yp}),n.d(o,"linkRadial",function(){return Kp}),n.d(o,"symbol",function(){return dh}),n.d(o,"symbols",function(){return hh}),n.d(o,"symbolCircle",function(){return Jp}),n.d(o,"symbolCross",function(){return Qp}),n.d(o,"symbolDiamond",function(){return eh}),n.d(o,"symbolSquare",function(){return ah}),n.d(o,"symbolStar",function(){return oh}),n.d(o,"symbolTriangle",function(){return uh}),n.d(o,"symbolWye",function(){return ph}),n.d(o,"curveBasisClosed",function(){return _h}),n.d(o,"curveBasisOpen",function(){return wh}),n.d(o,"curveBasis",function(){return mh}),n.d(o,"curveBundle",function(){return Oh}),n.d(o,"curveCardinalClosed",function(){return kh}),n.d(o,"curveCardinalOpen",function(){return Mh}),n.d(o,"curveCardinal",function(){return Ch}),n.d(o,"curveCatmullRomClosed",function(){return Dh}),n.d(o,"curveCatmullRomOpen",function(){return Nh}),n.d(o,"curveCatmullRom",function(){return Ih}),n.d(o,"curveLinearClosed",function(){return zh}),n.d(o,"curveLinear",function(){return Pp}),n.d(o,"curveMonotoneX",function(){return Zh}),n.d(o,"curveMonotoneY",function(){return Yh}),n.d(o,"curveNatural",function(){return Qh}),n.d(o,"curveStep",function(){return td}),n.d(o,"curveStepAfter",function(){return nd}),n.d(o,"curveStepBefore",function(){return ed}),n.d(o,"stack",function(){return ad}),n.d(o,"stackOffsetExpand",function(){return sd}),n.d(o,"stackOffsetDiverging",function(){return ud}),n.d(o,"stackOffsetNone",function(){return rd}),n.d(o,"stackOffsetSilhouette",function(){return ld}),n.d(o,"stackOffsetWiggle",function(){return cd}),n.d(o,"stackOrderAscending",function(){return fd}),n.d(o,"stackOrderDescending",function(){return hd}),n.d(o,"stackOrderInsideOut",function(){return dd}),n.d(o,"stackOrderNone",function(){return id}),n.d(o,"stackOrderReverse",function(){return yd});var a=n(1),s=n.n(a),u=n(0),l=n.n(u);function c(t){return+t}function f(t){return t*t}function p(t){return t*(2-t)}function h(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function d(t){return t*t*t}function y(t){return--t*t*t+1}function v(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var g=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),m=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),b=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),_=Math.PI,x=_/2;function w(t){return 1-Math.cos(t*x)}function E(t){return Math.sin(t*x)}function O(t){return(1-Math.cos(_*t))/2}function S(t){return Math.pow(2,10*t-10)}function P(t){return 1-Math.pow(2,-10*t)}function C(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function T(t){return 1-Math.sqrt(1-t*t)}function k(t){return Math.sqrt(1- --t*t)}function A(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var M=4/11,j=6/11,R=8/11,I=.75,L=9/11,D=10/11,F=.9375,N=21/22,B=63/64,z=1/M/M;function U(t){return 1-V(1-t)}function V(t){return(t=+t)<M?z*t*t:t<R?z*(t-=j)*t+I:t<D?z*(t-=L)*t+F:z*(t-=N)*t+B}function G(t){return((t*=2)<=1?1-V(1-t):V(t-1)+1)/2}var W=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),q=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),H=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),X=2*Math.PI,Z=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=X);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*X)},i.period=function(n){return t(e,n)},i}(1,.3),Y=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=X);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*X)},i.period=function(n){return t(e,n)},i}(1,.3),K=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=X);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*X)},i.period=function(n){return t(e,n)},i}(1,.3),J=n(65),Q=n.n(J),$=n(40),tt=n.n($),et=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function nt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rt(){}var it="\\s*([+-]?\\d+)\\s*",ot="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",st=/^#([0-9a-f]{3})$/,ut=/^#([0-9a-f]{6})$/,lt=new RegExp("^rgb\\("+[it,it,it]+"\\)$"),ct=new RegExp("^rgb\\("+[at,at,at]+"\\)$"),ft=new RegExp("^rgba\\("+[it,it,it,ot]+"\\)$"),pt=new RegExp("^rgba\\("+[at,at,at,ot]+"\\)$"),ht=new RegExp("^hsl\\("+[ot,at,at]+"\\)$"),dt=new RegExp("^hsla\\("+[ot,at,at,ot]+"\\)$"),yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vt(t){var e;return t=(t+"").trim().toLowerCase(),(e=st.exec(t))?new xt((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=ut.exec(t))?gt(parseInt(e[1],16)):(e=lt.exec(t))?new xt(e[1],e[2],e[3],1):(e=ct.exec(t))?new xt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ft.exec(t))?mt(e[1],e[2],e[3],e[4]):(e=pt.exec(t))?mt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ht.exec(t))?Et(e[1],e[2]/100,e[3]/100,1):(e=dt.exec(t))?Et(e[1],e[2]/100,e[3]/100,e[4]):yt.hasOwnProperty(t)?gt(yt[t]):"transparent"===t?new xt(NaN,NaN,NaN,0):null}function gt(t){return new xt(t>>16&255,t>>8&255,255&t,1)}function mt(t,e,n,r){return r<=0&&(t=e=n=NaN),new xt(t,e,n,r)}function bt(t){return t instanceof rt||(t=vt(t)),t?new xt((t=t.rgb()).r,t.g,t.b,t.opacity):new xt}function _t(t,e,n,r){return 1===arguments.length?bt(t):new xt(t,e,n,null==r?1:r)}function xt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function wt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Et(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new St(t,e,n,r)}function Ot(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof rt||(t=vt(t)),!t)return new St;if(t instanceof St)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new St(a,s,u,t.opacity)}(t):new St(t,e,n,null==r?1:r)}function St(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Pt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}et(rt,vt,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),et(xt,_t,nt(rt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new xt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new xt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+wt(this.r)+wt(this.g)+wt(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),et(St,Ot,nt(rt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new St(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new xt(Pt(t>=240?t-240:t+120,i,r),Pt(t,i,r),Pt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ct=Math.PI/180,Tt=180/Math.PI,kt=.96422,At=1,Mt=.82521,jt=4/29,Rt=6/29,It=3*Rt*Rt,Lt=Rt*Rt*Rt;function Dt(t){if(t instanceof Nt)return new Nt(t.l,t.a,t.b,t.opacity);if(t instanceof qt){if(isNaN(t.h))return new Nt(t.l,0,0,t.opacity);var e=t.h*Ct;return new Nt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof xt||(t=bt(t));var n,r,i=Vt(t.r),o=Vt(t.g),a=Vt(t.b),s=Bt((.2225045*i+.7168786*o+.0606169*a)/At);return i===o&&o===a?n=r=s:(n=Bt((.4360747*i+.3850649*o+.1430804*a)/kt),r=Bt((.0139322*i+.0971045*o+.7141733*a)/Mt)),new Nt(116*s-16,500*(n-s),200*(s-r),t.opacity)}function Ft(t,e,n,r){return 1===arguments.length?Dt(t):new Nt(t,e,n,null==r?1:r)}function Nt(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Bt(t){return t>Lt?Math.pow(t,1/3):t/It+jt}function zt(t){return t>Rt?t*t*t:It*(t-jt)}function Ut(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Gt(t){if(t instanceof qt)return new qt(t.h,t.c,t.l,t.opacity);if(t instanceof Nt||(t=Dt(t)),0===t.a&&0===t.b)return new qt(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Tt;return new qt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Wt(t,e,n,r){return 1===arguments.length?Gt(t):new qt(t,e,n,null==r?1:r)}function qt(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}et(Nt,Ft,nt(rt,{brighter:function(t){return new Nt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Nt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new xt(Ut(3.1338561*(e=kt*zt(e))-1.6168667*(t=At*zt(t))-.4906146*(n=Mt*zt(n))),Ut(-.9787684*e+1.9161415*t+.033454*n),Ut(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),et(qt,Wt,nt(rt,{brighter:function(t){return new qt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new qt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Dt(this).rgb()}}));var Ht=-.14861,Xt=1.78277,Zt=-.29227,Yt=-.90649,Kt=1.97294,Jt=Kt*Yt,Qt=Kt*Xt,$t=Xt*Zt-Yt*Ht;function te(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ee)return new ee(t.h,t.s,t.l,t.opacity);t instanceof xt||(t=bt(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=($t*r+Jt*e-Qt*n)/($t+Jt-Qt),o=r-i,a=(Kt*(n-i)-Zt*o)/Yt,s=Math.sqrt(a*a+o*o)/(Kt*i*(1-i)),u=s?Math.atan2(a,o)*Tt-120:NaN;return new ee(u<0?u+360:u,s,i,t.opacity)}(t):new ee(t,e,n,null==r?1:r)}function ee(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ne(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}et(ee,te,nt(rt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ee(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ee(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ct,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new xt(255*(e+n*(Ht*r+Xt*i)),255*(e+n*(Zt*r+Yt*i)),255*(e+n*(Kt*r)),this.opacity)}}));var re=function(t){return function(){return t}};function ie(t,e){return function(n){return t+n*e}}function oe(t,e){var n=e-t;return n?ie(t,n>180||n<-180?n-360*Math.round(n/360):n):re(isNaN(t)?e:t)}function ae(t){return 1==(t=+t)?se:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):re(isNaN(e)?n:e)}}function se(t,e){var n=e-t;return n?ie(t,n):re(isNaN(t)?e:t)}var ue=function t(e){var n=ae(e);function r(t,e){var r=n((t=_t(t)).r,(e=_t(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=se(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function le(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=_t(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}le(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return ne((n-r/e)*e,a,i,o,s)}}),le(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return ne((n-r/e)*e,i,o,a,s)}});var ce=function(t,e){return e-=t=+t,function(n){return t+e*n}},fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(fe.source,"g");var he,de,ye,ve,ge=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?re(e):("number"===r?ce:"string"===r?(n=vt(e))?(e=n,ue):function(t,e){var n,r,i,o=fe.lastIndex=pe.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=fe.exec(t))&&(r=pe.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:ce(n,r)})),o=pe.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}:e instanceof vt?ue:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=ge(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=ge(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:ce)(t,e)},me=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},be=180/Math.PI,_e={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},xe=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*be,skewX:Math.atan(u)*be,scaleX:a,scaleY:s}};function we(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:ce(t,i)},{i:u-2,x:ce(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:ce(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:ce(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:ce(t,n)},{i:s-2,x:ce(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}we(function(t){return"none"===t?_e:(he||(he=document.createElement("DIV"),de=document.documentElement,ye=document.defaultView),he.style.transform=t,t=ye.getComputedStyle(de.appendChild(he),null).getPropertyValue("transform"),de.removeChild(he),t=t.slice(7,-1).split(","),xe(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),we(function(t){return null==t?_e:(ve||(ve=document.createElementNS("http://www.w3.org/2000/svg","g")),ve.setAttribute("transform",t),(t=ve.transform.baseVal.consolidate())?(t=t.matrix,xe(t.a,t.b,t.c,t.d,t.e,t.f)):_e)},", ",")",")"),Math.SQRT2;function Ee(t){return function(e,n){var r=t((e=Ot(e)).h,(n=Ot(n)).h),i=se(e.s,n.s),o=se(e.l,n.l),a=se(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}Ee(oe),Ee(se);function Oe(t){return function(e,n){var r=t((e=Wt(e)).h,(n=Wt(n)).h),i=se(e.c,n.c),o=se(e.l,n.l),a=se(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}Oe(oe),Oe(se);function Se(t){return function e(n){function r(e,r){var i=t((e=te(e)).h,(r=te(r)).h),o=se(e.s,r.s),a=se(e.l,r.l),s=se(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}Se(oe);var Pe=Se(se);var Ce,Te,ke=function(t){if(null!==t)switch(typeof t){case"undefined":return!1;case"number":return!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY;case"string":return!0;case"boolean":return!1;case"object":return t instanceof Date||Array.isArray(t)||tt()(t);case"function":return!0}return!1},Ae=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(r){return r<n?t:e}},Me=function(t,e){return function(n){return n>=1?e:function(){var r="function"==typeof t?t.apply(this,arguments):t,i="function"==typeof e?e.apply(this,arguments):e;return ge(r,i)(n)}}},je=function(t,e){var n,r=function(t,e){return t!==e&&ke(t)&&ke(e)?"function"==typeof t||"function"==typeof e?Me(t,e):"object"==typeof t&&tt()(t)||"object"==typeof e&&tt()(e)?je(t,e):ge(t,e):Ae(t,e)},i=function(t){return Array.isArray(t)?Q()(t,"key"):t},o={},a={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?o[n]=r(i(t[n]),i(e[n])):a[n]=e[n];return function(t){for(n in o)a[n]=o[n](t);return a}},Re=function(t,e){return t!==e&&ke(t)&&ke(e)?"function"==typeof t||"function"==typeof e?Me(t,e):tt()(t)||tt()(e)?je(t,e):"string"==typeof t||"string"==typeof e?function(t,e){var n=function(t){return"string"==typeof t?t.replace(/,/g,""):t};return ge(n(t),n(e))}(t,e):ge(t,e):Ae(t,e)},Ie=0,Le=0,De=0,Fe=1e3,Ne=0,Be=0,ze=0,Ue="object"==typeof performance&&performance.now?performance:Date,Ve="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ge(){return Be||(Ve(We),Be=Ue.now()+ze)}function We(){Be=0}function qe(){this._call=this._time=this._next=null}function He(t,e,n){var r=new qe;return r.restart(t,e,n),r}function Xe(){Be=(Ne=Ue.now())+ze,Ie=Le=0;try{!function(){Ge(),++Ie;for(var t,e=Ce;e;)(t=Be-e._time)>=0&&e._call.call(null,t),e=e._next;--Ie}()}finally{Ie=0,function(){var t,e,n=Ce,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ce=e);Te=t,Ye(r)}(),Be=0}}function Ze(){var t=Ue.now(),e=t-Ne;e>Fe&&(ze-=e,Ne=t)}function Ye(t){Ie||(Le&&(Le=clearTimeout(Le)),t-Be>24?(t<1/0&&(Le=setTimeout(Xe,t-Ue.now()-ze)),De&&(De=clearInterval(De))):(De||(Ne=Ue.now(),De=setInterval(Ze,Fe)),Ie=1,Ve(Xe)))}qe.prototype=He.prototype={constructor:qe,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ge():+n)+(null==e?0:+e),this._next||Te===this||(Te?Te._next=this:Ce=this,Te=this),this._call=t,this._time=n,Ye()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ye())}};function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Je=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shouldAnimate=!0,this.subscribers=[],this.loop=this.loop.bind(this),this.timer=He(this.loop)}return function(t,e,n){e&&Ke(t.prototype,e),n&&Ke(t,n)}(t,[{key:"bypassAnimation",value:function(){this.shouldAnimate=!1}},{key:"resumeAnimation",value:function(){this.shouldAnimate=!0}},{key:"loop",value:function(){this.subscribers.forEach(function(t){t.callback(Ge()-t.startTime,t.duration)})}},{key:"start",value:function(){this.timer.start()}},{key:"stop",value:function(){this.timer.stop()}},{key:"subscribe",value:function(t,e){return e=this.shouldAnimate?e:0,this.subscribers.push({startTime:Ge(),callback:t,duration:e})}},{key:"unsubscribe",value:function(t){null!==t&&delete this.subscribers[t-1]}}]),t}();function Qe(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var en=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?tn(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).state={data:Array.isArray(n.props.data)?n.props.data[0]:n.props.data,animationInfo:{progress:0,animating:!1}},n.interpolator=null,n.queue=Array.isArray(n.props.data)?n.props.data.slice(1):[],n.ease=r[n.toNewName(n.props.easing)],n.functionToBeRunEachFrame=n.functionToBeRunEachFrame.bind(tn(n)),n.getTimer=n.getTimer.bind(tn(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&$e(t.prototype,e),n&&$e(t,n)}(e,[{key:"componentDidMount",value:function(){this.queue.length&&this.traverseQueue()}},{key:"componentWillReceiveProps",value:function(t){var e;(this.getTimer().unsubscribe(this.loopID),Array.isArray(t.data))?(e=this.queue).push.apply(e,Qe(t.data)):(this.queue.length=0,this.queue.push(t.data));this.traverseQueue()}},{key:"componentWillUnmount",value:function(){this.loopID?this.getTimer().unsubscribe(this.loopID):this.getTimer().stop()}},{key:"getTimer",value:function(){return this.context.getTimer?this.context.getTimer():(this.timer||(this.timer=new Je),this.timer)}},{key:"toNewName",value:function(t){return"ease".concat(function(t){return t&&t[0].toUpperCase()+t.slice(1)}(t))}},{key:"traverseQueue",value:function(){var t=this;if(this.queue.length){var e=this.queue[0];this.interpolator=Re(this.state.data,e),this.props.delay?setTimeout(function(){t.loopID=t.getTimer().subscribe(t.functionToBeRunEachFrame,t.props.duration)},this.props.delay):this.loopID=this.getTimer().subscribe(this.functionToBeRunEachFrame,this.props.duration)}else this.props.onEnd&&this.props.onEnd()}},{key:"functionToBeRunEachFrame",value:function(t,e){var n=(e=void 0!==e?e:this.props.duration)?t/e:1;if(n>=1)return this.setState({data:this.interpolator(1),animationInfo:{progress:1,animating:!1}}),this.loopID&&this.getTimer().unsubscribe(this.loopID),this.queue.shift(),void this.traverseQueue();this.setState({data:this.interpolator(this.ease(n)),animationInfo:{progress:n,animating:n<1}})}},{key:"render",value:function(){return this.props.children(this.state.data,this.state.animationInfo)}}]),e}();Object.defineProperty(en,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryAnimation"}),Object.defineProperty(en,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:l.a.func,data:l.a.oneOfType([l.a.object,l.a.array]),delay:l.a.number,duration:l.a.number,easing:l.a.oneOf(["back","backIn","backOut","backInOut","bounce","bounceIn","bounceOut","bounceInOut","circle","circleIn","circleOut","circleInOut","linear","linearIn","linearOut","linearInOut","cubic","cubicIn","cubicOut","cubicInOut","elastic","elasticIn","elasticOut","elasticInOut","exp","expIn","expOut","expInOut","poly","polyIn","polyOut","polyInOut","quad","quadIn","quadOut","quadInOut","sin","sinIn","sinOut","sinInOut"]),onEnd:l.a.func}}),Object.defineProperty(en,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{data:{},delay:0,duration:1e3,easing:"quadInOut"}}),Object.defineProperty(en,"contextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{getTimer:l.a.func}});var nn=n(35),rn=n.n(nn),on=n(72),an=n.n(on),sn=n(5),un=n.n(sn),ln=n(3),cn=n.n(ln),fn=n(237),pn=n.n(fn),hn=n(15),dn=n.n(hn),yn={warn:function(t){0}};var vn=function(t){var e=function(e,n,r,i){var o=n[r];if(void 0===o||null===o)return e?new Error("Required `".concat(r,"` was not specified in `").concat(i,"`.")):null;for(var a=arguments.length,s=new Array(a>4?a-4:0),u=4;u<a;u++)s[u-4]=arguments[u];return t.apply(void 0,[n,r,i].concat(s))},n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n},gn=function(){return null},mn=function(){},bn=function(t){return void 0===t?mn:null===t?gn:t.constructor},_n=function(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).slice(8,-1)},xn={deprecated:function(t,e){return function(n,r,i){var o=n[r];return null!==o&&void 0!==o&&yn.warn('"'.concat(r,'" property of "').concat(i,'" has been deprecated ').concat(e)),l.a.checkPropTypes(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},r,t),n,r,i)}},allOfType:function(t){return vn(function(e,n,r){for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return t.reduce(function(t,i){return t||i.apply(void 0,[e,n,r].concat(o))},void 0)})},nonNegative:vn(function(t,e,n){var r=t[e];if("number"!=typeof r||r<0)return new Error("`".concat(e,"` in `").concat(n,"` must be a non-negative number."))}),integer:vn(function(t,e,n){var r=t[e];if("number"!=typeof r||r%1!=0)return new Error("`".concat(e,"` in `").concat(n,"` must be an integer."))}),greaterThanZero:vn(function(t,e,n){var r=t[e];if("number"!=typeof r||r<=0)return new Error("`".concat(e,"` in `").concat(n,"` must be a number greater than zero."))}),domain:vn(function(t,e,n){var r=t[e];if(!Array.isArray(r)||2!==r.length||r[1]===r[0])return new Error("`".concat(e,"` in `").concat(n,"` must be an array of two unique numeric values."))}),scale:vn(function(t,e,n){var r=["linear","time","log","sqrt"];if(!function(t){return dn()(t)?dn()(t.copy)&&dn()(t.domain)&&dn()(t.range):"string"==typeof t&&-1!==r.indexOf(t)}(t[e]))return new Error("`".concat(e,"` in `").concat(n,"` must be a d3 scale."))}),homogeneousArray:vn(function(t,e,n){var r=t[e];if(!Array.isArray(r))return new Error("`".concat(e,"` in `").concat(n,"` must be an array."));if(!(r.length<2)){var i=bn(r[0]),o=pn()(r,function(t){return i!==bn(t)});if(o){var a=_n(r[0]),s=_n(o);return new Error("Expected `".concat(e,"` in `").concat(n,"` to be a ")+"homogeneous array, but found types `".concat(a,"` and ")+"`".concat(s,"`."))}}}),matchDataLength:vn(function(t,e){if(t[e]&&Array.isArray(t[e])&&t[e].length!==t.data.length)return new Error("Length of data and ".concat(e," arrays must match."))})};function wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function En(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var On=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?En(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).map={},n.index=1,n.portalUpdate=n.portalUpdate.bind(En(n)),n.portalRegister=n.portalRegister.bind(En(n)),n.portalDeregister=n.portalDeregister.bind(En(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&wn(t.prototype,e),n&&wn(t,n)}(e,[{key:"portalRegister",value:function(){return++this.index}},{key:"portalUpdate",value:function(t,e){this.map[t]=e,this.forceUpdate()}},{key:"portalDeregister",value:function(t){delete this.map[t],this.forceUpdate()}},{key:"getChildren",value:function(){var t=this;return Object.keys(this.map).map(function(e){var n=t.map[e];return n?s.a.cloneElement(n,{key:e}):n})}},{key:"render",value:function(){return s.a.createElement("svg",this.props,this.getChildren())}}]),e}();Object.defineProperty(On,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"Portal"}),Object.defineProperty(On,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{className:l.a.string,height:xn.nonNegative,style:l.a.object,viewBox:l.a.string,width:xn.nonNegative}});var Sn=n(64),Pn=n.n(Sn),Cn=n(108),Tn=n.n(Cn);function kn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function An(t){var e=function(t){return void 0!==t},n=t._x,r=t._x1,i=t._x0,o=t._voronoiX,a=t._y,s=t._y1,u=t._y0,l=t._voronoiY,c=e(r)?r:n,f=e(s)?s:a,p={x:e(o)?o:c,x0:e(i)?i:n,y:e(l)?l:f,y0:e(u)?u:a};return un()({},p,t)}function Mn(t){var e=t.padding,n="number"==typeof e?e:0,r="object"==typeof e?e:{};return{top:r.top||n,bottom:r.bottom||n,left:r.left||n,right:r.right||n}}function jn(t,e,n){return dn()(t)?t(e,n):t}function Rn(t){return t*(Math.PI/180)}function In(t){var e=Mn(t),n=e.left,r=e.right,i=e.top,o=e.bottom,a=t.width,s=t.height;return Math.min(a-n-r,s-i-o)/2}var Ln={omit:kn,getPoint:An,scalePoint:function(t,e){var n=t.scale,r=t.polar,i=An(e),o=t.origin||{x:0,y:0},a=n.x(i.x),s=n.x(i.x0),u=n.y(i.y),l=n.y(i.y0);return{x:r?u*Math.cos(a)+o.x:a,x0:r?l*Math.cos(s)+o.x:s,y:r?-u*Math.sin(a)+o.y:u,y0:r?-l*Math.sin(s)+o.x:l}},getPadding:Mn,getStyles:function(t,e){if(!t)return un()({parent:{height:"100%",width:"100%"}},e);var n=t.data,r=t.labels,i=t.parent,o=e&&e.parent||{},a=e&&e.labels||{},s=e&&e.data||{};return{parent:un()({},i,o,{width:"100%",height:"100%"}),labels:un()({},r,a),data:un()({},n,s)}},evaluateProp:jn,evaluateStyle:function(t,e,n){return t&&Object.keys(t).some(function(e){return dn()(t[e])})?Object.keys(t).reduce(function(r,i){return r[i]=jn(t[i],e,n),r},{}):t},degreesToRadians:Rn,radiansToDegrees:function(t){return t/(Math.PI/180)},getRadius:In,getPolarOrigin:function(t){var e=t.width,n=t.height,r=Mn(t),i=r.top,o=r.bottom,a=r.left,s=r.right,u=Math.min(e-a-s,n-i-o)/2,l=e/2+a-s,c=n/2+i-o;return{x:l+u>e?u+a-s:l,y:c+u>n?u+i-o:c}},getRange:function(t,e){return t.range&&t.range[e]?t.range[e]:t.range&&Array.isArray(t.range)?t.range:t.polar?function(t,e){return"x"===e?[Rn(t.startAngle||0),Rn(t.endAngle||360)]:[t.innerRadius||0,In(t)]}(t,e):function(t,e){var n="x"!==e,r=Mn(t);return n?[t.height-r.bottom,r.top]:[r.left,t.width-r.right]}(t,e)},createAccessor:function(t){return dn()(t)?t:null===t||void 0===t?function(t){return t}:Tn()(t)},modifyProps:function(t,e,n){var r=kn(t.theme&&t.theme[n]?t.theme[n]:{},["style"]);return un()({},t,r,e)},getCurrentAxis:function(t,e){return e?"x"===t?"y":"x":t},reduceChildren:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=["data","domain","categories","polar","startAngle","endAngle","minDomain","maxDomain"],i=function(t,o,a){return t.reduce(function(t,u,l){var c=u.type&&u.type.role,f=u.props.name||"".concat(c,"-").concat(o[l]);if(u.props&&u.props.children){var p=cn()({},u.props,Pn()(n,r)),h=u.type&&dn()(u.type.getChildren)?u.type.getChildren(p):s.a.Children.toArray(u.props.children).map(function(t){var e=cn()({},t.props,Pn()(p,r));return s.a.cloneElement(t,e)}),d=h.map(function(t,e){return"".concat(f,"-").concat(e)}),y=i(h,d,u);t=t.concat(y)}else{var v=e(u,f,a);t=v?t.concat(v):t}return t},[])},o=t.map(function(t,e){return e});return i(t,o)},isHorizontal:function(t){if(void 0!==t.horizontal||!t.children)return t.horizontal;var e=function(t){return t.reduce(function(t,n){var r=n.props||{};return t||r.horizontal||!r.children?t=t||r.horizontal:e(s.a.Children.toArray(r.children))},!1)};return e(s.a.Children.toArray(t.children))}};function Dn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fn(){return(Fn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var zn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Bn(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).getTimer=n.getTimer.bind(Bn(n)),n.containerId=rn()(t)&&void 0!==t.containerId?t.containerId:an()("victory-container-"),n.savePortalRef=function(t){return n.portalRef=t,t},n.portalUpdate=function(t,e){return n.portalRef.portalUpdate(t,e)},n.portalRegister=function(){return n.portalRef.portalRegister()},n.portalDeregister=function(t){return n.portalRef.portalDeregister(t)},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Nn(t.prototype,e),n&&Nn(t,n)}(e,[{key:"getChildContext",value:function(){return{portalUpdate:this.portalUpdate,portalRegister:this.portalRegister,portalDeregister:this.portalDeregister,getTimer:this.getTimer}}},{key:"componentWillUnmount",value:function(){this.context.getTimer||this.getTimer().stop()}},{key:"getTimer",value:function(){return this.context.getTimer?this.context.getTimer():(this.timer||(this.timer=new Je),this.timer)}},{key:"getIdForElement",value:function(t){return"".concat(this.containerId,"-").concat(t)}},{key:"getChildren",value:function(t){return t.children}},{key:"renderContainer",value:function(t,e,n){var r=t.title,i=t.desc,o=t.portalComponent,a=t.className,u=t.width,l=t.height,c=t.portalZIndex,f=t.responsive,p=this.getChildren(t),h=f?{width:"100%",height:"100%"}:{width:u,height:l},d=cn()({pointerEvents:"none",touchAction:"none",position:"relative"},h),y=cn()({zIndex:c,position:"absolute",top:0,left:0},h),v=cn()({pointerEvents:"all"},h),g=cn()({overflow:"visible"},h),m={width:u,height:l,viewBox:e.viewBox,style:g};return s.a.createElement("div",{style:un()({},n,d),className:a,ref:t.containerRef},s.a.createElement("svg",Fn({},e,{style:v}),r?s.a.createElement("title",{id:this.getIdForElement("title")},r):null,i?s.a.createElement("desc",{id:this.getIdForElement("desc")},i):null,p),s.a.createElement("div",{style:y},s.a.cloneElement(o,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Dn(t,e,n[e])})}return t}({},m,{ref:this.savePortalRef}))))}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.responsive,i=t.events,o=r?this.props.style:Ln.omit(this.props.style,["height","width"]),a=cn()({width:e,height:n,role:"img","aria-labelledby":"".concat(this.getIdForElement("title")," ").concat(this.getIdForElement("desc")),viewBox:r?"0 0 ".concat(e," ").concat(n):void 0},i);return this.renderContainer(this.props,a,o)}}]),e}();Object.defineProperty(zn,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryContainer"}),Object.defineProperty(zn,"role",{configurable:!0,enumerable:!0,writable:!0,value:"container"}),Object.defineProperty(zn,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),className:l.a.string,containerId:l.a.oneOfType([l.a.number,l.a.string]),containerRef:l.a.func,desc:l.a.string,events:l.a.object,height:xn.nonNegative,name:l.a.string,origin:l.a.shape({x:xn.nonNegative,y:xn.nonNegative}),polar:l.a.bool,portalComponent:l.a.element,portalZIndex:xn.integer,responsive:l.a.bool,style:l.a.object,theme:l.a.object,title:l.a.string,width:xn.nonNegative}}),Object.defineProperty(zn,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{className:"VictoryContainer",portalComponent:s.a.createElement(On,null),portalZIndex:99,responsive:!0}}),Object.defineProperty(zn,"contextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{getTimer:l.a.func}}),Object.defineProperty(zn,"childContextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{portalUpdate:l.a.func,portalRegister:l.a.func,portalDeregister:l.a.func,getTimer:l.a.func}});var Un=n(28),Vn=n.n(Un);function Gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var qn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Wn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Gn(t.prototype,e),n&&Gn(t,n)}(e,[{key:"componentDidMount",value:function(){if(!this.checkedContext){if("function"!=typeof this.context.portalUpdate){yn.warn("`renderInPortal` is not supported outside of `VictoryContainer`. Component will be rendered in place"),this.renderInPlace=!0}this.checkedContext=!0}this.forceUpdate()}},{key:"componentDidUpdate",value:function(){this.renderInPlace||(this.portalKey=this.portalKey||this.context.portalRegister(),this.context.portalUpdate(this.portalKey,this.element))}},{key:"componentWillUnmount",value:function(){this.context&&this.context.portalDeregister&&this.context.portalDeregister(this.portalKey)}},{key:"renderPortal",value:function(t){return this.renderInPlace?t:(this.element=t,null)}},{key:"render",value:function(){var t=Array.isArray(this.props.children)?this.props.children[0]:this.props.children,e=this.props.groupComponent,n=t&&t.props||{},r=n.groupComponent?{groupComponent:e,standalone:!1}:{},i=un()(r,n,Ln.omit(this.props,["children","groupComponent"])),o=t&&s.a.cloneElement(t,i);return this.renderPortal(o)}}]),e}();function Hn(t,e){var n=t.horizontal,r=t.polar,i=Ln.scalePoint(t,e),o=i.x,a=i.y,s=function(t,e){e=e||{};var n=t.horizontal,r=t.style,i=t.active,o=r.labels||{},a=Ln.evaluateProp(o.padding,e,i)||0,s=e._y<0?-1:1;return{x:n?s*a:0,y:n?0:s*a}}(t,e);if(r){var u=function(t,e){var n=t.active,r=t.style,i=Jn(t,e),o=r.labels||{},a=Ln.evaluateProp(o.padding,e,n)||0,s=Ln.degreesToRadians(i);return{x:a*Math.cos(s),y:-a*Math.sin(s)}}(t,e);return{x:o+u.x,y:a+u.y}}return{x:n?a+s.x:o+s.x,y:n?o+s.y:a-s.y}}function Xn(t){var e=t.labelComponent,n=t.labelPlacement,r=t.polar?"perpendicular":"vertical";return n||(e.props&&e.props.labelPlacement||r)}function Zn(t,e,n){return void 0!==(e=e||{}).label?e.label:Array.isArray(t.labels)?t.labels[n]:t.labels}function Yn(t,e){var n=Xn(t);return"perpendicular"===n||"vertical"===n&&(90===e||270===e)?"middle":e<=90||e>270?"start":"end"}function Kn(t,e){var n=Xn(t),r=function(t){return t<45||t>315?"right":t>=45&&t<=135?"top":t>135&&t<225?"left":"bottom"}(e);return"parallel"===n||"left"===r||"right"===r?"middle":"top"===r?"end":"start"}function Jn(t,e){var n=Ln.getPoint(e).x;return Ln.radiansToDegrees(t.scale.x(n))}Object.defineProperty(qn,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryPortal"}),Object.defineProperty(qn,"role",{configurable:!0,enumerable:!0,writable:!0,value:"portal"}),Object.defineProperty(qn,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:l.a.node,groupComponent:l.a.element}}),Object.defineProperty(qn,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{groupComponent:s.a.createElement("g",null)}}),Object.defineProperty(qn,"contextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{portalDeregister:l.a.func,portalRegister:l.a.func,portalUpdate:l.a.func}});var Qn={getText:Zn,getPolarTextAnchor:Yn,getPolarVerticalAnchor:Kn,getPolarAngle:function(t,e){var n=t.labelPlacement,r=t.datum;if(!n||"vertical"===n)return 0;var i,o=void 0!==e?e:Jn(t,r);return 0===o||180===o?i=90:o>0&&o<180?i=90-o:o>180&&o<360&&(i=270-o),i+(o>90&&o<180||o>270?1:-1)*("perpendicular"===n?0:90)},getDegrees:Jn,getProps:function(t,e){var n=t.scale,r=t.data,i=t.style,o=t.horizontal,a=t.polar,s=r[e],u=Jn(t,s),l=a?Yn(t,u):function(t,e){e=e||{};var n=t.style,r=t.horizontal,i=e._y>=0?1:-1,o=n&&n.labels||{};return e.verticalAnchor||o.verticalAnchor?e.verticalAnchor||o.verticalAnchor:r?i>=0?"start":"end":"middle"}(t,s),c=a?Kn(t,u):function(t,e){var n=(e=e||{})._y>=0?1:-1,r=t.style&&t.style.labels||{};return e.verticalAnchor||r.verticalAnchor?e.verticalAnchor||r.verticalAnchor:t.horizontal?"middle":n>=0?"end":"start"}(t,s),f=function(t,e){e=e||{};var n=t.style&&t.style.labels||{};return void 0===e.angle?n.angle:e.angle}(t,s),p=Zn(t,s,e),h=Xn(t),d=Hn(t,s);return{angle:f,data:r,datum:s,horizontal:o,index:e,polar:a,scale:n,labelPlacement:h,text:p,textAnchor:l,verticalAnchor:c,x:d.x,y:d.y,style:i.labels}}},$n=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(n.length>0)return n.reduce(function(t,e){return[t,$n(e)].join(" ")},$n(t)).trim();if(void 0===t||null===t||"string"==typeof t)return t;var i=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];i.push("".concat(o,"(").concat(a,")"))}return i.join(" ").trim()},tr={toTransformString:$n,getColorScale:function(t){var e={grayscale:["#cccccc","#969696","#636363","#252525"],qualitative:["#334D5C","#45B29D","#EFC94C","#E27A3F","#DF5A49","#4F7DA1","#55DBC1","#EFDA97","#E2A37F","#DF948A"],heatmap:["#428517","#77D200","#D6D305","#EC8E19","#C92B05"],warm:["#940031","#C43343","#DC5429","#FF821D","#FFAF55"],cool:["#2746B9","#0B69D4","#2794DB","#31BB76","#60E83B"],red:["#FCAE91","#FB6A4A","#DE2D26","#A50F15","#750B0E"],blue:["#002C61","#004B8F","#006BC9","#3795E5","#65B4F4"],green:["#354722","#466631","#649146","#8AB25C","#A9C97E"]};return t?e[t]:e.grayscale}},er=n(27),nr=n.n(er);function rr(){return(rr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function or(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var ar=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),or(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&ir(t.prototype,e),n&&ir(t,n)}(e,[{key:"shouldComponentUpdate",value:function(t){return!nr()(this.props,t)}},{key:"render",value:function(){var t=this.props,e=t.x,n=t.y,r=t.dx,i=t.dy,o=t.events,a=t.className,u=t.style,l=t.textAnchor,c=t.content;return s.a.createElement("tspan",rr({x:e,y:n,dx:r,dy:i,textAnchor:l,className:a,style:u},o),c)}}]),e}();function sr(){return(sr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lr(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(ar,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{className:l.a.string,content:l.a.oneOfType([l.a.string,l.a.number]),dx:l.a.number,dy:l.a.number,events:l.a.object,style:l.a.object,textAnchor:l.a.oneOf(["start","middle","end","inherit"]),x:l.a.number,y:l.a.number}});var cr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&ur(t.prototype,e),n&&ur(t,n)}(e,[{key:"shouldComponentUpdate",value:function(t){return!nr()(this.props,t)}},{key:"render",value:function(){var t=this.props,e=t.x,n=t.y,r=t.dx,i=t.dy,o=t.events,a=t.className,u=t.children,l=t.style,c=t.title,f=t.desc,p=t.transform,h=t.direction;return s.a.createElement("text",sr({direction:h,className:a,x:e,dx:r,y:n,dy:i,transform:p,style:l},o),c&&s.a.createElement("title",null,c),f&&s.a.createElement("desc",null,f),u)}}]),e}();function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pr(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(cr,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:l.a.node,className:l.a.string,desc:l.a.string,direction:l.a.oneOf(["ltr","rtl","inherit"]),dx:l.a.number,dy:l.a.number,events:l.a.object,style:l.a.object,title:l.a.string,transform:l.a.string,x:l.a.oneOfType([l.a.number,l.a.string]),y:l.a.oneOfType([l.a.number,l.a.string])}});var hr={fill:"#252525",fontSize:14,fontFamily:"'Gill Sans', 'Gill Sans MT', 'Ser­avek', 'Trebuchet MS', sans-serif",stroke:"transparent"},dr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).id=void 0===t.id?an()("label-"):t.id,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&fr(t.prototype,e),n&&fr(t,n)}(e,[{key:"getPosition",value:function(t,e){return t.datum?Ln.scalePoint(t,t.datum)[e]:0}},{key:"getStyle",value:function(t,e){e=e?un()({},e,hr):hr;var n=t.datum||t.data,r=Ln.evaluateStyle(e,n,t.active);return cn()({},r,{fontSize:this.getFontSize(r)})}},{key:"getStyles",value:function(t){var e=this;return Array.isArray(t.style)&&!Vn()(t.style)?t.style.map(function(n){return e.getStyle(t,n)}):[this.getStyle(t,t.style)]}},{key:"getHeight",value:function(t,e){var n=t.datum||t.data;return Ln.evaluateProp(t[e],n,t.active)}},{key:"getContent",value:function(t){if(void 0!==t.text&&null!==t.text){var e=t.datum||t.data;if(Array.isArray(t.text))return t.text.map(function(n){return Ln.evaluateProp(n,e,t.active)});var n=Ln.evaluateProp(t.text,e,t.active);if(void 0!==n&&null!==n)return"".concat(n).split("\n")}}},{key:"getDy",value:function(t,e,n,r){e=Array.isArray(e)?e[0]:e,r=this.checkLineHeight(r,r[0],1);var i=e.fontSize,o=t.datum||t.data,a=t.dy?Ln.evaluateProp(t.dy,o,t.active):0,s=n.length,u=this.getHeight(t,"capHeight"),l=e.verticalAnchor||t.verticalAnchor;switch(l?Ln.evaluateProp(l,o):"middle"){case"end":return a+(u/2+(.5-s)*r)*i;case"middle":return a+(u/2+(.5-s/2)*r)*i;default:return a+(u/2+r/2)*i}}},{key:"checkLineHeight",value:function(t,e,n){return Array.isArray(t)?Vn()(t)?n:e:t}},{key:"getTransform",value:function(t,e){var n=t.active,r=t.datum,i=t.x,o=t.y,a=t.polar?Qn.getPolarAngle(t):0,s=void 0===e.angle?t.angle:e.angle,u=void 0===s?a:s,l=t.transform||e.transform,c=l&&Ln.evaluateProp(l,r,n),f=u&&{rotate:[u,i,o]};return c||u?tr.toTransformString(c,f):void 0}},{key:"getFontSize",value:function(t){var e=t&&t.fontSize;if("number"==typeof e)return e;if(void 0===e||null===e)return hr.fontSize;if("string"==typeof e){var n=+e.replace("px","");return isNaN(n)?(yn.warn("fontSize should be expressed as a number of pixels"),hr.fontSize):n}return hr.fontSize}},{key:"renderElements",value:function(t,e){var n=this,r=t.datum,i=t.active,o=t.inline,a=t.className,u=t.title,l=t.desc,c=t.events,f=t.direction,p=this.getStyles(t),h=this.getHeight(t,"lineHeight"),d=t.textAnchor?Ln.evaluateProp(t.textAnchor,r,i):"start",y=t.dx?Ln.evaluateProp(t.dx,r,i):0,v=this.getDy(t,p,e,h),g=this.getTransform(t,p),m=void 0!==t.x?t.x:this.getPosition(t,"x"),b=void 0!==t.y?t.y:this.getPosition(t,"y"),_=e.map(function(e,r){var i=p[r]||p[0],a=p[r-1]||p[0],u=(i.fontSize+a.fontSize)/2,l=n.checkLineHeight(h,(h[r]+(h[r-1]||h[0]))/2,1),c={key:"".concat(n.id,"-key-").concat(r),x:o?void 0:t.x,dx:y,dy:r&&!o?l*u:void 0,textAnchor:i.textAnchor||d,style:i,content:e};return s.a.cloneElement(t.tspanComponent,c)});return s.a.cloneElement(t.textComponent,{direction:f,dx:y,dy:v,x:m,y:b,events:c,transform:g,className:a,title:u,desc:l,id:this.id},_)}},{key:"render",value:function(){var t=this.getContent(this.props);if(null===t||void 0===t)return null;var e=this.renderElements(this.props,t);return this.props.renderInPortal?s.a.createElement(qn,null,e):e}}]),e}();function yr(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vr(t){return Array.isArray(t)&&t.length>0}function gr(t){return Array.isArray(t)&&t.some(function(t){return t instanceof Date})}Object.defineProperty(dr,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryLabel"}),Object.defineProperty(dr,"role",{configurable:!0,enumerable:!0,writable:!0,value:"label"}),Object.defineProperty(dr,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{active:l.a.bool,angle:l.a.oneOfType([l.a.string,l.a.number]),capHeight:l.a.oneOfType([l.a.string,xn.nonNegative,l.a.func]),className:l.a.string,data:l.a.array,datum:l.a.any,desc:l.a.string,direction:l.a.oneOf(["rtl","ltr","inherit"]),dx:l.a.oneOfType([l.a.number,l.a.string,l.a.func]),dy:l.a.oneOfType([l.a.number,l.a.string,l.a.func]),events:l.a.object,id:l.a.oneOfType([l.a.number,l.a.string]),index:l.a.oneOfType([l.a.number,l.a.string]),inline:l.a.bool,labelPlacement:l.a.oneOf(["parallel","perpendicular","vertical"]),lineHeight:l.a.oneOfType([l.a.string,xn.nonNegative,l.a.func,l.a.array]),origin:l.a.shape({x:xn.nonNegative,y:xn.nonNegative}),polar:l.a.bool,renderInPortal:l.a.bool,scale:l.a.shape({x:xn.scale,y:xn.scale}),style:l.a.oneOfType([l.a.object,l.a.array]),text:l.a.oneOfType([l.a.string,l.a.number,l.a.func,l.a.array]),textAnchor:l.a.oneOfType([l.a.oneOf(["start","middle","end","inherit"]),l.a.func]),textComponent:l.a.element,title:l.a.string,transform:l.a.oneOfType([l.a.string,l.a.object,l.a.func]),tspanComponent:l.a.element,verticalAnchor:l.a.oneOfType([l.a.oneOf(["start","middle","end"]),l.a.func]),x:l.a.oneOfType([l.a.number,l.a.string]),y:l.a.oneOfType([l.a.number,l.a.string])}}),Object.defineProperty(dr,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{direction:"inherit",textComponent:s.a.createElement(cr,null),tspanComponent:s.a.createElement(ar,null),capHeight:.71,lineHeight:1}});var mr={containsDates:gr,containsNumbers:function(t){return Array.isArray(t)&&t.some(function(t){return"number"==typeof t})},containsOnlyStrings:function(t){return vr(t)&&t.every(function(t){return"string"==typeof t})},containsStrings:function(t){return Array.isArray(t)&&t.some(function(t){return"string"==typeof t})},getMaxValue:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=t.concat(n);return gr(i)?new Date(Math.max.apply(Math,yr(i))):Math.max.apply(Math,yr(i))},getMinValue:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=t.concat(n);return gr(i)?new Date(Math.min.apply(Math,yr(i))):Math.min.apply(Math,yr(i))},isArrayOfArrays:function(t){return vr(t)&&t.every(Array.isArray)},removeUndefined:function(t){return t.filter(function(t){return void 0!==t})}},br=n(47),_r=n.n(br);function xr(t,e){return(t.key||e).toString()}function wr(t){return t.reduce(function(t,e,n){return t[xr(e,n)]=e,t},{})}function Er(t,e){var n=!1,r=Object.keys(t).reduce(function(t,r){return r in e||(n=!0,t[r]=!0),t},{});return n&&r}function Or(t){return t.type&&t.type.getData?t.type.getData(t.props):t.props&&t.props.data||!1}var Sr={getInitialTransitionState:function(t,e){var n=!1,r=!1,i=function(t,e){if(!e||t.type!==e.type)return{};var i=function(t,e){var n=t&&wr(t),r=e&&wr(e);return{entering:n&&Er(r,n),exiting:r&&Er(n,r)}}(Or(t),Or(e))||{},o=i.entering,a=i.exiting;return n=n||!!a,r=r||!!o,{entering:o||!1,exiting:a||!1}},o=function(t,e){return t.map(function(n,r){return n&&n.props&&n.props.children&&e[r]?o(s.a.Children.toArray(t[r].props.children),s.a.Children.toArray(e[r].props.children)):i(n,e[r])})},a=o(s.a.Children.toArray(t),s.a.Children.toArray(e));return{nodesWillExit:n,nodesWillEnter:r,childrenTransitions:a,nodesShouldEnter:!1}},getTransitionPropsFactory:function(t,e,n){var r=e&&e.nodesWillExit,i=e&&e.nodesWillEnter,o=e&&e.nodesShouldEnter,a=e&&e.nodesShouldLoad,s=e&&e.nodesDoneLoad,u=e&&e.childrenTransitions||[],l={enter:t.animate&&t.animate.onEnter&&t.animate.onEnter.duration,exit:t.animate&&t.animate.onExit&&t.animate.onExit.duration,load:t.animate&&t.animate.onLoad&&t.animate.onLoad.duration,move:t.animate&&t.animate.duration},c=function(t,e,r){return a?function(t,e,n){if((t=cn()({},t,{onEnd:n}))&&t.onLoad&&!t.onLoad.duration)return{animate:t,data:e};var r=t.onLoad&&t.onLoad.after?t.onLoad.after:_r.a;return{animate:t,data:e=e.map(function(t,n){return cn()({},t,r(t,n,e))})}}(r,e,function(){n({nodesShouldLoad:!1,nodesDoneLoad:!0})}):function(t,e,n,r){if((t=cn()({},t,{onEnd:r}))&&t.onLoad&&!t.onLoad.duration)return{animate:t,data:n};var i=t.onLoad&&t.onLoad.before?t.onLoad.before:_r.a;return{animate:t,data:n=n.map(function(t,e){return cn()({},t,i(t,e,n))}),clipWidth:0}}(r,0,e,function(){n({nodesDoneLoad:!0})})},f=function(t,e,r,i){return function(t,e,n,r,i){var o=t&&t.onExit;if(t=cn()({},t,o),r){t.onEnd=i;var a=t.onExit&&t.onExit.before?t.onExit.before:_r.a;n=n.map(function(t,e){var i=(t.key||e).toString();return r[i]?cn()({},t,a(t,e,n)):t})}return{animate:t,data:n}}(i,0,r,t,function(){n({nodesWillExit:!1})})},p=function(t,e,r,i){return o?function(t,e,n,r){var i=t&&t.onEnter;if(t=cn()({},t,i),n){t.onEnd=r;var o=t.onEnter&&t.onEnter.after?t.onEnter.after:_r.a;e=e.map(function(t,r){var i=xr(t,r);return n[i]?cn()({},t,o(t,r,e)):t})}return{animate:t,data:e}}(i,r,t,function(){n({nodesWillEnter:!1})}):function(t,e,n,r,i){if(r){var o=(t=cn()({},t,{onEnd:i})).onEnter&&t.onEnter.before?t.onEnter.before:_r.a;n=n.map(function(t,e){var i=(t.key||e).toString();return r[i]?cn()({},t,o(t,e,n)):t})}return{animate:t,data:n}}(i,0,r,t,function(){n({nodesShouldEnter:!0})})},h=function(t,e){var n=t.props.animate;if(!t.type)return{};var r=t.props&&t.props.polar&&t.type.defaultPolarTransitions||t.type.defaultTransitions;if(r){var i=n[e]&&n[e].duration;return void 0!==i?i:r[e]&&r[e].duration}return{}};return function(n,a){var d=Or(n)||[],y=un()({},t.animate,n.props.animate),v=n.props.polar&&n.type.defaultPolarTransitions||n.type.defaultTransitions;y.onExit=un()({},y.onExit,v&&v.onExit),y.onEnter=un()({},y.onEnter,v&&v.onEnter),y.onLoad=un()({},y.onLoad,v&&v.onLoad);var g=u[a]||u[0];if(!s){var m={duration:void 0!==l.load?l.load:h(n,"onLoad")};return c(0,d,cn()({},y,m))}if(r){var b=g&&g.exiting,_=void 0!==l.exit?l.exit:h(n,"onExit"),x=b?{duration:_}:{delay:_};return f(b,0,d,cn()({},y,x))}if(i){var w=g&&g.entering,E=void 0!==l.enter?l.enter:h(n,"onEnter"),O=void 0!==l.move?l.move:n.props.animate&&n.props.animate.duration,S={duration:o&&w?E:O};return p(w,0,d,cn()({},y,S))}return!e&&y&&y.onExit?function(t,e){var n=t.onEnter&&t.onEnter.after?t.onEnter.after:_r.a;return{data:e.map(function(t,r){return cn()({},t,n(t,r,e))})}}(y,d):{animate:y,data:d}}}};function Pr(){return(Pr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var kr=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Tr(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).state={nodesShouldLoad:!1,nodesDoneLoad:!1};var r=n.props.children,i=r.props.polar;return n.continuous=!i&&r.type&&!0===r.type.continuous,n.getTransitionState=n.getTransitionState.bind(Tr(n)),n.getTimer=n.getTimer.bind(Tr(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Cr(t.prototype,e),n&&Cr(t,n)}(e,[{key:"componentDidMount",value:function(){this.setState({nodesShouldLoad:!0})}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.getTimer().bypassAnimation(),this.setState(this.getTransitionState(this.props,t),function(){return e.getTimer().resumeAnimation()})}},{key:"componentWillUnmount",value:function(){this.getTimer().stop()}},{key:"getTimer",value:function(){return this.context.getTimer?this.context.getTimer():(this.timer||(this.timer=new Je),this.timer)}},{key:"getTransitionState",value:function(t,e){var n=t.animate;if(n){if(n.parentState)return{oldProps:n.parentState.nodesWillExit?t:null,nextProps:e};var r=s.a.Children.toArray(t.children),i=s.a.Children.toArray(e.children),o=Sr.getInitialTransitionState(r,i),a=o.nodesWillExit;return{nodesWillExit:a,nodesWillEnter:o.nodesWillEnter,childrenTransitions:o.childrenTransitions,nodesShouldEnter:o.nodesShouldEnter,oldProps:a?t:null,nextProps:e}}return{}}},{key:"getDomainFromChildren",value:function(t,e){var n=function(t){return t.reduce(function(t,r){if(r.type&&dn()(r.type.getDomain)){var i=r.props&&r.type.getDomain(r.props,e);return i?t.concat(i):t}return r.props&&r.props.children?t.concat(n(s.a.Children.toArray(r.props.children))):t},[])},r=s.a.Children.toArray(t.children)[0],i=r.props||{},o=Array.isArray(i.domain)?i.domain:i.domain&&i.domain[e];if(!i.children&&o)return o;var a=n([r]);return 0===a.length?[0,1]:[mr.getMinValue(a),mr.getMaxValue(a)]}},{key:"pickProps",value:function(){return this.state&&this.state.nodesWillExit&&this.state.oldProps||this.props}},{key:"pickDomainProps",value:function(t){var e=rn()(t.animate)&&t.animate.parentState;return e&&e.nodesWillExit?(this.continous||e.continuous)&&(e.nextProps||this.state.nextProps)||t:this.continuous&&this.state.nodesWillExit&&this.state.nextProps||t}},{key:"getClipWidth",value:function(t,e){var n=this.transitionProps?this.transitionProps.clipWidth:void 0;return void 0!==n?n:function(){var n=Ln.getRange(e.props,"x");return n?Math.abs(n[1]-n[0]):t.width}()}},{key:"render",value:function(){var t=this,e=this.pickProps(),n=rn()(this.props.animate)&&this.props.animate.getTransitions?this.props.animate.getTransitions:Sr.getTransitionPropsFactory(e,this.state,function(e){return t.setState(e)}),r=s.a.Children.toArray(e.children)[0],i=n(r);this.transitionProps=i;var o={x:this.getDomainFromChildren(this.pickDomainProps(e),"x"),y:this.getDomainFromChildren(e,"y")},a=this.getClipWidth(e,r),u=un()({domain:o,clipWidth:a},i,r.props),l=(e.animationWhitelist||[]).concat(["clipWidth"]),c=l.length?Pn()(u,l):u;return s.a.createElement(en,Pr({},u.animate,{data:c}),function(e){if(r.props.groupComponent){var n=t.continuous?s.a.cloneElement(r.props.groupComponent,{clipWidth:e.clipWidth||0}):r.props.groupComponent;return s.a.cloneElement(r,un()({animate:null,animating:!0,groupComponent:n},e,u))}return s.a.cloneElement(r,un()({animate:null,animating:!0},e,u))})}}]),e}();function Ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mr(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(kr,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryTransition"}),Object.defineProperty(kr,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{animate:l.a.oneOfType([l.a.bool,l.a.object]),animationWhitelist:l.a.array,children:l.a.node}});var jr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Ar(t.prototype,e),n&&Ar(t,n)}(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.clipId;return s.a.createElement("defs",null,s.a.createElement("clipPath",{id:n},e))}}]),e}();function Rr(){return(Rr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lr(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(jr,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),clipId:l.a.oneOfType([l.a.number,l.a.string])}});var Dr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Ir(t.prototype,e),n&&Ir(t,n)}(e,[{key:"shouldComponentUpdate",value:function(t){return!nr()(this.props,t)}},{key:"render",value:function(){var t=this.props,e=t.cx,n=t.cy,r=t.r,i=t.events,o=t.className,a=t.style,u=t.role,l=t.shapeRendering,c=t.transform,f=t.clipPath;return s.a.createElement("circle",Rr({cx:e,cy:n,r:r,className:o,clipPath:f,transform:c,style:a,role:u||"presentation",shapeRendering:l||"auto",vectorEffect:"non-scaling-stroke"},i))}}]),e}();function Fr(){return(Fr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Nr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Br(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(Dr,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{className:l.a.string,clipPath:l.a.string,cx:l.a.number,cy:l.a.number,events:l.a.object,r:l.a.number,role:l.a.string,shapeRendering:l.a.string,style:l.a.object,transform:l.a.string}});var zr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Br(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Nr(t.prototype,e),n&&Nr(t,n)}(e,[{key:"shouldComponentUpdate",value:function(t){return!nr()(this.props,t)}},{key:"render",value:function(){var t=this.props,e=t.x,n=t.y,r=t.rx,i=t.ry,o=t.width,a=t.height,u=t.events,l=t.className,c=t.clipPath,f=t.style,p=t.role,h=t.shapeRendering,d=t.transform;return s.a.createElement("rect",Fr({x:e,y:n,rx:r,ry:i,width:o,height:a,className:l,clipPath:c,style:f,transform:d,role:p||"presentation",shapeRendering:h||"auto",vectorEffect:"non-scaling-stroke"},u))}}]),e}();function Ur(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gr(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(zr,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{className:l.a.string,clipPath:l.a.string,events:l.a.object,height:l.a.number,role:l.a.string,rx:l.a.number,ry:l.a.number,shapeRendering:l.a.string,style:l.a.object,transform:l.a.string,width:l.a.number,x:l.a.number,y:l.a.number}});var Wr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Gr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).clipId=rn()(t)&&void 0!==t.clipId?t.clipId:an()("victory-clip-"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Vr(t.prototype,e),n&&Vr(t,n)}(e,[{key:"calculateAttributes",value:function(t){var e=t.polar,n=t.origin,r=t.clipWidth,i=void 0===r?0:r,o=t.clipHeight,a=void 0===o?0:o,s=t.translateX,u=void 0===s?0:s,l=t.translateY,c=void 0===l?0:l,f=Ln.getPadding({padding:t.clipPadding}),p=t.radius||Ln.getRadius(t);return{x:(e?n.x:u)-f.left,y:(e?n.y:c)-f.top,width:Math.max((e?p:i)+f.left+f.right,0),height:Math.max((e?p:a)+f.top+f.bottom,0)}}},{key:"renderClippedGroup",value:function(t,e){var n=t.style,r=t.events,i=t.transform,o=t.children,a=t.className,u=t.groupComponent,l=this.renderClipComponent(t,e),c=cn()({className:a,style:n,transform:i,key:"clipped-group-".concat(e),clipPath:"url(#".concat(e,")")},r);return s.a.cloneElement(u,c,[l].concat(Ur(s.a.Children.toArray(o))))}},{key:"renderGroup",value:function(t){var e=t.style,n=t.events,r=t.transform,i=t.children,o=t.className,a=t.groupComponent;return s.a.cloneElement(a,cn()({className:o,style:e,transform:r},n),i)}},{key:"renderClipComponent",value:function(t,e){var n,r=t.polar,i=t.origin,o=t.clipWidth,a=void 0===o?0:o,u=t.clipHeight,l=void 0===u?0:u,c=t.translateX,f=void 0===c?0:c,p=t.translateY,h=void 0===p?0:p,d=t.circleComponent,y=t.rectComponent,v=t.clipPathComponent,g=Ln.getPadding({padding:t.clipPadding}),m=g.top,b=g.bottom,_=g.left,x=g.right;if(r){var w=t.radius||Ln.getRadius(t),E={r:Math.max(w+_+x,w+m+b,0),cx:i.x-_,cy:i.y-m};n=s.a.cloneElement(d,E)}else{var O={x:f-_,y:h-m,width:Math.max(a+_+x,0),height:Math.max(l+m+b,0)};n=s.a.cloneElement(y,O)}return s.a.cloneElement(v,cn()({key:"clip-path-".concat(e)},t,{clipId:e}),n)}},{key:"getClipValue",value:function(t,e){var n={x:t.clipWidth,y:t.clipHeight};if(void 0!==n[e])return n[e];var r=this.getRange(t,e);return r&&Math.abs(r[0]-r[1])||void 0}},{key:"getTranslateValue",value:function(t,e){var n={x:t.translateX,y:t.translateY};if(void 0!==n[e])return n[e];var r=this.getRange(t,e);return r?Math.min.apply(Math,Ur(r)):void 0}},{key:"getRange",value:function(t,e){var n=t.scale||{};if(n[e])return dn()(n[e].range)?n[e].range():void 0}},{key:"render",value:function(){var t=this.getClipValue(this.props,"y"),e=this.getClipValue(this.props,"x");if(void 0===e||void 0===t)return this.renderGroup(this.props);var n=this.getTranslateValue(this.props,"x"),r=this.getTranslateValue(this.props,"y"),i=un()({},this.props,{clipHeight:t,clipWidth:e,translateX:n,translateY:r});return this.renderClippedGroup(i,this.clipId)}}]),e}();Object.defineProperty(Wr,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryClipContainer"}),Object.defineProperty(Wr,"role",{configurable:!0,enumerable:!0,writable:!0,value:"container"}),Object.defineProperty(Wr,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),circleComponent:l.a.element,className:l.a.string,clipHeight:xn.nonNegative,clipId:l.a.oneOfType([l.a.number,l.a.string]),clipPadding:l.a.shape({top:l.a.number,bottom:l.a.number,left:l.a.number,right:l.a.number}),clipPathComponent:l.a.element,clipWidth:xn.nonNegative,events:l.a.object,groupComponent:l.a.element,origin:l.a.shape({x:xn.nonNegative,y:xn.nonNegative}),polar:l.a.bool,radius:xn.nonNegative,style:l.a.object,transform:l.a.string,translateX:l.a.number,translateY:l.a.number}}),Object.defineProperty(Wr,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{circleComponent:s.a.createElement(Dr,null),rectComponent:s.a.createElement(zr,null),clipPathComponent:s.a.createElement(jr,null),groupComponent:s.a.createElement("g",null)}});var qr=["#F4511E","#FFF59D","#DCE775","#8BC34A","#00796B","#006064"],Hr={width:350,height:350,padding:50},Xr={fontFamily:"'Roboto', 'Helvetica Neue', Helvetica, sans-serif",fontSize:12,letterSpacing:"normal",padding:8,fill:"#455A64",stroke:"transparent",strokeWidth:0},Zr=cn()({textAnchor:"middle"},Xr),Yr={area:cn()({style:{data:{fill:"#212121"},labels:Zr}},Hr),axis:cn()({style:{axis:{fill:"transparent",stroke:"#90A4AE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},axisLabel:cn()({},Zr,{padding:8,stroke:"transparent"}),grid:{fill:"none",stroke:"#ECEFF1",strokeDasharray:"10, 5",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:"#90A4AE",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"},tickLabels:cn()({},Xr,{fill:"#455A64"})}},Hr),bar:cn()({style:{data:{fill:"#455A64",padding:8,strokeWidth:0},labels:Xr}},Hr),boxplot:cn()({style:{max:{padding:8,stroke:"#455A64",strokeWidth:1},maxLabels:Xr,median:{padding:8,stroke:"#455A64",strokeWidth:1},medianLabels:Xr,min:{padding:8,stroke:"#455A64",strokeWidth:1},minLabels:Xr,q1:{padding:8,fill:"#455A64"},q1Labels:Xr,q3:{padding:8,fill:"#455A64"},q3Labels:Xr},boxWidth:20},Hr),candlestick:cn()({style:{data:{stroke:"#455A64"},labels:Zr},candleColors:{positive:"#ffffff",negative:"#455A64"}},Hr),chart:Hr,errorbar:cn()({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:"#455A64",strokeWidth:2},labels:Zr}},Hr),group:cn()({colorScale:qr},Hr),legend:{colorScale:qr,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:Xr,title:cn()({},Xr,{padding:5})}},line:cn()({style:{data:{fill:"transparent",opacity:1,stroke:"#455A64",strokeWidth:2},labels:Zr}},Hr),pie:cn()({colorScale:qr,style:{data:{padding:8,stroke:"#ECEFF1",strokeWidth:1},labels:cn()({},Xr,{padding:20})}},Hr),scatter:cn()({style:{data:{fill:"#455A64",opacity:1,stroke:"transparent",strokeWidth:0},labels:Zr}},Hr),stack:cn()({colorScale:qr},Hr),tooltip:{style:cn()({},Zr,{padding:5,pointerEvents:"none"}),flyoutStyle:{stroke:"#212121",strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},cornerRadius:5,pointerLength:10},voronoi:cn()({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:cn()({},Zr,{padding:5,pointerEvents:"none"}),flyout:{stroke:"#212121",strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},Hr)},Kr=["#252525","#525252","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0"],Jr={width:450,height:300,padding:50,colorScale:Kr},Qr={fontFamily:"'Gill Sans', 'Gill Sans MT', 'Seravek', 'Trebuchet MS', sans-serif",fontSize:14,letterSpacing:"normal",padding:10,fill:"#252525",stroke:"transparent"},$r=cn()({textAnchor:"middle"},Qr),ti={material:Yr,grayscale:{area:cn()({style:{data:{fill:"#252525"},labels:$r}},Jr),axis:cn()({style:{axis:{fill:"transparent",stroke:"#252525",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"},axisLabel:cn()({},$r,{padding:25}),grid:{fill:"none",stroke:"none",pointerEvents:"painted"},ticks:{fill:"transparent",size:1,stroke:"transparent"},tickLabels:Qr}},Jr),bar:cn()({style:{data:{fill:"#252525",padding:8,strokeWidth:0},labels:Qr}},Jr),boxplot:cn()({style:{max:{padding:8,stroke:"#252525",strokeWidth:1},maxLabels:Qr,median:{padding:8,stroke:"#252525",strokeWidth:1},medianLabels:Qr,min:{padding:8,stroke:"#252525",strokeWidth:1},minLabels:Qr,q1:{padding:8,fill:"#969696"},q1Labels:Qr,q3:{padding:8,fill:"#969696"},q3Labels:Qr},boxWidth:20},Jr),candlestick:cn()({style:{data:{stroke:"#252525",strokeWidth:1},labels:$r},candleColors:{positive:"#ffffff",negative:"#252525"}},Jr),chart:Jr,errorbar:cn()({borderWidth:8,style:{data:{fill:"transparent",stroke:"#252525",strokeWidth:2},labels:$r}},Jr),group:cn()({colorScale:Kr},Jr),legend:{colorScale:Kr,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:Qr,title:cn()({},Qr,{padding:5})}},line:cn()({style:{data:{fill:"transparent",stroke:"#252525",strokeWidth:2},labels:$r}},Jr),pie:{style:{data:{padding:10,stroke:"transparent",strokeWidth:1},labels:cn()({},Qr,{padding:20})},colorScale:Kr,width:400,height:400,padding:50},scatter:cn()({style:{data:{fill:"#252525",stroke:"transparent",strokeWidth:0},labels:$r}},Jr),stack:cn()({colorScale:Kr},Jr),tooltip:{style:cn()({},$r,{padding:5,pointerEvents:"none"}),flyoutStyle:{stroke:"#252525",strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},cornerRadius:5,pointerLength:10},voronoi:cn()({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:cn()({},$r,{padding:5,pointerEvents:"none"}),flyout:{stroke:"#252525",strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},Jr)}},ei={categories:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.shape({x:l.a.arrayOf(l.a.string),y:l.a.arrayOf(l.a.string)})]),data:l.a.oneOfType([l.a.array,l.a.object]),dataComponent:l.a.element,labelComponent:l.a.element,labels:l.a.oneOfType([l.a.func,l.a.array]),samples:xn.nonNegative,sortKey:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),sortOrder:l.a.oneOf(["ascending","descending"]),style:l.a.shape({parent:l.a.object,data:l.a.object,labels:l.a.object}),x:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),y:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),y0:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)])},ni={baseProps:{animate:l.a.oneOfType([l.a.bool,l.a.object]),containerComponent:l.a.element,domain:l.a.oneOfType([xn.domain,l.a.shape({x:xn.domain,y:xn.domain})]),maxDomain:l.a.oneOfType([l.a.number,l.a.instanceOf(Date),l.a.shape({x:l.a.oneOfType([l.a.number,l.a.instanceOf(Date)]),y:l.a.oneOfType([l.a.number,l.a.instanceOf(Date)])})]),minDomain:l.a.oneOfType([l.a.number,l.a.instanceOf(Date),l.a.shape({x:l.a.oneOfType([l.a.number,l.a.instanceOf(Date)]),y:l.a.oneOfType([l.a.number,l.a.instanceOf(Date)])})]),domainPadding:l.a.oneOfType([l.a.shape({x:l.a.oneOfType([l.a.number,l.a.arrayOf(l.a.number)]),y:l.a.oneOfType([l.a.number,l.a.arrayOf(l.a.number)])}),l.a.number,l.a.arrayOf(l.a.number)]),eventKey:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),events:l.a.arrayOf(l.a.shape({target:l.a.oneOf(["data","labels","parent"]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),eventHandlers:l.a.object})),externalEventMutations:l.a.arrayOf(l.a.shape({callback:l.a.function,childName:l.a.oneOfType([l.a.string,l.a.array]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),mutation:l.a.function,target:l.a.oneOfType([l.a.string,l.a.array])})),groupComponent:l.a.element,height:xn.nonNegative,name:l.a.string,origin:l.a.shape({x:l.a.number,y:l.a.number}),padding:l.a.oneOfType([l.a.number,l.a.shape({top:l.a.number,bottom:l.a.number,left:l.a.number,right:l.a.number})]),polar:l.a.bool,range:l.a.oneOfType([xn.domain,l.a.shape({x:xn.domain,y:xn.domain})]),scale:l.a.oneOfType([xn.scale,l.a.shape({x:xn.scale,y:xn.scale})]),sharedEvents:l.a.shape({events:l.a.array,getEventState:l.a.func}),singleQuadrantDomainPadding:l.a.oneOfType([l.a.bool,l.a.shape({x:l.a.oneOfType([l.a.bool]),y:l.a.oneOfType([l.a.bool])})]),standalone:l.a.bool,theme:l.a.object,width:xn.nonNegative},dataProps:ei,primitiveProps:{active:l.a.bool,className:l.a.string,clipPath:l.a.string,data:l.a.oneOfType([l.a.array,l.a.object]),events:l.a.object,id:l.a.oneOfType([l.a.number,l.a.string]),index:l.a.oneOfType([l.a.number,l.a.string]),origin:l.a.shape({x:l.a.number,y:l.a.number}),polar:l.a.bool,role:l.a.string,scale:l.a.oneOfType([xn.scale,l.a.shape({x:xn.scale,y:xn.scale})]),shapeRendering:l.a.string,style:l.a.object,transform:l.a.string}};function ri(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oi(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var ai=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oi(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&ii(t.prototype,e),n&&ii(t,n)}(e,[{key:"render",value:function(){var t=this.props,e=t.x,n=t.y,r=t.width,i=t.height,o=t.events,a=t.datum,u=t.active,l=t.role,c=t.clipPath,f=t.className,p=t.shapeRendering,h=t.rectComponent,d=t.transform,y=Ln.evaluateStyle(cn()({fill:"none"},this.props.style),a,u);return s.a.cloneElement(h,{style:y,className:f,x:e,y:n,width:r,height:i,events:o,role:l,shapeRendering:p,transform:d,clipPath:c})}}]),e}();function si(){return(si=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ui(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function li(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(ai,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){ri(t,e,n[e])})}return t}({},ni.primitiveProps,{height:l.a.number,rectComponent:l.a.element,width:l.a.number,x:l.a.number,y:l.a.number})}),Object.defineProperty(ai,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{rectComponent:s.a.createElement(zr,null)}});var ci=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),li(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&ui(t.prototype,e),n&&ui(t,n)}(e,[{key:"shouldComponentUpdate",value:function(t){return!nr()(this.props,t)}},{key:"render",value:function(){var t=this.props,e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.events,a=t.className,u=t.clipPath,l=t.transform,c=t.style,f=t.shapeRendering,p=t.role;return s.a.createElement("line",si({x1:e,x2:n,y1:r,y2:i,className:a,clipPath:u,transform:l,style:c,role:p||"presentation",shapeRendering:f||"auto",vectorEffect:"non-scaling-stroke"},o))}}]),e}();function fi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hi(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(ci,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{className:l.a.string,clipPath:l.a.string,events:l.a.object,role:l.a.string,shapeRendering:l.a.string,style:l.a.object,transform:l.a.string,x1:l.a.number,x2:l.a.number,y1:l.a.number,y2:l.a.number}});var di=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hi(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&pi(t.prototype,e),n&&pi(t,n)}(e,[{key:"render",value:function(){var t=this.props,e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.events,a=t.datum,u=t.active,l=t.lineComponent,c=t.className,f=t.role,p=t.shapeRendering,h=t.transform,d=t.clipPath,y=Ln.evaluateStyle(cn()({stroke:"black"},this.props.style),a,u);return s.a.cloneElement(l,{style:y,className:c,role:f,shapeRendering:p,events:o,x1:e,x2:n,y1:r,y2:i,transform:h,clipPath:d})}}]),e}();Object.defineProperty(di,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){fi(t,e,n[e])})}return t}({},ni.primitiveProps,{datum:l.a.any,lineComponent:l.a.element,x1:l.a.number,x2:l.a.number,y1:l.a.number,y2:l.a.number})}),Object.defineProperty(di,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{lineComponent:s.a.createElement(ci,null)}});var yi=n(79),vi=n.n(yi),gi={circle:function(t,e,n){return"M ".concat(t,", ").concat(e,"\n      m ").concat(-n,", 0\n      a ").concat(n,", ").concat(n," 0 1,0 ").concat(2*n,",0\n      a ").concat(n,", ").concat(n," 0 1,0 ").concat(2*-n,",0")},square:function(t,e,n){var r=.87*n,i=t-r,o=e+r,a=t+r-i;return"M ".concat(i,", ").concat(o,"\n      h").concat(a,"\n      v-").concat(a,"\n      h-").concat(a,"\n      z")},diamond:function(t,e,n){var r=.87*n,i=Math.sqrt(r*r*2);return"M ".concat(t,", ").concat(e+i,"\n      l ").concat(i,", -").concat(i,"\n      l -").concat(i,", -").concat(i,"\n      l -").concat(i,", ").concat(i,"\n      l ").concat(i,", ").concat(i,"\n      z")},triangleDown:function(t,e,n){var r=t+n,i=e-n,o=e+n/2*Math.sqrt(3);return"M ".concat(t-n,", ").concat(i,"\n      L ").concat(r,", ").concat(i,"\n      L ").concat(t,", ").concat(o,"\n      z")},triangleUp:function(t,e,n){var r=t+n,i=e-n/2*Math.sqrt(3),o=e+n;return"M ".concat(t-n,", ").concat(o,"\n      L ").concat(r,", ").concat(o,"\n      L ").concat(t,", ").concat(i,"\n      z")},plus:function(t,e,n){var r=1.1*n,i=r/1.5;return"\n      M ".concat(t-i/2,", ").concat(e+r,"\n      v-").concat(i,"\n      h-").concat(i,"\n      v-").concat(i,"\n      h").concat(i,"\n      v-").concat(i,"\n      h").concat(i,"\n      v").concat(i,"\n      h").concat(i,"\n      v").concat(i,"\n      h-").concat(i,"\n      v").concat(i,"\n      z")},minus:function(t,e,n){var r=1.1*n,i=r-.3*r,o=t-r,a=e+i/2,s=t+r-o;return"M ".concat(o,", ").concat(a,"\n      h").concat(s,"\n      v-").concat(i,"\n      h-").concat(s,"\n      z")},star:function(t,e,n){var r=1.35*n,i=Math.PI/5,o=vi()(10).map(function(n){var o=n%2==0?r:r/2;return"".concat(o*Math.sin(i*(n+1))+t,",\n        ").concat(o*Math.cos(i*(n+1))+e)});return"M ".concat(o.join("L")," z")}};function mi(){return(mi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function bi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var xi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&bi(t.prototype,e),n&&bi(t,n)}(e,[{key:"shouldComponentUpdate",value:function(t){return!nr()(this.props,t)}},{key:"render",value:function(){var t=this.props,e=t.d,n=t.role,r=t.shapeRendering,i=t.className,o=t.clipPath,a=t.style,u=t.transform,l=t.events;return s.a.createElement("path",mi({d:e,transform:u,className:i,clipPath:o,style:a,role:n||"presentation",shapeRendering:r||"auto"},l))}}]),e}();function wi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oi(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(xi,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{className:l.a.string,clipPath:l.a.string,d:l.a.string,events:l.a.object,role:l.a.string,shapeRendering:l.a.string,style:l.a.object,transform:l.a.string}});var Si=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Oi(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Ei(t.prototype,e),n&&Ei(t,n)}(e,[{key:"getPath",value:function(t){var e=t.datum,n=t.active,r=t.x,i=t.y,o=Ln.evaluateProp(t.size,e,n);if(t.getPath)return t.getPath(r,i,o);var a={circle:gi.circle,square:gi.square,diamond:gi.diamond,triangleDown:gi.triangleDown,triangleUp:gi.triangleUp,plus:gi.plus,minus:gi.minus,star:gi.star},s=Ln.evaluateProp(t.symbol,e,n);return("function"==typeof a[s]?a[s]:a.circle)(r,i,o)}},{key:"render",value:function(){var t=this.props,e=t.active,n=t.datum,r=t.role,i=t.shapeRendering,o=t.className,a=t.events,u=t.pathComponent,l=t.transform,c=t.clipPath,f=Ln.evaluateStyle(this.props.style,n,e),p=this.getPath(this.props);return s.a.cloneElement(u,{style:f,role:r,shapeRendering:i,className:o,events:a,d:p,transform:l,clipPath:c})}}]),e}();function Pi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ci(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ti(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(Si,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){wi(t,e,n[e])})}return t}({},ni.primitiveProps,{datum:l.a.object,getPath:l.a.func,pathComponent:l.a.element,size:l.a.oneOfType([l.a.number,l.a.func]),symbol:l.a.oneOfType([l.a.oneOf(["circle","diamond","plus","minus","square","star","triangleDown","triangleUp"]),l.a.func]),x:l.a.number,y:l.a.number})}),Object.defineProperty(Si,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{pathComponent:s.a.createElement(xi,null)}});var ki=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ti(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Ci(t.prototype,e),n&&Ci(t,n)}(e,[{key:"render",value:function(){var t=this.props,e=t.groupComponent,n=t.lineComponent,r=t.events,i=t.className,o=t.majorWhisker,a=t.minorWhisker,u=t.datum,l=t.active,c=t.transform,f=t.clipPath,p={style:Ln.evaluateStyle(this.props.style,u,l),events:r,className:i,transform:c,clipPath:f};return s.a.cloneElement(e,{},[s.a.cloneElement(n,cn()({key:"major-whisker"},p,o)),s.a.cloneElement(n,cn()({key:"minor-whisker"},p,a))])}}]),e}();Object.defineProperty(ki,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Pi(t,e,n[e])})}return t}({},ni.primitiveProps,{groupComponent:l.a.element,lineComponent:l.a.element,majorWhisker:l.a.shape({x1:l.a.number,x2:l.a.number,y1:l.a.number,y2:l.a.number}),minorWhisker:l.a.shape({x1:l.a.number,x2:l.a.number,y1:l.a.number,y2:l.a.number})})}),Object.defineProperty(ki,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{groupComponent:s.a.createElement("g",null),lineComponent:s.a.createElement(ci,null)}});var Ai=n(75),Mi=n.n(Ai),ji=n(41),Ri=n.n(ji),Ii=n(45),Li=n.n(Ii),Di=n(73),Fi=n.n(Di),Ni=n(135),Bi=n.n(Ni);function zi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ui(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Vi={getEvents:function(t,e,n,r){var i=this,o=function(t){var r=function(){var r=t.reduce(function(t,n){return void 0!==n.target?(Array.isArray(n.target)?Li()(n.target,e):"".concat(n.target)==="".concat(e))?t.concat(n):t:t.concat(n)},[]);return void 0!==n&&"parent"!==e?r.filter(function(t){var e=t.eventKey,r=function(t){return!t||"".concat(t)==="".concat(n)};return Array.isArray(e)?e.some(function(t){return r(t)}):r(e)}):r}();return Array.isArray(r)&&r.reduce(function(t,e){return e?cn()(t,e.eventHandlers):t},{})},a=function(){var e;return Array.isArray(i.componentEvents)?Array.isArray(t.events)?(e=i.componentEvents).concat.apply(e,Ui(t.events)):i.componentEvents:t.events}(),s=a&&dn()(r)?r(o(a),e):void 0;if(!t.sharedEvents)return s;var u=t.sharedEvents.getEvents,l=t.sharedEvents.events&&u(o(t.sharedEvents.events),e);return cn()({},l,s)},getScopedEvents:function(t,e,n,r){var i=this;if(Vn()(t))return{};r=r||this.baseProps;var o=function(t,e){var n=t.childName,o=t.target,a=t.key,s="props"===e?r:i.state||{},u=void 0!==n&&null!==n&&s[n]?s[n]:s;return"parent"===a?u.parent:u[a]&&u[a][o]},a=function(t,a){var s="parent"===e?t.childName:t.childName||n,u=t.target||e,l=function(e,n){var a=i.state||{};if(!dn()(t.mutation))return a;var s=o({childName:n,key:e,target:u},"props"),l=o({childName:n,key:e,target:u},"state"),c=t.mutation(cn()({},s,l),r),f=a[n]||{},p=function(t){return c?function(t){return"parent"===u?cn()(t,zi({},e,cn()(t[e],c))):cn()(t,zi({},e,cn()(t[e],zi({},u,c))))}(t):function(t){return t[e]&&t[e][u]&&delete t[e][u],t[e]&&!Object.keys(t[e]).length&&delete t[e],t}(t)};return void 0!==n&&null!==n?cn()(a,zi({},n,p(f))):p(a)},c=function(e){var n=function(e){return"parent"===u?"parent":"all"===t.eventKey?r[e]?Mi()(Object.keys(r[e]),"parent"):Mi()(Object.keys(r),"parent"):void 0===t.eventKey&&"parent"===a?r[e]?Object.keys(r[e]):Object.keys(r):void 0!==t.eventKey?t.eventKey:a}(e);return Array.isArray(n)?n.reduce(function(t,n){return cn()(t,l(n,e))},{}):l(n,e)},f="all"===s?Mi()(Object.keys(r),"parent"):s;return Array.isArray(f)?f.reduce(function(t,e){return cn()(t,c(e))},{}):c(f)},s=function(e,n,r,o){var s=t[o](e,n,r,i);if(s){var u=function(t){var e=function(t){return dn()(t.callback)&&t.callback},n=(Array.isArray(t)?t.map(function(t){return e(t)}):[e(t)]).filter(function(t){return!1!==t});return n.length?function(){return n.forEach(function(t){return t()})}:void 0}(s);i.setState(function(t,e){return Array.isArray(t)?t.reduce(function(t,n){return t=cn()({},t,a(n,e))},{}):a(t,e)}(s,r),u)}};return Object.keys(t).reduce(function(t,e){return t[e]=s,t},{})},getPartialEvents:function(t,e,n){return t?Object.keys(t).reduce(function(r,i){return r[i]=function(r){return t[i](r,n,e,i)},r},{}):{}},getEventState:function(t,e,n){var r=this.state||{};return n?r[n]&&r[n][t]&&r[n][t][e]:"parent"===t?r[t]&&r[t][e]||r[t]:r[t]&&r[t][e]},getExternalMutationsWithChildren:function(t,e,n,r){var i=this;return e=e||{},n=n||{},r.reduce(function(r,o){var a=n[o],s=i.getExternalMutations(t,e[o],n[o],o);return r[o]=s||a,Bi()(r,function(t){return!Vn()(t)})},{})},getExternalMutations:function(t,e,n,r){var i=this;return e=e||{},n=n||{},Object.keys(e).reduce(function(o,a){var s=n[a]||{},u=e[a]||{};if("parent"===a){var l={eventKey:a,target:"parent"},c=i.getExternalMutation(t,u,s,l);o[a]=void 0!==c?cn()({},s,c):s}else{var f=Fi()(Object.keys(u).concat(Object.keys(s)));o[a]=f.reduce(function(e,n){var o={eventKey:a,target:n,childName:r},l=i.getExternalMutation(t,u[n],s[n],o);return e[n]=void 0!==l?cn()({},s[n],l):s[n],Bi()(e,function(t){return!Vn()(t)})},{})}return Bi()(o,function(t){return!Vn()(t)})},{})},getExternalMutation:function(t,e,n,r){var i=function(t,e){if("string"==typeof t[e])return"all"===t[e]||t[e]===r[e];if(Array.isArray(t[e])){var n=t[e].map(function(t){return"".concat(t)});return Li()(n,r[e])}return!1},o=t=Array.isArray(t)?t:[t];r.childName&&(o=t.filter(function(t){return i(t,"childName")}));var a=o.filter(function(t){return i(t,"target")});if(!Vn()(a)){var s=a.filter(function(t){return i(t,"eventKey")});if(!Vn()(s))return s.reduce(function(t,r){var i=(r&&dn()(r.mutation)?r.mutation:function(){})(cn()({},e,n));return cn()({},t,i)},{})}},getComponentEvents:function(t,e){var n=Array.isArray(e)&&e.reduce(function(e,n){var r,i=t[n],o=i&&i.type&&i.type.defaultEvents,a=dn()(o)?o(i.props):o;return e=Array.isArray(a)?(r=e).concat.apply(r,Ui(a)):e},[]);return n&&n.length?n:void 0}};function Gi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Hi=[{name:"parent",index:"parent"},{name:"data"},{name:"labels"}],Xi=function(t,e){return function(n){function r(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?qi(t):e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));var n=Vi.getScopedEvents.bind(qi(e)),i=Vi.getEvents.bind(qi(e));e.state={},e.getEvents=function(t,e,r){return i(t,e,r,n)},e.getEventState=Vi.getEventState.bind(qi(e));var o=e.getCalculatedValues(t);return e.cacheValues(o),e.externalMutations=e.getExternalMutations(t),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,t),function(t,e,n){e&&Wi(t.prototype,e),n&&Wi(t,n)}(r,[{key:"componentDidUpdate",value:function(){var t=this.getExternalMutations(this.props);nr()(this.externalMutations,t)||(this.externalMutations=t,this.applyExternalMutations(this.props,t))}},{key:"componentWillReceiveProps",value:function(t){this.cacheValues(this.getCalculatedValues(t))}},{key:"applyExternalMutations",value:function(t,e){if(!Vn()(e)){var n=t.externalEventMutations.reduce(function(t,e){return t=dn()(e.callback)?t.concat(e.callback):t},[]),r=n.length?function(){n.forEach(function(t){return t()})}:void 0;this.setState(e,r)}}},{key:"getStateChanges",value:function(t,n){var r=this,i=n.hasEvents,o=n.getSharedEventState;if(!i)return{};var a=function(t,e){var n=un()({},r.getEventState(t,e),o(t,e));return Vn()(n)?void 0:n};return((e=e||{}).components||Hi).map(function(e){return t.standalone||"parent"!==e.name?void 0!==e.index?a(e.index,e.name):n.dataKeys.map(function(t){return a(t,e.name)}):void 0}).filter(Boolean)}},{key:"getCalculatedValues",value:function(e){var n=e.sharedEvents,r=t.expectedComponents,i=Vi.getComponentEvents(e,r),o=n&&dn()(n.getEventState)?n.getEventState:function(){},a=this.getBaseProps(e,o);return{componentEvents:i,getSharedEventState:o,baseProps:a,dataKeys:Ri()(a).filter(function(t){return"parent"!==t}),hasEvents:e.events||e.sharedEvents||i,events:this.getAllEvents(e)}}},{key:"getExternalMutations",value:function(t){var e=t.sharedEvents,n=t.externalEventMutations;return Vn()(n)||e?void 0:Vi.getExternalMutations(n,this.baseProps,this.state)}},{key:"cacheValues",value:function(t){var e=this;Ri()(t).forEach(function(n){e[n]=t[n]})}},{key:"getBaseProps",value:function(e,n){var r=(n=n||this.getSharedEventState)("parent","parent"),i=this.getEventState("parent","parent"),o=un()({},i,r),a=o.parentControlledProps,s=a?Pn()(o,a):{},u=un()({},s,e);return dn()(t.getBaseProps)?t.getBaseProps(u):{}}},{key:"getAllEvents",value:function(t){var e;return Array.isArray(this.componentEvents)?Array.isArray(t.events)?(e=this.componentEvents).concat.apply(e,Gi(t.events)):this.componentEvents:t.events}},{key:"getComponentProps",value:function(e,n,r){var i=this.props.name||t.role,o=this.dataKeys&&this.dataKeys[r]||r,a="".concat(i,"-").concat(n,"-").concat(o),s=this.baseProps[o]&&this.baseProps[o][n]||this.baseProps[o];if(s||this.hasEvents){if(this.hasEvents){var u=this.getEvents(this.props,n,o),l=un()({index:r,key:a},this.getEventState(o,n),this.getSharedEventState(o,n),e.props,s,{id:a}),c=un()({},Vi.getPartialEvents(u,o,l),l.events);return cn()({},l,{events:c})}return un()({index:r,key:a},e.props,s,{id:a})}}},{key:"renderContainer",value:function(t,e){var n=t.type&&"container"===t.type.role?this.getComponentProps(t,"parent","parent"):{};return s.a.cloneElement(t,n,e)}},{key:"animateComponent",value:function(t,e){return s.a.createElement(kr,{animate:t.animate,animationWhitelist:e},s.a.createElement(this.constructor,t))}},{key:"renderContinuousData",value:function(t){var e=this,n=t.dataComponent,r=t.labelComponent,i=t.groupComponent,o=Mi()(this.dataKeys,"all").reduce(function(t,n){var i=e.getComponentProps(r,"labels",n);return i&&void 0!==i.text&&null!==i.text&&(t=t.concat(s.a.cloneElement(r,i))),t},[]),a=this.getComponentProps(n,"data","all"),u=[s.a.cloneElement(n,a)].concat(Gi(o));return this.renderContainer(i,u)}},{key:"renderData",value:function(t){var e=this,n=t.dataComponent,r=t.labelComponent,i=t.groupComponent,o=this.dataKeys.map(function(t,r){var i=e.getComponentProps(n,"data",r);return s.a.cloneElement(n,i)}),a=this.dataKeys.map(function(t,n){var i=e.getComponentProps(r,"labels",n);if(void 0!==i.text&&null!==i.text)return s.a.cloneElement(r,i)}).filter(Boolean),u=Gi(o).concat(Gi(a));return this.renderContainer(i,u)}}]),r}()},Zi=n(239),Yi=n.n(Zi),Ki=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Ji=function(t){return 1===t.length&&(t=function(t){return function(e,n){return Ki(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var Qi=Ji(Ki),$i=Qi.right,to=(Qi.left,$i);var eo=function(t){return null===t?NaN:+t},no=Array.prototype,ro=(no.slice,no.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}),io=Math.sqrt(50),oo=Math.sqrt(10),ao=Math.sqrt(2),so=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=uo(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function uo(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=io?10:o>=oo?5:o>=ao?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=io?10:o>=oo?5:o>=ao?2:1)}function lo(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=io?i*=10:o>=oo?i*=5:o>=ao&&(i*=2),e<t?-i:i}var co=function(t,e,n){if(null==n&&(n=eo),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},fo=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r};function po(){}function ho(t,e){var n=new po;if(t instanceof po)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}po.prototype=ho.prototype={constructor:po,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var yo=ho;function vo(){}var go=yo.prototype;function mo(t,e){var n=new vo;if(t instanceof vo)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}vo.prototype=mo.prototype={constructor:vo,has:go.has,add:function(t){return this["$"+(t+="")]=t,this},remove:go.remove,clear:go.clear,values:go.keys,size:go.size,empty:go.empty,each:go.each};var bo=Array.prototype,_o=bo.map,xo=bo.slice,wo={name:"implicit"};function Eo(t){var e=yo(),n=[],r=wo;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==wo)return r;e.set(o,a=n.push(i))}return t[(a-1)%t.length]}return t=null==t?[]:xo.call(t),i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=yo();for(var r,o,a=-1,s=t.length;++a<s;)e.has(o=(r=t[a])+"")||e.set(o,n.push(r));return i},i.range=function(e){return arguments.length?(t=xo.call(e),i):t.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Eo().domain(n).range(t).unknown(r)},i}function Oo(){var t,e,n=Eo().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,l=.5;function c(){var n=r().length,c=o[1]<o[0],f=o[c-0],p=o[1-c];t=(p-f)/Math.max(1,n-s+2*u),a&&(t=Math.floor(t)),f+=(p-f-t*(n-s))*l,e=t*(1-s),a&&(f=Math.round(f),e=Math.round(e));var h=ro(n).map(function(e){return f+t*e});return i(c?h.reverse():h)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),c()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],c()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,c()):a},n.padding=function(t){return arguments.length?(s=u=Math.max(0,Math.min(1,t)),c()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),c()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},n.copy=function(){return Oo().domain(r()).range(o).round(a).paddingInner(s).paddingOuter(u).align(l)},c()}function So(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(Oo().paddingInner(1))}var Po=function(t){return function(){return t}},Co=function(t){return+t},To=[0,1];function ko(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Po(e)}function Ao(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function Mo(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=to(t,e,1,i)-1;return a[n](o[n](e))}}function jo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Ro(t,e){var n,r,i,o=To,a=To,s=ge,u=!1;function l(){return n=Math.min(o.length,a.length)>2?Mo:Ao,r=i=null,c}function c(e){return(r||(r=n(o,a,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,s)))(+e)}return c.invert=function(t){return(i||(i=n(a,o,ko,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},c.domain=function(t){return arguments.length?(o=_o.call(t,Co),l()):o.slice()},c.range=function(t){return arguments.length?(a=xo.call(t),l()):a.slice()},c.rangeRound=function(t){return a=xo.call(t),s=me,l()},c.clamp=function(t){return arguments.length?(u=!!t,l()):u},c.interpolate=function(t){return arguments.length?(s=t,l()):s},l()}var Io=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Lo=function(t){return(t=Io(Math.abs(t)))?t[1]:NaN},Do=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fo(t){return new No(t)}function No(t){if(!(e=Do.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}Fo.prototype=No.prototype,No.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Bo,zo,Uo,Vo,Go=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},Wo=function(t,e){var n=Io(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},qo={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Wo(100*t,e)},r:Wo,s:function(t,e){var n=Io(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Bo=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Io(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ho=function(t){return t},Xo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],Zo=function(t){var e=t.grouping&&t.thousands?function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}(t.grouping,t.thousands):Ho,n=t.currency,r=t.decimal,i=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):Ho,o=t.percent||"%";function a(t){var a=(t=Fo(t)).fill,s=t.align,u=t.sign,l=t.symbol,c=t.zero,f=t.width,p=t.comma,h=t.precision,d=t.trim,y=t.type;"n"===y?(p=!0,y="g"):qo[y]||(null==h&&(h=12),d=!0,y="g"),(c||"0"===a&&"="===s)&&(c=!0,a="0",s="=");var v="$"===l?n[0]:"#"===l&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",g="$"===l?n[1]:/[%p]/.test(y)?o:"",m=qo[y],b=/[defgprs%]/.test(y);function _(t){var n,o,l,_=v,x=g;if("c"===y)x=m(t)+x,t="";else{var w=(t=+t)<0;if(t=m(Math.abs(t),h),d&&(t=Go(t)),w&&0==+t&&(w=!1),_=(w?"("===u?u:"-":"-"===u||"("===u?"":u)+_,x=("s"===y?Xo[8+Bo/3]:"")+x+(w&&"("===u?")":""),b)for(n=-1,o=t.length;++n<o;)if(48>(l=t.charCodeAt(n))||l>57){x=(46===l?r+t.slice(n+1):t.slice(n))+x,t=t.slice(0,n);break}}p&&!c&&(t=e(t,1/0));var E=_.length+t.length+x.length,O=E<f?new Array(f-E+1).join(a):"";switch(p&&c&&(t=e(O+t,O.length?f-x.length:1/0),O=""),s){case"<":t=_+t+x+O;break;case"=":t=_+O+t+x;break;case"^":t=O.slice(0,E=O.length>>1)+_+t+x+O.slice(E);break;default:t=O+_+t+x}return i(t)}return h=null==h?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),_.toString=function(){return t+""},_}return{format:a,formatPrefix:function(t,e){var n=a(((t=Fo(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Lo(e)/3))),i=Math.pow(10,-r),o=Xo[8+r/3];return function(t){return n(i*t)+o}}}};!function(t){zo=Zo(t),Uo=zo.format,Vo=zo.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Yo=function(t,e,n){var r,i=t[0],o=t[t.length-1],a=lo(i,o,null==e?10:e);switch((n=Fo(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Lo(e)/3)))-Lo(Math.abs(t)))}(a,s))||(n.precision=r),Vo(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Lo(e)-Lo(t))+1}(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-Lo(Math.abs(t)))}(a))||(n.precision=r-2*("%"===n.type))}return Uo(n)};function Ko(t){var e=t.domain;return t.ticks=function(t){var n=e();return so(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Yo(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=uo(s,u,n))>0?r=uo(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=uo(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function Jo(){var t=Ro(ko,ce);return t.copy=function(){return jo(t,Jo())},Ko(t)}function Qo(){var t=[0,1];function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=_o.call(n,Co),e):t.slice()},e.copy=function(){return Qo().domain(t)},Ko(e)}var $o=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function ta(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Po(e)}function ea(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function na(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ra(t){return 10===t?na:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function ia(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function oa(t){return function(e){return-t(-e)}}function aa(){var t=Ro(ta,ea).domain([1,10]),e=t.domain,n=10,r=ia(10),i=ra(10);function o(){return r=ia(n),i=ra(n),e()[0]<0&&(r=oa(r),i=oa(i)),t}return t.base=function(t){return arguments.length?(n=+t,o()):n},t.domain=function(t){return arguments.length?(e(t),o()):e()},t.ticks=function(t){var o,a=e(),s=a[0],u=a[a.length-1];(o=u<s)&&(p=s,s=u,u=p);var l,c,f,p=r(s),h=r(u),d=null==t?10:+t,y=[];if(!(n%1)&&h-p<d){if(p=Math.round(p)-1,h=Math.round(h)+1,s>0){for(;p<h;++p)for(c=1,l=i(p);c<n;++c)if(!((f=l*c)<s)){if(f>u)break;y.push(f)}}else for(;p<h;++p)for(c=n-1,l=i(p);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;y.push(f)}}else y=so(p,h,Math.min(h-p,d)).map(i);return o?y.reverse():y},t.tickFormat=function(e,o){if(null==o&&(o=10===n?".0e":","),"function"!=typeof o&&(o=Uo(o)),e===1/0)return o;null==e&&(e=10);var a=Math.max(1,n*e/t.ticks().length);return function(t){var e=t/i(Math.round(r(t)));return e*n<n-.5&&(e*=n),e<=a?o(t):""}},t.nice=function(){return e($o(e(),{floor:function(t){return i(Math.floor(r(t)))},ceil:function(t){return i(Math.ceil(r(t)))}}))},t.copy=function(){return jo(t,aa().base(n))},t}function sa(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function ua(){var t=1,e=Ro(function(e,n){return(n=sa(n,t)-(e=sa(e,t)))?function(r){return(sa(r,t)-e)/n}:Po(n)},function(e,n){return n=sa(n,t)-(e=sa(e,t)),function(r){return sa(e+n*r,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return jo(e,ua().exponent(t))},Ko(e)}function la(){return ua().exponent(.5)}function ca(){var t=[],e=[],n=[];function r(){var r=0,o=Math.max(1,e.length);for(n=new Array(o-1);++r<o;)n[r-1]=co(t,r/o);return i}function i(t){if(!isNaN(t=+t))return e[to(n,t)]}return i.invertExtent=function(r){var i=e.indexOf(r);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,i=0,o=e.length;i<o;++i)null==(n=e[i])||isNaN(n=+n)||t.push(n);return t.sort(Ki),r()},i.range=function(t){return arguments.length?(e=xo.call(t),r()):e.slice()},i.quantiles=function(){return n.slice()},i.copy=function(){return ca().domain(t).range(e)},i}function fa(){var t=0,e=1,n=1,r=[.5],i=[0,1];function o(t){if(t<=t)return i[to(r,t,0,n)]}function a(){var i=-1;for(r=new Array(n);++i<n;)r[i]=((i+1)*e-(i-n)*t)/(n+1);return o}return o.domain=function(n){return arguments.length?(t=+n[0],e=+n[1],a()):[t,e]},o.range=function(t){return arguments.length?(n=(i=xo.call(t)).length-1,a()):i.slice()},o.invertExtent=function(o){var a=i.indexOf(o);return a<0?[NaN,NaN]:a<1?[t,r[0]]:a>=n?[r[n-1],e]:[r[a-1],r[a]]},o.copy=function(){return fa().domain([t,e]).range(i)},Ko(o)}function pa(){var t=[.5],e=[0,1],n=1;function r(r){if(r<=r)return e[to(t,r,0,n)]}return r.domain=function(i){return arguments.length?(t=xo.call(i),n=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(i){return arguments.length?(e=xo.call(i),n=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},r.copy=function(){return pa().domain(t).range(e)},r}var ha=new Date,da=new Date;function ya(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return ya(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return ha.setTime(+e),da.setTime(+r),t(ha),t(da),Math.floor(n(ha,da))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var va=ya(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});va.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ya(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):va:null};var ga=va,ma=(va.range,6e4),ba=6048e5,_a=ya(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),xa=_a,wa=(_a.range,ya(function(t){t.setTime(Math.floor(t/ma)*ma)},function(t,e){t.setTime(+t+e*ma)},function(t,e){return(e-t)/ma},function(t){return t.getMinutes()})),Ea=wa,Oa=(wa.range,ya(function(t){var e=t.getTimezoneOffset()*ma%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),Sa=Oa,Pa=(Oa.range,ya(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ma)/864e5},function(t){return t.getDate()-1})),Ca=Pa;Pa.range;function Ta(t){return ya(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ma)/ba})}var ka=Ta(0),Aa=Ta(1),Ma=Ta(2),ja=Ta(3),Ra=Ta(4),Ia=Ta(5),La=Ta(6),Da=(ka.range,Aa.range,Ma.range,ja.range,Ra.range,Ia.range,La.range,ya(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),Fa=Da,Na=(Da.range,ya(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Na.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ya(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Ba=Na,za=(Na.range,ya(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*ma)},function(t,e){return(e-t)/ma},function(t){return t.getUTCMinutes()})),Ua=za,Va=(za.range,ya(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()})),Ga=Va,Wa=(Va.range,ya(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),qa=Wa;Wa.range;function Ha(t){return ya(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/ba})}var Xa=Ha(0),Za=Ha(1),Ya=Ha(2),Ka=Ha(3),Ja=Ha(4),Qa=Ha(5),$a=Ha(6),ts=(Xa.range,Za.range,Ya.range,Ka.range,Ja.range,Qa.range,$a.range,ya(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),es=ts,ns=(ts.range,ya(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));ns.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ya(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var rs=ns;ns.range;function is(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function os(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function as(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var ss,us,ls,cs,fs={"-":"",_:" ",0:"0"},ps=/^\s*\d+/,hs=/^%/,ds=/[\\^$*+?|[\]().{}]/g;function ys(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function vs(t){return t.replace(ds,"\\$&")}function gs(t){return new RegExp("^(?:"+t.map(vs).join("|")+")","i")}function ms(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function bs(t,e,n){var r=ps.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function _s(t,e,n){var r=ps.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function xs(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ws(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Es(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Os(t,e,n){var r=ps.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ss(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ps(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Cs(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ts(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ks(t,e,n){var r=ps.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function As(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ms(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function js(t,e,n){var r=ps.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Rs(t,e,n){var r=ps.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Is(t,e,n){var r=ps.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ls(t,e,n){var r=hs.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ds(t,e,n){var r=ps.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Fs(t,e,n){var r=ps.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Ns(t,e){return ys(t.getDate(),e,2)}function Bs(t,e){return ys(t.getHours(),e,2)}function zs(t,e){return ys(t.getHours()%12||12,e,2)}function Us(t,e){return ys(1+Ca.count(Ba(t),t),e,3)}function Vs(t,e){return ys(t.getMilliseconds(),e,3)}function Gs(t,e){return Vs(t,e)+"000"}function Ws(t,e){return ys(t.getMonth()+1,e,2)}function qs(t,e){return ys(t.getMinutes(),e,2)}function Hs(t,e){return ys(t.getSeconds(),e,2)}function Xs(t){var e=t.getDay();return 0===e?7:e}function Zs(t,e){return ys(ka.count(Ba(t),t),e,2)}function Ys(t,e){var n=t.getDay();return t=n>=4||0===n?Ra(t):Ra.ceil(t),ys(Ra.count(Ba(t),t)+(4===Ba(t).getDay()),e,2)}function Ks(t){return t.getDay()}function Js(t,e){return ys(Aa.count(Ba(t),t),e,2)}function Qs(t,e){return ys(t.getFullYear()%100,e,2)}function $s(t,e){return ys(t.getFullYear()%1e4,e,4)}function tu(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ys(e/60|0,"0",2)+ys(e%60,"0",2)}function eu(t,e){return ys(t.getUTCDate(),e,2)}function nu(t,e){return ys(t.getUTCHours(),e,2)}function ru(t,e){return ys(t.getUTCHours()%12||12,e,2)}function iu(t,e){return ys(1+qa.count(rs(t),t),e,3)}function ou(t,e){return ys(t.getUTCMilliseconds(),e,3)}function au(t,e){return ou(t,e)+"000"}function su(t,e){return ys(t.getUTCMonth()+1,e,2)}function uu(t,e){return ys(t.getUTCMinutes(),e,2)}function lu(t,e){return ys(t.getUTCSeconds(),e,2)}function cu(t){var e=t.getUTCDay();return 0===e?7:e}function fu(t,e){return ys(Xa.count(rs(t),t),e,2)}function pu(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Ja(t):Ja.ceil(t),ys(Ja.count(rs(t),t)+(4===rs(t).getUTCDay()),e,2)}function hu(t){return t.getUTCDay()}function du(t,e){return ys(Za.count(rs(t),t),e,2)}function yu(t,e){return ys(t.getUTCFullYear()%100,e,2)}function vu(t,e){return ys(t.getUTCFullYear()%1e4,e,4)}function gu(){return"+0000"}function mu(){return"%"}function bu(t){return+t}function _u(t){return Math.floor(+t/1e3)}!function(t){ss=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=gs(i),c=ms(i),f=gs(o),p=ms(o),h=gs(a),d=ms(a),y=gs(s),v=ms(s),g=gs(u),m=ms(u),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Ns,e:Ns,f:Gs,H:Bs,I:zs,j:Us,L:Vs,m:Ws,M:qs,p:function(t){return i[+(t.getHours()>=12)]},Q:bu,s:_u,S:Hs,u:Xs,U:Zs,V:Ys,w:Ks,W:Js,x:null,X:null,y:Qs,Y:$s,Z:tu,"%":mu},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:eu,e:eu,f:au,H:nu,I:ru,j:iu,L:ou,m:su,M:uu,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:bu,s:_u,S:lu,u:cu,U:fu,V:pu,w:hu,W:du,x:null,X:null,y:yu,Y:vu,Z:gu,"%":mu},x={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return O(t,e,n,r)},d:Ts,e:Ts,f:Is,H:As,I:As,j:ks,L:Rs,m:Cs,M:Ms,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:Ds,s:Fs,S:js,u:_s,U:xs,V:ws,w:bs,W:Es,x:function(t,e,r){return O(t,n,e,r)},X:function(t,e,n){return O(t,r,e,n)},y:Ss,Y:Os,Z:Ps,"%":Ls};function w(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=fs[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function E(t,e){return function(n){var r,i,o=as(1900);if(O(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=(r=os(as(o.y))).getUTCDay())>4||0===i?Za.ceil(r):Za(r),r=qa.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(i=(r=e(as(o.y))).getDay())>4||0===i?Aa.ceil(r):Aa(r),r=Ca.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?os(as(o.y)).getUTCDay():e(as(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,os(o)):e(o)}}function O(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in fs?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=E(t+="",is);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=E(t,os);return e.toString=function(){return t},e}}}(t),us=ss.format,ss.parse,ls=ss.utcFormat,cs=ss.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||ls("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||cs("%Y-%m-%dT%H:%M:%S.%LZ");var xu=1e3,wu=60*xu,Eu=60*wu,Ou=24*Eu,Su=7*Ou,Pu=30*Ou,Cu=365*Ou;function Tu(t){return new Date(t)}function ku(t){return t instanceof Date?+t:+new Date(+t)}function Au(t,e,n,r,i,o,a,s,u){var l=Ro(ko,ce),c=l.invert,f=l.domain,p=u(".%L"),h=u(":%S"),d=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),g=u("%b %d"),m=u("%B"),b=u("%Y"),_=[[a,1,xu],[a,5,5*xu],[a,15,15*xu],[a,30,30*xu],[o,1,wu],[o,5,5*wu],[o,15,15*wu],[o,30,30*wu],[i,1,Eu],[i,3,3*Eu],[i,6,6*Eu],[i,12,12*Eu],[r,1,Ou],[r,2,2*Ou],[n,1,Su],[e,1,Pu],[e,3,3*Pu],[t,1,Cu]];function x(s){return(a(s)<s?p:o(s)<s?h:i(s)<s?d:r(s)<s?y:e(s)<s?n(s)<s?v:g:t(s)<s?m:b)(s)}function w(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(r-n)/e,a=Ji(function(t){return t[2]}).right(_,o);a===_.length?(i=lo(n/Cu,r/Cu,e),e=t):a?(i=(a=_[o/_[a-1][2]<_[a][2]/o?a-1:a])[1],e=a[0]):(i=Math.max(lo(n,r,e),1),e=s)}return null==i?e:e.every(i)}return l.invert=function(t){return new Date(c(t))},l.domain=function(t){return arguments.length?f(_o.call(t,ku)):f().map(Tu)},l.ticks=function(t,e){var n,r=f(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=w(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},l.tickFormat=function(t,e){return null==e?x:u(e)},l.nice=function(t,e){var n=f();return(t=w(t,n[0],n[n.length-1],e))?f($o(n,t)):l},l.copy=function(){return jo(l,Au(t,e,n,r,i,o,a,s,u))},l}var Mu=function(){return Au(Ba,Fa,ka,Ca,Sa,Ea,xa,ga,us).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},ju=function(){return Au(rs,es,Xa,qa,Ga,Ua,xa,ga,ls).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},Ru=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},Iu=Ru("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Lu=Ru("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Du=Ru("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Fu=Ru("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Nu=Pe(te(300,.5,0),te(-240,.5,1)),Bu=Pe(te(-100,.75,.35),te(80,1.5,.8)),zu=Pe(te(260,.75,.35),te(80,1.5,.8)),Uu=te(),Vu=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Uu.h=360*t-100,Uu.s=1.5-1.5*e,Uu.l=.8-.9*e,Uu+""};function Gu(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Wu=Gu(Ru("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),qu=Gu(Ru("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Hu=Gu(Ru("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Xu=Gu(Ru("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Zu(t){var e=0,n=1,r=!1;function i(i){var o=(i-e)/(n-e);return t(r?Math.max(0,Math.min(1,o)):o)}return i.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.clamp=function(t){return arguments.length?(r=!!t,i):r},i.interpolator=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Zu(t).domain([e,n]).clamp(r)},Ko(i)}var Yu=["linear","time","log","sqrt"];function Ku(t){return"scale".concat(function(t){return t&&t[0].toUpperCase()+t.slice(1)}(t))}function Ju(t,e){return!!t.scale&&(!t.scale.x&&!t.scale.y||!!t.scale[e])}function Qu(t,e){if(!t.data)return"linear";var n=Ln.createAccessor(t[e]),r=t.data.map(n);return mr.containsDates(r)?"time":"linear"}function $u(t,e){if(Ju(t,e)){var n=t.scale[e]||t.scale;return function(t){return"function"==typeof t?dn()(t.copy)&&dn()(t.domain)&&dn()(t.range):"string"==typeof t&&Li()(Yu,t)}(n)?dn()(n)?n:i[Ku(n)]():void 0}}function tl(t){var e=[{name:"log",method:"base"},{name:"ordinal",method:"unknown"},{name:"pow-sqrt",method:"exponent"},{name:"quantile",method:"quantiles"},{name:"quantize-threshold",method:"invertExtent"}].filter(function(e){return void 0!==t[e.method]})[0];return e?e.name:void 0}var el={getBaseScale:function(t,e){var n=$u(t,e);if(n)return n;var r=function(t,e){var n;if(t.domain&&t.domain[e]?n=t.domain[e]:t.domain&&Array.isArray(t.domain)&&(n=t.domain),n)return mr.containsDates(n)?"time":"linear"}(t,e)||Qu(t,e);return i[Ku(r)]()},getDefaultScale:function(){return Jo()},getScaleFromProps:$u,getScaleType:function(t,e){return function(t,e){if(Ju(t,e)){var n=t.scale[e]||t.scale;return"string"==typeof n?n:tl(n)}}(t,e)||Qu(t,e)},getType:tl},nl={IMMUTABLE_ITERABLE:"@@__IMMUTABLE_ITERABLE__@@",IMMUTABLE_RECORD:"@@__IMMUTABLE_RECORD__@@",IMMUTABLE_LIST:"@@__IMMUTABLE_LIST__@@",IMMUTABLE_MAP:"@@__IMMUTABLE_MAP__@@",isImmutable:function(t){return this.isIterable(t)||this.isRecord(t)},isIterable:function(t){return!(!t||!t[this.IMMUTABLE_ITERABLE])},isRecord:function(t){return!(!t||!t[this.IMMUTABLE_RECORD])},isList:function(t){return!(!t||!t[this.IMMUTABLE_LIST])},isMap:function(t){return!(!t||!t[this.IMMUTABLE_MAP])},shallowToJS:function(t,e){var n=this;return this.isIterable(t)?t.reduce(function(t,r,i){return e&&e[i]&&(r=n.shallowToJS(r)),t[i]=r,t},this.isList(t)?[]:{}):t}};function rl(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function il(t){return nl.isImmutable(t)?nl.shallowToJS(t,{errorX:!0,errorY:!0}):t}function ol(t){return nl.isIterable(t)?t.size:t.length}function al(t,e){var n=(tt()(t.domain)?t.domain[e]:t.domain)||el.getBaseScale(t,e).domain(),r=t.samples||1,i=Math.max.apply(Math,rl(n)),o=Math.min.apply(Math,rl(n)),a=(i-o)/r,s=vi()(o,i,a);return Yi()(s)===i?s:s.concat(i)}function sl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ascending";if(!e)return t;"x"!==e&&"y"!==e||(e="_".concat(e));var r="ascending"===n?"asc":"desc";return Q()(t,e,r)}function ul(t,e){var n=function(t){return dn()(t)?t:null===t||void 0===t?function(){}:Tn()(t)}(t.eventKey);return e.map(function(t,e){var r=t.eventKey||n(t)||e;return cn()({eventKey:r},t)})}function ll(t,e){var n=Ln.getCurrentAxis(e,t.horizontal),r=hl(t,n),i=dl(t,n),o=yl(t,e),a=Fi()(rl(r).concat(rl(i),rl(o)));return 0===a.length?null:a.reduce(function(t,e,n){return t[e]=n+1,t},{})}function cl(t,e,n){if(!(Array.isArray(t)||nl.isIterable(t))||ol(t)<1)return[];var r={x:-1!==(n=Array.isArray(n)?n:["x","y","y0"]).indexOf("x")?ll(e,"x"):void 0,y:-1!==n.indexOf("y")?ll(e,"y"):void 0,y0:-1!==n.indexOf("y0")?ll(e,"y"):void 0},i=n.reduce(function(t,n){return t[n]=function(t){return Ln.createAccessor(void 0!==e[t]?e[t]:t)}(n),t},{}),o=function(t,e){var n={x:el.getScaleType(e,"x"),y:el.getScaleType(e,"y")};if("log"!==n.x&&"log"!==n.y)return t;var r=function(t,e){return"log"!==n[e]||0!==t["_".concat(e)]};return t.filter(function(t){return r(t,"x")&&r(t,"y")&&r(t,"y0")})}(sl(t.reduce(function(t,e,o){var a={x:o,y:e=il(e)},s=n.reduce(function(t,n){var o=i[n](e),s=void 0!==o?o:a[n];return void 0!==s&&("string"==typeof s&&r[n]?(t["".concat(n,"Name")]=s,t["_".concat(n)]=r[n][s]):t["_".concat(n)]=s),t},{}),u=cn()({},s,e);return Vn()(u)||t.push(u),t},[]),e.sortKey,e.sortOrder),e);return ul(e,o)}function fl(t){var e=al(t,"x"),n=al(t,"y");return e.map(function(t,e){return{x:t,y:n[e]}})}function pl(t,e){var n=Ln.getCurrentAxis(e,t.horizontal);return t.categories&&!Array.isArray(t.categories)?t.categories[n]:t.categories}function hl(t,e){var n=t.tickValues,r=t.tickFormat;return(n&&(Array.isArray(n)||n[e])?n[e]||n:r&&Array.isArray(r)?r:[]).filter(function(t){return"string"==typeof t})}function dl(t,e){if(!t.categories)return[];var n=pl(t,e),r=n&&n.filter(function(t){return"string"==typeof t});return r?mr.removeUndefined(r):[]}function yl(t,e){if(!(Array.isArray(t.data)||nl.isIterable(t.data)))return[];var n=void 0===t[e]?e:t[e],r=Ln.createAccessor(n);return sl(t.data,t.sortKey,t.sortOrder).reduce(function(t,e){return e=il(e),t.push(r(e)),t},[]).filter(function(t){return"string"==typeof t}).reduce(function(t,e){return void 0!==e&&null!==e&&-1===t.indexOf(e)&&t.push(e),t},[])}var vl={createStringMap:ll,downsample:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=ol(t);if(r>e){var i=Math.pow(2,Math.ceil(Math.log2(r/e)));return t.filter(function(t,e){return(e+n)%i==0})}return t},formatData:cl,generateData:fl,getCategories:pl,getData:function(t){return t.data?cl(t.data,t):cl(fl(t),t)},getStringsFromAxes:hl,getStringsFromCategories:dl,getStringsFromData:yl,isDataComponent:function(t){var e=function(t){return t&&t.type?t.type.role:""},n=e(t);if("portal"===n){var r=s.a.Children.toArray(t.props.children);n=r.length?e(r[0]):""}return Li()(["area","bar","boxplot","candlestick","errorbar","group","line","pie","scatter","stack","voronoi"],n)}},gl={continuousTransitions:function(){return{onLoad:{duration:2e3},onExit:{duration:500},onEnter:{duration:500}}},continuousPolarTransitions:function(){return{onLoad:{duration:2e3,before:function(){return{_y:0,_y1:0,_y0:0}},after:function(t){return{_y:t._y,_y1:t._y1,_y0:t._y0}}},onExit:{duration:500,before:function(t,e,n){var r=function(t){return(0===e?n[e+1]:n[e-1])[t]};return{_x:r("_x"),_y:r("_y"),_y0:r("_y0")}}},onEnter:{duration:500,before:function(t,e,n){var r=function(t){return(0===e?n[e+1]:n[e-1])[t]};return{_x:r("_x"),_y:r("_y"),_y0:r("_y0")}},after:function(t){return{_x:t._x,_y:t._y,_y1:t._y1,_y0:t._y0}}}}},discreteTransitions:function(){return{onLoad:{duration:2e3,before:function(){return{opacity:0}},after:function(t){return t}},onExit:{duration:600,before:function(){return{opacity:0}}},onEnter:{duration:600,before:function(){return{opacity:0}},after:function(t){return t}}}}},ml=n(238),bl=n.n(ml),_l=n(78),xl=n.n(_l);function wl(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function El(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"min",r=function(t){return"max"===n?Math.max.apply(Math,wl(t)):Math.min.apply(Math,wl(t))},i="max"===n?-1/0:1/0,o=!1,a=xl()(t).reduce(function(t,n){var i=void 0!==n["_".concat(e,"0")]?n["_".concat(e,"0")]:n["_".concat(e)],a=void 0!==n["_".concat(e,"1")]?n["_".concat(e,"1")]:n["_".concat(e)],s=r([i,a]);return o=o||s instanceof Date,r([t,s])},i);return o?new Date(a):a}function Ol(t,e,n){if(!e.domainPadding)return t;var r=jl(e,n),i=Ml(e,n),o=function(t,e){var n=function(t){return Array.isArray(t)?{left:t[0],right:t[1]}:{left:t,right:t}};return tt()(t.domainPadding)?n(t.domainPadding[e]):n(t.domainPadding)}(e,n);if(!o.left&&!o.right)return t;var a=mr.getMinValue(t),s=mr.getMaxValue(t),u=Ln.getRange(e,n),l=Math.abs(u[0]-u[1]),c=Math.abs(s-a)*o.left/l,f=Math.abs(s-a)*o.right/l,p=tt()(e.singleQuadrantDomainPadding)?e.singleQuadrantDomainPadding[n]:e.singleQuadrantDomainPadding,h=function(t,e){return!1===p?t:"min"===e&&a>=0&&t<=0||"max"===e&&s<=0&&t>=0?0:t},d=h(a.valueOf()-c,"min"),y=h(s.valueOf()+f,"max"),v=Math.abs(y-d)*o.left/l,g=Math.abs(y-d)*o.right/l,m={min:h(a.valueOf()-v,"min"),max:h(s.valueOf()+g,"max")},b={min:void 0!==r?r:m.min,max:void 0!==i?i:m.max};return a instanceof Date||s instanceof Date?kl(new Date(b.min),new Date(b.max)):kl(b.min,b.max)}function Sl(t,e){return t=dn()(t)?t:Tl,e=dn()(e)?e:Pl,function(n,r){var i=Al(n,r);if(i)return e(i,n,r);var o=vl.getCategories(n,r),a=o?Cl(n,r,o):t(n,r);return e(a,n,r)}}function Pl(t,e,n){return function(t,e,n){return"log"!==el.getScaleType(e,n)?t:function(t){var e=t[0]<0||t[1]<0?-1/Number.MAX_SAFE_INTEGER:1/Number.MAX_SAFE_INTEGER;return[0===t[0]?e:t[0],0===t[1]?e:t[1]]}(t)}(Ol(t,e,n),e,n)}function Cl(t,e,n){n=n||vl.getCategories(t,e);var r=t.polar,i=t.startAngle,o=void 0===i?0:i,a=t.endAngle,s=void 0===a?360:a;if(n){var u=jl(t,e),l=Ml(t,e),c=mr.containsStrings(n)?vl.getStringsFromCategories(t,e):[],f=0===c.length?null:c.reduce(function(t,e,n){return t[e]=n+1,t},{}),p=f?n.map(function(t){return f[t]}):n,h=kl(void 0!==u?u:mr.getMinValue(p),void 0!==l?l:mr.getMaxValue(p));return r&&"x"===e&&360===Math.abs(o-s)?Rl(h,p):h}}function Tl(t,e,n){n=n||vl.getData(t);var r=t.horizontal,i=t.polar,o=t.startAngle,a=void 0===o?0:o,s=t.endAngle,u=void 0===s?360:s,l=jl(t,e),c=Ml(t,e);if(n.length<1){var f=el.getBaseScale(t,e).domain();return kl(void 0!==l?l:mr.getMinValue(f),void 0!==c?c:mr.getMaxValue(f))}var p=Ln.getCurrentAxis(e,r),h=kl(void 0!==l?l:El(n,p,"min"),void 0!==c?c:El(n,p,"max"));return i&&"x"===e&&360===Math.abs(a-u)?Rl(h,function(t,e){return xl()(t).map(function(t){return t["_".concat(e)]&&void 0!==t["_".concat(e)][1]?t["_".concat(e)][1]:t["_".concat(e)]})}(n,p)):h}function kl(t,e){return+t==+e?function(t){var e=0===t?2*Math.pow(10,-10):Math.pow(10,-10),n=t instanceof Date?new Date(+t-1):t-e,r=t instanceof Date?new Date(+t+1):t+e;return 0===t?[0,r]:[n,r]}(e):[t,e]}function Al(t,e){var n=jl(t,e),r=Ml(t,e);return tt()(t.domain)&&t.domain[e]?t.domain[e]:Array.isArray(t.domain)?t.domain:void 0!==n&&void 0!==r?kl(n,r):void 0}function Ml(t,e){return tt()(t.maxDomain)&&void 0!==t.maxDomain[e]?t.maxDomain[e]:"number"==typeof t.maxDomain?t.maxDomain:void 0}function jl(t,e){return tt()(t.minDomain)&&void 0!==t.minDomain[e]?t.minDomain[e]:"number"==typeof t.minDomain?t.minDomain:void 0}function Rl(t,e){var n=bl()(e.sort(function(t,e){return t-e})),r=n[1]-n[0];return[t[0],t[1]+r]}var Il={createDomainFunction:Sl,formatDomain:Pl,getDomain:function(t,e){return Sl()(t,e)},getDomainFromCategories:Cl,getDomainFromData:Tl,getDomainFromMinMax:kl,getDomainFromProps:Al,getDomainWithZero:function(t,e){var n=Al(t,e);return n||Sl(null,function(n){return Pl(function(n){var r=Ln.getCurrentAxis(e,t.horizontal),i=jl(t,e),o=Ml(t,e);if("x"===r)return n;var a=i||0,s=o||0;return kl(void 0!==i?i:mr.getMinValue(n,a),void 0!==o?o:mr.getMaxValue(n,s))}(n),t,e)})(t,e)},getMaxFromProps:Ml,getMinFromProps:jl,getSymmetricDomain:Rl,isDomainComponent:function(t){var e=function(t){return t&&t.type?t.type.role:""},n=e(t);if("portal"===n){var r=s.a.Children.toArray(t.props.children);n=r.length?e(r[0]):""}return Li()(["area","axis","bar","boxplot","candlestick","errorbar","group","line","pie","scatter","stack","voronoi"],n)}};function Ll(t,e,n){var r=e.a,i=e.d,o=e.e,a=e.f;return"y"===n?i*t+a:r*t+o}function Dl(t){if(!t.nativeEvent||void 0===t.nativeEvent.identifier){var e=function(t){return"svg"===t.nodeName?t:t.parentNode?e(t.parentNode):t};return e(t.target)}}function Fl(t,e,n,r){if(t.polar){var i=t.origin||{x:0,y:0},o=n-i.x,a=r-i.y,s=Math.abs(o*Math.sqrt(1+Math.pow(-a/o,2))),u=(-Math.atan2(a,o)+2*Math.PI)%(2*Math.PI);return{x:e.x.invert(u),y:e.y.invert(s)}}return{x:e.x.invert(n),y:e.y.invert(r)}}var Nl={getParentSVG:Dl,getSVGEventCoordinates:function(t,e){if(t.nativeEvent&&void 0!==t.nativeEvent.identifier)return{x:t.nativeEvent.locationX,y:t.nativeEvent.locationY};t=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t;var n=function(t){return t.getScreenCTM().inverse()}(e=e||Dl(t));return{x:Ll(t.clientX,n,"x"),y:Ll(t.clientY,n,"y")}},getDomainCoordinates:function(t,e){var n=t.scale;return e=e||{x:n.x.domain(),y:n.y.domain()},{x:[n.x(e.x[0]),n.x(e.x[1])],y:[n.y(e.y[0]),n.y(e.y[1])]}},getDataCoordinates:Fl,getBounds:function(t){var e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.scale,a=Fl(t,o,e,r),s=Fl(t,o,n,i),u=function(t,e){return[mr.getMinValue([t,e]),mr.getMaxValue([t,e])]};return{x:u(a.x,s.x),y:u(a.y,s.y)}}};function Bl(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var zl={"American Typewriter":2.09,Baskerville:2.51,Georgia:2.27,"Hoefler Text":2.39,Palatino:2.26,"Times New Roman":2.48,Arial:2.26,"Gill Sans":2.47,"Gill Sans 300":2.58,"Helvetica Neue":2.24,"Lucida Grande":2.05,Tahoma:2.25,"Trebuchet MS":2.2,Verdana:1.96,"Courier New":1.67,cursive:1.84,fantasy:2.09,monospace:1.81,serif:2.04,"sans-serif":1.89},Ul={mm:3.8,sm:38,pt:1.33,pc:16,in:96,px:1},Vl={em:1,ex:.5},Gl=2.1675,Wl=1.25,ql=1.05,Hl=1.15,Xl=.2,Zl={lineHeight:1,letterSpacing:"0px",fontSize:0,angle:0,fontFamily:""},Yl=function(t){return Array.isArray(t)?t:t.toString().split(/\r\n|\r|\n/g)},Kl=function(t,e,n){var r=function(t){return t*Math.PI/180}(n);return Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e)},Jl=function(t,e){var n=t.match(/[a-zA-Z%]+/)[0],r=t.match(/[0-9.,]+/);return Ul.hasOwnProperty(n)?r*Ul[n]:Vl.hasOwnProperty(n)?(e?r*e:r*Zl.fontSize)*Vl[n]:r},Ql=function(t,e){var n=Array.isArray(t)?t[e]:t,r=un()({},n,Zl);return cn()({},r,{characterConstant:r.characterConstant||function(t){var e=t.split(",")[0].replace(/'|"/g,"");return zl[e]||Gl}(r.fontFamily),letterSpacing:Jl(r.letterSpacing,r.fontSize),fontSize:"number"==typeof r.fontSize?r.fontSize:Jl(String(r.fontSize))})},$l={approximateTextSize:function(t,e){var n=Array.isArray(e)?e[0]&&e[0].angle:e&&e.angle,r=function(t,e){return t?Yl(t).reduce(function(t,n,r){var i=Ql(e,r),o=n.toString().match(/[(A-Z)(0-9)]/)?i.fontSize*Hl:i.fontSize,a=0===r?0:i.fontSize*Xl;return t+i.lineHeight*(o+a)},0):0}(t,e),i=function(t,e){if(!t)return 0;var n=Yl(t).map(function(t,n){var r=t.toString().length,i=Ql(e,n);return r*i.fontSize/i.characterConstant+i.letterSpacing*Math.max(r-1,0)});return Math.max.apply(Math,Bl(n))}(t,e),o=n?Kl(i,r,n):i,a=n?Kl(r,i,n):r;return{width:o*Wl,height:a*ql}},convertLengthToPixels:Jl},tc=n(86),ec=n.n(tc),nc=n(66),rc=n.n(nc),ic=n(158),oc=n.n(ic),ac=n(159),sc=n.n(ac);function uc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function lc(t){if(t.orientation){return{top:"x",bottom:"x",left:"y",right:"y"}[t.orientation]}return t.dependentAxis?"y":"x"}function cc(t,e){e=e||_r.a;var n=function(t){return t.reduce(function(t,r){return r.type&&"axis"===r.type.role&&e(r)?t.concat(r):r.props&&r.props.children?t.concat(n(s.a.Children.toArray(r.props.children))):t},[])};return n(t)}function fc(t){return{top:!1,bottom:!1,left:!0,right:!0}[t.orientation||(t.dependentAxis?"left":"bottom")]}function pc(t){return void 0!==t.tickValues&&mr.containsStrings(t.tickValues)}function hc(t){var e=t.tickValues,n=t.tickFormat,r=t.stringMap,i=e;r&&(i=function(t){var e=t.stringMap,n=lc(t),r=Array.isArray(t.categories)?t.categories:t.categories&&t.categories[n],i=r&&mr.containsOnlyStrings(r)?r.map(function(t){return e[t]}):void 0,o=e&&ec()(e);return i&&0!==i.length?i:o}(t)),e&&mr.containsStrings(e)&&(i=r?e.map(function(t){return r[t]}):vi()(1,e.length+1));var o=i?Fi()(i):function(){if(n&&Array.isArray(n))return mr.containsStrings(n)?n.map(function(t,e){return e}):n}();return Array.isArray(o)&&o.length?function(e){var n=lc(t),r=t.domain&&t.domain[n]||t.domain;return Array.isArray(r)?e.filter(function(t){return t>=Math.min.apply(Math,uc(r))&&t<=Math.max.apply(Math,uc(r))}):e}(o):void 0}function dc(t,e){if(!e||!Array.isArray(t)||t.length<=e)return t;var n=Math.floor(t.length/e);return t.filter(function(t,e){return e%n==0})}function yc(t,e){var n=t.polar,r=t.startAngle,i=void 0===r?0:r,o=t.endAngle,a=void 0===o?360:o,s=hc(t);if(Array.isArray(s)){var u=Il.getMinFromProps(t,e),l=Il.getMaxFromProps(t,e),c=pc(t),f=s.map(function(t){return+t}),p=c?1:mr.getMinValue(f),h=c?s.length:mr.getMaxValue(f),d=void 0!==u?u:p,y=void 0!==l?l:h,v=Il.getDomainFromMinMax(d,y),g=n&&"x"===e&&360===Math.abs(i-a)?Il.getSymmetricDomain(v,f):v;return fc(t)&&!n&&g.reverse(),g}}var vc={getTicks:function(t,e,n){var r=t.tickCount,i=hc(t);if(i)return dc(i,r);if(e.ticks&&dn()(e.ticks)){var o=r||5,a=e.ticks(o),s=dc(Array.isArray(a)&&a.length?a:e.domain(),r);if(n){var u=Li()(s,0)?Mi()(s,0):s;return u.length?u:s}return s}return e.domain()},getTickFormat:function(t,e){var n=t.tickFormat,r=t.stringMap;if(n)return n&&Array.isArray(n)?function(t,e){return n[e]}:n&&dn()(n)?r?function(e,n,i){var o=sc()(r),a=i.map(function(t){return o[t]});return t.tickFormat(o[e],n,a)}:n:function(t){return t};var i=function(t){var e=t.tickValues,n=t.stringMap,r=e&&!mr.containsDates(e)?function(t){return t}:void 0;if(n){var i=n&&sc()(n),o=Q()(ec()(n),function(t){return t}).map(function(t){return i[t]}),a=[""].concat(uc(o),[""]);return function(t){return a[t]}}return pc(t)?function(t,n){return e[n]}:r}(t),o=e.tickFormat&&dn()(e.tickFormat)?e.tickFormat():function(t){return t};return i||o},getAxis:lc,getAxisComponent:function(t,e){return cc(t,function(t){return t.type.getAxis(t.props)===e})[0]},getAxisComponentsWithParent:function(t,e){var n=function(t){return t.reduce(function(t,r){return r.type&&"axis"===r.type.role&&function(t){return"dependent"===e?t.props.dependentAxis:!t.props.dependentAxis}(r)?t.concat(r):r.props&&r.props.children&&n(s.a.Children.toArray(r.props.children)).length>0?t.concat(r):t},[])};return n(t)},getOrientation:function(t,e,n){if(t&&t.props&&t.props.orientation)return t.props.orientation;var r=n||"positive",i={positive:{x:"bottom",y:"left"},negative:{x:"top",y:"right"}};if(!t)return i[r][e];var o=t.props.dependentAxis;return!o&&"y"===e||o&&"x"===e?{positive:{x:"left",y:"bottom"},negative:{x:"right",y:"top"}}[r][e]:i[r][e]},getCurrentAxis:function(t,e){return e?"x"===t?"y":"x":t},findAxisComponents:cc,getOrigin:function(t){var e=function(t){var e=Math.min.apply(Math,uc(t)),n=Math.max.apply(Math,uc(t));return n<0?n:Math.max(0,e)};return{x:mr.containsDates(t.x)?new Date(Math.min.apply(Math,uc(t.x))):e(t.x),y:mr.containsDates(t.y)?new Date(Math.min.apply(Math,uc(t.y))):e(t.y)}},getOriginSign:function(t,e){return mr.containsDates(e)?"positive":t<=0&&Math.max.apply(Math,uc(e))<=0?"negative":"positive"},getDomain:function(t,e){var n=lc(t);if(!e||e===n)return Il.createDomainFunction(yc)(t,n)},isVertical:fc,stringTicks:pc};function gc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var mc={getData:function(t,e){return t.data?vl.getData(t):(e=e||s.a.Children.toArray(t.children),this.getDataFromChildren(e))},getDefaultDomainPadding:function(t,e,n){var r=n.some(function(t){return t.props&&t.props.horizontal}),i=t&&t.horizontal||r,o=n.filter(function(t){return t.type&&t.type.role&&"group"===t.type.role});if(!(o.length<1)){var a=o[0].props,s=a.offset,u=a.children;return(i?{y:s*u.length/2}:{x:s*u.length/2})[e]}},getDomain:function(t,e,n){n=n||s.a.Children.toArray(t.children);var r,i=Il.getDomainFromProps(t,e),o=Il.getMinFromProps(t,e),a=Il.getMaxFromProps(t,e),u=t.polar?0:this.getDefaultDomainPadding(t,e,n);if(i)r=i;else{var l=(t.data||t.y)&&vl.getData(t),c=l?Il.getDomainFromData(t,e,l):[],f=this.getDomainFromChildren(t,e,n),p=o||mr.getMinValue(gc(c).concat(gc(f))),h=a||mr.getMaxValue(gc(c).concat(gc(f)));r=Il.getDomainFromMinMax(p,h)}return Il.formatDomain(r,cn()({domainPadding:u},t),e)},setAnimationState:function(t,e){if(t.animate)if(t.animate.parentState){var n=t.animate.parentState.nodesWillExit?t:null;this.setState(un()({oldProps:n,nextProps:e},t.animate.parentState))}else{var r=s.a.Children.toArray(t.children),i=s.a.Children.toArray(e.children),o=function(t){var e=function(t){return t.type&&t.type.continuous};return Array.isArray(t)?oc()(t,e):e(t)},a=!t.polar&&oc()(r,function(t){return o(t)||t.props.children&&o(t.props.children)}),u=Sr.getInitialTransitionState(r,i),l=u.nodesWillExit,c=u.nodesWillEnter,f=u.childrenTransitions,p=u.nodesShouldEnter;this.setState({nodesWillExit:l,nodesWillEnter:c,nodesShouldEnter:p,childrenTransitions:mr.isArrayOfArrays(f)?f[0]:f,oldProps:l?t:null,nextProps:e,continuous:a})}},getAllEvents:function(t){var e;return this.componentEvents=Vi.getComponentEvents(t,["groupComponent","containerComponent","labelComponent"]),Array.isArray(this.componentEvents)?Array.isArray(t.events)?(e=this.componentEvents).concat.apply(e,gc(t.events)):this.componentEvents:t.events},getAnimationProps:function(t,e,n){var r=this;if(!t.animate)return e.props.animate;var i=t.animate&&t.animate.getTransitions,o=function(){var t=r.state&&r.state.childrenTransitions;return t=mr.isArrayOfArrays(t)?t[n]:t,un()({childrenTransitions:t},r.state)}(),a=t.animate&&t.animate.parentState||o;if(!i){var s=Sr.getTransitionPropsFactory(t,o,function(t){return r.setState(t)});i=function(t){return s(t,n)}}return un()({getTransitions:i,parentState:a},t.animate,e.props.animate)},getDomainFromChildren:function(t,e,n){var r=n?n.slice(0):s.a.Children.toArray(t.children),i=n.some(function(t){return t.props&&t.props.horizontal}),o=t&&t.horizontal||i.length>0,a=vc.getCurrentAxis(e,o),u=t.data?vl.getData(t,e):void 0,l={polar:t.polar,startAngle:t.startAngle,endAngle:t.endAngle,categories:t.categories,minDomain:t.minDomain,maxDomain:t.maxDomain},c=u?cn()(l,{data:u}):l,f=Ln.reduceChildren(r,function(t){var e=cn()({},t.props,c);return Il.isDomainComponent(t)?t.type&&dn()(t.type.getDomain)?t.props&&t.type.getDomain(e,a):Il.getDomain(e,a):null},t);return[0===f.length?0:mr.getMinValue(f),0===f.length?1:mr.getMaxValue(f)]},getDataFromChildren:function(t,e){var n={polar:t.polar,startAngle:t.startAngle,endAngle:t.endAngle,categories:t.categories,minDomain:t.minDomain,maxDomain:t.maxDomain},r=0,i=e?e.slice(0):s.a.Children.toArray(t.children),o=i.filter(function(t){return t.type&&"stack"===t.type.role}).length,a=Ln.reduceChildren(i,function(t,e,i){var o,a=cn()({},t.props,n);return vl.isDataComponent(t)?(o=t.type&&dn()(t.type.getData)?(t=i?s.a.cloneElement(t,i.props):t).type.getData(a):vl.getData(a),r+=1,o.map(function(t){return cn()({stack:r},t)})):null},t),u=o?"eventKey":"stack";return ec()(rc()(a,u))},getColor:function(t,e,n){var r=t.style,i=t.colorScale,o=t.color;if(r&&r.data&&r.data.fill)return r.data.fill;if(i=e.props&&e.props.colorScale?e.props.colorScale:i,o=e.props&&e.props.color?e.props.color:o,i||o){var a=Array.isArray(i)?i:tr.getColorScale(i);return o||a[n%a.length]}},getWidth:function(t){var e=t.datasets,n=t.scale,r=t.horizontal?n.y.range():n.x.range(),i=Math.abs(r[1]-r[0]),o=Array.isArray(e[0])?e[0].length:1,a=e.length*o+2;return{width:Math.round(.5*i/a)}},getStyle:function(t,e,n){var r=t&&t[n]&&t[n].style?t[n].style:{};return Ln.getStyles(e,r)},getChildStyle:function(t,e,n){var r=n.style,i=n.role,o=t.props.style||{};if(Array.isArray(o))return o;var a=t.type&&t.type.role,s="stack"===a?void 0:this.getColor(n,t,e),u="line"===a?{fill:"none",stroke:s}:{fill:s},l="stack"===i?{}:this.getWidth(n),c=un()({},o.data,cn()({},l,r.data,u)),f=un()({},o.labels,r.labels);return{parent:r.parent,data:c,labels:f}},getStringsFromCategories:function(t,e){return Ln.reduceChildren(t.slice(0),function(t){var n=t.props||{};if(Il.isDomainComponent(t)&&n.categories){var r=n.categories&&!Array.isArray(n.categories)?n.categories[e]:n.rops.categories,i=r&&r.filter(function(t){return"string"==typeof t});return i?mr.removeUndefined(i):[]}return null})},getStringsFromData:function(t,e){return Ln.reduceChildren(t.slice(0),function(t){var n,r=t.props||{};if(!vl.isDataComponent(t))return null;n=t.type&&dn()(t.type.getData)?t.type.getData(r):vl.getData(r);var i="x"===e?"xName":"yName";return n.map(function(t){return t[i]}).filter(Boolean)})},getStringsFromChildren:function(t,e,n){var r=Ln.getCurrentAxis(e,t.horizontal);n=n||s.a.Children.toArray(t.children);var i=tt()(t.categories)?t.categories[e]:t.categories,o=vc.getAxisComponent(n,r),a=o?vl.getStringsFromAxes(o.props,e):[],u=i||this.getStringsFromCategories(n,e),l=this.getStringsFromData(n,e);return Fi()(xl()(gc(u).concat(gc(l),gc(a))))},getCategories:function(t,e){var n=(t.categories&&!Array.isArray(t.categories)?t.categories[e]:t.categories)||this.getStringsFromChildren(t,e);return n.length>0?n:void 0}},bc=n(241),_c=n.n(bc);function xc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function wc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ec(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Oc=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Ec(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).state=n.state||{},n.getScopedEvents=Vi.getScopedEvents.bind(Ec(n)),n.getEventState=Vi.getEventState.bind(Ec(n)),n.getTimer=n.getTimer.bind(Ec(n)),n.baseProps=n.getBaseProps(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&wc(t.prototype,e),n&&wc(t,n)}(e,[{key:"getChildContext",value:function(){return{getTimer:this.getTimer}}},{key:"componentWillReceiveProps",value:function(t){this.baseProps=this.getBaseProps(t);var e=this.getExternalMutations(t,this.baseProps);this.applyExternalMutations(t,e)}},{key:"getTimer",value:function(){return this.context.getTimer?this.context.getTimer():(this.timer||(this.timer=new Je),this.timer)}},{key:"getAllEvents",value:function(t){var e=Vi.getComponentEvents(t,["container","groupComponent"]);return Array.isArray(e)?Array.isArray(t.events)?e.concat.apply(e,xc(t.events)):e:t.events}},{key:"applyExternalMutations",value:function(t,e){if(!Vn()(e)){var n=t.externalEventMutations.reduce(function(t,e){return t=dn()(e.callback)?t.concat(e.callback):t},[]),r=n.length?function(){n.forEach(function(t){return t()})}:void 0;this.setState(e,r)}}},{key:"getExternalMutations",value:function(t,e){return Vn()(t.externalEventMutations)?void 0:Vi.getExternalMutationsWithChildren(t.externalEventMutations,e,this.state,Object.keys(e))}},{key:"getBaseProps",value:function(t){var e=t.container,n=s.a.Children.toArray(this.props.children),r=this.getBasePropsFromChildren(n),i=e?e.props:{};return cn()({},r,{parent:i})}},{key:"getBasePropsFromChildren",value:function(t){var e=Ln.reduceChildren(t,function(t,e,n){if(t.type&&dn()(t.type.getBaseProps)){var r=(t=n?s.a.cloneElement(t,n.props):t).props&&t.type.getBaseProps(t.props);return r?[[e,r]]:null}return null});return _c()(e)}},{key:"getNewChildren",value:function(t,e){var n=this,r=t.events,i=t.eventKey,o=function(t,a){return t.reduce(function(t,u,l){if(u.props.children){var c=s.a.Children.toArray(u.props.children),f=a.slice(l,l+c.length),p=s.a.cloneElement(u,u.props,o(c,f));return t.concat(p)}if(u.type&&dn()(u.type.getBaseProps)){var h=u.props.name||a[l],d={events:Array.isArray(r)&&r.filter(function(t){return"parent"!==t.target&&(Array.isArray(t.childName)?t.childName.indexOf(h)>-1:t.childName===h||"all"===t.childName)}),getEvents:function(t,r){return n.getScopedEvents(t,r,h,e)},getEventState:function(t,e){return n.getEventState(t,e,h)}};return t.concat(s.a.cloneElement(u,cn()({key:"events-".concat(h),sharedEvents:d,eventKey:i,name:h},u.props)))}return t.concat(u)},[])},a=Object.keys(e),u=s.a.Children.toArray(t.children);return o(u,a)}},{key:"getContainer",value:function(t,e,n){var r=this,i=this.getNewChildren(t,e),o=Array.isArray(n)&&n.filter(function(t){return"parent"===t.target}),a=o.length>0?{events:o,getEvents:function(t,n){return r.getScopedEvents(t,n,null,e)},getEventState:this.getEventState}:null,u=t.container||t.groupComponent,l=u.type&&u.type.role,c=u.props||{},f=Vi.getEvents.bind(this),p=a&&f({sharedEvents:a},"parent"),h=un()({},this.getEventState("parent","parent"),c,e.parent,{children:i}),d=un()({},Vi.getPartialEvents(p,"parent",h),c.events);return"container"===l?s.a.cloneElement(u,cn()({},h,{events:d})):s.a.cloneElement(u,d,i)}},{key:"render",value:function(){var t=this.getAllEvents(this.props);return t?this.getContainer(this.props,this.baseProps,t):s.a.cloneElement(this.props.container,{children:this.props.children})}}]),e}();function Sc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(Oc,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictorySharedEvents"}),Object.defineProperty(Oc,"role",{configurable:!0,enumerable:!0,writable:!0,value:"shared-event-wrapper"}),Object.defineProperty(Oc,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),container:l.a.node,eventKey:l.a.oneOfType([l.a.array,l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),events:l.a.arrayOf(l.a.shape({childName:l.a.oneOfType([l.a.string,l.a.array]),eventHandlers:l.a.object,eventKey:l.a.oneOfType([l.a.array,l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),target:l.a.string})),externalEventMutations:l.a.arrayOf(l.a.shape({callback:l.a.function,childName:l.a.oneOfType([l.a.string,l.a.array]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),mutation:l.a.function,target:l.a.oneOfType([l.a.string,l.a.array])})),groupComponent:l.a.node}}),Object.defineProperty(Oc,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{groupComponent:s.a.createElement("g",null)}}),Object.defineProperty(Oc,"contextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{getTimer:l.a.func}}),Object.defineProperty(Oc,"childContextTypes",{configurable:!0,enumerable:!0,writable:!0,value:{getTimer:l.a.func}});var Cc={top:-1,left:-1,right:1,bottom:1},Tc=function(t,e,n){return t&&Object.keys(t).some(function(e){return dn()(t[e])})?Object.keys(t).reduce(function(r,i){return r[i]=function(t,e,n){return dn()(t)?t(e,n):t}(t[i],e,n),r},{}):t},kc=function(t){var e=vc.getAxis(t),n=el.getBaseScale(t,e),r=vc.getDomain(t)||n.domain();return n.range(Ln.getRange(t,e)),n.domain(r),n},Ac=function(t,e){var n=t.style||{};e=e||{};return{parent:un()(n.parent,e.parent,{height:"100%",width:"100%"}),axis:un()({},n.axis,e.axis),axisLabel:un()({},n.axisLabel,e.axisLabel),grid:un()({},n.grid,e.grid),ticks:un()({},n.ticks,e.ticks),tickLabels:un()({},n.tickLabels,e.tickLabels)}},Mc=function(t,e,n){return"axis"!==n&&(t.theme[n]=function(t,e){var n=t.theme.axis||{};return un()({},t.theme[e],n)}(t,n)),Ln.modifyProps(t,e,n)},jc=function(t,e){var n=function(t,e){var n=e.style,r=e.padding,i=e.isVertical,o=e.orientation,a=e.labelPadding,s=e.stringTicks,u=e.ticks,l="right"===o?r.right:r.left,c="top"===o?r.top:r.bottom,f=n.axisLabel.fontSize||14,p=null!==t.offsetX&&void 0!==t.offsetX?t.offsetX:l,h=null!==t.offsetY&&void 0!==t.offsetY?t.offsetY:c,d=u.map(function(e){var r=s?t.tickValues[e-1]:e;return Tc(n.ticks,r).size||0}),y=f+2*Math.max.apply(Math,Pc(d))+a,v=1.2*f;return{x:null!==p&&void 0!==p?p:i?y:v,y:null!==h&&void 0!==h?h:i?v:y}}(t,e);return{globalTransform:function(t,e,n){var r=e.orientation;return{top:{x:0,y:n.y},bottom:{x:0,y:t.height-n.y},left:{x:n.x,y:0},right:{x:t.width-n.x,y:0}}[r]}(t,e,n),gridOffset:function(t,e,n){var r=e.padding,i=e.orientation,o="right"===i?r.right:r.left,a="top"===i?r.top:r.bottom;return{x:t.crossAxis?n.x-o:0,y:t.crossAxis?n.y-a:0}}(t,e,n),gridEdge:function(t,e){var n=e.orientation,r=e.padding,i=e.isVertical,o=-Cc[n];return{x:i?o*(t.width-(r.left+r.right)):0,y:i?0:o*(t.height-(r.top+r.bottom))}}(t,e)}},Rc=function(t){var e=function(t){var e=t.theme,n=t.dependentAxis,r=e&&e.axis&&e.axis.style,i=n?"dependentAxis":"independentAxis",o=e&&e[i]&&e[i].style;return r&&o?["axis","axisLabel","grid","parent","tickLabels","ticks"].reduce(function(t,e){return t[e]=un()({},o[e],r[e]),t},{}):o||r}(t),n=Ac(t,e),r=Ln.getPadding(t),i=t.orientation||(t.dependentAxis?"left":"bottom"),o=vc.isVertical(t),a=function(t,e){var n=e.axisLabel||{};if(void 0!==n.padding&&null!==n.padding)return n.padding;var r=vc.isVertical(t),i=n.fontSize||14;return t.label?i*(r?2.3:1.6):0}(t,n),s=vc.stringTicks(t)?t.tickValues:void 0,u=vc.getAxis(t),l=kc(t),c=vc.getDomain(t),f=vc.getTicks(t,l,t.crossAxis),p=vc.getTickFormat(t,l);return{axis:u,style:n,padding:r,orientation:i,isVertical:o,labelPadding:a,stringTicks:s,anchors:function(t,e){var n={top:"end",left:"end",right:"start",bottom:"start"}[t];return{textAnchor:e?n:"middle",verticalAnchor:e?"middle":n}}(i,o),scale:l,ticks:f,tickFormat:p,domain:c}},Ic=function(t,e){var n=function(t){return t.dependentAxis?t.theme&&t.theme.dependentAxis?"dependentAxis":"axis":t.theme&&t.theme.independentAxis?"independentAxis":"axis"}(t);t=Mc(t,e,n);var r=Rc(t),i=r.axis,o=r.style,a=r.orientation,s=r.isVertical,u=r.scale,l=r.ticks,c=r.tickFormat,f=r.anchors,p=r.domain,h=r.stringTicks,d=r.name,y="x"===i?"y":"x",v=t,g=v.width,m=v.height,b=v.standalone,_=v.theme,x=v.polar,w=v.padding,E=jc(t,r),O=E.globalTransform,S=E.gridOffset,P=E.gridEdge,C={scale:Sc({},i,u),polar:x},T=function(t,e,n){var r=e.style,i=e.padding,o=e.isVertical,a=t.width,s=t.height;return{type:"axis",style:r.axis,x1:o?n.x:i.left+n.x,x2:o?n.x:a-i.right+n.x,y1:o?i.top+n.y:n.y,y2:o?s-i.bottom+n.y:n.y}}(t,r,O),k=function(t,e,n){var r=e.style,i=e.orientation,o=e.padding,a=e.labelPadding,s=e.isVertical,u=Cc[i],l=o.left+o.right,c=o.top+o.bottom,f=u<0?"end":"start",p=r.axisLabel,h=s?-90:0;return{x:s?n.x+u*a:(t.width-l)/2+o.left+n.x,y:s?(t.height-c)/2+o.top+n.y:u*a+n.y,verticalAnchor:p.verticalAnchor||f,textAnchor:p.textAnchor||"middle",angle:void 0===p.angle?h:p.angle,style:p,text:t.label}}(t,r,O),A={parent:cn()({style:o.parent,ticks:l,standalone:b,theme:_,width:g,height:m,padding:w,domain:p,name:d},C)},M={dimension:y,range:Sc({},y,Ln.getRange(t,y)),scale:t.scale&&t.scale[y]?Sc({},y,t.scale[y]):void 0};return l.reduce(function(t,e,n){var r=h?h[n]:e,p=function(t,e,n){return{tickStyle:Tc(t.ticks,e,n),labelStyle:Tc(t.tickLabels,e,n),gridStyle:Tc(t.grid,e,n)}}(o,r,n),d={position:function(t,e,n){var r=t.tickStyle,i=t.labelStyle,o=r.size||0,a=o+(r.padding||0)+(i.padding||0),s=Cc[e];return{x:n?s*a:0,x2:n?s*o:0,y:n?0:s*a,y2:n?0:s*o}}(p,a,s),transform:function(t,e,n){return{x:n?e.x:t+e.x,y:n?t+e.y:e.y}}(u(e),O,s)},y={edge:P,transform:{x:s?-S.x+O.x:u(e)+O.x,y:s?u(e)+O.y:S.y+O.y}};return t[n]={axis:cn()({dimension:i},C,T),axisLabel:cn()({},C,k),ticks:cn()({},C,function(t,e,n){var r=t.position,i=t.transform;return{x1:i.x,y1:i.y,x2:i.x+r.x2,y2:i.y+r.y2,style:e,datum:n}}(d,p.tickStyle,e)),tickLabels:cn()({},C,function(t,e,n,r,i){var o=t.position,a=t.transform;return{style:e,x:a.x+o.x,y:a.y+o.y,verticalAnchor:n.verticalAnchor,textAnchor:n.textAnchor,angle:e.angle,text:i,datum:r}}(d,p.labelStyle,f,e,c(e,n,l))),grid:cn()({},C,M,function(t,e,n){var r=t.edge,i=t.transform;return{type:"grid",x1:i.x,y1:i.y,x2:r.x+i.x,y2:r.y+i.y,style:e,datum:n}}(y,p.gridStyle,e))},t},A)};function Lc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nc(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Bc={width:450,height:300,padding:50},zc=["style","domain","range","tickCount","tickValues","offsetX","offsetY","padding","width","height"],Uc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Nc(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Fc(t.prototype,e),n&&Fc(t,n)}(e,[{key:"renderLine",value:function(t){var e=t.axisComponent,n=this.getComponentProps(e,"axis",0);return s.a.cloneElement(e,n)}},{key:"renderLabel",value:function(t){var e=t.axisLabelComponent;if(!t.label)return null;var n=this.getComponentProps(e,"axisLabel",0);return s.a.cloneElement(e,n)}},{key:"renderGridAndTicks",value:function(t){var e=this,n=t.tickComponent,r=t.tickLabelComponent,i=t.gridComponent,o=t.name;return this.dataKeys.map(function(a,u){var l=e.getComponentProps(n,"ticks",u),c=s.a.cloneElement(n,l),f=e.getComponentProps(i,"grid",u),p=s.a.cloneElement(i,f),h=e.getComponentProps(r,"tickLabels",u),d=s.a.cloneElement(r,h);return s.a.cloneElement(t.groupComponent,{key:"".concat(o,"-tick-group-").concat(a)},p,c,d)})}},{key:"fixLabelOverlap",value:function(t,e){var n=vc.isVertical(e),r=n?e.height:e.width,i=function(t){return t.type&&"label"===t.type.role},o=t.map(function(t){return t.props.children}).reduce(function(t,e){return t.concat(e)}).filter(i).map(function(t){return t.props}).reduce(function(t,e){var r=function(t){return"object"==typeof t?cn()({},{top:0,right:0,bottom:0,left:0},t):{top:t,right:t,bottom:t,left:t}}(e.style.padding),i=$l.approximateTextSize(e.text,{angle:e.angle,fontSize:e.style.fontSize,letterSpacing:e.style.letterSpacing,fontFamily:e.style.fontFamily});return t+(n?i.height+r.top+r.bottom:i.width+r.right+r.left)},0),a=Math.floor(r*t.length/o),s=Math.ceil(t.length/a)||1,u=function(t){return t.props.children.filter(i).reduce(function(t,e){return(n?e.props.y:e.props.x)||0},0)};return t.sort(function(t,e){return n?u(e)-u(t):u(t)-u(e)}).filter(function(t,e){return e%s==0})}},{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=Ln.modifyProps(this.props,Bc,"axis");if(this.shouldAnimate())return this.animateComponent(t,zc);var e=this.renderGridAndTicks(t),n=t.fixLabelOverlap?this.fixLabelOverlap(e,t):e,r=[this.renderLine(t),this.renderLabel(t)].concat(Dc(n));return t.standalone?this.renderContainer(t.containerComponent,r):s.a.cloneElement(t.groupComponent,{},r)}}]),e}();Object.defineProperty(Uc,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryAxis"}),Object.defineProperty(Uc,"role",{configurable:!0,enumerable:!0,writable:!0,value:"axis"}),Object.defineProperty(Uc,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:{onExit:{duration:500},onEnter:{duration:500}}}),Object.defineProperty(Uc,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Lc(t,e,n[e])})}return t}({},ni.baseProps,{axisComponent:l.a.element,axisLabelComponent:l.a.element,categories:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.shape({x:l.a.arrayOf(l.a.string),y:l.a.arrayOf(l.a.string)})]),crossAxis:l.a.bool,dependentAxis:l.a.bool,events:l.a.arrayOf(l.a.shape({target:l.a.oneOf(["axis","axisLabel","grid","ticks","tickLabels"]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),eventHandlers:l.a.object})),fixLabelOverlap:l.a.bool,gridComponent:l.a.element,groupComponent:l.a.element,invertAxis:l.a.bool,label:l.a.any,offsetX:l.a.number,offsetY:l.a.number,orientation:l.a.oneOf(["top","bottom","left","right"]),origin:l.a.shape({x:l.a.number,y:l.a.number}),stringMap:l.a.object,style:l.a.shape({parent:l.a.object,axis:l.a.object,axisLabel:l.a.object,grid:l.a.object,ticks:l.a.object,tickLabels:l.a.object}),tickComponent:l.a.element,tickCount:xn.allOfType([xn.integer,xn.greaterThanZero]),tickFormat:l.a.oneOfType([l.a.func,xn.homogeneousArray]),tickLabelComponent:l.a.element,tickValues:xn.homogeneousArray})}),Object.defineProperty(Uc,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{axisComponent:s.a.createElement(di,{type:"axis"}),axisLabelComponent:s.a.createElement(dr,null),tickLabelComponent:s.a.createElement(dr,null),tickComponent:s.a.createElement(di,{type:"tick"}),gridComponent:s.a.createElement(di,{type:"grid"}),scale:"linear",standalone:!0,theme:ti.grayscale,containerComponent:s.a.createElement(zn,null),groupComponent:s.a.createElement("g",{role:"presentation"}),fixLabelOverlap:!1}}),Object.defineProperty(Uc,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:vc.getDomain}),Object.defineProperty(Uc,"getAxis",{configurable:!0,enumerable:!0,writable:!0,value:vc.getAxis}),Object.defineProperty(Uc,"getScale",{configurable:!0,enumerable:!0,writable:!0,value:kc}),Object.defineProperty(Uc,"getStyles",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Ac(t,Bc.style)}}),Object.defineProperty(Uc,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Ic(t,Bc)}}),Object.defineProperty(Uc,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["axisComponent","axisLabelComponent","groupComponent","containerComponent","tickComponent","tickLabelComponent","gridComponent"]});var Vc=Xi(Uc,{components:[{name:"axis",index:0},{name:"axisLabel",index:0},{name:"grid"},{name:"parent",index:"parent"},{name:"ticks"},{name:"tickLabels"}]});function Gc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qc(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Hc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qc(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Wc(t.prototype,e),n&&Wc(t,n)}(e,[{key:"getStyle",value:function(t){var e=t.style,n=t.datum,r=t.active;return Ln.evaluateStyle(cn()({stroke:"black",fill:"none"},e),n,r)}},{key:"getArcPath",value:function(t){var e=t.cx,n=t.cy,r=t.r,i=t.startAngle,o=t.endAngle,a=t.closedPath,s=Math.abs(o-i)/2+i,u=e+r*Math.cos(Ln.degreesToRadians(i)),l=n-r*Math.sin(Ln.degreesToRadians(i)),c=e+r*Math.cos(Ln.degreesToRadians(s)),f=n-r*Math.sin(Ln.degreesToRadians(s)),p=e+r*Math.cos(Ln.degreesToRadians(o)),h=n-r*Math.sin(Ln.degreesToRadians(o)),d=s-i<=180?0:1,y=o-s<=180?0:1,v=a?" M ".concat(e,", ").concat(n," L ").concat(u,", ").concat(l):"M ".concat(u,", ").concat(l),g="A ".concat(r,", ").concat(r,", 0, ").concat(d,", 0, ").concat(c,", ").concat(f),m="A ".concat(r,", ").concat(r,", 0, ").concat(y,", 0, ").concat(p,", ").concat(h),b=a?"Z":"";return"".concat(v," ").concat(g," ").concat(m," ").concat(b)}},{key:"render",value:function(){var t=this.props,e=t.role,n=t.shapeRendering,r=t.className,i=t.events,o=t.pathComponent,a=t.transform,u=t.clipPath;return s.a.cloneElement(o,{d:this.getArcPath(this.props),style:this.getStyle(this.props),className:r,role:e,shapeRendering:n,events:i,transform:a,clipPath:u})}}]),e}();Object.defineProperty(Hc,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Gc(t,e,n[e])})}return t}({},ni.primitiveProps,{closedPath:l.a.bool,cx:l.a.number,cy:l.a.number,datum:l.a.any,endAngle:l.a.number,pathComponent:l.a.element,r:l.a.number,startAngle:l.a.number})}),Object.defineProperty(Hc,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{pathComponent:s.a.createElement(xi,null)}});var Xc=n(240),Zc=n.n(Xc),Yc=function(t,e,n){return"x"===n?t*Math.cos(e):-t*Math.sin(e)},Kc=function(t){var e=t.dependentAxis?"radial":"angular",n="angular"===e?"radial":"angular";return t.horizontal?n:e},Jc=function(t,e,n){return t&&Object.keys(t).some(function(e){return dn()(t[e])})?Object.keys(t).reduce(function(r,i){return r[i]=function(t,e,n){return dn()(t)?t(e,n):t}(t[i],e,n),r},{}):t},Qc=function(t,e,n){return{tickStyle:Jc(t.ticks,e,n),labelStyle:Jc(t.tickLabels,e,n),gridStyle:Jc(t.grid,e,n)}},$c=function(t){var e=Ln.getPadding(t),n=e.left,r=e.right,i=e.top,o=e.bottom,a=t.width,s=t.height;return Math.min(a-n-r,s-i-o)/2},tf=function(t,e){if(t.range&&t.range[e])return t.range[e];if(t.range&&Array.isArray(t.range))return t.range;if("angular"===Kc(t))return[Ln.degreesToRadians(t.startAngle),Ln.degreesToRadians(t.endAngle)];var n=$c(t);return[t.innerRadius||0,n]},ef=function(t){var e=vc.getAxis(t),n=el.getBaseScale(t,e),r=vc.getDomain(t,e)||n.domain(),i=tf(t,e);return n.range(i),n.domain(r),n},nf=function(t,e){var n=t.style||{};e=e||{};return{parent:un()({height:"auto",width:"100%"},n.parent,e.parent),axis:un()({},n.axis,e.axis),axisLabel:un()({},n.axisLabel,e.axisLabel),grid:un()({},n.grid,e.grid),ticks:un()({},n.ticks,e.ticks),tickLabels:un()({},n.tickLabels,e.tickLabels)}},rf=function(t){var e=t.axisAngle,n=t.startAngle,r=t.axisValue,i=t.dependentAxis,o=t.scale,a="y"===vc.getAxis(t)?"x":"y";return void 0!==r&&i&&void 0!==o[a]?Ln.radiansToDegrees(o.x(r)):void 0===e?n:e},of=function(t,e,n){return"axis"!==n&&(t.theme[n]=function(t,e){var n=t.theme.axis||{};return un()({},t.theme[e],n)}(t,n)),Ln.modifyProps(t,e,n)},af=function(t){var e=function(t){var e=t.theme,n=t.dependentAxis,r=e&&e.axis&&e.axis.style,i=n?"dependentAxis":"independentAxis",o=e&&e[i]&&e[i].style;return r&&o?["axis","axisLabel","grid","parent","tickLabels","ticks"].reduce(function(t,e){return t[e]=un()({},o[e],r[e]),t},{}):o||r}(t=cn()({polar:!0},t)),n=nf(t,e),r=Ln.getPadding(t),i=vc.getAxis(t),o=Kc(t),a=vc.stringTicks(t)?t.tickValues:void 0,s=vc.getDomain(t,i),u=tf(t,i),l=ef(t),c=vc.getTicks(t,l);return{axis:i,style:n,padding:r,stringTicks:a,axisType:o,scale:l,ticks:"angular"===o?function(t,e){return Zc()(t,function(t){return e(t)%(2*Math.PI)})}(c,l):c,tickFormat:vc.getTickFormat(t,l),domain:s,range:u,radius:$c(t)}},sf=function(t,e){var n=function(t){return t.dependentAxis?t.theme&&t.theme.dependentAxis?"dependentAxis":"axis":t.theme&&t.theme.independentAxis?"independentAxis":"axis"}(t);t=of(t,e,n);var r=af(t),i=r.style,o=r.scale,a=r.ticks,s=r.domain,u=t,l=u.width,c=u.height,f=u.standalone,p=u.theme,h=u.name,d=function(t,e){var n=e.style,r=e.axisType,i=e.radius,o=(e.scale,t.startAngle),a=t.endAngle,s=t.innerRadius,u=void 0===s?0:s,l="radial"===r?Ln.degreesToRadians(rf(t)):void 0;return"radial"===r?{style:n.axis,x1:Yc(u,l,"x"),x2:Yc(i,l,"x"),y1:Yc(u,l,"y"),y2:Yc(i,l,"y")}:{style:n.axis,cx:0,cy:0,r:i,startAngle:o,endAngle:a}}(t,r),y=function(t,e){var n=e.axisType,r=e.radius,i=e.style,o=(e.scale,t.axisLabelComponent);if("radial"!==n)return{};var a=o.props&&o.props.labelPlacement?o.props.labelPlacement:t.labelPlacement,s=i&&i.axisLabel||{},u="radial"===n?rf(t):void 0,l=void 0===s.angle?Qn.getPolarAngle(cn()({},t,{labelPlacement:a}),u):s.angle,c=r+(s.padding||0);return{style:s,angle:l,textAnchor:s.textAnchor||Qn.getTextPolarAnchor(cn()({},t,{labelPlacement:a}),u),verticalAnchor:s.verticalAnchor||Qn.getPolarVerticalAnchor(cn()({},t,{labelPlacement:a}),u),text:t.label,x:Yc(c,Ln.degreesToRadians(u),"x"),y:Yc(c,Ln.degreesToRadians(u),"y")}}(t,r),v={parent:{style:i.parent,ticks:a,scale:o,width:l,height:c,domain:s,standalone:f,theme:p,name:h}};return a.reduce(function(e,n,i){return e[i]={axis:d,axisLabel:y,ticks:function(t,e,n,r){var i=e.axisType,o=e.radius,a=e.scale,s=e.style,u=e.stringTicks,l=u?u[r]:n,c=Qc(s,l,r).tickStyle,f=c.padding||0,p=f,h="radial"===i?rf(t):void 0;return"angular"===i?{index:r,datum:n,style:c,x1:o*Math.cos(a(n)),y1:-o*Math.sin(a(n)),x2:(o+f)*Math.cos(a(n)),y2:-(o+f)*Math.sin(a(n))}:{style:s,index:r,datum:n,x1:a(n)/2*Math.cos(h-p),x2:a(n)/2*Math.cos(h+p),y1:-a(n)/2*Math.sin(h-p),y2:-a(n)/2*Math.sin(h+p)}}(t,r,n,i),tickLabels:function(t,e,n,r){var i=e.axisType,o=e.radius,a=e.tickFormat,s=e.style,u=e.scale,l=e.ticks,c=e.stringTicks,f=c?c[r]:n,p=Qc(s,f,r).labelStyle,h=t.tickLabelComponent,d=h.props&&h.props.labelPlacement?h.props.labelPlacement:t.labelPlacement,y=p.padding||0,v="radial"===i?rf(t):void 0,g="angular"===i?Ln.radiansToDegrees(u(n)):v+0,m=void 0===p.angle?Qn.getPolarAngle(cn()({},t,{labelPlacement:d}),g):p.angle,b="angular"===i?o+y:u(n);return{index:r,datum:n,style:p,angle:m,textAnchor:p.textAnchor||Qn.getPolarTextAnchor(cn()({},t,{labelPlacement:d}),g),text:a(n,r,l),x:b*Math.cos(Ln.degreesToRadians(g)),y:-b*Math.sin(Ln.degreesToRadians(g))}}(t,r,n,i),grid:function(t,e,n,r){var i=e.axisType,o=e.radius,a=e.style,s=e.scale,u=e.stringTicks,l=t.startAngle,c=t.endAngle,f=t.innerRadius,p=void 0===f?0:f,h=u?u[r]:n,d=Qc(a,h,r).gridStyle,y=s(n);return"angular"===i?{index:r,datum:n,style:d,x1:Yc(o,y,"x"),y1:Yc(o,y,"y"),x2:Yc(p,y,"x"),y2:Yc(p,y,"y")}:{style:d,index:r,datum:n,cx:0,cy:0,r:s(n),startAngle:l,endAngle:c}}(t,r,n,i)},e},v)};function uf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lf(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function cf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ff(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var pf={width:450,height:300,padding:50},hf=["style","domain","range","tickCount","tickValues","padding","width","height"],df=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ff(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&cf(t.prototype,e),n&&cf(t,n)}(e,[{key:"renderAxisLine",value:function(t){var e=t.dependentAxis?t.axisComponent:t.circularAxisComponent,n=this.getComponentProps(e,"axis",0);return s.a.cloneElement(e,n)}},{key:"renderLabel",value:function(t){var e=t.axisLabelComponent,n=t.dependentAxis;if(!t.label||!n)return null;var r=this.getComponentProps(e,"axisLabel",0);return s.a.cloneElement(e,r)}},{key:"renderAxis",value:function(t){var e=this,n=t.tickComponent,r=t.tickLabelComponent,i=t.name,o="radial"===(t.dependentAxis?"radial":"angular")?t.circularGridComponent:t.gridComponent,a=this.dataKeys.map(function(t,r){var o=cn()({key:"".concat(i,"-tick-").concat(t)},e.getComponentProps(n,"ticks",r));return s.a.cloneElement(n,o)}),u=this.dataKeys.map(function(t,n){var r=cn()({key:"".concat(i,"-grid-").concat(t)},e.getComponentProps(o,"grid",n));return s.a.cloneElement(o,r)}),l=this.dataKeys.map(function(t,n){var o=cn()({key:"".concat(i,"-tick-").concat(t)},e.getComponentProps(r,"tickLabels",n));return s.a.cloneElement(r,o)}),c=[this.renderAxisLine(t),this.renderLabel(t)].concat(lf(a),lf(u),lf(l));return this.renderGroup(t,c)}},{key:"renderGroup",value:function(t,e){var n=t.groupComponent,r=n.props||{},i=Ln.getPolarOrigin(t),o=r.transform||"translate(".concat(i.x,", ").concat(i.y,")");return s.a.cloneElement(n,{transform:o},e)}},{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=Ln.modifyProps(this.props,pf,"axis");if(this.shouldAnimate())return this.animateComponent(t,hf);var e=this.renderAxis(t);return t.standalone?this.renderContainer(t.containerComponent,e):e}}]),e}();Object.defineProperty(df,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryAxis"}),Object.defineProperty(df,"role",{configurable:!0,enumerable:!0,writable:!0,value:"axis"}),Object.defineProperty(df,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:{onExit:{duration:500},onEnter:{duration:500}}}),Object.defineProperty(df,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){uf(t,e,n[e])})}return t}({},ni.baseProps,{axisAngle:l.a.number,axisComponent:l.a.element,axisLabelComponent:l.a.element,axisValue:l.a.number,categories:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.shape({x:l.a.arrayOf(l.a.string),y:l.a.arrayOf(l.a.string)})]),circularAxisComponent:l.a.element,circularGridComponent:l.a.element,containerComponent:l.a.element,dependentAxis:l.a.bool,endAngle:l.a.number,events:l.a.arrayOf(l.a.shape({target:l.a.oneOf(["axis","axisLabel","grid","ticks","tickLabels"]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),eventHandlers:l.a.object})),gridComponent:l.a.element,innerRadius:xn.nonNegative,labelPlacement:l.a.oneOf(["parallel","perpendicular","vertical"]),startAngle:l.a.number,stringMap:l.a.object,style:l.a.shape({parent:l.a.object,axis:l.a.object,axisLabel:l.a.object,grid:l.a.object,ticks:l.a.object,tickLabels:l.a.object}),tickComponent:l.a.element,tickCount:xn.allOfType([xn.integer,xn.greaterThanZero]),tickFormat:l.a.oneOfType([l.a.func,xn.homogeneousArray]),tickLabelComponent:l.a.element,tickValues:xn.homogeneousArray})}),Object.defineProperty(df,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{axisComponent:s.a.createElement(di,{type:"axis"}),axisLabelComponent:s.a.createElement(dr,null),circularAxisComponent:s.a.createElement(Hc,{type:"axis"}),circularGridComponent:s.a.createElement(Hc,{type:"grid"}),containerComponent:s.a.createElement(zn,null),endAngle:360,gridComponent:s.a.createElement(di,{type:"grid"}),groupComponent:s.a.createElement("g",{role:"presentation"}),labelPlacement:"parallel",scale:"linear",startAngle:0,standalone:!0,theme:ti.grayscale,tickComponent:s.a.createElement(di,{type:"tick"}),tickLabelComponent:s.a.createElement(dr,null)}}),Object.defineProperty(df,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:vc.getDomain}),Object.defineProperty(df,"getAxis",{configurable:!0,enumerable:!0,writable:!0,value:vc.getAxis}),Object.defineProperty(df,"getScale",{configurable:!0,enumerable:!0,writable:!0,value:ef}),Object.defineProperty(df,"getStyles",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return nf(t,pf.style)}}),Object.defineProperty(df,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return sf(t,pf)}}),Object.defineProperty(df,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["axisComponent","circularAxisComponent","groupComponent","containerComponent","tickComponent","tickLabelComponent","gridComponent","circularGridComponent"]});var yf=Xi(df,{components:[{name:"axis",index:0},{name:"axisLabel",index:0},{name:"grid"},{name:"parent",index:"parent"},{name:"ticks"},{name:"tickLabels"}]});function vf(t,e,n){var r=vc.findAxisComponents([t]);return r.length>0?function(t,e,n){var r=n.domain,i=n.scale,o=n.originSign,a=n.stringMap,s=n.categories,u=n.horizontal,l=t.props||{},c=t.type.getAxis(l),f=vc.getCurrentAxis(c,u),p="x"===c?"y":"x",h=xf(e,n),d="y"===c?void 0:h.y,y="x"===c?void 0:h.x,v=!1!==l.crossAxis,g=vc.getOrientation(t,c,o[p]);return{stringMap:a[f],categories:s[f],startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,domain:r,scale:i,offsetY:void 0!==l.offsetY?l.offsetY:d,offsetX:void 0!==l.offsetX?l.offsetX:y,crossAxis:v,orientation:g}}(r[0],e,n):{categories:n.categories,domain:n.domain,range:n.range,scale:n.scale}}function gf(t,e){var n=function(t){var e=t.style&&t.style.parent;return{parent:un()({},e,{height:"100%",width:"100%",userSelect:"none"})}}(t),r=Ln.isHorizontal(t),i={x:mc.getCategories(t,"x",e),y:mc.getCategories(t,"y",e)},o={x:wf(t,"x",e),y:wf(t,"y",e)},a={x:vc.getAxisComponent(e,"x"),y:vc.getAxisComponent(e,"y")},s={x:_f(cn()({},t,{categories:i}),"x",e),y:_f(cn()({},t,{categories:i}),"y",e)},u={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},l={x:el.getScaleFromProps(t,"x")||a.x&&a.x.type.getScale(a.x.props)||el.getDefaultScale(),y:el.getScaleFromProps(t,"y")||a.y&&a.y.type.getScale(a.y.props)||el.getDefaultScale()},c={x:l.x.domain(s.x).range(u.x),y:l.y.domain(s.y).range(u.y)},f=t.polar?Ln.getPolarOrigin(t):vc.getOrigin(s);return{axisComponents:a,categories:i,domain:s,range:u,horizontal:r,scale:c,stringMap:o,style:n,origin:f,originSign:{x:vc.getOriginSign(f.x,s.x),y:vc.getOriginSign(f.y,s.y)},defaultDomainPadding:bf(e,r),padding:Ln.getPadding(t)}}var mf=function(t,e){var n=s.a.Children.toArray(t.children);if(0===n.length)return[e.independent,e.dependent];var r=vc.getAxisComponentsWithParent(n,"dependent"),i=vc.getAxisComponentsWithParent(n,"independent");if(0===r.length&&0===i.length)return n.concat([e.independent,e.dependent]);var o=0;return n.filter(function(t){var e=t.type&&t.type.role,n=t.props||{};if("axis"!==e||n.dependentAxis)return!0;if(o<1)return o++,!0;return yn.warn("Only one independent VictoryAxis component is allowed when using the VictoryChart wrapper. Only the first axis will be used. Please compose multi-axis charts manually"),!1})},bf=function(t,e){var n=t.filter(function(t){return t.type&&t.type.role&&"group"===t.type.role});if(!(n.length<1)){var r=n[0].props,i=r.offset,o=r.children;return e?{y:i*o.length/2}:{x:i*o.length/2}}},_f=function(t,e,n){n=n||s.a.Children.toArray(t.children);var r=mc.getDomain(t,e,n),i=vc.getAxisComponent(n,e);return i&&i.props&&i.props.invertAxis?r.concat().reverse():r},xf=function(t,e){var n=e.axisComponents,r=e.scale,i=e.origin,o=e.domain,a=e.originSign,s=e.padding,u=s.top,l=s.bottom,c=s.left,f=s.right,p=vc.getOrientation(n.x,"x",a.y),h=vc.getOrientation(n.y,"y",a.x),d={y:"bottom"===p?l:u,x:"left"===h?c:f},y="left"===h?0:t.width,v="bottom"===p?t.height:0,g=i.x===o.x[0]||i.x===o.x[1]?0:r.x(i.x),m=i.y===o.y[0]||i.y===o.y[1]?0:r.y(i.y),b={x:g?Math.abs(y-g):d.x,y:m?Math.abs(v-m):d.y};return{x:n.x&&void 0!==n.x.offsetX?n.x.offsetX:b.x,y:n.y&&void 0!==n.y.offsetY?n.y.offsetY:b.y}},wf=function(t,e,n){var r=mc.getStringsFromChildren(t,e,n);return 0===r.length?null:r.reduce(function(t,e,n){return t[e]=n+1,t},{})};function Ef(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Of(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Pf={width:450,height:300,padding:50},Cf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Sf(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).state={},t.animate&&(n.state={nodesShouldLoad:!1,nodesDoneLoad:!1,animating:!0}),n.setAnimationState=mc.setAnimationState.bind(Sf(n)),n.events=mc.getAllEvents(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Of(t.prototype,e),n&&Of(t,n)}(e,[{key:"componentWillMount",value:function(){this.events=mc.getAllEvents(this.props)}},{key:"componentWillReceiveProps",value:function(t){this.props.animate&&this.setAnimationState(this.props,t),this.events=mc.getAllEvents(t)}},{key:"getNewChildren",value:function(t,e,n){var r=function(t,e,n){e=e||mf(t);var r=(n=n||gf(t,e)).style.parent,i=t.height,o=t.polar,a=t.theme,u=t.width,l=n,c=l.origin,f=l.horizontal,p=t.name||"chart";return e.map(function(e,l){var h=e.type&&e.type.role,d=Array.isArray(e.props.style)?e.props.style:un()({},e.props.style,{parent:r}),y=vf(e,t,n),v=e.props.name||"".concat(p,"-").concat(h,"-").concat(l),g=un()({horizontal:f,height:i,polar:o,theme:a,width:u,style:d,name:v,origin:o?c:void 0,padding:n.padding,key:"".concat(v,"-key-").concat(l),standalone:!1},y);return s.a.cloneElement(e,g)})}(t,e,n),i=mc.getAnimationProps.bind(this);return r.map(function(e,n){var r=cn()({animate:i(t,e,n)},e.props);return s.a.cloneElement(e,r)})}},{key:"renderContainer",value:function(t,e){var n=un()({},t.props,e);return s.a.cloneElement(t,n)}},{key:"getContainerProps",value:function(t,e){var n=t.width,r=t.height,i=t.standalone,o=t.theme,a=t.polar,s=t.name,u=e.domain,l=e.scale,c=e.style,f=e.origin,p=e.radius,h=e.horizontal;return{domain:u,scale:l,width:n,height:r,standalone:i,theme:o,style:c.parent,horizontal:h,name:s,polar:a,radius:p,origin:a?f:void 0}}},{key:"render",value:function(){var t=this.state&&this.state.nodesWillExit&&this.state.oldProps||this.props,e=Ln.modifyProps(t,Pf,"chart"),n=e.eventKey,r=e.containerComponent,i=e.groupComponent,o=e.standalone,a=e.externalEventMutations,u=t.polar?e.defaultPolarAxes:e.defaultAxes,l=mf(e,u),c=gf(e,l),f=this.getNewChildren(e,l,c),p=o?this.getContainerProps(e,c):{},h=o?this.renderContainer(r,p):i;return this.events?s.a.createElement(Oc,{container:h,eventKey:n,events:this.events,externalEventMutations:a},f):s.a.cloneElement(h,h.props,f)}}]),e}();function Tf(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(Cf,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryChart"}),Object.defineProperty(Cf,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Ef(t,e,n[e])})}return t}({},ni.baseProps,{children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),defaultAxes:l.a.shape({independent:l.a.element,dependent:l.a.element}),defaultPolarAxes:l.a.shape({independent:l.a.element,dependent:l.a.element}),endAngle:l.a.number,innerRadius:xn.nonNegative,startAngle:l.a.number})}),Object.defineProperty(Cf,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),defaultAxes:{independent:s.a.createElement(Vc,null),dependent:s.a.createElement(Vc,{dependentAxis:!0})},defaultPolarAxes:{independent:s.a.createElement(yf,null),dependent:s.a.createElement(yf,{dependentAxis:!0})},groupComponent:s.a.createElement("g",null),standalone:!0,theme:ti.grayscale}}),Object.defineProperty(Cf,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["groupComponent","containerComponent"]});var kf={width:450,height:300,padding:50,offset:0};function Af(t,e){var n=mc.getStyle(t.theme,t.style,"group"),r=Ln.modifyProps(t,kf),i=r.offset,o=r.colorScale,a=r.color,s=r.polar,u=r.horizontal||e.every(function(t){return t.props&&t.props.horizontal}),l={x:mc.getCategories(r,"x"),y:mc.getCategories(r,"y")},c=mc.getDataFromChildren(r),f={x:mc.getDomain(cn()({},r,{categories:l}),"x",e),y:mc.getDomain(cn()({},r,{categories:l}),"y",e)},p={x:Ln.getRange(r,"x"),y:Ln.getRange(r,"y")},h={x:el.getScaleFromProps(r,"x")||el.getDefaultScale(),y:el.getScaleFromProps(r,"y")||el.getDefaultScale()},d=h.x.domain(f.x).range(p.x),y=h.y.domain(f.y).range(p.y);return{datasets:c,categories:l,range:p,domain:f,horizontal:u,scale:{x:u?y:d,y:u?d:y},style:n,colorScale:o,color:a,offset:i,origin:s?t.origin:Ln.getPolarOrigin(r),padding:Ln.getPadding(t)}}function Mf(t,e,n){return(n-(e.datasets.length-1)/2)*function(t,e,n){if(!t.offset)return 0;var r=s.a.Children.toArray(t.children).some(function(t){return t.props.horizontal}),i=t&&t.horizontal||r.length>0,o=Ln.getCurrentAxis(e,i),a=n.domain[o],u=n.range[o];return(Math.max.apply(Math,Tf(a))-Math.min.apply(Math,Tf(a)))/(Math.max.apply(Math,Tf(u))-Math.min.apply(Math,Tf(u)))*t.offset}(t,"x",e)}function jf(t,e,n){return(n-(e.datasets.length-1)/2)*function(t,e){var n=e.range,r=Math.abs(n.x[1]-n.x[0]),i=Math.max.apply(Math,Tf(n.y));return t.offset/(2*Math.PI*i)*r}(t,e)}function Rf(t,e,n){t=Ln.modifyProps(t,kf,"stack"),e=e||s.a.Children.toArray(t.children);var r=(n=n||Af(t,e)).datasets,i=t,o=i.labelComponent,a=i.polar,u=function(t,e){var n=e.categories,r=e.domain,i=e.range,o=e.scale,a=e.horizontal,s=e.origin,u=e.padding,l=t.width;return{height:t.height,width:l,theme:t.theme,polar:t.polar,origin:s,categories:n,domain:r,range:i,scale:o,horizontal:a,padding:u,standalone:!1}}(t,n),l=t.name||"group";return e.map(function(e,i){var c=e.type&&e.type.role,f=a?jf(t,n,i):Mf(t,n,i),p="voronoi"===c||"tooltip"===c||"label"===c?e.props.style:mc.getChildStyle(e,i,n),h=t.labels?function(t,e,n){if(t.labels)return Math.floor(e.length/2)===n?t.labels:void 0}(t,r,i):e.props.labels,d=e.props.name||"".concat(l,"-").concat(c,"-").concat(i);return s.a.cloneElement(e,cn()({labels:h,style:p,key:"".concat(d,"-key-").concat(i),name:d,data:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=t.data||t.y?vl.getData(t):e,i=n||0;return r.map(function(t){var e=t._x instanceof Date?new Date(t._x.getTime()+i):t._x+i;return cn()({},t,{_x1:e})})}(t,r[i],f),colorScale:function(t,e){var n=e.type&&e.type.role,r=e.props.colorScale||t.colorScale;if("group"===n||"stack"===n)return t.theme&&t.theme.group?r||t.theme.group.colorScale:r}(t,e),labelComponent:o||e.props.labelComponent,xOffset:"stack"===c?f:void 0},u))})}function If(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Df(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ff={width:450,height:300,padding:50,offset:0},Nf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Df(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),t.animate&&(n.state={nodesShouldLoad:!1,nodesDoneLoad:!1,animating:!0},n.setAnimationState=mc.setAnimationState.bind(Df(n)),n.events=mc.getAllEvents(t)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Lf(t.prototype,e),n&&Lf(t,n)}(e,[{key:"componentWillMount",value:function(){this.events=mc.getAllEvents(this.props)}},{key:"componentWillReceiveProps",value:function(t){this.props.animate&&this.setAnimationState(this.props,t),this.events=mc.getAllEvents(t)}},{key:"getNewChildren",value:function(t,e,n){var r=Rf(t,e,n),i=mc.getAnimationProps.bind(this);return r.map(function(e,n){var r=cn()({animate:i(t,e,n)},e.props);return s.a.cloneElement(e,r)})}},{key:"renderContainer",value:function(t,e){var n=un()({},t.props,e);return s.a.cloneElement(t,n)}},{key:"getContainerProps",value:function(t,e){var n=t.width,r=t.height,i=t.standalone,o=t.theme,a=t.polar,s=t.horizontal,u=t.name,l=e.domain,c=e.scale,f=e.style,p=e.origin;return{domain:l,scale:c,width:n,height:r,standalone:i,theme:o,style:f.parent,horizontal:s,polar:a,origin:p,name:u}}},{key:"render",value:function(){var t=this.constructor.role,e=this.state&&this.state.nodesWillExit&&this.state.oldProps||this.props,n=Ln.modifyProps(e,Ff,t),r=n.eventKey,i=n.containerComponent,o=n.standalone,a=n.groupComponent,u=n.externalEventMutations,l=s.a.Children.toArray(n.children),c=Af(n,l),f=this.getNewChildren(n,l,c),p=o?this.getContainerProps(n,c):{},h=o?this.renderContainer(i,p):a;return this.events?s.a.createElement(Oc,{container:h,eventKey:r,events:this.events,externalEventMutations:u},f):s.a.cloneElement(h,h.props,f)}}]),e}();Object.defineProperty(Nf,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryGroup"}),Object.defineProperty(Nf,"role",{configurable:!0,enumerable:!0,writable:!0,value:"group"}),Object.defineProperty(Nf,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){If(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),color:l.a.oneOfType([l.a.string,l.a.func]),colorScale:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.oneOf(["grayscale","qualitative","heatmap","warm","cool","red","green","blue"])]),horizontal:l.a.bool,offset:l.a.number})}),Object.defineProperty(Nf,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),groupComponent:s.a.createElement("g",null),samples:50,scale:"linear",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(Nf,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["groupComponent","containerComponent","labelComponent"]}),Object.defineProperty(Nf,"getChildren",{configurable:!0,enumerable:!0,writable:!0,value:Rf});var Bf={width:450,height:300,padding:50};function zf(t,e,n){var r=t.xOffset||0;return e[n].map(function(t){var i=function(t,e,n){if(t.y0)return t.y0;var r=t._y,i=n.slice(0,e).reduce(function(e,n){return e.concat(n.filter(function(e){return t._x instanceof Date?e._x.getTime()===t._x.getTime():e._x===t._x}).map(function(t){return t._y||0}))},[]),o=i.length&&i.reduce(function(t,e){return r<0&&e<0||r>=0&&e>=0?+e+t:t},0);return i.some(function(t){return t instanceof Date})?new Date(o):o}(t,n,e)||0;return cn()({},t,{_y0:t._y instanceof Date?i?new Date(i):t._y:i,_y1:null===t._y?null:t._y instanceof Date?new Date(+t._y+ +i):t._y+i,_x1:null===t._x?null:t._x instanceof Date?new Date(+t._x+ +r):t._x+r})})}function Uf(t){var e=mc.getDataFromChildren(t),n=function(t,e){var n=t.fillInMissingData,r=e.reduce(function(t,e){return e.forEach(function(e){t[e._x instanceof Date?e._x.getTime():e._x]=!0}),t},{}),i=Ri()(r).map(function(t){return+t}),o=Q()(i);return e.map(function(t){var e=0,r=t[0]&&t[0]._x instanceof Date;return o.map(function(i,o){i=+i;var a=t[o-e];if(a){if((r?a._x.getTime():a._x)===i)return a;e++;var s=n?0:null;return{x:i=r?new Date(i):i,y:s,_x:i,_y:s}}var u=n?0:null;return{x:i=r?new Date(i):i,y:u,_x:i,_y:u}})})}(t,e);return n.map(function(e,r){return zf(t,n,r)})}function Vf(t,e){e=e||s.a.Children.toArray(t.children);var n=mc.getStyle(t.theme,t.style,"stack"),r=t.horizontal||e.every(function(t){return t.props.horizontal}),i={x:mc.getCategories(t,"x"),y:mc.getCategories(t,"y")},o=Uf(t),a=e.map(function(t,e){return s.a.cloneElement(t,{data:o[e]})}),u={x:mc.getDomain(cn()({},t,{categories:i}),"x",a),y:mc.getDomain(cn()({},t,{categories:i}),"y",a)},l={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},c={x:el.getScaleFromProps(t,"x")||el.getDefaultScale(),y:el.getScaleFromProps(t,"y")||el.getDefaultScale()},f=c.x.domain(u.x).range(l.x),p=c.y.domain(u.y).range(l.y),h={x:r?p:f,y:r?f:p},d=t.colorScale;return{datasets:o,categories:i,range:l,domain:u,horizontal:r,scale:h,style:n,colorScale:d,role:"stack"}}function Gf(t,e,n){t=Ln.modifyProps(t,Bf,"stack"),e=e||s.a.Children.toArray(t.children);var r=(n=n||Vf(t,e)).datasets,i=function(t,e){var n=e.categories,r=e.domain,i=e.range,o=e.scale,a=e.horizontal;return{height:t.height,width:t.width,padding:Ln.getPadding(t),standalone:!1,theme:t.theme,categories:n,domain:r,range:i,scale:o,horizontal:a}}(t,n),o=t.name||"stack";return e.map(function(e,a){var u=e.type&&e.type.role,l=r[a],c=mc.getChildStyle(e,a,n),f=t.labels?function(t,e,n){if(t.labels)return e.length===n+1?t.labels:void 0}(t,r,a):e.props.labels,p=e.props.name||"".concat(o,"-").concat(u,"-").concat(a);return s.a.cloneElement(e,cn()({key:"".concat(p,"-key-").concat(a),labels:f,name:p,domainPadding:e.props.domainPadding||t.domainPadding,theme:t.theme,labelComponent:t.labelComponent||e.props.labelComponent,style:c,colorScale:function(t,e){var n=e.type&&e.type.role,r=e.props.colorScale||t.colorScale;if("group"===n||"stack"===n)return t.theme?r||t.theme.props.colorScale:r}(t,e),data:l,polar:t.polar},i))})}function Wf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Xf={width:450,height:300,padding:50},Zf=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Hf(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),t.animate&&(n.state={nodesShouldLoad:!1,nodesDoneLoad:!1,animating:!0},n.setAnimationState=mc.setAnimationState.bind(Hf(n)),n.events=mc.getAllEvents(t)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&qf(t.prototype,e),n&&qf(t,n)}(e,[{key:"componentWillMount",value:function(){this.events=mc.getAllEvents(this.props)}},{key:"componentWillReceiveProps",value:function(t){this.props.animate&&this.setAnimationState(this.props,t),this.events=mc.getAllEvents(t)}},{key:"getNewChildren",value:function(t,e,n){var r=Gf(t,e,n),i=mc.getAnimationProps.bind(this);return r.map(function(e,n){var r=cn()({animate:i(t,e,n)},e.props);return s.a.cloneElement(e,r)})}},{key:"renderContainer",value:function(t,e){var n=un()({},t.props,e);return s.a.cloneElement(t,n)}},{key:"getContainerProps",value:function(t,e){var n=t.width,r=t.height,i=t.standalone,o=t.theme,a=t.polar,s=t.horizontal,u=t.name,l=e.domain,c=e.scale,f=e.style,p=e.origin;return{domain:l,scale:c,width:n,height:r,standalone:i,theme:o,style:f.parent,horizontal:s,polar:a,origin:p,name:u}}},{key:"render",value:function(){var t=this.constructor.role,e=this.state&&this.state.nodesWillExit&&this.state.oldProps||this.props,n=Ln.modifyProps(e,Xf,t),r=n.eventKey,i=n.containerComponent,o=n.standalone,a=n.groupComponent,u=n.externalEventMutations,l=s.a.Children.toArray(n.children),c=Vf(n,l),f=this.getNewChildren(n,l,c),p=o?this.getContainerProps(n,c):{},h=o?this.renderContainer(i,p):a;return this.events?s.a.createElement(Oc,{container:h,eventKey:r,events:this.events,externalEventMutations:u},f):s.a.cloneElement(h,h.props,f)}}]),e}();function Yf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jf(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(Zf,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryStack"}),Object.defineProperty(Zf,"role",{configurable:!0,enumerable:!0,writable:!0,value:"stack"}),Object.defineProperty(Zf,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Wf(t,e,n[e])})}return t}({},ni.baseProps,{categories:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.shape({x:l.a.arrayOf(l.a.string),y:l.a.arrayOf(l.a.string)})]),children:l.a.oneOfType([l.a.arrayOf(l.a.node),l.a.node]),colorScale:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.oneOf(["grayscale","qualitative","heatmap","warm","cool","red","green","blue"])]),fillInMissingData:l.a.bool,horizontal:l.a.bool,labelComponent:l.a.element,labels:l.a.oneOfType([l.a.func,l.a.array]),style:l.a.shape({parent:l.a.object,data:l.a.object,labels:l.a.object}),xOffset:l.a.number})}),Object.defineProperty(Zf,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),groupComponent:s.a.createElement("g",null),scale:"linear",standalone:!0,theme:ti.grayscale,fillInMissingData:!0}}),Object.defineProperty(Zf,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["groupComponent","containerComponent","labelComponent"]}),Object.defineProperty(Zf,"getChildren",{configurable:!0,enumerable:!0,writable:!0,value:Gf});var Qf=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Jf(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Kf(t.prototype,e),n&&Kf(t,n)}(e,[{key:"render",value:function(){var t=this.props,e=t.datum,n=t.slice,r=t.active,i=t.role,o=t.shapeRendering,a=t.className,u=t.origin,l=t.events,c=t.pathComponent,f=t.pathFunction,p=t.style,h=t.clipPath,d=u?"translate(".concat(u.x,", ").concat(u.y,")"):void 0,y=this.props.transform||d;return s.a.cloneElement(c,{className:a,role:i,shapeRendering:o,events:l,transform:y,clipPath:h,style:Ln.evaluateStyle(p,e,r),d:dn()(f)?f(n):void 0})}}]),e}();Object.defineProperty(Qf,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Yf(t,e,n[e])})}return t}({},ni.primitiveProps,{datum:l.a.object,pathComponent:l.a.element,pathFunction:l.a.func,slice:l.a.object})}),Object.defineProperty(Qf,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{pathComponent:s.a.createElement(xi,null)}});var $f=Math.PI,tp=2*$f,ep=tp-1e-6;function np(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function rp(){return new np}np.prototype=rp.prototype={constructor:np,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var p=n-o,h=r-a,d=s*s+u*u,y=p*p+h*h,v=Math.sqrt(d),g=Math.sqrt(f),m=i*Math.tan(($f-Math.acos((d+f-y)/(2*v*g)))/2),b=m/g,_=m/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*l)+","+(e+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*p>l*h)+","+(this._x1=t+_*s)+","+(this._y1=e+_*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%tp+tp),f>ep?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=$f)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ip=rp,op=function(t){return function(){return t}},ap=Math.abs,sp=Math.atan2,up=Math.cos,lp=Math.max,cp=Math.min,fp=Math.sin,pp=Math.sqrt,hp=1e-12,dp=Math.PI,yp=dp/2,vp=2*dp;function gp(t){return t>=1?yp:t<=-1?-yp:Math.asin(t)}function mp(t){return t.innerRadius}function bp(t){return t.outerRadius}function _p(t){return t.startAngle}function xp(t){return t.endAngle}function wp(t){return t&&t.padAngle}function Ep(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/pp(s*s+u*u),c=l*u,f=-l*s,p=t+c,h=e+f,d=n+c,y=r+f,v=(p+d)/2,g=(h+y)/2,m=d-p,b=y-h,_=m*m+b*b,x=i-o,w=p*y-d*h,E=(b<0?-1:1)*pp(lp(0,x*x*_-w*w)),O=(w*b-m*E)/_,S=(-w*m-b*E)/_,P=(w*b+m*E)/_,C=(-w*m+b*E)/_,T=O-v,k=S-g,A=P-v,M=C-g;return T*T+k*k>A*A+M*M&&(O=P,S=C),{cx:O,cy:S,x01:-c,y01:-f,x11:O*(i/x-1),y11:S*(i/x-1)}}var Op=function(){var t=mp,e=bp,n=op(0),r=null,i=_p,o=xp,a=wp,s=null;function u(){var u,l,c=+t.apply(this,arguments),f=+e.apply(this,arguments),p=i.apply(this,arguments)-yp,h=o.apply(this,arguments)-yp,d=ap(h-p),y=h>p;if(s||(s=u=ip()),f<c&&(l=f,f=c,c=l),f>hp)if(d>vp-hp)s.moveTo(f*up(p),f*fp(p)),s.arc(0,0,f,p,h,!y),c>hp&&(s.moveTo(c*up(h),c*fp(h)),s.arc(0,0,c,h,p,y));else{var v,g,m=p,b=h,_=p,x=h,w=d,E=d,O=a.apply(this,arguments)/2,S=O>hp&&(r?+r.apply(this,arguments):pp(c*c+f*f)),P=cp(ap(f-c)/2,+n.apply(this,arguments)),C=P,T=P;if(S>hp){var k=gp(S/c*fp(O)),A=gp(S/f*fp(O));(w-=2*k)>hp?(_+=k*=y?1:-1,x-=k):(w=0,_=x=(p+h)/2),(E-=2*A)>hp?(m+=A*=y?1:-1,b-=A):(E=0,m=b=(p+h)/2)}var M=f*up(m),j=f*fp(m),R=c*up(x),I=c*fp(x);if(P>hp){var L=f*up(b),D=f*fp(b),F=c*up(_),N=c*fp(_);if(d<dp){var B=w>hp?function(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,f=s-o,p=(c*(e-o)-f*(t-i))/(f*u-c*l);return[t+p*u,e+p*l]}(M,j,F,N,L,D,R,I):[R,I],z=M-B[0],U=j-B[1],V=L-B[0],G=D-B[1],W=1/fp(function(t){return t>1?0:t<-1?dp:Math.acos(t)}((z*V+U*G)/(pp(z*z+U*U)*pp(V*V+G*G)))/2),q=pp(B[0]*B[0]+B[1]*B[1]);C=cp(P,(c-q)/(W-1)),T=cp(P,(f-q)/(W+1))}}E>hp?T>hp?(v=Ep(F,N,M,j,f,T,y),g=Ep(L,D,R,I,f,T,y),s.moveTo(v.cx+v.x01,v.cy+v.y01),T<P?s.arc(v.cx,v.cy,T,sp(v.y01,v.x01),sp(g.y01,g.x01),!y):(s.arc(v.cx,v.cy,T,sp(v.y01,v.x01),sp(v.y11,v.x11),!y),s.arc(0,0,f,sp(v.cy+v.y11,v.cx+v.x11),sp(g.cy+g.y11,g.cx+g.x11),!y),s.arc(g.cx,g.cy,T,sp(g.y11,g.x11),sp(g.y01,g.x01),!y))):(s.moveTo(M,j),s.arc(0,0,f,m,b,!y)):s.moveTo(M,j),c>hp&&w>hp?C>hp?(v=Ep(R,I,L,D,c,-C,y),g=Ep(M,j,F,N,c,-C,y),s.lineTo(v.cx+v.x01,v.cy+v.y01),C<P?s.arc(v.cx,v.cy,C,sp(v.y01,v.x01),sp(g.y01,g.x01),!y):(s.arc(v.cx,v.cy,C,sp(v.y01,v.x01),sp(v.y11,v.x11),!y),s.arc(0,0,c,sp(v.cy+v.y11,v.cx+v.x11),sp(g.cy+g.y11,g.cx+g.x11),y),s.arc(g.cx,g.cy,C,sp(g.y11,g.x11),sp(g.y01,g.x01),!y))):s.arc(0,0,c,x,_,y):s.lineTo(R,I)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-dp/2;return[up(r)*n,fp(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:op(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:op(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:op(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:op(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:op(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:op(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:op(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function Sp(t){this._context=t}Sp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Pp=function(t){return new Sp(t)};function Cp(t){return t[0]}function Tp(t){return t[1]}var kp=function(){var t=Cp,e=Tp,n=op(!0),r=null,i=Pp,o=null;function a(a){var s,u,l,c=a.length,f=!1;for(null==r&&(o=i(l=ip())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(u,s,a),+e(u,s,a));if(l)return o=null,l+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:op(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:op(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:op(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},Ap=function(){var t=Cp,e=null,n=op(0),r=Tp,i=op(!0),o=null,a=Pp,s=null;function u(u){var l,c,f,p,h,d=u.length,y=!1,v=new Array(d),g=new Array(d);for(null==o&&(s=a(h=ip())),l=0;l<=d;++l){if(!(l<d&&i(p=u[l],l,u))===y)if(y=!y)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(v[f],g[f]);s.lineEnd(),s.areaEnd()}y&&(v[l]=+t(p,l,u),g[l]=+n(p,l,u),s.point(e?+e(p,l,u):v[l],r?+r(p,l,u):g[l]))}if(h)return s=null,h+""||null}function l(){return kp().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:op(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:op(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:op(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:op(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:op(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:op(+t),u):r},u.lineX0=u.lineY0=function(){return l().x(t).y(n)},u.lineY1=function(){return l().x(t).y(r)},u.lineX1=function(){return l().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:op(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},Mp=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},jp=function(t){return t},Rp=function(){var t=jp,e=Mp,n=null,r=op(0),i=op(vp),o=op(0);function a(a){var s,u,l,c,f,p=a.length,h=0,d=new Array(p),y=new Array(p),v=+r.apply(this,arguments),g=Math.min(vp,Math.max(-vp,i.apply(this,arguments)-v)),m=Math.min(Math.abs(g)/p,o.apply(this,arguments)),b=m*(g<0?-1:1);for(s=0;s<p;++s)(f=y[d[s]=s]=+t(a[s],s,a))>0&&(h+=f);for(null!=e?d.sort(function(t,n){return e(y[t],y[n])}):null!=n&&d.sort(function(t,e){return n(a[t],a[e])}),s=0,l=h?(g-p*b)/h:0;s<p;++s,v=c)u=d[s],c=v+((f=y[u])>0?f*l:0)+b,y[u]={data:a[u],index:s,value:f,startAngle:v,endAngle:c,padAngle:m};return y}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:op(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:op(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:op(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:op(+t),a):o},a},Ip=Dp(Pp);function Lp(t){this._curve=t}function Dp(t){function e(e){return new Lp(t(e))}return e._curve=t,e}function Fp(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Dp(t)):e()._curve},t}Lp.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Np=function(){return Fp(kp().curve(Ip))},Bp=function(){var t=Ap().curve(Ip),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Fp(n())},delete t.lineX0,t.lineEndAngle=function(){return Fp(r())},delete t.lineX1,t.lineInnerRadius=function(){return Fp(i())},delete t.lineY0,t.lineOuterRadius=function(){return Fp(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Dp(t)):e()._curve},t},zp=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Up=Array.prototype.slice;function Vp(t){return t.source}function Gp(t){return t.target}function Wp(t){var e=Vp,n=Gp,r=Cp,i=Tp,o=null;function a(){var a,s=Up.call(arguments),u=e.apply(this,s),l=n.apply(this,s);if(o||(o=a=ip()),t(o,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=l,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:op(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:op(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function qp(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function Hp(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function Xp(t,e,n,r,i){var o=zp(e,n),a=zp(e,n=(n+i)/2),s=zp(r,n),u=zp(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function Zp(){return Wp(qp)}function Yp(){return Wp(Hp)}function Kp(){var t=Wp(Xp);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var Jp={draw:function(t,e){var n=Math.sqrt(e/dp);t.moveTo(n,0),t.arc(0,0,n,0,vp)}},Qp={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},$p=Math.sqrt(1/3),th=2*$p,eh={draw:function(t,e){var n=Math.sqrt(e/th),r=n*$p;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},nh=Math.sin(dp/10)/Math.sin(7*dp/10),rh=Math.sin(vp/10)*nh,ih=-Math.cos(vp/10)*nh,oh={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=rh*n,i=ih*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=vp*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},ah={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},sh=Math.sqrt(3),uh={draw:function(t,e){var n=-Math.sqrt(e/(3*sh));t.moveTo(0,2*n),t.lineTo(-sh*n,-n),t.lineTo(sh*n,-n),t.closePath()}},lh=Math.sqrt(3)/2,ch=1/Math.sqrt(12),fh=3*(ch/2+1),ph={draw:function(t,e){var n=Math.sqrt(e/fh),r=n/2,i=n*ch,o=r,a=n*ch+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(-.5*r-lh*i,lh*r+-.5*i),t.lineTo(-.5*o-lh*a,lh*o+-.5*a),t.lineTo(-.5*s-lh*u,lh*s+-.5*u),t.lineTo(-.5*r+lh*i,-.5*i-lh*r),t.lineTo(-.5*o+lh*a,-.5*a-lh*o),t.lineTo(-.5*s+lh*u,-.5*u-lh*s),t.closePath()}},hh=[Jp,Qp,eh,ah,oh,uh,ph],dh=function(){var t=op(Jp),e=op(64),n=null;function r(){var r;if(n||(n=r=ip()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:op(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:op(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},yh=function(){};function vh(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gh(t){this._context=t}gh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vh(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var mh=function(t){return new gh(t)};function bh(t){this._context=t}bh.prototype={areaStart:yh,areaEnd:yh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:vh(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var _h=function(t){return new bh(t)};function xh(t){this._context=t}xh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:vh(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var wh=function(t){return new xh(t)};function Eh(t,e){this._basis=new gh(t),this._beta=e}Eh.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Oh=function t(e){function n(t){return 1===e?new gh(t):new Eh(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Sh(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ph(t,e){this._context=t,this._k=(1-e)/6}Ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Sh(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Sh(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ch=function t(e){function n(t){return new Ph(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Th(t,e){this._context=t,this._k=(1-e)/6}Th.prototype={areaStart:yh,areaEnd:yh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Sh(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kh=function t(e){function n(t){return new Th(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ah(t,e){this._context=t,this._k=(1-e)/6}Ah.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Sh(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Mh=function t(e){function n(t){return new Ah(t,e)}return n.tension=function(e){return t(+e)},n}(0);function jh(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>hp){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>hp){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Rh(t,e){this._context=t,this._alpha=e}Rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:jh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ih=function t(e){function n(t){return e?new Rh(t,e):new Ph(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Lh(t,e){this._context=t,this._alpha=e}Lh.prototype={areaStart:yh,areaEnd:yh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:jh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Dh=function t(e){function n(t){return e?new Lh(t,e):new Th(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Fh(t,e){this._context=t,this._alpha=e}Fh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jh(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nh=function t(e){function n(t){return e?new Fh(t,e):new Ah(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Bh(t){this._context=t}Bh.prototype={areaStart:yh,areaEnd:yh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var zh=function(t){return new Bh(t)};function Uh(t){return t<0?-1:1}function Vh(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Uh(o)+Uh(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Gh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Wh(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function qh(t){this._context=t}function Hh(t){this._context=new Xh(t)}function Xh(t){this._context=t}function Zh(t){return new qh(t)}function Yh(t){return new Hh(t)}function Kh(t){this._context=t}function Jh(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wh(this,this._t0,Gh(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Wh(this,Gh(this,n=Vh(this,t,e)),n);break;default:Wh(this,this._t0,n=Vh(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Hh.prototype=Object.create(qh.prototype)).point=function(t,e){qh.prototype.point.call(this,e,t)},Xh.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Jh(t),i=Jh(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Qh=function(t){return new Kh(t)};function $h(t,e){this._context=t,this._t=e}$h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var td=function(t){return new $h(t,.5)};function ed(t){return new $h(t,0)}function nd(t){return new $h(t,1)}var rd=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},id=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function od(t,e){return t[e]}var ad=function(){var t=op([]),e=id,n=rd,r=od;function i(i){var o,a,s=t.apply(this,arguments),u=i.length,l=s.length,c=new Array(l);for(o=0;o<l;++o){for(var f,p=s[o],h=c[o]=new Array(u),d=0;d<u;++d)h[d]=f=[0,+r(i[d],p,d,i)],f.data=i[d];h.key=p}for(o=0,a=e(c);o<l;++o)c[a[o]].index=o;return n(c,a),c}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:op(Up.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:op(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?id:"function"==typeof t?t:op(Up.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?rd:t,i):n},i},sd=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}rd(t,e)}},ud=function(t,e){if((s=t.length)>1)for(var n,r,i,o,a,s,u=0,l=t[e[0]].length;u<l;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},ld=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}rd(t,e)}},cd=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],f=c[a][1]||0,p=(f-(c[a-1][1]||0))/2,h=0;h<s;++h){var d=t[e[h]];p+=(d[a][1]||0)-(d[a-1][1]||0)}u+=f,l+=p*f}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,rd(t,e)}},fd=function(t){var e=t.map(pd);return id(t).sort(function(t,n){return e[t]-e[n]})};function pd(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var hd=function(t){return fd(t).reverse()},dd=function(t){var e,n,r=t.length,i=t.map(pd),o=id(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)},yd=function(t){return id(t).reverse()},vd=function(t){return t*(Math.PI/180)},gd=function(t){var e=t.theme,n=t.colorScale,r=e&&e.pie&&e.pie.style?e.pie.style:{},i=Ln.getStyles(t.style,r,"auto","100%"),o=Array.isArray(n)?n:tr.getColorScale(n),a=Ln.getPadding(t),s=function(t,e){return t.radius?t.radius:Math.min(t.width-e.left-e.right,t.height-e.top-e.bottom)/2}(t,a),u=function(t,e){var n=t.width,r=t.height,i=tt()(t.origin)?t.origin:{};return{x:void 0!==i.x?i.x:(e.left-e.right+n)/2,y:void 0!==i.y?i.y:(e.top-e.bottom+r)/2}}(t,a),l=vl.getData(t);return{style:i,colors:o,padding:a,radius:s,data:l,slices:function(t,e){return Rp().sort(null).startAngle(vd(t.startAngle)).endAngle(vd(t.endAngle)).padAngle(vd(t.padAngle)).value(function(t){return t._y})(e)}(t,l),pathFunction:Op().cornerRadius(t.cornerRadius).outerRadius(s).innerRadius(t.innerRadius),origin:u}},md=function(t,e,n){return function(t){return void 0===t||null===t?t:"".concat(t)}(e.label?e.label:Array.isArray(t.labels)?t.labels[n]:dn()(t.labels)?t.labels(e):e.xName||e._x)},bd=function(t,e,n){var r=e.index,i=e.datum,o=e.data,a=e.slice,s=n.style,u=n.radius,l=n.origin,c=Ln.evaluateStyle(cn()({padding:0},s.labels),i,t.active),f=function(t,e,n){var r={startAngle:"startAngle"===n?e.endAngle:e.startAngle,endAngle:"endAngle"===n?e.startAngle:e.endAngle},i=cn()({},e,r);return t.centroid(i)}(function(t,e,n){var r=n&&n.padding||0,i=e||t+r;return Op().outerRadius(i).innerRadius(i)}(u,Ln.evaluateProp(t.labelRadius,i),c),a,t.labelPosition),p=function(t){var e=function(t){return t*(180/Math.PI)},n=e(t.startAngle),r=n+(e(t.endAngle)-n)/2;return r<45||r>315?"top":r>=45&&r<135?"right":r>=135&&r<225?"bottom":"left"}(a);return{index:r,datum:i,data:o,slice:a,orientation:p,style:c,x:Math.round(f[0])+l.x,y:Math.round(f[1])+l.y,text:md(t,i,r),textAnchor:c.textAnchor||function(t){return"top"===t||"bottom"===t?"middle":"right"===t?"start":"end"}(p),verticalAnchor:c.verticalAnchor||function(t){return"left"===t||"right"===t?"middle":"bottom"===t?"start":"end"}(p),angle:c.angle}},_d=function(t,e){t=Ln.modifyProps(t,e,"pie");var n=gd(t),r=n.slices,i=n.style,o=n.pathFunction,a=n.data,s=n.origin,u=t,l=u.labels,c=u.events,f=u.sharedEvents,p=u.height,h=u.width,d=u.standalone,y=u.name,v={parent:{standalone:d,height:p,width:h,slices:r,pathFunction:o,name:y,style:i.parent}};return r.reduce(function(e,r,i){var u=a[i],p=u.eventKey||i,h={index:i,slice:r,pathFunction:o,datum:u,data:a,origin:s,style:function(t,e){var n=e.style,r=function(t,e,n){return t&&t.data&&t.data.fill?t.data.fill:e&&e[n%e.length]}(n,e.colors,t);return cn()({fill:r},n.data)}(i,n)};e[p]={data:h};var d=md(t,u,i);return(void 0!==d&&null!==d||l&&(c||f))&&(e[p].labels=bd(t,h,n)),e},v)};function xd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wd(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Ed={endAngle:360,height:400,innerRadius:0,cornerRadius:0,padAngle:0,padding:30,width:400,startAngle:0,colorScale:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],labelPosition:"centroid"},Od=["data","endAngle","height","innerRadius","cornerRadius","padAngle","padding","colorScale","startAngle","style","width"],Sd=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wd(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&xd(t.prototype,e),n&&xd(t,n)}(e,[{key:"shouldAnimate",value:function(){return Boolean(this.props.animate)}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,Ed,t);if(this.shouldAnimate())return this.animateComponent(e,Od);var n=this.renderData(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(Sd,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryPie"}),Object.defineProperty(Sd,"role",{configurable:!0,enumerable:!0,writable:!0,value:"pie"}),Object.defineProperty(Sd,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:{onExit:{duration:500,before:function(){return{_y:0,label:" "}}},onEnter:{duration:500,before:function(){return{_y:0,label:" "}},after:function(t){return{y_:t._y,label:t.label}}}}}),Object.defineProperty(Sd,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{animate:l.a.oneOfType([l.a.bool,l.a.object]),colorScale:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.oneOf(["grayscale","qualitative","heatmap","warm","cool","red","green","blue"])]),containerComponent:l.a.element,cornerRadius:xn.nonNegative,data:l.a.array,dataComponent:l.a.element,endAngle:l.a.number,eventKey:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),events:l.a.arrayOf(l.a.shape({target:l.a.oneOf(["data","labels","parent"]),eventKey:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),eventHandlers:l.a.object})),externalEventMutations:l.a.arrayOf(l.a.shape({callback:l.a.function,childName:l.a.oneOfType([l.a.string,l.a.array]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),mutation:l.a.function,target:l.a.oneOfType([l.a.string,l.a.array])})),groupComponent:l.a.element,height:xn.nonNegative,innerRadius:xn.nonNegative,labelComponent:l.a.element,labelPosition:l.a.oneOf(["startAngle","centroid","endAngle"]),labelRadius:l.a.oneOfType([xn.nonNegative,l.a.func]),labels:l.a.oneOfType([l.a.func,l.a.array]),name:l.a.string,origin:l.a.shape({x:xn.nonNegative,y:xn.nonNegative}),padAngle:xn.nonNegative,padding:l.a.oneOfType([l.a.number,l.a.shape({top:l.a.number,bottom:l.a.number,left:l.a.number,right:l.a.number})]),radius:xn.nonNegative,sharedEvents:l.a.shape({events:l.a.array,getEventState:l.a.func}),sortKey:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),sortOrder:l.a.oneOf(["ascending","descending"]),standalone:l.a.bool,startAngle:l.a.number,style:l.a.shape({parent:l.a.object,data:l.a.object,labels:l.a.object}),theme:l.a.object,width:xn.nonNegative,x:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),y:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)])}}),Object.defineProperty(Sd,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{data:[{x:"A",y:1},{x:"B",y:2},{x:"C",y:3},{x:"D",y:1},{x:"E",y:2}],standalone:!0,dataComponent:s.a.createElement(Qf,null),labelComponent:s.a.createElement(dr,null),containerComponent:s.a.createElement(zn,null),groupComponent:s.a.createElement("g",null),sortOrder:"ascending",theme:ti.grayscale}}),Object.defineProperty(Sd,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return _d(t,Ed)}}),Object.defineProperty(Sd,"getData",{configurable:!0,enumerable:!0,writable:!0,value:vl.getData}),Object.defineProperty(Sd,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["dataComponent","labelComponent","groupComponent","containerComponent"]});var Pd=Xi(Sd);function Cd(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Td=function(t){var e=t.theme,n=t.polar,r=e&&e.area&&e.area.style?e.area.style:{},i=Ln.getStyles(t.style,r),o={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},a={x:Il.getDomainWithZero(t,"x"),y:Il.getDomainWithZero(t,"y")},s={x:el.getBaseScale(t,"x").domain(a.x).range(o.x),y:el.getBaseScale(t,"y").domain(a.y).range(o.y)},u=n?t.origin||Ln.getPolarOrigin(t):void 0;return{style:i,data:function(t,e){var n=vl.getData(t);n.length<2&&(n=[]);var r="log"===el.getType(e.y)?1/Number.MAX_SAFE_INTEGER:0,i=e.y.domain(),o=Math.min.apply(Math,Cd(i))>0?Math.min.apply(Math,Cd(i)):r;return n.map(function(t){var e=void 0!==t._y1?t._y1:t._y,n=void 0!==t._y0?t._y0:o;return cn()({},t,{_y0:n,_y1:e})})}(t,s),scale:s,domain:a,origin:u}};function kd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ad(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Md(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var jd=function(t){var e=void 0!==t._y1?t._y1:t._y;return null!==e&&void 0!==e&&null!==t._y0},Rd=function(t){return function(e){return t.x(void 0!==e._x1?e._x1:e._x)}},Id=function(t){return function(e){return t.y(void 0!==e._y1?e._y1:e._y)}},Ld=function(t){return function(e){return t.y(e._y0)}},Dd=function(t){return function(e){return-1*t.x(void 0!==e._x1?e._x1:e._x)+Math.PI/2}},Fd=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Md(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Ad(t.prototype,e),n&&Ad(t,n)}(e,[{key:"getLineFunction",value:function(t){var e=t.polar,n=t.scale,r=this.toNewName(t.interpolation);return e?Np().defined(jd).curve(o["".concat(r,"Closed")]).angle(Dd(n)).radius(Ld(n)):kp().defined(jd).curve(o[r]).x(Rd(n)).y(Id(n))}},{key:"getAreaFunction",value:function(t){var e=t.polar,n=t.scale,r=this.toNewName(t.interpolation);return e?Bp().defined(jd).curve(o["".concat(r,"Closed")]).angle(Dd(n)).outerRadius(Id(n)).innerRadius(Ld(n)):Ap().defined(jd).curve(o[r]).x(Rd(n)).y1(Id(n)).y0(Ld(n))}},{key:"toNewName",value:function(t){return"curve".concat(function(t){return t&&t[0].toUpperCase()+t.slice(1)}(t))}},{key:"render",value:function(){var t=this.props,e=t.role,n=t.shapeRendering,r=t.className,i=t.polar,o=t.origin,a=t.data,u=t.active,l=t.pathComponent,c=t.events,f=t.groupComponent,p=t.clipPath,h=t.id,d=Ln.evaluateStyle(cn()({fill:"black"},this.props.style),a,u),y=i&&o?"translate(".concat(o.x,", ").concat(o.y,")"):void 0,v=this.props.transform||y,g=d.stroke&&"none"!==d.stroke&&"transparent"!==d.stroke,m=this.getAreaFunction(this.props),b=g&&this.getLineFunction(this.props),_=d.stroke?"none":d.fill,x={className:r,role:e,shapeRendering:n,transform:v,events:c,clipPath:p},w=s.a.cloneElement(l,cn()({key:"".concat(h,"-area"),style:cn()({},d,{stroke:_}),d:m(a)},x)),E=g?s.a.cloneElement(l,cn()({key:"".concat(h,"-area-stroke"),style:cn()({},d,{fill:"none"}),d:b(a)},x)):null;return g?s.a.cloneElement(f,{},[w,E]):w}}]),e}();function Nd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zd(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(Fd,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){kd(t,e,n[e])})}return t}({},ni.primitiveProps,{groupComponent:l.a.element,interpolation:l.a.string,pathComponent:l.a.element})}),Object.defineProperty(Fd,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{groupComponent:s.a.createElement("g",null),pathComponent:s.a.createElement(xi,null)}});var Ud={width:450,height:300,padding:50,interpolation:"linear"},Vd=["data","domain","height","padding","style","width"],Gd=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zd(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Bd(t.prototype,e),n&&Bd(t,n)}(e,[{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,Ud,t);if(this.shouldAnimate())return this.animateComponent(e,Vd);var n=this.renderContinuousData(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(Gd,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Nd(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{interpolation:l.a.oneOf(["basis","cardinal","catmullRom","linear","monotoneX","monotoneY","natural","step","stepAfter","stepBefore"]),label:xn.deprecated(l.a.string,"Use `labels` instead for individual data labels")})}),Object.defineProperty(Gd,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),dataComponent:s.a.createElement(Fd,null),groupComponent:s.a.createElement(Wr,null),labelComponent:s.a.createElement(dr,{renderInPortal:!0}),samples:50,scale:"linear",sortKey:"x",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(Gd,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryArea"}),Object.defineProperty(Gd,"role",{configurable:!0,enumerable:!0,writable:!0,value:"area"}),Object.defineProperty(Gd,"continuous",{configurable:!0,enumerable:!0,writable:!0,value:!0}),Object.defineProperty(Gd,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.continuousTransitions()}),Object.defineProperty(Gd,"defaultPolarTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.continuousPolarTransitions()}),Object.defineProperty(Gd,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:Il.getDomainWithZero}),Object.defineProperty(Gd,"getData",{configurable:!0,enumerable:!0,writable:!0,value:vl.getData}),Object.defineProperty(Gd,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return function(t,e){var n=Ln.modifyProps(t,e,"area"),r=t=cn()({},n,Td(n)),i=r.data,o=r.domain,a=r.events,s=r.groupComponent,u=r.height,l=r.interpolation,c=r.origin,f=r.padding,p=r.polar,h=r.scale,d=r.sharedEvents,y=r.standalone,v=r.style,g=r.theme,m=r.width,b=r.labels,_=r.name,x={parent:{style:v.parent,width:m,height:u,scale:h,data:i,domain:o,standalone:y,theme:g,polar:p,origin:c,padding:f,name:_},all:{data:{polar:p,origin:c,scale:h,data:i,interpolation:l,groupComponent:s,style:v.data}}};return i.reduce(function(e,n,r){var i=Qn.getText(t,n,r);return(void 0!==i&&null!==i||b&&(a||d))&&(e[n.eventKey||r]={labels:Qn.getProps(t,r)}),e},x)}(t,Ud)}}),Object.defineProperty(Gd,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["dataComponent","labelComponent","groupComponent","containerComponent"]});var Wd=Xi(Gd,{components:[{name:"parent",index:"parent"},{name:"data",index:"all"},{name:"labels"}]}),qd=function(t,e){var n=Ln.modifyProps(t,e,"bar"),r=t=cn()({},n,function(t){var e=t.theme,n=t.horizontal,r=t.polar,i=e&&e.bar&&e.bar.style?e.bar.style:{},o=Ln.getStyles(t.style,i),a=vl.getData(t),s={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},u={x:Il.getDomainWithZero(t,"x"),y:Il.getDomainWithZero(t,"y")},l=el.getBaseScale(t,"x").domain(u.x).range(s.x),c=el.getBaseScale(t,"y").domain(u.y).range(s.y);return{style:o,data:a,scale:{x:n?c:l,y:n?l:c},domain:u,origin:r?t.origin||Ln.getPolarOrigin(t):void 0}}(n)),i=r.alignment,o=r.barRatio,a=r.cornerRadius,s=r.data,u=r.domain,l=r.events,c=r.height,f=r.horizontal,p=r.origin,h=r.padding,d=r.polar,y=r.scale,v=r.sharedEvents,g=r.standalone,m=r.style,b=r.theme,_=r.width,x=r.labels,w=r.name,E=r.barWidth,O=r.getPath,S={parent:{domain:u,scale:y,width:_,height:c,data:s,standalone:g,name:w,theme:b,polar:d,origin:p,padding:h,style:m.parent}};return s.reduce(function(e,n,r){var u=n.eventKey||r,h=function(t,e){var n=function(n){var r="log"===el.getType(t.scale[n])?1/Number.MAX_SAFE_INTEGER:0;return e["_".concat(n)]instanceof Date?new Date(r):r},r=void 0!==e._y0?e._y0:n("y"),i=void 0!==e._x0?e._x0:n("x");return Ln.scalePoint(t,cn()({},e,{_y0:r,_x0:i}))}(t,n),g=h.x,b=h.y,w=h.y0,S=h.x0,P={alignment:i,barRatio:o,cornerRadius:a,data:s,datum:n,horizontal:f,index:r,polar:d,origin:p,scale:y,style:m.data,width:_,height:c,x:g,y:b,y0:w,x0:S,barWidth:E,getPath:O};e[u]={data:P};var C=Qn.getText(t,n,r);return(void 0!==C&&null!==C||x&&(l||v))&&(e[u].labels=Qn.getProps(t,r)),e},S)},Hd=n(157),Xd=n.n(Hd),Zd=function(t,e){return{x:t,y:e,distance:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},add:function(t){return Zd(this.x+t.x,this.y+t.y)},subtract:function(t){return Zd(this.x-t.x,this.y-t.y)},scalarMult:function(t){return Zd(this.x*t,this.y*t)},scalarDivide:function(t){if(0===t)throw new Error("Division by 0 error");return Zd(this.x/t,this.y/t)},equals:function(t){return this.x===t.x&&this.y===t.y}}},Yd=function(t,e){return{center:t,radius:e,hasIntersection:function(t){var e=this.center,n=t.center,r=this.radius,i=t.radius,o=e.distance(n);return!(o>r+i)&&!(o<Math.abs(r-i))},equals:function(t){var e=this.center,n=t.center;return this.radius===t.radius&&e.equals(n)},intersection:function(t){var e=this.center,n=t.center,r=this.radius,i=t.radius,o=e.distance(n);if(!this.hasIntersection(t)||this.equals(t))return[];var a=(Math.pow(r,2)-Math.pow(i,2)+Math.pow(o,2))/(2*o),s=Math.sqrt(Math.pow(r,2)-Math.pow(a,2)),u=e.add(n.subtract(e).scalarMult(a).scalarDivide(o)),l=e.x,c=e.y,f=n.x,p=n.y,h=u.x,d=u.y,y=[Zd(h-s*(p-c)/o,d+s*(f-l)/o),Zd(h+s*(p-c)/o,d-s*(f-l)/o)];return y.sort(function(t,e){return t.x-e.x}),y},solveX:function(t){var e=Math.sqrt(Math.pow(this.radius,2)-Math.pow(t-this.center.y,2));return[this.center.x-e,this.center.x+e]},solveY:function(t){var e=Math.sqrt(Math.pow(this.radius,2)-Math.pow(t-this.center.x,2));return[this.center.y-e,this.center.y+e]}}};function Kd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jd(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Qd=function(t,e){var n=t.x,r=t.y,i=t.y0,o=t.horizontal,a=t.alignment||"middle",s="middle"===a?e/2:e,u=o?-1:1;return{x0:"start"===a?n:n-u*s,x1:"end"===a?n:n+u*s,y0:i,y1:r}},$d=function(t,e){var n=t.data,r=t.scale,i=void 0===n[e]._x1?"_x":"_x1";return r.x(n[e][i])},ty=function(t){return-1*t+Math.PI/2},ey=function(t,e){return(0,t.getPath)(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Kd(t,e,n[e])})}return t}({},t,Qd(t,e)))},ny=function(t,e,n){var r="".concat(e.topLeft," ").concat(e.topLeft," ").concat(n),i="".concat(e.topRight," ").concat(e.topRight," ").concat(n),o="".concat(e.bottomLeft," ").concat(e.bottomLeft," ").concat(n),a="".concat(e.bottomRight," ").concat(e.bottomRight," ").concat(n),s=["M","A ".concat(o,","),"L","A ".concat(r,","),"L","A ".concat(i,","),"L","A ".concat(a,",")].reduce(function(e,n,r){return e+="".concat(n," ").concat(t[r].x,", ").concat(t[r].y," \n")},"");return"".concat(s," z")},ry=function(t,e,n){var r=Qd(t,e),i=r.y0>r.y1?1:-1,o=i>0?"0 0 1":"0 0 0",a=function(t,e,n){var r=t.x0,i=t.x1,o=t.y0,a=t.y1,s=function(t){var s="Left"===t,u=s?1:-1,l=s?r:i,c={x:l+u*n["bottom".concat(t)],y:o},f={x:l,y:o-e*n["bottom".concat(t)]},p={x:l,y:a+e*n["top".concat(t)]},h={x:l+u*n["top".concat(t)],y:a};if(1===e?o-n["bottom".concat(t)]<a+n["top".concat(t)]:o+n["bottom".concat(t)]>a-n["top".concat(t)]){var d=Zd(l+u*n["top".concat(t)],a+e*n["top".concat(t)]),y=Yd(d,n["top".concat(t)]),v=Zd(l+u*n["bottom".concat(t)],o-e*n["bottom".concat(t)]),g=Yd(v,n["bottom".concat(t)]),m=y.intersection(g);if(m.length>0){var b=m[s?0:1];f={x:b.x,y:b.y},p={x:b.x,y:b.y}}else if(n["top".concat(t)]>n["bottom".concat(t)]){var _=y.solveX(o)[s?0:1];c={x:_,y:o},f={x:_,y:o},p={x:_,y:o}}else{var x=g.solveX(a)[s?0:1];f={x:x,y:a},p={x:x,y:a},h={x:x,y:a}}}var w=[c,f,p,h];return s?w:w.reverse()};return s("Left").concat(s("Right"))}(r,i,n);return ny(a,n,o)},iy=function(t,e,n){var r=Qd(t,e),i=r.y1>r.y0?1:-1,o=i>0?"0 0 1":"0 0 0",a=function(t,e,n){var r=t.x0,i=t.x1,o=t.y0,a=t.y1,s=function(t){var s="Left"===t,u=s?1:-1,l=s?i:r,c={y:l+u*n["bottom".concat(t)],x:o},f={y:l,x:o+e*n["bottom".concat(t)]},p={y:l,x:a-e*n["top".concat(t)]},h={y:l+u*n["top".concat(t)],x:a};if(1===e?o+n["bottom".concat(t)]>a-n["top".concat(t)]:o-n["bottom".concat(t)]<a+n["top".concat(t)]){var d=Zd(a-e*n["top".concat(t)],l+u*n["top".concat(t)]),y=Yd(d,n["top".concat(t)]),v=Zd(o+e*n["bottom".concat(t)],l+u*n["bottom".concat(t)]),g=Yd(v,n["bottom".concat(t)]),m=y.intersection(g);if(m.length>0){var b=m.sort(function(t,e){return t.y-e.y})[s?0:1];f={x:b.x,y:b.y},p={x:b.x,y:b.y}}else if(n["top".concat(t)]>n["bottom".concat(t)]){var _=y.solveY(o)[s?1:0];c={y:_,x:o},f={y:_,x:o},p={y:_,x:o}}else{var x=g.solveY(a)[s?1:0];f={y:x,x:a},p={y:x,x:a},h={y:x,x:a}}}var w=[c,f,p,h];return s?w:w.reverse()};return s("Left").concat(s("Right"))}(r,i,n);return ny(a,n,o)},oy=function(t,e){var n,r,i=t.datum,o=t.scale,a=t.index,s=t.alignment,u=Ln.evaluateStyle(t.style,i,t.active),l=o.y(i._y0||0),c=o.y(void 0!==i._y1?i._y1:i._y),f=o.x(void 0!==i._x1?i._x1:i._x);if(u.width){var p=function(t,e){var n=t.scale,r=n.y.range(),i=Math.max.apply(Math,Jd(r)),o=Math.abs(n.x.range()[1]-n.x.range()[0]);return e/(2*Math.PI*i)*o}(t,u.width),h="middle"===s?p/2:p;n="start"===s?f:f-h,r="end"===s?f:f+h}else n=function(t,e){var n=t.data,r=t.scale,i=t.alignment,o=$d(t,e),a=Math.abs(r.x.range()[1]-r.x.range()[0]),s=0===e?$d(t,n.length-1)-2*Math.PI:$d(t,e-1);return 0===e&&a<2*Math.PI?r.x.range()[0]:"start"===i||"end"===i?"start"===i?s:o:(o+s)/2}(t,a),r=function(t,e){var n=t.data,r=t.scale,i=t.alignment,o=$d(t,e),a=Math.abs(r.x.range()[1]-r.x.range()[0]),s=r.x.range()[1]===2*Math.PI?$d(t,0)+2*Math.PI:r.x.range()[1],u=e===n.length-1?$d(t,0)+2*Math.PI:$d(t,e+1);return e===n.length-1&&a<2*Math.PI?s:"start"===i||"end"===i?"start"===i?o:u:(o+u)/2}(t,a);var d=function(t){return Op().innerRadius(l).outerRadius(c).startAngle(ty(n)).endAngle(ty(r)).cornerRadius(e[t])()},y=function(t){var e=d("".concat(t,"Right")),n=e.match(/[A-Z]/g),r=e.split(/[A-Z]/).slice(1),i=n.indexOf("L"),o=d("".concat(t,"Left")),a=o.match(/[A-Z]/g);return{rightMoves:n,rightCoords:r,rightMiddle:i,leftMoves:a,leftCoords:o.split(/[A-Z]/).slice(1),leftMiddle:a.indexOf("L")}},v=function(){var t,i,o=e.topRight,a=e.topLeft,s=c*Math.abs(r-n),u=y("top"),l=u.rightMoves,f=u.rightCoords,p=u.rightMiddle,h=u.leftMoves,d=u.leftCoords,v=u.leftMiddle;if(o===a||s<2*o+2*a)t=o>a?l:h,i=o>a?f:d;else{var g,m=function(t){return t<3},b=a>o&&m(p)?1:2;if(o>a){var _=m(p)?v:v-2;g=m(v)?v-1:_}else{var x=m(v)?1:2;g=m(p)?x:v-2}t=Jd(l.slice(0,b)).concat(Jd(h.slice(g))),i=Jd(f.slice(0,b)).concat(Jd(d.slice(g)))}var w=t.indexOf("L"),E=t.slice(0,w),O=i.slice(0,w);return E.map(function(t,e){return{command:t,coords:O[e].split(",")}})}(),g=function(){var t,i,o=e.bottomRight,a=e.bottomLeft,s=l*Math.abs(r-n),u=y("bottom"),c=u.rightMoves,f=u.rightCoords,p=u.rightMiddle,h=u.leftMoves,d=u.leftCoords,v=u.leftMiddle;if(o===a||s<2*o+2*a)t=o>a?c:h,i=o>a?f:d;else{var g=function(t,e){return t.length-e<4},m=(o>a?g(c,p):g(h,v))?-1:-3;t=Jd(h.slice(0,v+2)).concat(Jd(c.slice(m))),i=Jd(d.slice(0,v+2)).concat(Jd(f.slice(m)))}var b=t.indexOf("L"),_=t.slice(b,-1),x=i.slice(b,-1);return _.map(function(t,e){return{command:t,coords:x[e].split(",")}})}(),m=Jd(v).concat(Jd(g)).reduce(function(t,e){return t+="".concat(e.command," ").concat(e.coords.join())},"");return"".concat(m," z")};function ay(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uy(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var ly=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),uy(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&sy(t.prototype,e),n&&sy(t,n)}(e,[{key:"getBarPath",value:function(t,e,n){return t.getPath?ey(t,e):t.horizontal?iy(t,e,n):ry(t,e,n)}},{key:"getPolarBarPath",value:function(t,e){return oy(t,e)}},{key:"getBarWidth",value:function(t,e){var n=t.active,r=t.scale,i=t.data,o=t.datum,a=t.barWidth,s=t.defaultBarWidth;if(a)return dn()(a)?Ln.evaluateProp(a,o,n):a;if(e.width)return e.width;var u=r.x.range(),l=Math.abs(u[1]-u[0]),c=i.length+2,f=(t.barRatio||.5)*(i.length<2?s:l/c);return Math.max(1,f)}},{key:"getCornerRadiusFromObject",value:function(t){var e=t.cornerRadius,n=t.datum,r=t.active,i={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},o=function(t,o){Xd()(e[t])?Xd()(e[o])||(i[t]=Ln.evaluateProp(e[o],n,r)):i[t]=Ln.evaluateProp(e[t],n,r)};return o("topLeft","top"),o("topRight","top"),o("bottomLeft","bottom"),o("bottomRight","right"),i}},{key:"getCornerRadius",value:function(t){var e=t.cornerRadius,n=t.datum,r=t.active,i={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0};return e?tt()(e)?this.getCornerRadiusFromObject(t):(i.topLeft=Ln.evaluateProp(e,n,r),i.topRight=Ln.evaluateProp(e,n,r),i):i}},{key:"render",value:function(){var t=this.props,e=t.role,n=t.datum,r=t.active,i=t.shapeRendering,o=t.className,a=t.origin,u=t.polar,l=t.pathComponent,c=t.events,f=t.clipPath,p={fill:"black",stroke:this.props.style&&this.props.style.fill||"black"},h=Ln.evaluateStyle(cn()(p,this.props.style),n,r),d=this.getBarWidth(this.props,h),y=this.getCornerRadius(this.props),v=u?this.getPolarBarPath(this.props,y):this.getBarPath(this.props,d,y),g=u&&a?"translate(".concat(a.x,", ").concat(a.y,")"):void 0,m=this.props.transform||g;return s.a.cloneElement(l,{d:v,transform:m,className:o,style:h,role:e,shapeRendering:i,events:c,clipPath:f})}}]),e}();function cy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function py(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(ly,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){ay(t,e,n[e])})}return t}({},ni.primitiveProps,{alignment:l.a.oneOf(["start","middle","end"]),barRatio:l.a.number,barWidth:l.a.oneOfType([l.a.number,l.a.func]),cornerRadius:l.a.oneOfType([l.a.number,l.a.func,l.a.shape({top:l.a.oneOfType([l.a.number,l.a.func]),topLeft:l.a.oneOfType([l.a.number,l.a.func]),topRight:l.a.oneOfType([l.a.number,l.a.func]),bottom:l.a.oneOfType([l.a.number,l.a.func]),bottomLeft:l.a.oneOfType([l.a.number,l.a.func]),bottomRight:l.a.oneOfType([l.a.number,l.a.func])})]),datum:l.a.object,getPath:l.a.func,horizontal:l.a.bool,pathComponent:l.a.element,width:l.a.number,x:l.a.number,y:l.a.number,y0:l.a.number})}),Object.defineProperty(ly,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{pathComponent:s.a.createElement(xi,null),defaultBarWidth:8}});var hy={width:450,height:300,padding:50},dy=["data","domain","height","padding","style","width"],yy=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),py(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&fy(t.prototype,e),n&&fy(t,n)}(e,[{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,hy,t);if(this.shouldAnimate())return this.animateComponent(e,dy);var n=this.renderData(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(yy,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryBar"}),Object.defineProperty(yy,"role",{configurable:!0,enumerable:!0,writable:!0,value:"bar"}),Object.defineProperty(yy,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:{onLoad:{duration:2e3,before:function(){return{_y:0,_y1:0,_y0:0}},after:function(t){return{_y:t._y,_y1:t._y1,_y0:t._y0}}},onExit:{duration:500,before:function(){return{_y:0,yOffset:0}}},onEnter:{duration:500,before:function(){return{_y:0,_y1:0,_y0:0}},after:function(t){return{_y:t._y,_y1:t._y1,_y0:t._y0}}}}}),Object.defineProperty(yy,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){cy(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{alignment:l.a.oneOf(["start","middle","end"]),barRatio:l.a.number,barWidth:l.a.oneOfType([l.a.number,l.a.func]),cornerRadius:l.a.oneOfType([l.a.number,l.a.func,l.a.shape({top:l.a.oneOfType([l.a.number,l.a.func]),topLeft:l.a.oneOfType([l.a.number,l.a.func]),topRight:l.a.oneOfType([l.a.number,l.a.func]),bottom:l.a.oneOfType([l.a.number,l.a.func]),bottomLeft:l.a.oneOfType([l.a.number,l.a.func]),bottomRight:l.a.oneOfType([l.a.number,l.a.func])})]),getPath:l.a.func,horizontal:l.a.bool})}),Object.defineProperty(yy,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),data:[{x:1,y:1},{x:2,y:2},{x:3,y:3},{x:4,y:4}],dataComponent:s.a.createElement(ly,null),groupComponent:s.a.createElement("g",{role:"presentation"}),labelComponent:s.a.createElement(dr,null),samples:50,scale:"linear",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(yy,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:Il.getDomainWithZero}),Object.defineProperty(yy,"getData",{configurable:!0,enumerable:!0,writable:!0,value:vl.getData}),Object.defineProperty(yy,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return qd(t,hy)}}),Object.defineProperty(yy,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["dataComponent","labelComponent","groupComponent","containerComponent"]});var vy=Xi(yy);function gy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function my(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function by(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var _y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),by(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&my(t.prototype,e),n&&my(t,n)}(e,[{key:"getCandleWidth",value:function(t,e){var n=t.active,r=t.datum,i=t.data,o=t.candleWidth,a=t.scale,s=t.defaultCandleWidth;if(o)return dn()(o)?Ln.evaluateProp(o,r,n):o;if(e.width)return e.width;var u=a.x.range(),l=Math.abs(u[1]-u[0]),c=i.length+2,f=(t.candleRatio||.5)*(i.length<2?s:l/c);return Math.max(1,f)}},{key:"render",value:function(){var t=this.props,e=t.x,n=t.high,r=t.low,i=t.open,o=t.close,a=t.datum,u=t.active,l=t.events,c=t.groupComponent,f=t.clipPath,p=t.id,h=t.rectComponent,d=t.lineComponent,y=t.role,v=t.shapeRendering,g=t.className,m=t.wickStrokeWidth,b=t.transform,_=Ln.evaluateStyle(cn()({stroke:"black"},this.props.style),a,u),x=un()({strokeWidth:m},_),w=this.getCandleWidth(this.props,_),E=Math.abs(o-i),O=e-w/2,S={role:y,shapeRendering:v,className:g,events:l,transform:b,clipPath:f},P=cn()({key:"".concat(p,"-candle"),style:_,x:O,y:Math.min(i,o),width:w,height:E},S),C=cn()({key:"".concat(p,"-highWick"),style:x,x1:e,x2:e,y1:n,y2:Math.min(i,o)},S),T=cn()({key:"".concat(p,"-lowWick"),style:x,x1:e,x2:e,y1:Math.max(i,o),y2:r},S);return s.a.cloneElement(c,{},[s.a.cloneElement(h,P),s.a.cloneElement(d,C),s.a.cloneElement(d,T)])}}]),e}();Object.defineProperty(_y,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){gy(t,e,n[e])})}return t}({},ni.primitiveProps,{candleRatio:l.a.number,candleWidth:l.a.oneOfType([l.a.number,l.a.func]),close:l.a.number,datum:l.a.object,defaultCandleWidth:l.a.number,groupComponent:l.a.element,high:l.a.number,lineComponent:l.a.element,low:l.a.number,open:l.a.number,rectComponent:l.a.element,wickStrokeWidth:l.a.number,width:l.a.number,x:l.a.number})}),Object.defineProperty(_y,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{defaultCandleWidth:8,groupComponent:s.a.createElement("g",null),lineComponent:s.a.createElement(ci,null),rectComponent:s.a.createElement(zr,null)}});var xy=function(t){return vl.formatData(t.data,t,["x","high","low","close","open"])},wy=function(t,e,n){var r="x"===e?"_x":{min:"_low",max:"_high"}[n],i="min"===n?1/0:-1/0;return t.reduce(function(t,e){var i=e[r];return t<i&&"min"===n||t>i&&"max"===n?t:i},i)},Ey=function(t,e){var n=Il.getMinFromProps(t,e),r=Il.getMaxFromProps(t,e),i=xy(t);if(i.length<1){var o=el.getBaseScale(t,e).domain(),a=void 0!==n?n:mr.getMinValue(o),s=void 0!==r?r:mr.getMaxValue(o);return Il.getDomainFromMinMax(a,s)}var u=void 0!==n?n:wy(i,e,"min"),l=void 0!==r?r:wy(i,e,"max");return Il.getDomainFromMinMax(u,l)},Oy=function(t,e){return Il.createDomainFunction(Ey)(t,e)},Sy=function(t,e){var n=function(t){var e=t.theme,n=t.polar,r=e&&e.candlestick&&e.candlestick.style?e.candlestick.style:{},i=Ln.getStyles(t.style,r),o=xy(t),a={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},s={x:Oy(t,"x"),y:Oy(t,"y")};return{domain:s,data:o,scale:{x:el.getBaseScale(t,"x").domain(s.x).range(a.x),y:el.getBaseScale(t,"y").domain(s.y).range(a.y)},style:i,origin:n?t.origin||Ln.getPolarOrigin(t):void 0}}(t=Ln.modifyProps(t,e,"candlestick")),r=n.data,i=n.style,o=n.scale,a=n.domain,s=n.origin,u=t,l=u.groupComponent,c=u.width,f=u.height,p=u.padding,h=u.standalone,d=u.name,y=u.candleWidth,v=u.candleRatio,g=u.theme,m=u.polar,b=u.wickStrokeWidth,_=u.labels,x=u.events,w=u.sharedEvents,E={parent:{domain:a,scale:o,width:c,height:f,data:r,standalone:h,theme:g,polar:m,origin:s,name:d,style:i.parent,padding:p}};return r.reduce(function(e,n,a){var u=n.eventKey||a,f=o.x(void 0!==n._x1?n._x1:n._x),p=o.y(n._high),h=o.y(n._close),d=o.y(n._open),g=o.y(n._low),E=function(t,e,n){e=e||{};var r=t.open>t.close?n.candleColors.negative:n.candleColors.positive,i=e.fill||r,o=e.stroke,a=function(t){return"none"===t||"transparent"===t}(o)?i:o||"black";return cn()({},e,{stroke:a,fill:i})}(n,i.data,t),O={x:f,high:p,low:g,candleWidth:y,candleRatio:v,scale:o,data:r,datum:n,groupComponent:l,index:a,style:E,width:c,polar:m,origin:s,wickStrokeWidth:b,open:d,close:h};e[u]={data:O};var S=Qn.getText(t,n,a);return(void 0!==S&&null!==S||_&&(x||w))&&(e[u].labels=function(t,e,n){var r=t.x,i=t.high,o=t.index,a=t.scale,s=t.datum,u=t.data,l=n.labels||{};return{style:l,y:i-(l.padding||0),x:r,text:e,index:o,scale:a,datum:s,data:u,textAnchor:l.textAnchor,verticalAnchor:l.verticalAnchor||"end",angle:l.angle}}(O,S,i)),e},E)};function Py(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ty(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var ky={width:450,height:300,padding:50,candleColors:{positive:"#ffffff",negative:"#252525"}},Ay=[{x:new Date(2016,6,1),open:5,close:10,high:15,low:0},{x:new Date(2016,6,2),open:10,close:15,high:20,low:5},{x:new Date(2016,6,3),open:15,close:20,high:25,low:10},{x:new Date(2016,6,4),open:20,close:25,high:30,low:15},{x:new Date(2016,6,5),open:25,close:30,high:35,low:20},{x:new Date(2016,6,6),open:30,close:35,high:40,low:25},{x:new Date(2016,6,7),open:35,close:40,high:45,low:30},{x:new Date(2016,6,8),open:40,close:45,high:50,low:35}],My=["data","domain","height","padding","samples","size","style","width"],jy=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ty(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Cy(t.prototype,e),n&&Cy(t,n)}(e,[{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,ky,t);if(this.shouldAnimate())return this.animateComponent(e,My);var n=this.renderData(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(jy,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryCandlestick"}),Object.defineProperty(jy,"role",{configurable:!0,enumerable:!0,writable:!0,value:"candlestick"}),Object.defineProperty(jy,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.discreteTransitions()}),Object.defineProperty(jy,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Py(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{candleColors:l.a.shape({positive:l.a.string,negative:l.a.string}),candleRatio:l.a.number,candleWidth:l.a.oneOfType([l.a.func,l.a.number]),close:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),high:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),low:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),open:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),wickStrokeWidth:l.a.number})}),Object.defineProperty(jy,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),data:Ay,dataComponent:s.a.createElement(_y,null),groupComponent:s.a.createElement("g",{role:"presentation"}),labelComponent:s.a.createElement(dr,null),samples:50,scale:"linear",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(jy,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:Oy}),Object.defineProperty(jy,"getData",{configurable:!0,enumerable:!0,writable:!0,value:xy}),Object.defineProperty(jy,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Sy(t,ky)}}),Object.defineProperty(jy,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["dataComponent","labelComponent","groupComponent","containerComponent"]});var Ry=Xi(jy);function Iy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ly(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dy(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Fy=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Dy(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Ly(t.prototype,e),n&&Ly(t,n)}(e,[{key:"getStyle",value:function(t){var e=t.style,n=t.datum,r=t.active;return Ln.evaluateStyle(cn()({stroke:"black"},e),n,r)}},{key:"renderBorder",value:function(t,e,n){var r=t.x,i=t.y,o=t.borderWidth,a=t.events,u=t.style,l=t.role,c=t.shapeRendering,f=t.className,p=t.lineComponent,h=t.transform,d=t.id,y="right"===n||"left"===n,v={role:l,shapeRendering:c,className:f,events:a,style:u,transform:h,key:"".concat(d,"-border-").concat(n),x1:y?e[n]:r-o,x2:y?e[n]:r+o,y1:y?i-o:e[n],y2:y?i+o:e[n]};return s.a.cloneElement(p,v)}},{key:"renderCross",value:function(t,e,n){var r=t.x,i=t.y,o=t.events,a=t.style,u=t.role,l=t.shapeRendering,c=t.className,f=t.lineComponent,p=t.transform,h=t.id,d="top"===n||"bottom"===n,y={role:u,shapeRendering:l,className:c,events:o,style:a,transform:p,key:"".concat(h,"-cross-").concat(n),x1:r,x2:d?r:e[n],y1:i,y2:d?e[n]:i};return s.a.cloneElement(f,y)}},{key:"calculateError",value:function(t){var e=t.errorX,n=t.errorY,r=t.scale,i=r.x.range(),o=r.y.range(),a=e?e[0]:void 0,s=e?e[1]:void 0,u=n?n[1]:void 0,l=n?n[0]:void 0;return{right:a>=i[1]?i[1]:a,left:s<=i[0]?i[0]:s,top:u>=o[0]?o[0]:u,bottom:l<=o[1]?o[1]:l}}},{key:"render",value:function(){var t=cn()({},this.props,{style:this.getStyle(this.props)}),e=this.calculateError(t),n=[e.right?this.renderBorder(t,e,"right"):null,e.left?this.renderBorder(t,e,"left"):null,e.bottom?this.renderBorder(t,e,"bottom"):null,e.top?this.renderBorder(t,e,"top"):null,e.right?this.renderCross(t,e,"right"):null,e.left?this.renderCross(t,e,"left"):null,e.bottom?this.renderCross(t,e,"bottom"):null,e.top?this.renderCross(t,e,"top"):null].filter(Boolean);return s.a.cloneElement(t.groupComponent,{},n)}}]),e}();Object.defineProperty(Fy,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Iy(t,e,n[e])})}return t}({},ni.primitiveProps,{borderWidth:l.a.number,datum:l.a.object,errorX:l.a.oneOfType([l.a.number,l.a.array,l.a.bool]),errorY:l.a.oneOfType([l.a.number,l.a.array,l.a.bool]),groupComponent:l.a.element,lineComponent:l.a.element,x:l.a.number,y:l.a.number})}),Object.defineProperty(Fy,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{groupComponent:s.a.createElement("g",null),lineComponent:s.a.createElement(ci,null)}});var Ny=function(t,e,n){var r=t[{x:"_errorX",y:"_errorY"}[n]];return 0!==r&&(Array.isArray(r)?[0!==r[0]&&e[n](r[0]+t["_".concat(n)]),0!==r[1]&&e[n](t["_".concat(n)]-r[1])]:[e[n](r+t["_".concat(n)]),e[n](t["_".concat(n)]-r)])},By=function(t){var e=["x","y","errorX","errorY"];if(t.data)return vl.formatData(t.data,t,e);var n=t.errorX||t.errorY?vl.generateData(t):[];return vl.formatData(n,t,e)},zy=function(t,e){var n=Il.getMinFromProps(t,e),r=Il.getMaxFromProps(t,e),i=By(t);if(i.length<1){var o=el.getBaseScale(t,e).domain(),a=void 0!==n?n:mr.getMinValue(o),s=void 0!==r?r:mr.getMaxValue(o);return Il.getDomainFromMinMax(a,s)}var u=Ln.getCurrentAxis(e,t.horizontal),l="x"===u?"_errorX":"_errorY",c=function(t){var e="min"===t?1/0:-1/0,n="min"===t?1:0,r="min"===t?-1:1;return i.reduce(function(e,i){var o=Array.isArray(i[l])?i[l][n]:i[l],a=i["_".concat(u)]+r*(o||0);return e<a&&"min"===t||e>a&&"max"===t?e:a},e)},f=void 0!==n?n:c("min"),p=void 0!==r?r:c("max");return Il.getDomainFromMinMax(f,p)},Uy=function(t,e){return Il.createDomainFunction(zy)(t,e)},Vy=function(t,e){var n=function(t){var e=t.theme&&t.theme.errorbar&&t.theme.errorbar.style?t.theme.errorbar.style:{},n=Ln.getStyles(t.style,e)||{},r=By(t),i={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},o={x:Uy(t,"x"),y:Uy(t,"y")};return{domain:o,data:r,scale:{x:el.getBaseScale(t,"x").domain(o.x).range(i.x),y:el.getBaseScale(t,"y").domain(o.y).range(i.y)},style:n,origin:t.polar?t.origin||Ln.getPolarOrigin(t):void 0}}(t=Ln.modifyProps(t,e,"errorbar")),r=n.data,i=n.style,o=n.scale,a=n.domain,s=n.origin,u=t,l=u.groupComponent,c=u.height,f=u.width,p=u.borderWidth,h=u.standalone,d=u.theme,y=u.polar,v=u.padding,g=u.labels,m=u.events,b=u.sharedEvents,_=u.name,x={parent:{domain:a,scale:o,data:r,height:c,width:f,standalone:h,theme:d,polar:y,origin:s,name:_,padding:v,style:i.parent}};return r.reduce(function(e,n,a){var s=n.eventKey||a,u={x:o.x(void 0!==n._x1?n._x1:n._x),y:o.y(void 0!==n._y1?n._y1:n._y),scale:o,datum:n,data:r,index:a,groupComponent:l,borderWidth:p,style:i.data,errorX:Ny(n,o,"x"),errorY:Ny(n,o,"y")};e[s]={data:u};var c=Qn.getText(t,n,a);return(void 0!==c&&null!==c||g&&(m||b))&&(e[s].labels=function(t,e,n){var r=t.x,i=t.index,o=t.scale,a=t.errorY,s=(a&&Array.isArray(a)?a[0]:a)||t.y,u=n.labels||{};return{style:u,y:s-(u.padding||0),x:r,text:e,index:i,scale:o,datum:t.datum,data:t.data,textAnchor:u.textAnchor,verticalAnchor:u.verticalAnchor||"end",angle:u.angle}}(u,c,i)),e},x)};function Gy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qy(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Hy={width:450,height:300,padding:50},Xy=["data","domain","height","padding","samples","style","width","errorX","errorY","borderWidth"],Zy=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qy(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Wy(t.prototype,e),n&&Wy(t,n)}(e,[{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,Hy,t);if(this.shouldAnimate())return this.animateComponent(e,Xy);var n=this.renderData(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(Zy,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryErrorBar"}),Object.defineProperty(Zy,"role",{configurable:!0,enumerable:!0,writable:!0,value:"errorbar"}),Object.defineProperty(Zy,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.discreteTransitions()}),Object.defineProperty(Zy,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Gy(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{borderWidth:l.a.number,errorX:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),errorY:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),horizontal:l.a.bool})}),Object.defineProperty(Zy,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),data:[{x:1,y:1,errorX:.1,errorY:.1},{x:2,y:2,errorX:.2,errorY:.2},{x:3,y:3,errorX:.3,errorY:.3},{x:4,y:4,errorX:.4,errorY:.4}],dataComponent:s.a.createElement(Fy,null),labelComponent:s.a.createElement(dr,null),groupComponent:s.a.createElement("g",{role:"presentation"}),samples:50,scale:"linear",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(Zy,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:Uy}),Object.defineProperty(Zy,"getData",{configurable:!0,enumerable:!0,writable:!0,value:By}),Object.defineProperty(Zy,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Vy(t,Hy)}}),Object.defineProperty(Zy,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["dataComponent","labelComponent","groupComponent","containerComponent"]});var Yy=Xi(Zy),Ky=function(t,e){var n=Ln.modifyProps(t,e,"line"),r=t=cn()({},n,function(t){var e=vl.getData(t);e.length<2&&(e=[]);var n={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},r={x:Il.getDomain(t,"x"),y:Il.getDomain(t,"y")},i={x:el.getBaseScale(t,"x").domain(r.x).range(n.x),y:el.getBaseScale(t,"y").domain(r.y).range(n.y)},o=t.polar?t.origin||Ln.getPolarOrigin(t):void 0,a=t.theme&&t.theme.line&&t.theme.line.style?t.theme.line.style:{};return{domain:r,data:e,scale:i,style:Ln.getStyles(t.style,a),origin:o}}(n)),i=r.data,o=r.domain,a=r.events,s=r.groupComponent,u=r.height,l=r.interpolation,c=r.origin,f=r.padding,p=r.polar,h=r.scale,d=r.sharedEvents,y=r.standalone,v=r.style,g=r.theme,m=r.width,b=r.labels,_=r.name,x={parent:{style:v.parent,scale:h,data:i,height:u,width:m,name:_,domain:o,standalone:y,polar:p,origin:c,padding:f},all:{data:{polar:p,origin:c,scale:h,data:i,interpolation:l,groupComponent:s,theme:g,style:v.data}}};return i.reduce(function(e,n,r){var i=Qn.getText(t,n,r);(void 0!==i&&null!==i||b&&(a||d))&&(e[n.eventKey||r]={labels:Qn.getProps(t,r)});return e},x)};function Jy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $y(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var tv=function(t){var e=void 0!==t._y1?t._y1:t._y;return null!==e&&void 0!==e&&null!==t._y0},ev=function(t){return function(e){return t.y(void 0!==e._y1?e._y1:e._y)}},nv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),$y(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Qy(t.prototype,e),n&&Qy(t,n)}(e,[{key:"getLineFunction",value:function(t){var e=t.polar,n=t.scale,r=!e,i=(void 0===t.openCurve?r:t.openCurve)?this.toNewName(t.interpolation):"".concat(this.toNewName(t.interpolation),"Closed");return e?Np().defined(tv).curve(o[i]).angle(function(t){return function(e){return-1*t.x(void 0!==e._x1?e._x1:e._x)+Math.PI/2}}(n)).radius(ev(n)):kp().defined(tv).curve(o[i]).x(function(t){return function(e){return t.x(void 0!==e._x1?e._x1:e._x)}}(n)).y(ev(n))}},{key:"toNewName",value:function(t){return"curve".concat(function(t){return t&&t[0].toUpperCase()+t.slice(1)}(t))}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.active,r=t.events,i=t.role,o=t.shapeRendering,a=t.className,u=t.polar,l=t.origin,c=t.pathComponent,f=t.clipPath,p=Ln.evaluateStyle(cn()({fill:"none",stroke:"black"},this.props.style),e,n),h=this.getLineFunction(this.props)(e),d=u&&l?"translate(".concat(l.x,", ").concat(l.y,")"):void 0,y=this.props.transform||d;return s.a.cloneElement(c,{className:a,style:p,role:i,shapeRendering:o,transform:y,events:r,d:h,clipPath:f})}}]),e}();function rv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ov(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(nv,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Jy(t,e,n[e])})}return t}({},ni.primitiveProps,{interpolation:l.a.string,openCurve:l.a.bool,origin:l.a.object,pathComponent:l.a.element,polar:l.a.bool})}),Object.defineProperty(nv,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{pathComponent:s.a.createElement(xi,null)}});var av={width:450,height:300,padding:50,interpolation:"linear"},sv=["data","domain","height","padding","samples","style","width"],uv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ov(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&iv(t.prototype,e),n&&iv(t,n)}(e,[{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,av,t);if(this.shouldAnimate())return this.animateComponent(e,sv);var n=this.renderContinuousData(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(uv,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryLine"}),Object.defineProperty(uv,"role",{configurable:!0,enumerable:!0,writable:!0,value:"line"}),Object.defineProperty(uv,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.continuousTransitions()}),Object.defineProperty(uv,"defaultPolarTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.continuousPolarTransitions()}),Object.defineProperty(uv,"continuous",{configurable:!0,enumerable:!0,writable:!0,value:!0}),Object.defineProperty(uv,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){rv(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{interpolation:l.a.oneOf(["basis","bundle","cardinal","catmullRom","linear","monotoneX","monotoneY","natural","step","stepAfter","stepBefore"]),label:xn.deprecated(l.a.string,"Use `labels` instead for individual data labels")})}),Object.defineProperty(uv,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),dataComponent:s.a.createElement(nv,null),labelComponent:s.a.createElement(dr,{renderInPortal:!0}),groupComponent:s.a.createElement(Wr,null),samples:50,scale:"linear",sortKey:"x",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(uv,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:Il.getDomain}),Object.defineProperty(uv,"getData",{configurable:!0,enumerable:!0,writable:!0,value:vl.getData}),Object.defineProperty(uv,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Ky(t,av)}}),Object.defineProperty(uv,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["dataComponent","labelComponent","groupComponent","containerComponent"]});var lv=Xi(uv,{components:[{name:"parent",index:"parent"},{name:"data",index:"all"},{name:"labels"}]});function cv(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var fv=function(t,e){var n=e.size,r=e.z;return t.size?"function"==typeof t.size?t.size:Math.max(t.size,1):"function"==typeof e.size?n:t[r]?function(t,e){var n=e.data,r=e.z,i=e.maxBubbleSize,o=e.minBubbleSize,a=n.map(function(t){return t[r]}),s=Math.min.apply(Math,cv(a)),u=Math.max.apply(Math,cv(a)),l=i||function(){var t=Math.min.apply(Math,cv(ec()(Ln.getPadding(e))));return Math.max(t,5)}(),c=o||.1*l;if(u===s)return Math.max(c,1);var f=Math.PI*Math.pow(l,2),p=Math.PI*Math.pow(c,2),h=(t[r]-s)/(u-s)*f,d=Math.max(h,p),y=Math.sqrt(d/Math.PI);return Math.max(y,1)}(t,e):Math.max(n||0,1)},pv=function(t,e){var n=Ln.modifyProps(t,e,"scatter"),r=t=cn()({},n,function(t){var e=t.theme&&t.theme.scatter&&t.theme.scatter.style?t.theme.scatter.style:{},n=Ln.getStyles(t.style,e),r=vl.getData(t),i={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},o={x:Il.getDomain(t,"x"),y:Il.getDomain(t,"y")};return{domain:o,data:r,scale:{x:el.getBaseScale(t,"x").domain(o.x).range(i.x),y:el.getBaseScale(t,"y").domain(o.y).range(i.y)},style:n,origin:t.polar?t.origin||Ln.getPolarOrigin(t):void 0,z:t.bubbleProperty||"z"}}(n)),i=r.data,o=r.domain,a=r.events,s=r.height,u=r.origin,l=r.padding,c=r.polar,f=r.scale,p=r.name,h=r.sharedEvents,d=r.standalone,y=r.style,v=r.theme,g=r.width,m=r.labels,b={parent:{style:y.parent,scale:f,domain:o,data:i,height:s,width:g,standalone:d,theme:v,origin:u,polar:c,padding:l,name:p}};return i.reduce(function(e,n,r){var o=n.eventKey,s=Ln.scalePoint(t,n),l={x:s.x,y:s.y,datum:n,data:i,index:r,scale:f,polar:c,origin:u,size:fv(n,t),symbol:function(t,e){return e.bubbleProperty?"circle":t.symbol||e.symbol}(n,t),style:y.data};e[o]={data:l};var p=Qn.getText(t,n,r);return(void 0!==p&&null!==p||m&&(a||h))&&(e[o].labels=Qn.getProps(t,r)),e},b)};function hv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yv(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var vv={width:450,height:300,padding:50,size:3,symbol:"circle"},gv=["data","domain","height","maxBubbleSize","padding","samples","size","style","width"],mv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yv(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&dv(t.prototype,e),n&&dv(t,n)}(e,[{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,vv,t);if(this.shouldAnimate())return this.animateComponent(e,gv);var n=this.renderData(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(mv,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryScatter"}),Object.defineProperty(mv,"role",{configurable:!0,enumerable:!0,writable:!0,value:"scatter"}),Object.defineProperty(mv,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.discreteTransitions()}),Object.defineProperty(mv,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){hv(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{bubbleProperty:l.a.string,maxBubbleSize:xn.nonNegative,minBubbleSize:xn.nonNegative,size:l.a.oneOfType([xn.nonNegative,l.a.func]),symbol:l.a.oneOfType([l.a.oneOf(["circle","diamond","plus","minus","square","star","triangleDown","triangleUp"]),l.a.func])})}),Object.defineProperty(mv,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),dataComponent:s.a.createElement(Si,null),labelComponent:s.a.createElement(dr,null),groupComponent:s.a.createElement("g",null),samples:50,scale:"linear",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(mv,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:Il.getDomain}),Object.defineProperty(mv,"getData",{configurable:!0,enumerable:!0,writable:!0,value:vl.getData}),Object.defineProperty(mv,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return pv(t,vv)}}),Object.defineProperty(mv,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["dataComponent","labelComponent","groupComponent","containerComponent"]});var bv=Xi(mv);var _v=["max","min","median","q1","q3"],xv=function(t,e){var n=t.map(function(t){return e?t._x:t._y}),r={_q1:co(n,.25),_q3:co(n,.75),_min:fo(n),_median:co(n,.5),_max:function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r}(n)};return e?cn()({},r,{_y:t[0]._y}):cn()({},r,{_x:t[0]._x})},wv=function(t,e){if(function(t,e){if(e.every(function(t){return _v.every(function(e){return"number"==typeof t["_".concat(e)]})})){var n=e.map(function(e){var n=e._x,r=e._y;return t.horizontal?r:n});if(!Fi()(n).length===n.length)throw new Error("\n        data prop may only take an array of objects with a unique\n        independent variable. Make sure your x or y values are distinct.\n      ");return!0}return!1}(t,e))return e;var n=e.every(function(t){return Array.isArray(t._x)}),r=e.every(function(t){return Array.isArray(t._y)}),i=n||t.horizontal,o=i?"_x":"_y",a=i?"_y":"_x";if(n&&r)throw new Error("\n        data may not be given with array values for both x and y\n      ");if(n||r)return e.map(function(t){var e=t[o].map(function(e){return cn()({},t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},o,e))}),n=Q()(e,o);return xv(n,i)});var s=rc()(e,a);return Ri()(s).map(function(t){var e=s[t],n=Q()(e,o);return xv(n,i)})},Ev=function(t){var e=_v.concat("x","y"),n=vl.formatData(t.data,t,e);return n.length?wv(t,n):[]},Ov=function(t,e){var n=Il.getMinFromProps(t,e),r=Il.getMaxFromProps(t,e),i=Ev(t);if(i.length<1){var o=el.getBaseScale(t,e).domain(),a=void 0!==n?n:mr.getMinValue(o),s=void 0!==r?r:mr.getMaxValue(o);return Il.getDomainFromMinMax(a,s)}return t.horizontal&&"x"===e||!t.horizontal&&"y"===e?function(t,e,n){var r=Il.getMinFromProps(e,n),i=Il.getMaxFromProps(e,n),o=void 0!==r?r:t.reduce(function(t,e){return t<e._min?t:e._min},1/0),a=void 0!==i?i:t.reduce(function(t,e){return t>e._max?t:e._max},-1/0);return Il.getDomainFromMinMax(o,a)}(i,t,e):function(t,e,n){var r=Il.getMinFromProps(e,n),i=Il.getMaxFromProps(e,n),o=void 0!==r?r:t.reduce(function(t,e){return t<e["_".concat(n)]?t:e["_".concat(n)]},1/0),a=void 0!==i?i:t.reduce(function(t,e){return t>e["_".concat(n)]?t:e["_".concat(n)]},-1/0);return Il.getDomainFromMinMax(o,a)}(i,t,e)},Sv=function(t,e){return Il.createDomainFunction(Ov)(t,e)},Pv=function(t){var e=t.theme,n=Ev(t),r=function(t,e){return e.every(function(t){return Array.isArray(t._x)})||t.horizontal}(t,n),i={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},o={x:Sv(t,"x"),y:Sv(t,"y")},a={x:el.getBaseScale(t,"x").domain(o.x).range(i.x),y:el.getBaseScale(t,"y").domain(o.y).range(i.y)},s=function(t,e){var n=t.style||{};e=e||{};var r=un()({},n.labels,e.labels),i=un()({},n.boxes,e.boxes),o=un()({},n.whiskers,e.whiskers);return{boxes:i,labels:r,parent:un()({},n.parent,e.parent,{height:"100%",width:"100%"}),max:un()({},n.max,e.max,o),maxLabels:un()({},n.maxLabels,e.maxlabels,r),median:un()({},n.median,e.median,o),medianLabels:un()({},n.medianLabels,e.medianlabels,r),min:un()({},n.min,e.min,o),minLabels:un()({},n.minLabels,e.minlabels,r),q1:un()({},n.q1,e.q1,i),q1Labels:un()({},n.q1Labels,e.q1labels,r),q3:un()({},n.q3,e.q3,i),q3Labels:un()({},n.q3Labels,e.q3labels,r),whiskers:o}}(t,e&&e.boxplot&&e.boxplot.style?e.boxplot.style:{}),u=r?"top":"right";return{data:n,horizontal:r,domain:o,scale:a,style:s,labelOrientation:t.labelOrientation||u,boxWidth:t.boxWidth||1}},Cv=function(t,e){var n=Ln.modifyProps(t,e,"boxplot"),r=t=cn()({},n,Pv(n)),i=r.groupComponent,o=r.width,a=r.height,s=r.padding,u=r.standalone,l=r.theme,c=r.events,f=r.sharedEvents,p=r.scale,h=r.horizontal,d=r.data,y=r.style,v=r.domain,g=r.name,m={parent:{domain:v,scale:p,width:o,height:a,data:d,standalone:u,name:g,theme:l,style:y.parent||{},padding:s,groupComponent:i}},b=h?p.x:p.y;return d.reduce(function(e,n,r){var i=void 0!==n.eventKey?n.eventKey:r,o={x:p.x(n._x),y:p.y(n._y),min:b(n._min),max:b(n._max),median:b(n._median),q1:b(n._q1),q3:b(n._q3)},a=cn()({index:r,datum:n,positions:o},t),s=_v.reduce(function(t,e){return t[e]=function(t,e){return"median"===e?function(t){var e=t.boxWidth,n=t.horizontal,r=t.style,i=t.datum,o=t.scale,a=t.index,s=t.positions,u=s.median,l=s.x,c=s.y;return{datum:i,scale:o,index:a,x1:n?u:l-e/2,y1:n?c-e/2:u,x2:n?u:l+e/2,y2:n?c+e/2:u,style:r.median}}(t):"min"===e||"max"===e?function(t,e){var n=t.horizontal,r=t.style,i=t.boxWidth,o=t.whiskerWidth,a=t.datum,s=t.scale,u=t.index,l=t.positions,c=l.min,f=l.max,p=l.q1,h=l.q3,d=l.x,y=l.y,v="min"===e?p:h,g="min"===e?c:f,m="number"==typeof o?o:i;return{datum:a,index:u,scale:s,majorWhisker:{x1:n?v:d,y1:n?y:v,x2:n?g:d,y2:n?y:g},minorWhisker:{x1:n?g:d-m/2,y1:n?y-m/2:g,x2:n?g:d+m/2,y2:n?y+m/2:g},style:r[e]||r.whisker}}(t,e):function(t,e){var n=t.horizontal,r=t.boxWidth,i=t.style,o=t.scale,a=t.datum,s=t.index,u=t.positions,l=u.median,c=u.q1,f=u.q3,p=u.x,h=u.y;return{datum:a,scale:o,index:s,x:n?"q1"===e?c:l:p-r/2,y:n?h-r/2:"q1"===e?l:f,width:n?"q1"===e?l-c:f-l:r,height:n?r:"q1"===e?c-l:l-f,style:i[e]||i.boxes}}(t,e)}(a,e),t},{});return e[i]=s,_v.forEach(function(n){var r=function(t,e){var n=t.datum,r=t.index,i=t.labels,o=t["".concat(e,"Labels")];if(!o&&!i)return null;if(!0===o||!0===i){var a="_".concat(e);return"".concat(n[a])}return Array.isArray(o)?o[r]:o}(a,n),o=t.labels||t["".concat(n,"Labels")];if(null!==r&&void 0!==r||o&&(c||f)){var s="".concat(n,"Labels");e[i][s]=function(t,e,n){var r=t.datum,i=t.positions,o=t.index,a=t.boxWidth,s=t.horizontal,u=t.labelOrientation,l=t.style,c=l["".concat(n,"Labels")]||l.labels,f=s?"end":"middle",p=s?"middle":"start",h="number"==typeof t.whiskerWidth?t.whiskerWidth:a,d="min"===n||"max"===n?h:a,y=function(t){var e={x:"left"===u?-1:1,y:"top"===u?-1:1};return i[t]+e[t]*d/2+e[t]*(c.padding||0)};return{text:e,datum:r,index:o,style:c,y:s?y("y"):i[n],x:s?i[n]:y("x"),textAnchor:c.textAnchor||p,verticalAnchor:c.verticalAnchor||f,angle:c.angle}}(a,r,n)}}),e},m)};function Tv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kv(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Av(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mv(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var jv={width:450,height:300,padding:{top:20,right:20,bottom:20,left:20}},Rv=["data","domain","height","padding","style","width"],Iv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mv(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Av(t.prototype,e),n&&Av(t,n)}(e,[{key:"renderBoxPlot",value:function(t){var e=this,n=["q1","q3","max","min","median"],r=xl()(n.map(function(n){return e.dataKeys.map(function(r,i){var o=t["".concat(n,"Component")],a=e.getComponentProps(o,n,i);return s.a.cloneElement(o,a)})})),i=xl()(n.map(function(n){return e.dataKeys.map(function(r,i){var o="".concat(n,"Labels"),a=t["".concat(n,"LabelComponent")],u=e.getComponentProps(a,o,i);if(void 0!==u.text&&null!==u.text)return s.a.cloneElement(a,u)}).filter(Boolean)})),o=kv(r).concat(kv(i));return this.renderContainer(t.groupComponent,o)}},{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,jv,t);if(this.shouldAnimate())return this.animateComponent(e,Rv);var n=this.renderBoxPlot(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(Iv,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryBoxPlot"}),Object.defineProperty(Iv,"role",{configurable:!0,enumerable:!0,writable:!0,value:"boxplot"}),Object.defineProperty(Iv,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.discreteTransitions()}),Object.defineProperty(Iv,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Tv(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{boxWidth:l.a.number,events:l.a.arrayOf(l.a.shape({target:l.a.oneOf(["max","maxLabels","median","medianLabels","min","minLabels","q1","q1Labels","q3","q3Labels","parent"]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),eventHandlers:l.a.object})),horizontal:l.a.bool,labelOrientation:l.a.oneOf(["top","bottom","left","right"]),labels:l.a.bool,max:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),maxComponent:l.a.element,maxLabelComponent:l.a.element,maxLabels:l.a.oneOfType([l.a.func,l.a.array,l.a.bool]),median:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),medianComponent:l.a.element,medianLabelComponent:l.a.element,medianLabels:l.a.oneOfType([l.a.func,l.a.array,l.a.bool]),min:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),minComponent:l.a.element,minLabelComponent:l.a.element,minLabels:l.a.oneOfType([l.a.func,l.a.array,l.a.bool]),q1:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),q1Component:l.a.element,q1LabelComponent:l.a.element,q1Labels:l.a.oneOfType([l.a.func,l.a.array,l.a.bool]),q3:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string,l.a.arrayOf(l.a.string)]),q3Component:l.a.element,q3LabelComponent:l.a.element,q3Labels:l.a.oneOfType([l.a.func,l.a.array,l.a.bool]),style:l.a.shape({boxes:l.a.object,labels:l.a.object,parent:l.a.object,max:l.a.object,maxLabels:l.a.object,median:l.a.object,medianLabels:l.a.object,min:l.a.object,minLabels:l.a.object,q1:l.a.object,q1Labels:l.a.object,q3:l.a.object,q3Labels:l.a.object,whiskers:l.a.object}),whiskerWidth:l.a.number})}),Object.defineProperty(Iv,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),data:[{x:1,min:5,q1:7,median:12,q3:18,max:20},{x:2,min:2,q1:5,median:8,q3:12,max:15}],dataComponent:s.a.createElement(ai,null),groupComponent:s.a.createElement("g",{role:"presentation"}),maxComponent:s.a.createElement(ki,null),maxLabelComponent:s.a.createElement(dr,null),medianComponent:s.a.createElement(di,null),medianLabelComponent:s.a.createElement(dr,null),minComponent:s.a.createElement(ki,null),minLabelComponent:s.a.createElement(dr,null),q1Component:s.a.createElement(ai,null),q1LabelComponent:s.a.createElement(dr,null),q3Component:s.a.createElement(ai,null),q3LabelComponent:s.a.createElement(dr,null),samples:50,scale:"linear",sortKey:"x",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(Iv,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:Sv}),Object.defineProperty(Iv,"getData",{configurable:!0,enumerable:!0,writable:!0,value:Ev}),Object.defineProperty(Iv,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Cv(t,jv)}}),Object.defineProperty(Iv,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["maxComponent","maxLabelComponent","medianComponent","medianLabelComponent","minComponent","minLabelComponent","q1Component","q1LabelComponent","q3Component","q3LabelComponent","groupComponent","containerComponent"]});var Lv=Xi(Iv,{components:[{name:"min"},{name:"minLabels"},{name:"max"},{name:"maxLabels"},{name:"median"},{name:"medianLabels"},{name:"q1"},{name:"q1Labels"},{name:"q3"},{name:"q3Labels"},{name:"parent",index:"parent"}]});function Dv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nv(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Bv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nv(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).clipId=rn()(t)&&void 0!==t.clipId?t.clipId:an()("voronoi-clip-"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Fv(t.prototype,e),n&&Fv(t,n)}(e,[{key:"getVoronoiPath",value:function(t){var e=t.polygon;return Array.isArray(e)&&e.length?"M ".concat(t.polygon.join("L")," Z"):""}},{key:"render",value:function(){var t=this.props,e=t.datum,n=t.active,r=t.role,i=t.shapeRendering,o=t.className,a=t.events,u=t.x,l=t.y,c=t.transform,f=t.pathComponent,p=t.clipPathComponent,h=t.groupComponent,d=t.circleComponent,y=t.id,v=this.getVoronoiPath(this.props),g=Ln.evaluateStyle(this.props.style,e,n),m=Ln.evaluateProp(this.props.size,e,n);if(m){var b=s.a.cloneElement(d,{key:"".concat(y,"-circle-clip"),style:g,className:o,role:r,shapeRendering:i,events:a,clipPath:"url(#".concat(this.clipId,")"),cx:u,cy:l,r:m}),_=s.a.cloneElement(p,{key:"".concat(y,"-voronoi-clip"),clipId:this.clipId},s.a.cloneElement(f,{d:v,className:o}));return s.a.cloneElement(h,{},[_,b])}return s.a.cloneElement(f,{style:g,className:o,d:v,role:r,shapeRendering:i,events:a,transform:c})}}]),e}();Object.defineProperty(Bv,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Dv(t,e,n[e])})}return t}({},ni.primitiveProps,{circleComponent:l.a.element,clipId:l.a.oneOfType([l.a.number,l.a.string]),clipPathComponent:l.a.element,datum:l.a.object,groupComponent:l.a.element,pathComponent:l.a.element,polygon:l.a.array,size:l.a.number,x:l.a.number,y:l.a.number})}),Object.defineProperty(Bv,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{pathComponent:s.a.createElement(xi,null),circleComponent:s.a.createElement(Dr,null),clipPathComponent:s.a.createElement(jr,null),groupComponent:s.a.createElement("g",null)}});var zv=function(t){return function(){return t}};function Uv(t){return t[0]}function Vv(t){return t[1]}function Gv(){this._=null}function Wv(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function qv(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Hv(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Xv(t){for(;t.L;)t=t.L;return t}Gv.prototype={constructor:Gv,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Xv(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(qv(this,n),n=(t=n).U),n.C=!1,r.C=!0,Hv(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Hv(this,n),n=(t=n).U),n.C=!1,r.C=!0,qv(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Xv(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,qv(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Hv(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,qv(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Hv(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,qv(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Hv(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Zv=Gv;function Yv(t,e,n,r){var i=[null,null],o=gg.push(i)-1;return i.left=t,i.right=e,n&&Jv(i,t,e,n),r&&Jv(i,e,t,r),yg[t.index].halfedges.push(o),yg[e.index].halfedges.push(o),i}function Kv(t,e,n){var r=[e,n];return r.left=t,r}function Jv(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Qv(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],l=a[1],c=0,f=1,p=s[0]-u,h=s[1]-l;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<f&&(f=o)}else if(p>0){if(o>f)return;o>c&&(c=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>f)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<f&&(f=o)}if(o=n-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=i-l,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}return!(c>0||f<1)||(c>0&&(t[0]=[u+c*p,l+c*h]),f<1&&(t[1]=[u+f*p,l+f*h]),!0)}}}}}function $v(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],l=t.left,c=t.right,f=l[0],p=l[1],h=c[0],d=c[1],y=(f+h)/2,v=(p+d)/2;if(d===p){if(y<e||y>=r)return;if(f>h){if(u){if(u[1]>=i)return}else u=[y,n];o=[y,i]}else{if(u){if(u[1]<n)return}else u=[y,i];o=[y,n]}}else if(s=v-(a=(f-h)/(d-p))*y,a<-1||a>1)if(f>h){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function tg(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function eg(t,e){return e[+(e.left!==t.site)]}function ng(t,e){return e[+(e.left===t.site)]}var rg,ig=[];function og(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,f=o[1]-s,p=2*(u*f-l*c);if(!(p>=-bg)){var h=u*u+l*l,d=c*c+f*f,y=(f*h-l*d)/p,v=(u*d-c*h)/p,g=ig.pop()||new function(){Wv(this),this.x=this.y=this.arc=this.site=this.cy=null};g.arc=t,g.site=i,g.x=y+a,g.y=(g.cy=v+s)+Math.sqrt(y*y+v*v),t.circle=g;for(var m=null,b=vg._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){m=b.P;break}b=b.L}else{if(!b.R){m=b;break}b=b.R}vg.insert(m,g),m||(rg=g)}}}}function ag(t){var e=t.circle;e&&(e.P||(rg=e.N),vg.remove(e),ig.push(e),Wv(e),t.circle=null)}var sg=[];function ug(t){var e=sg.pop()||new function(){Wv(this),this.edge=this.site=this.circle=null};return e.site=t,e}function lg(t){ag(t),dg.remove(t),sg.push(t),Wv(t)}function cg(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];lg(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<mg&&Math.abs(r-u.circle.cy)<mg;)o=u.P,s.unshift(u),lg(u),u=o;s.unshift(u),ag(u);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<mg&&Math.abs(r-l.circle.cy)<mg;)a=l.N,s.push(l),lg(l),l=a;s.push(l),ag(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],Jv(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=Yv(u.site,l.site,null,i),og(u),og(l)}function fg(t){for(var e,n,r,i,o=t[0],a=t[1],s=dg._;s;)if((r=pg(s,a)-o)>mg)s=s.L;else{if(!((i=o-hg(s,a))>mg)){r>-mg?(e=s.P,n=s):i>-mg?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){yg[t.index]={site:t,halfedges:[]}}(t);var u=ug(t);if(dg.insert(e,u),e||n){if(e===n)return ag(e),n=ug(e.site),dg.insert(u,n),u.edge=n.edge=Yv(e.site,u.site),og(e),void og(n);if(n){ag(e),ag(n);var l=e.site,c=l[0],f=l[1],p=t[0]-c,h=t[1]-f,d=n.site,y=d[0]-c,v=d[1]-f,g=2*(p*v-h*y),m=p*p+h*h,b=y*y+v*v,_=[(v*m-h*b)/g+c,(p*b-y*m)/g+f];Jv(n.edge,l,d,_),u.edge=Yv(l,t,null,_),n.edge=Yv(t,d,null,_),og(e),og(n)}else u.edge=Yv(e.site,u.site)}}function pg(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,f=1/o-1/l,p=c/l;return f?(-p+Math.sqrt(p*p-2*f*(c*c/(-2*l)-u+l/2+i-o/2)))/f+r:(r+s)/2}function hg(t,e){var n=t.N;if(n)return pg(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var dg,yg,vg,gg,mg=1e-6,bg=1e-12;function _g(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function xg(t,e){return e[1]-t[1]||e[0]-t[0]}function wg(t,e){var n,r,i,o=t.sort(xg).pop();for(gg=[],yg=new Array(t.length),dg=new Zv,vg=new Zv;;)if(i=rg,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(fg(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;cg(i.arc)}if(function(){for(var t,e,n,r,i=0,o=yg.length;i<o;++i)if((t=yg[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=tg(t,gg[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=gg.length;o--;)$v(i=gg[o],t,e,n,r)&&Qv(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>mg||Math.abs(i[0][1]-i[1][1])>mg)||delete gg[o]}(a,s,u,l),function(t,e,n,r){var i,o,a,s,u,l,c,f,p,h,d,y,v=yg.length,g=!0;for(i=0;i<v;++i)if(o=yg[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)gg[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)d=(h=ng(o,gg[u[s]]))[0],y=h[1],f=(c=eg(o,gg[u[++s%l]]))[0],p=c[1],(Math.abs(d-f)>mg||Math.abs(y-p)>mg)&&(u.splice(s,0,gg.push(Kv(a,h,Math.abs(d-t)<mg&&r-y>mg?[t,Math.abs(f-t)<mg?p:r]:Math.abs(y-r)<mg&&n-d>mg?[Math.abs(p-r)<mg?f:n,r]:Math.abs(d-n)<mg&&y-e>mg?[n,Math.abs(f-n)<mg?p:e]:Math.abs(y-e)<mg&&d-t>mg?[Math.abs(p-e)<mg?f:t,e]:null))-1),++l);l&&(g=!1)}if(g){var m,b,_,x=1/0;for(i=0,g=null;i<v;++i)(o=yg[i])&&(_=(m=(a=o.site)[0]-t)*m+(b=a[1]-e)*b)<x&&(x=_,g=o);if(g){var w=[t,e],E=[t,r],O=[n,r],S=[n,e];g.halfedges.push(gg.push(Kv(a=g.site,w,E))-1,gg.push(Kv(a,E,O))-1,gg.push(Kv(a,O,S))-1,gg.push(Kv(a,S,w))-1)}}for(i=0;i<v;++i)(o=yg[i])&&(o.halfedges.length||delete yg[i])}(a,s,u,l)}this.edges=gg,this.cells=yg,dg=vg=gg=yg=null}wg.prototype={constructor:wg,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return eg(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,l=e[i[o-1]],c=l.left===s?l.right:l.left;++u<o;)a=c,c=(l=e[i[u]]).left===s?l.right:l.left,a&&c&&r<a.index&&r<c.index&&_g(s,a,c)<0&&t.push([s.data,a.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],f=u*u+l*l;f<c&&(c=f,a=s.index)}})}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};var Eg=function(){var t=Uv,e=Vv,n=null;function r(r){return new wg(r.map(function(n,i){var o=[Math.round(t(n,i,r)/mg)*mg,Math.round(e(n,i,r)/mg)*mg];return o.index=i,o.data=n,o}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:zv(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:zv(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r};function Og(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Sg=function(t,e,n){var r=[Math.min.apply(Math,Og(e.x)),Math.min.apply(Math,Og(e.y))],i=[Math.max.apply(Math,Og(e.x)),Math.max.apply(Math,Og(e.y))];return Eg().x(function(e){return t.polar?function(t){return-1*n.x(void 0!==t._x1?t._x1:t._x)+Math.PI/2}(e):function(t){return n.x(void 0!==t._x1?t._x1:t._x)}(e)}).y(function(t){return n.y(void 0!==t._y1?t._y1:t._y)}).extent([r,i])},Pg=function(t,e){var n=Ln.modifyProps(t,e,"scatter"),r=t=cn()({},n,function(t){var e=t.theme&&t.theme.voronoi&&t.theme.voronoi.style?t.theme.voronoi.style:{},n=Ln.getStyles(t.style,e),r=vl.getData(t),i={x:Ln.getRange(t,"x"),y:Ln.getRange(t,"y")},o={x:Il.getDomain(t,"x"),y:Il.getDomain(t,"y")},a={x:el.getBaseScale(t,"x").domain(o.x).range(i.x),y:el.getBaseScale(t,"y").domain(o.y).range(i.y)};return{domain:o,data:r,scale:a,style:n,polygons:Sg(t,i,a).polygons(r),origin:t.polar?t.origin||Ln.getPolarOrigin(t):void 0}}(n)),i=r.data,o=r.domain,a=r.events,s=r.height,u=r.origin,l=r.padding,c=r.polar,f=r.polygons,p=r.scale,h=r.sharedEvents,d=r.standalone,y=r.style,v=r.theme,g=r.width,m=r.labels,b=r.name,_={parent:{style:y.parent,scale:p,domain:o,data:i,standalone:d,height:s,width:g,theme:v,origin:u,polar:c,padding:l,name:b}};return i.reduce(function(e,n,r){var o=Mi()(f[r],"data"),s=n.eventKey,l=Ln.scalePoint(t,n),c={x:l.x,y:l.y,datum:n,data:i,index:r,scale:p,polygon:o,origin:u,size:t.size,style:y.data};e[s]={data:c};var d=Qn.getText(t,n,r);return(void 0!==d&&null!==d||m&&(a||h))&&(e[s].labels=Qn.getProps(t,r)),e},_)};function Cg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kg(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Ag={width:450,height:300,padding:50},Mg=["data","domain","height","padding","samples","size","style","width"],jg=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kg(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Tg(t.prototype,e),n&&Tg(t,n)}(e,[{key:"shouldAnimate",value:function(){return!!this.props.animate}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,Ag,t);if(this.shouldAnimate())return this.animateComponent(e,Mg);var n=this.renderData(e);return e.standalone?this.renderContainer(e.containerComponent,n):n}}]),e}();Object.defineProperty(jg,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryVoronoi"}),Object.defineProperty(jg,"role",{configurable:!0,enumerable:!0,writable:!0,value:"voronoi"}),Object.defineProperty(jg,"defaultTransitions",{configurable:!0,enumerable:!0,writable:!0,value:gl.discreteTransitions()}),Object.defineProperty(jg,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Cg(t,e,n[e])})}return t}({},ni.baseProps,ni.dataProps,{size:xn.nonNegative})}),Object.defineProperty(jg,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{containerComponent:s.a.createElement(zn,null),dataComponent:s.a.createElement(Bv,null),labelComponent:s.a.createElement(dr,null),groupComponent:s.a.createElement("g",{role:"presentation"}),samples:50,scale:"linear",sortOrder:"ascending",standalone:!0,theme:ti.grayscale}}),Object.defineProperty(jg,"getDomain",{configurable:!0,enumerable:!0,writable:!0,value:Il.getDomain}),Object.defineProperty(jg,"getData",{configurable:!0,enumerable:!0,writable:!0,value:vl.getData}),Object.defineProperty(jg,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Pg(t,Ag)}}),Object.defineProperty(jg,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["dataComponent","labelComponent","groupComponent","containerComponent"]});var Rg=Xi(jg);function Ig(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lg(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dg(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Fg=function(t){var e=t.scale,n=void 0===e?{}:e,r=t.dimension,i=void 0===r?"x":r;if(n[i])return n[i];var o=el.getBaseScale(t,i),a=Ln.getRange(t,i),s=Il.getDomainFromProps(t,i)||[0,1];return o.range(a).domain(s),o},Ng=function(t,e){var n=Fg(t);return[n(Math.min.apply(Math,Dg(e))),n(Math.max.apply(Math,Dg(e)))]},Bg=function(t,e){var n=Fg(t);return[n.invert(Math.min.apply(Math,Dg(e))),n.invert(Math.max.apply(Math,Dg(e)))]},zg=function(t){return Fg(t).range()},Ug=function(t){return Fg(t).domain()},Vg=function(t,e){return t>=Math.min.apply(Math,Dg(e))&&t<=Math.max.apply(Math,Dg(e))},Gg=function(t,e,n){var r=t.handleWidth/2,i=t.dimension,o=["min","max"].reduce(function(t,o){return t[o]=Vg(e,function(t){var e={min:"x"===i?Math.min.apply(Math,Dg(n)):Math.max.apply(Math,Dg(n)),max:"x"===i?Math.max.apply(Math,Dg(n)):Math.min.apply(Math,Dg(n))};return[e[t]-r,e[t]+r]}(o))?o:void 0,t},{});return o.min&&o.max?"both":o.min||o.max},Wg={stroke:"none",fill:"black",opacity:function(t,e){return e?.2:.1}},qg={pointerEvents:"none",stroke:"none",fill:"black",opacity:function(t,e){return e?.4:.3}},Hg={pointerEvents:"none",stroke:"none",fill:"none"},Xg=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lg(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Ig(t.prototype,e),n&&Ig(t,n)}(e,[{key:"getRectDimensions",value:function(t,e,n){var r=t.dimension,i=t.brushDomain;n=n||i||Ug(t);var o=Ng(t,n),a="x"===r?{y1:t.y1,y2:t.y2,x1:Math.min.apply(Math,Dg(o)),x2:Math.max.apply(Math,Dg(o))}:{x1:t.x1,x2:t.x2,y1:Math.min.apply(Math,Dg(o)),y2:Math.max.apply(Math,Dg(o))},s=a.x1,u=a.x2,l=a.y1,c=a.y2,f="x"===r?0:e/2,p="y"===r?0:e/2,h=Math.min(s,u)-f,d=Math.min(l,c)-p;return{x:h,y:d,width:Math.max(s,u)+f-h,height:Math.max(l,c)+p-d}}},{key:"getHandleDimensions",value:function(t){var e=t.dimension,n=t.handleWidth,r=t.x1,i=t.x2,o=t.y1,a=t.y2,s=t.brushDomain,u=t.brushWidth||t.width,l=s||Ug(t),c=Ng(t,l),f=Math.min(r,i)-u/2,p=Math.min(o,a)-u/2,h={min:"x"===e?Math.min.apply(Math,Dg(c))-n/2:f,max:"x"===e?Math.max.apply(Math,Dg(c))-n/2:f},d={min:"y"===e?Math.max.apply(Math,Dg(c))-n/2:p,max:"y"===e?Math.min.apply(Math,Dg(c))-n/2:p},y="x"===e?n:u,v="x"===e?u:n;return{min:{x:h.min,y:d.min,width:y,height:v},max:{x:h.max,y:d.max,width:y,height:v}}}},{key:"getCursor",value:function(t){var e=t.dimension,n=t.activeBrushes,r=void 0===n?{}:n;return r.minHandle||r.maxHandle?"x"===e?"ew-resize":"ns-resize":r.brush?"move":"crosshair"}},{key:"renderHandles",value:function(t){var e=t.handleComponent,n=t.handleStyle,r=t.id,i=t.brushDomain,o=t.datum,a=void 0===o?{}:o,u=t.activeBrushes,l=void 0===u?{}:u;if(!i)return null;var c=this.getHandleDimensions(t),f=cn()({},Hg,n),p=cn()({handleValue:mr.getMinValue(i)},a),h=cn()({handleValue:mr.getMaxValue(i)},a),d=cn()({key:"".concat(r,"-min"),style:Ln.evaluateStyle(f,p,l.minHandle)},c.min),y=cn()({key:"".concat(r,"-max"),style:Ln.evaluateStyle(f,h,l.maxHandle)},c.max);return[s.a.cloneElement(e,d),s.a.cloneElement(e,y)]}},{key:"renderBrush",value:function(t){var e=t.brushComponent,n=t.brushStyle,r=t.activeBrushes,i=void 0===r?{}:r,o=t.datum,a=void 0===o?{}:o;if(!t.brushDomain)return null;var u=t.brushWidth||t.width,l=this.getRectDimensions(t,u),c=cn()({},qg,n),f=Ln.evaluateStyle(c,a,i.brush),p=cn()({style:f},l);return s.a.cloneElement(e,p)}},{key:"renderBrushArea",value:function(t){var e=t.brushAreaComponent,n=t.brushAreaStyle,r=t.activeBrushes,i=void 0===r?{}:r,o=t.datum,a=void 0===o?{}:o,u=t.brushAreaWidth||t.width,l=this.getCursor(t),c=this.getRectDimensions(t,u,Ug(t)),f=cn()({cursor:l},Wg,n),p=Ln.evaluateStyle(f,a,i.brushArea),h=cn()({style:p},c);return s.a.cloneElement(e,h)}},{key:"renderLine",value:function(t){var e=Pn()(t,["x1","x2","y1","y2","datum","scale","active","style"]);return s.a.cloneElement(t.lineComponent,e)}},{key:"render",value:function(){return s.a.createElement("g",this.props.events,this.renderLine(this.props),this.renderBrushArea(this.props),this.renderBrush(this.props),this.renderHandles(this.props))}}]),e}();Object.defineProperty(Xg,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{allowDrag:l.a.bool,allowDraw:l.a.bool,allowResize:l.a.bool,brushAreaComponent:l.a.element,brushAreaStyle:l.a.object,brushAreaWidth:l.a.number,brushComponent:l.a.element,brushDimension:l.a.oneOf(["x","y"]),brushDomain:l.a.array,brushStyle:l.a.object,brushWidth:l.a.number,className:l.a.string,dimension:l.a.oneOf(["x","y"]),disable:l.a.bool,events:l.a.object,groupComponent:l.a.element,handleComponent:l.a.element,handleStyle:l.a.object,handleWidth:l.a.number,id:l.a.oneOfType([l.a.number,l.a.string]),lineComponent:l.a.element,name:l.a.string,onBrushDomainChange:l.a.func,scale:l.a.object,style:l.a.object,type:l.a.string,width:l.a.number}}),Object.defineProperty(Xg,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{allowDrag:!0,allowDraw:!0,allowResize:!0,brushAreaComponent:s.a.createElement(ai,null),brushComponent:s.a.createElement(ai,null),groupComponent:s.a.createElement("g",null),handleComponent:s.a.createElement(ai,null),handleWidth:10,lineComponent:s.a.createElement(di,null),width:10}}),Object.defineProperty(Xg,"defaultEvents",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return t.disable?void 0:[{target:t.type,eventHandlers:{onMouseEnter:function(t,e){t.preventDefault();var n=e.dimension,r=e.allowResize,i=e.brushDomain,o=e.parentSVG||Nl.getParentSVG(t),a=Nl.getSVGEventCoordinates(t,o)[n],s=Ug(e),u=i||s,l=Ng(e,u),c=r&&Gg(e,a,l),f={brushArea:!e.brushDomain,brush:Vg(a,l)&&!nr()(s,u),minHandle:"min"===c||"both"===c,maxHandle:"min"===c||"both"===c};return[{mutation:function(){return{activeBrushes:f,brushDomain:e.brushDomain,parentSVG:o}}}]},onMouseDown:function(t,e){t.preventDefault();var n=e.allowResize,r=e.allowDrag,i=e.allowDraw,o=e.dimension,a=e.activeBrushes,s=e.brushDomain;if(!n&&!r)return[];var u=Ug(e),l=s||u,c=e.parentSVG||Nl.getParentSVG(t),f=Nl.getSVGEventCoordinates(t,c)[o],p=Ng(e,l),h=n&&Gg(e,f,p);return h?[{mutation:function(){return{parentSVG:c,isSelecting:!0,activeHandle:h,brushDomain:l,startPosition:f,activeBrushes:a}}}]:Vg(f,p)&&!nr()(u,l)?[{mutation:function(){return{isPanning:r,startPosition:f,brushDomain:l,activeBrushes:a,parentSVG:c}}}]:i?[{mutation:function(){return{isSelecting:n,brushDomain:null,startPosition:f,activeBrushes:a,parentSVG:c}}}]:[]},onMouseMove:function(t,e){var n=e.isPanning,r=e.isSelecting,i=e.allowResize,o=e.allowDrag,a=e.dimension,s=e.onBrushDomainChange,u=e.brushDomain;(n||r)&&(t.preventDefault(),t.stopPropagation());var l=e.parentSVG||Nl.getParentSVG(t),c=Nl.getSVGEventCoordinates(t,l)[a],f=Ug(e),p=u||f,h=Ng(e,p),d=Gg(e,c,h),y={brushArea:!e.brushDomain,brush:Vg(c,h)&&!nr()(f,p),minHandle:"min"===d||"both"===d,maxHandle:"max"===d||"both"===d};if(!e.isPanning&&!e.isSelecting)return[{mutation:function(){return{activeBrushes:y,brushDomain:e.brushDomain,parentSVG:l}}}];if(o&&n){var v=zg(e),g=function(t,e){var n=t.brushDomain,r=t.startPosition,i=Ng(t,n),o=zg(t),a=Math.abs(i[1]-i[0]),s=Math.min.apply(Math,Dg(o)),u=Math.max.apply(Math,Dg(o)),l=r?r-e:0,c=Math.min.apply(Math,Dg(i))-l,f=Math.max.apply(Math,Dg(i))-l;return[c>u-a?u-a:Math.max(c,s),f<s+a?s+a:Math.min(f,u)]}(e,c),m=Bg(e,g),b={startPosition:Math.max.apply(Math,Dg(g))>=Math.max.apply(Math,Dg(v))||Math.min.apply(Math,Dg(g))<=Math.min.apply(Math,Dg(v))?e.startPosition:c,isPanning:!0,brushDomain:m,activeBrushes:{brush:!0},parentSVG:l};return dn()(s)&&s(m,un()({},b,e)),[{mutation:function(){return b}}]}if(i&&r){var _=u||[0,1/Number.MAX_SAFE_INTEGER],x=Ng(e,_),w="min"===e.activeHandle?"max":"min",E=e.activeHandle&&"both"===Gg(e,c,x)?w:e.activeHandle;if(E){var O="x"===a?Math.max.apply(Math,Dg(x)):Math.min.apply(Math,Dg(x)),S="x"===a?Math.min.apply(Math,Dg(x)):Math.max.apply(Math,Dg(x));_=Bg(e,["max"===E?S:c,"min"===E?O:c])}else _=Bg(e,[e.startPosition,c]);var P={brushDomain:_,startPosition:e.startPosition,isSelecting:r,activeHandle:E,parentSVG:l,activeBrushes:{brush:!0,minHandle:"min"===d,maxHandle:"max"===d}};return dn()(s)&&s(_,un()({},P,e)),[{mutation:function(){return P}}]}return[]},onMouseUp:function(t,e){var n=e.onBrushDomainChange,r=e.brushDomain,i=e.allowResize,o={isPanning:!1,isSelecting:!1,activeHandle:null,startPosition:null,brushDomain:r,activeBrushes:e.activeBrushes};return i&&dn()(n)&&n(r,un()({},o,e)),[{mutation:function(){return o}}]},onMouseLeave:function(t,e){var n=e.brushDomain;return[{mutation:function(){return{isPanning:!1,isSelecting:!1,activeHandle:null,startPosition:null,brushDomain:n,activeBrushes:{}}}}]}}}]}});var Zg=n(91),Yg=n.n(Zg),Kg=n(67),Jg=n.n(Kg);function Qg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){$g(t,e,n[e])})}return t}function $g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tm(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var em={withinBounds:function(t,e,n){var r=Yg()(e,Number),i=r.x1,o=r.x2,a=r.y1,s=r.y2,u=Yg()(t,Number),l=u.x,c=u.y;return l+(n=n?n/2:0)>=Math.min(i,o)&&l-n<=Math.max(i,o)&&c+n>=Math.min(a,s)&&c-n<=Math.max(a,s)},getDomainBox:function(t,e,n){var r=t.brushDimension;e=un()({},e,t.domain),n=un()({},n,e);var i=Nl.getDomainCoordinates(t,e),o=Nl.getDomainCoordinates(t,n);return{x1:"y"!==r?Math.min.apply(Math,tm(o.x)):Math.min.apply(Math,tm(i.x)),x2:"y"!==r?Math.max.apply(Math,tm(o.x)):Math.max.apply(Math,tm(i.x)),y1:"x"!==r?Math.min.apply(Math,tm(o.y)):Math.min.apply(Math,tm(i.y)),y2:"x"!==r?Math.max.apply(Math,tm(o.y)):Math.max.apply(Math,tm(i.y))}},getHandles:function(t,e){var n=e.x1,r=e.x2,i=e.y1,o=e.y2,a=Math.min(n,r),s=Math.max(n,r),u=Math.min(i,o),l=Math.max(i,o),c=t.handleWidth/2;return{left:{x1:a-c,x2:a+c,y1:i,y2:o},right:{x1:s-c,x2:s+c,y1:i,y2:o},top:{x1:n,x2:r,y1:u+c,y2:u-c},bottom:{x1:n,x2:r,y1:l+c,y2:l-c}}},getActiveHandles:function(t,e,n){var r=this,i=this.getHandles(e,n),o=["top","bottom","left","right"].reduce(function(e,n){return e=r.withinBounds(t,i[n])?e.concat(n):e},[]);return o.length&&o},getResizeMutation:function(t,e){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,a={left:{x1:Math.max(n,i),x2:Math.min(n,i),y1:r,y2:o},right:{x1:Math.min(n,i),x2:Math.max(n,i),y1:r,y2:o},top:{y1:Math.max(r,o),y2:Math.min(r,o),x1:n,x2:i},bottom:{y1:Math.min(r,o),y2:Math.max(r,o),x1:n,x2:i}};return e.reduce(function(t,e){return cn()(t,a[e])},{})},getMinimumDomain:function(){return{x:[0,1/Number.MAX_SAFE_INTEGER],y:[0,1/Number.MAX_SAFE_INTEGER]}},getDefaultBrushArea:function(t,e,n){return"none"===t?this.getMinimumDomain():"disable"===t?n:e},getSelectionMutation:function(t,e,n){var r=t.x,i=t.y,o=e.x1,a=e.x2,s=e.y1,u=e.y2;return{x1:"y"!==n?r:o,y1:"x"!==n?i:s,x2:"y"!==n?r:a,y2:"x"!==n?i:u}},panBox:function(t,e){var n=t.brushDimension,r=t.domain,i=t.startX,o=t.startY,a=un()({},t.brushDomain,r),s=un()({},t.fullDomain,r),u=t.x1?t:this.getDomainBox(t,s,a),l=u.x1,c=u.x2,f=u.y1,p=u.y2,h=e.x,d=e.y,y=i?i-h:0,v=o?o-d:0;return{x1:"y"!==n?Math.min(l,c)-y:Math.min(l,c),x2:"y"!==n?Math.max(l,c)-y:Math.max(l,c),y1:"x"!==n?Math.min(f,p)-v:Math.min(f,p),y2:"x"!==n?Math.max(f,p)-v:Math.max(f,p)}},constrainBox:function(t,e){var n=Yg()(e,Number),r=n.x1,i=n.y1,o=n.x2,a=n.y2;return{x1:t.x2>o?o-Math.abs(t.x2-t.x1):Math.max(t.x1,r),y1:t.y2>a?a-Math.abs(t.y2-t.y1):Math.max(t.y1,i),x2:t.x1<r?r+Math.abs(t.x2-t.x1):Math.min(t.x2,o),y2:t.y1<i?i+Math.abs(t.y2-t.y1):Math.min(t.y2,a)}},onMouseDown:function(t,e){var n=this;t.preventDefault();var r=e.brushDimension,i=e.handleWidth,o=e.cachedBrushDomain,a=e.domain,s=e.allowResize,u=e.allowDrag,l=e.allowDraw;if(!s&&!u)return{};var c=e.fullDomainBox||this.getDomainBox(e,a),f=e.parentSVG||Nl.getParentSVG(t),p=Nl.getSVGEventCoordinates(t,f),h=p.x,d=p.y;if(!this.withinBounds({x:h,y:d},c,i))return{};var y=un()({},e.brushDomain,a),v=nr()(y,o)?e.currentDomain||y||a:y||a,g=this.getDomainBox(e,a,v),m=s&&this.getActiveHandles({x:h,y:d},e,g);return m?[{target:"parent",mutation:function(){return Qg({isSelecting:!0,domainBox:g,fullDomainBox:c,cachedBrushDomain:y,currentDomain:v,parentSVG:f},n.getResizeMutation(g,m))}}]:this.withinBounds({x:h,y:d},g)&&!nr()(a,v)?[{target:"parent",mutation:function(){return Qg({isPanning:u,startX:h,startY:d,domainBox:g,fullDomainBox:c,currentDomain:v,cachedBrushDomain:y,parentSVG:f},g)}}]:l?[{target:"parent",mutation:function(){return Qg({isSelecting:s,domainBox:g,fullDomainBox:c,parentSVG:f,cachedBrushDomain:y,cachedCurrentDomain:v,currentDomain:n.getMinimumDomain()},n.getSelectionMutation({x:h,y:d},g,r))}}]:{}},onMouseMove:function(t,e){if(!e.isPanning&&!e.isSelecting)return{};var n=e.brushDimension,r=e.scale,i=e.isPanning,o=e.isSelecting,a=e.fullDomainBox,s=e.onBrushDomainChange,u=e.allowResize,l=e.allowDrag,c=e.parentSVG||Nl.getParentSVG(t),f=Nl.getSVGEventCoordinates(t,c),p=f.x,h=f.y;if(!u&&!l||!this.withinBounds({x:p,y:h},a))return{};if(l&&i){var d=e.startX,y=e.startY,v=this.panBox(e,{x:p,y:h}),g=this.constrainBox(v,a),m=Nl.getBounds(Qg({},g,{scale:r})),b=Qg({currentDomain:m,parentSVG:c,startX:v.x2>=a.x2||v.x1<=a.x1?d:p,startY:v.y2>=a.y2||v.y1<=a.y1?y:h},g);return dn()(s)&&s(m,un()({},b,e)),[{target:"parent",mutation:function(){return b}}]}if(u&&o){var _="y"!==n?p:e.x2,x="x"!==n?h:e.y2,w=Nl.getBounds({x2:_,y2:x,x1:e.x1,y1:e.y1,scale:r}),E={x2:_,y2:x,currentDomain:w,parentSVG:c};return dn()(s)&&s(w,un()({},E,e)),[{target:"parent",mutation:function(){return E}}]}return{}},onMouseUp:function(t,e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.isPanning,s=e.isSelecting,u=e.onBrushDomainChange,l=e.onBrushDomainChangeEnd,c=e.onBrushCleared,f=e.domain,p=e.allowResize,h=e.allowDrag,d=e.defaultBrushArea,y=void 0!==d&&"none"!==d,v=e.cachedCurrentDomain||e.currentDomain,g=this.getDefaultBrushArea(d,f,v),m={isPanning:!1,isSelecting:!1};return!p&&!y||n!==i&&r!==o?(h&&a||p&&s)&&dn()(l)&&l(g,un()({},m,e)):(m.currentDomain=g,dn()(u)&&u(g,un()({},m,e)),dn()(l)&&l(g,un()({},m,e)),dn()(c)&&c(g,un()({},m,e))),[{target:"parent",mutation:function(){return m}}]},onMouseLeave:function(t){return"svg"===t.target.nodeName?[{target:"parent",mutation:function(){return{isPanning:!1,isSelecting:!1}}}]:[]}},nm=Qg({},em,{onMouseDown:em.onMouseDown.bind(em),onMouseUp:em.onMouseUp.bind(em),onMouseLeave:em.onMouseLeave.bind(em),onMouseMove:Jg()(em.onMouseMove.bind(em),16,{leading:!0,trailing:!1})});function rm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){im(t,e,n[e])})}return t}function im(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function om(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function am(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sm(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var um=function(t){var e,n;return n=e=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),sm(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),function(t,e,n){e&&am(t.prototype,e),n&&am(t,n)}(n,[{key:"getSelectBox",value:function(t,e){var n=e.x,r=e.y,i=t.brushStyle,o=t.brushComponent,a=t.name,u=o.props&&o.props.style,l=t.allowDrag||t.allowResize?"move":"auto";return n[0]!==n[1]&&r[0]!==r[1]?s.a.cloneElement(o,{key:"".concat(a,"-brush"),width:Math.abs(n[1]-n[0])||1,height:Math.abs(r[1]-r[0])||1,x:Math.min(n[0],n[1]),y:Math.min(r[0],r[1]),cursor:l,style:un()({},u,i)}):null}},{key:"getCursorPointers",value:function(t){var e={yProps:"ns-resize",xProps:"ew-resize"};return!t.allowResize&&t.allowDrag?(e.xProps="move",e.yProps="move"):t.allowResize||t.allowDrag||(e.xProps="auto",e.yProps="auto"),e}},{key:"getHandles",value:function(t,e){var n=t.brushDimension,r=t.handleWidth,i=t.handleStyle,o=t.handleComponent,a=t.name,u=e.x,l=e.y,c=Math.abs(u[1]-u[0])||1,f=Math.abs(l[1]-l[0])||1,p=o.props&&o.props.style||{},h=un()({},p,i),d=this.getCursorPointers(t),y={style:h,width:c,height:r,cursor:d.yProps},v={style:h,width:r,height:f,cursor:d.xProps},g={top:"x"!==n&&cn()({x:u[0],y:l[1]-r/2},y),bottom:"x"!==n&&cn()({x:u[0],y:l[0]-r/2},y),left:"y"!==n&&cn()({y:l[1],x:u[0]-r/2},v),right:"y"!==n&&cn()({y:l[1],x:u[1]-r/2},v)},m=["top","bottom","left","right"].reduce(function(t,e){return t=g[e]?t.concat(s.a.cloneElement(o,cn()({key:"".concat(a,"-handle-").concat(e)},g[e]))):t},[]);return m.length?m:null}},{key:"getRect",value:function(t){var e=t.currentDomain,n=t.cachedBrushDomain,r=un()({},t.brushDomain,t.domain),i=nr()(r,n)?un()({},e,r):r,o=Nl.getDomainCoordinates(t,i),a=this.getSelectBox(t,o);return a?[a,this.getHandles(t,o)]:[]}},{key:"getChildren",value:function(t){return om(s.a.Children.toArray(t.children)).concat(om(this.getRect(t)))}}]),n}(),Object.defineProperty(e,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryBrushContainer"}),Object.defineProperty(e,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:rm({},zn.propTypes,{allowDrag:l.a.bool,allowDraw:l.a.bool,allowResize:l.a.bool,brushComponent:l.a.element,brushDimension:l.a.oneOf(["x","y"]),brushDomain:l.a.shape({x:l.a.array,y:l.a.array}),brushStyle:l.a.object,defaultBrushArea:l.a.oneOf(["all","disable","none"]),disable:l.a.bool,handleComponent:l.a.element,handleStyle:l.a.object,handleWidth:l.a.number,onBrushCleared:l.a.func,onBrushDomainChange:l.a.func,onBrushDomainChangeEnd:l.a.func})}),Object.defineProperty(e,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:rm({},zn.defaultProps,{allowDrag:!0,allowDraw:!0,allowResize:!0,brushComponent:s.a.createElement("rect",null),brushStyle:{stroke:"transparent",fill:"black",fillOpacity:.1},handleComponent:s.a.createElement("rect",null),handleStyle:{stroke:"transparent",fill:"transparent"},handleWidth:8})}),Object.defineProperty(e,"defaultEvents",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return[{target:"parent",eventHandlers:{onMouseDown:function(e,n){return t.disable?{}:nm.onMouseDown(e,n)},onTouchStart:function(e,n){return t.disable?{}:nm.onMouseDown(e,n)},onMouseMove:function(e,n){return t.disable?{}:nm.onMouseMove(e,n)},onTouchMove:function(e,n){return t.disable?{}:nm.onMouseMove(e,n)},onMouseUp:function(e,n){return t.disable?{}:nm.onMouseUp(e,n)},onTouchEnd:function(e,n){return t.disable?{}:nm.onMouseUp(e,n)},onMouseLeave:function(e,n){return t.disable?{}:nm.onMouseLeave(e,n)},onTouchCancel:function(e,n){return t.disable?{}:nm.onMouseLeave(e,n)}}}]}}),n},lm=um(zn),cm={withinBounds:function(t,e){var n=Yg()(e,Number),r=n.x1,i=n.x2,o=n.y1,a=n.y2,s=Yg()(t,Number),u=s.x,l=s.y;return u>=Math.min(r,i)&&u<=Math.max(r,i)&&l>=Math.min(o,a)&&l<=Math.max(o,a)},onMouseMove:function(t,e){var n=e.onCursorChange,r=e.cursorDimension,i=e.domain,o=e.parentSVG||Nl.getParentSVG(t),a=Nl.getSVGEventCoordinates(t,o),s=Nl.getDataCoordinates(e,e.scale,a.x,a.y),u=this.withinBounds(s,{x1:i.x[0],x2:i.x[1],y1:i.y[0],y2:i.y[1]});(u||(s=null),dn()(n))&&(u?n(r?s[r]:s,e):s!==e.cursorValue&&n(e.defaultCursorValue||null,e));return[{target:"parent",eventKey:"parent",mutation:function(){return{cursorValue:s,parentSVG:o}}}]},onTouchEnd:function(t,e){var n=e.onCursorChange;return dn()(e.onCursorChange)&&n(null,e),[{target:"parent",eventKey:"parent",mutation:function(){return{cursorValue:null}}}]}},fm={onMouseMove:Jg()(cm.onMouseMove.bind(cm),32,{leading:!0,trailing:!1}),onTouchEnd:cm.onTouchEnd.bind(cm)};function pm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){dm(t,e,n[e])})}return t}function hm(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function dm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ym(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vm(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var gm=function(t){var e,n;return n=e=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),vm(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),function(t,e,n){e&&ym(t.prototype,e),n&&ym(t,n)}(n,[{key:"getCursorPosition",value:function(t){var e=t.cursorValue,n=t.defaultCursorValue,r=t.cursorDimension,i=t.domain;return e||("number"==typeof n?dm({x:(i.x[0]+i.x[1])/2,y:(i.y[0]+i.y[1])/2},r,n):n)}},{key:"getCursorLabelOffset",value:function(t){var e=t.cursorLabelOffset;return"number"==typeof e?{x:e,y:e}:e}},{key:"getPadding",value:function(t){if(void 0===t.padding){var e=t.children.find(function(t){return rn()(t.props)&&void 0!==t.props.padding});return Ln.getPadding(e.props)}return Ln.getPadding(t)}},{key:"getCursorElements",value:function(t){var e=t.scale,n=t.cursorDimension,r=t.cursorLabelComponent,i=t.cursorLabel,o=t.cursorComponent,a=t.width,u=t.height,l=t.name,c=this.getCursorPosition(t),f=this.getCursorLabelOffset(t);if(!c)return[];var p=[],h=this.getPadding(t),d={x:e.x(c.x),y:e.y(c.y)};i&&p.push(s.a.cloneElement(r,un()({active:!0},r.props,{x:d.x+f.x,y:d.y+f.y,text:Ln.evaluateProp(i,c,!0),active:!0,key:"".concat(l,"-cursor-label")})));var y=cn()({stroke:"black"},o.props.style);return"x"!==n&&void 0!==n||p.push(s.a.cloneElement(o,{key:"".concat(l,"-x-cursor"),x1:d.x,x2:d.x,y1:h.top,y2:u-h.bottom,style:y})),"y"!==n&&void 0!==n||p.push(s.a.cloneElement(o,{key:"".concat(l,"-y-cursor"),x1:h.left,x2:a-h.right,y1:d.y,y2:d.y,style:y})),p}},{key:"getChildren",value:function(t){return hm(s.a.Children.toArray(t.children)).concat(hm(this.getCursorElements(t)))}}]),n}(),Object.defineProperty(e,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryCursorContainer"}),Object.defineProperty(e,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:pm({},zn.propTypes,{cursorDimension:l.a.oneOf(["x","y"]),cursorLabel:l.a.func,cursorLabelComponent:l.a.element,cursorLabelOffset:l.a.oneOfType([l.a.number,l.a.shape({x:l.a.number,y:l.a.number})]),defaultCursorValue:l.a.oneOfType([l.a.number,l.a.shape({x:l.a.number,y:l.a.number})]),disable:l.a.bool,onCursorChange:l.a.func})}),Object.defineProperty(e,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:pm({},zn.defaultProps,{cursorLabelComponent:s.a.createElement(dr,null),cursorLabelOffset:{x:5,y:-10},cursorComponent:s.a.createElement(di,null)})}),Object.defineProperty(e,"defaultEvents",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return[{target:"parent",eventHandlers:{onMouseLeave:function(){return[]},onTouchCancel:function(){return[]},onMouseMove:function(e,n){return t.disable?{}:fm.onMouseMove(e,n)},onTouchMove:function(e,n){return t.disable?{}:fm.onMouseMove(e,n)}}}]}}),n},mm=gm(zn);function bm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _m(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var xm={getDatasets:function(t){if(t.data)return[{data:t.data}];return Ln.reduceChildren(s.a.Children.toArray(t.children),function(e,n,r){var i=t.selectionBlacklist||[];if(!vl.isDataComponent(e)||Li()(i,n))return null;if(e.type&&dn()(e.type.getData)){var o=(e=r?s.a.cloneElement(e,r.props):e).props&&e.type.getData(e.props);return o?{childName:n,data:o}:null}var a=function(t){var e=vl.getData(t);return Array.isArray(e)&&e.length>0?e:void 0}(e.props);return a?{childName:n,data:a}:null},t)},filterDatasets:function(t,e,n){var r=this,i=e.reduce(function(e,i){var o=r.getSelectedData(t,i.data,n);return e=o?e.concat({childName:i.childName,eventKey:o.eventKey,data:o.data}):e},[]);return i.length?i:null},getPoint:function(t,e){return t.horizontal?{_x:e._y,_y:e._x,_x1:e._y1,_y1:e._x1,_x0:e._y0,_y0:e._x0}:e},getSelectedData:function(t,e){for(var n=this,r=t.x1,i=t.y1,o=t.x2,a=t.y2,s=function(e){var s=n.getPoint(t,e),u=Ln.scalePoint(t,s);return u.x>=Math.min(r,o)&&u.x<=Math.max(r,o)&&u.y>=Math.min(i,a)&&u.y<=Math.max(i,a)},u=[],l=[],c=0,f=0,p=e.length;f<p;f++){var h=e[f];s(h)&&(l[c]=h,u[c]=void 0===h.eventKey?f:h.eventKey,c++)}return c>0?{eventKey:u,data:l}:null},onMouseDown:function(t,e){t.preventDefault();var n=e.activateSelectedData,r=e.allowSelection,i=e.polar,o=e.selectedData;if(!r)return{};var a=e.selectionDimension,s=e.parentSVG||Nl.getParentSVG(t),u=Nl.getSVGEventCoordinates(t,s),l=u.x,c=u.y,f={x1:i||"y"!==a?l:Nl.getDomainCoordinates(e).x[0],y1:i||"x"!==a?c:Nl.getDomainCoordinates(e).y[0],select:!0,x2:i||"y"!==a?l:Nl.getDomainCoordinates(e).x[1],y2:i||"x"!==a?c:Nl.getDomainCoordinates(e).y[1],parentSVG:s};o&&dn()(e.onSelectionCleared)&&e.onSelectionCleared(un()({},f,e));var p=[{target:"parent",mutation:function(){return f}}],h=o&&n?o.map(function(t){return{childName:t.childName,eventKey:t.eventKey,target:"data",mutation:function(){return null}}}):[];return p.concat.apply(p,_m(h))},onMouseMove:function(t,e){var n=e.allowSelection,r=e.select,i=e.polar,o=e.selectionDimension;if(n&&r){var a=e.parentSVG||Nl.getParentSVG(t),s=Nl.getSVGEventCoordinates(t,a),u=s.x,l=s.y,c=i||"y"!==o?u:Nl.getDomainCoordinates(e).x[1],f=i||"x"!==o?l:Nl.getDomainCoordinates(e).y[1];return{target:"parent",mutation:function(){return{x2:c,y2:f,parentSVG:a}}}}return null},onMouseUp:function(t,e){var n=e.activateSelectedData,r=e.allowSelection,i=e.x2,o=e.y2;if(!r)return null;if(!i||!o)return[{target:"parent",mutation:function(){return{select:!1,x1:null,x2:null,y1:null,y2:null}}}];var a=this.getDatasets(e),s=Nl.getBounds(e),u=this.filterDatasets(e,a,s),l={selectedData:u,datasets:a,select:!1,x1:null,x2:null,y1:null,y2:null},c=u&&dn()(e.onSelection)?e.onSelection(u,s,un()({},l,e)):{},f=[{target:"parent",mutation:function(){return l}}],p=u&&n?u.map(function(t){return{childName:t.childName,eventKey:t.eventKey,target:"data",mutation:function(){return cn()({active:!0},c)}}}):[];return f.concat(p)}},wm=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){bm(t,e,n[e])})}return t}({},xm,{onMouseDown:xm.onMouseDown.bind(xm),onMouseUp:xm.onMouseUp.bind(xm),onMouseMove:Jg()(xm.onMouseMove.bind(xm),16,{leading:!0,trailing:!1})});function Em(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Om(t,e,n[e])})}return t}function Om(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sm(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cm(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Tm=function(t){var e,n;return n=e=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Cm(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),function(t,e,n){e&&Pm(t.prototype,e),n&&Pm(t,n)}(n,[{key:"getRect",value:function(t){var e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.selectionStyle,a=t.selectionComponent,u=t.name,l=Math.abs(n-e)||1,c=Math.abs(i-r)||1,f=Math.min(e,n),p=Math.min(r,i);return i&&n&&e&&r?s.a.cloneElement(a,{key:"".concat(u,"-selection"),x:f,y:p,width:l,height:c,style:o}):null}},{key:"getChildren",value:function(t){return Sm(s.a.Children.toArray(t.children)).concat([this.getRect(t)])}}]),n}(),Object.defineProperty(e,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictorySelectionContainer"}),Object.defineProperty(e,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:Em({},zn.propTypes,{activateSelectedData:l.a.bool,allowSelection:l.a.bool,disable:l.a.bool,onSelection:l.a.func,onSelectionCleared:l.a.func,selectionBlacklist:l.a.arrayOf(l.a.string),selectionComponent:l.a.element,selectionDimension:l.a.oneOf(["x","y"]),selectionStyle:l.a.object})}),Object.defineProperty(e,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:Em({},zn.defaultProps,{activateSelectedData:!0,allowSelection:!0,selectionComponent:s.a.createElement("rect",null),selectionStyle:{stroke:"transparent",fill:"black",fillOpacity:.1}})}),Object.defineProperty(e,"defaultEvents",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return[{target:"parent",eventHandlers:{onMouseDown:function(e,n){return t.disable?{}:wm.onMouseDown(e,n)},onTouchStart:function(e,n){return t.disable?{}:wm.onMouseDown(e,n)},onMouseMove:function(e,n){return t.disable?{}:wm.onMouseMove(e,n)},onTouchMove:function(e,n){return t.disable?{}:wm.onMouseMove(e,n)},onMouseUp:function(e,n){return t.disable?{}:wm.onMouseUp(e,n)},onTouchEnd:function(e,n){return t.disable?{}:wm.onMouseUp(e,n)}}}]}}),n},km=Tm(zn);function Am(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jm(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Rm=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jm(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Mm(t.prototype,e),n&&Mm(t,n)}(e,[{key:"getVerticalPath",value:function(t){var e=t.pointerLength,n=t.pointerWidth,r=t.cornerRadius,i=t.orientation,o=t.width,a=t.height,s="top"===i?1:-1,u=t.x+(t.dx||0),l=t.y-s*(t.dy||0),c=l-s*e,f=l-s*e-s*a,p=u+o/2,h=u-o/2,d="top"===i?"0 0 0":"0 0 1",y="".concat(r," ").concat(r," ").concat(d);return"M ".concat(u-n/2,", ").concat(c,"\n      L ").concat(u,", ").concat(l,"\n      L ").concat(u+n/2,", ").concat(c,"\n      L ").concat(p-r,", ").concat(c,"\n      A ").concat(y," ").concat(p,", ").concat(c-s*r,"\n      L ").concat(p,", ").concat(f+s*r,"\n      A ").concat(y," ").concat(p-r,", ").concat(f,"\n      L ").concat(h+r,", ").concat(f,"\n      A ").concat(y," ").concat(h,", ").concat(f+s*r,"\n      L ").concat(h,", ").concat(c-s*r,"\n      A ").concat(y," ").concat(h+r,", ").concat(c,"\n      z")}},{key:"getHorizontalPath",value:function(t){var e=t.pointerLength,n=t.pointerWidth,r=t.cornerRadius,i=t.orientation,o=t.width,a=t.height,s="right"===i?1:-1,u=t.x+s*(t.dx||0),l=t.y-(t.dy||0),c=u+s*e,f=u+s*e+s*o,p=l+a/2,h=l-a/2,d="right"===i?"0 0 0":"0 0 1",y="".concat(r," ").concat(r," ").concat(d);return"M ".concat(c,", ").concat(l-n/2,"\n      L ").concat(u,", ").concat(l,"\n      L ").concat(c,", ").concat(l+n/2,"\n      L ").concat(c,", ").concat(p-r,"\n      A ").concat(y," ").concat(c+s*r,", ").concat(p,"\n      L ").concat(f-s*r,", ").concat(p,"\n      A ").concat(y," ").concat(f,", ").concat(p-r,"\n      L ").concat(f,", ").concat(h+r,"\n      A ").concat(y," ").concat(f-s*r,", ").concat(h,"\n      L ").concat(c+s*r,", ").concat(h,"\n      A ").concat(y," ").concat(c,", ").concat(h+r,"\n      z")}},{key:"getFlyoutPath",value:function(t){var e=t.orientation||"top";return"left"===e||"right"===e?this.getHorizontalPath(t):this.getVerticalPath(t)}},{key:"render",value:function(){var t=this.props,e=t.datum,n=t.active,r=t.role,i=t.shapeRendering,o=t.className,a=t.events,u=t.pathComponent,l=t.transform,c=t.clipPath,f=Ln.evaluateStyle(this.props.style,e,n),p=this.getFlyoutPath(this.props);return s.a.cloneElement(u,{style:f,className:o,shapeRendering:i,role:r,events:a,transform:l,d:p,clipPath:c})}}]),e}();function Im(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Lm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dm(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(Rm,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Am(t,e,n[e])})}return t}({},ni.primitiveProps,{cornerRadius:l.a.number,datum:l.a.object,dx:l.a.number,dy:l.a.number,height:l.a.number,orientation:l.a.oneOf(["top","bottom","left","right"]),pathComponent:l.a.element,pointerLength:l.a.number,pointerWidth:l.a.number,width:l.a.number,x:l.a.number,y:l.a.number})}),Object.defineProperty(Rm,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{pathComponent:s.a.createElement(xi,null)}});var Fm={cornerRadius:5,pointerLength:10,pointerWidth:10},Nm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dm(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).id=void 0===t.id?an()("tooltip-"):t.id,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Lm(t.prototype,e),n&&Lm(t,n)}(e,[{key:"getDefaultOrientation",value:function(t){var e=t.datum,n=t.horizontal;if(t.polar)return this.getPolarOrientation(t,e);var r=n?"right":"top",i=n?"left":"bottom";return e&&e.y<0?i:r}},{key:"getPolarOrientation",value:function(t,e){var n=Qn.getDegrees(t,e),r=t.labelPlacement||"vertical";return" vertical"===r?this.getVerticalOrientations(n):"parallel"===r?n<90||n>270?"right":"left":n>180?"bottom":"top"}},{key:"getVerticalOrientations",value:function(t){return t<45||t>315?"right":t>=45&&t<=135?"top":t>135&&t<225?"left":"bottom"}},{key:"getEvaluatedProps",value:function(t){var e=t.horizontal,n=t.datum,r=t.pointerLength,i=t.pointerWidth,o=t.cornerRadius,a=t.width,s=t.height,u=t.dx,l=t.dy,c=t.text,f=t.active,p=Array.isArray(t.style)?t.style.map(function(t){return Ln.evaluateStyle(t,n,f)}):Ln.evaluateStyle(t.style,n,f),h=Ln.evaluateStyle(t.flyoutStyle,n,f),d=h&&h.padding||0,y=e?d:0,v=e?0:d,g=Ln.evaluateProp(t.orientation,n,f)||this.getDefaultOrientation(t);return cn()({},t,{style:p,flyoutStyle:h,orientation:g,dx:void 0!==u?Ln.evaluateProp(u,n,f):y,dy:void 0!==l?Ln.evaluateProp(l,n,f):v,cornerRadius:Ln.evaluateProp(o,n,f),pointerLength:Ln.evaluateProp(r,n,f),pointerWidth:Ln.evaluateProp(i,n,f),width:Ln.evaluateProp(a,n,f),height:Ln.evaluateProp(s,n,f),active:Ln.evaluateProp(f,n,f),text:Ln.evaluateProp(c,n,f)})}},{key:"getCalculatedValues",value:function(t){var e=t.style,n=t.text,r=t.datum,i=t.active,o=t.theme||ti.grayscale,a=o&&o.tooltip&&o.tooltip.style?o.tooltip.style:{},s=Array.isArray(e)?e.map(function(t){return un()({},t,a)}):un()({},e,a),u=o&&o.tooltip&&o.tooltip.flyoutStyle?o.tooltip.flyoutStyle:{},l=t.flyoutStyle?un()({},t.flyoutStyle,u):u,c=Array.isArray(s)?s.map(function(t){return Ln.evaluateStyle(t,r,i)}):Ln.evaluateStyle(s,r,i),f=$l.approximateTextSize(n,c),p=this.getDimensions(t,f,c);return{labelStyle:c,flyoutStyle:l,labelSize:f,flyoutDimensions:p,flyoutCenter:this.getFlyoutCenter(t,p),transform:this.getTransform(t)}}},{key:"getTransform",value:function(t){var e=t.x,n=t.y,r=(t.style||{}).angle||t.angle||this.getDefaultAngle(t);return r?"rotate(".concat(r," ").concat(e," ").concat(n,")"):void 0}},{key:"getDefaultAngle",value:function(t){var e=t.polar,n=t.labelPlacement,r=t.orientation,i=t.datum;if(!e||!n||"vertical"===n)return 0;var o,a=Qn.getDegrees(t,i);return 0===a||180===a?o="top"===r&&180===a?270:90:a>0&&a<180?o=90-a:a>180&&a<360&&(o=270-a),o+(a>90&&a<180||a>270?1:-1)*("perpendicular"===n?0:90)}},{key:"getFlyoutCenter",value:function(t,e){var n=t.x,r=t.y,i=t.dx,o=t.dy,a=t.pointerLength,s=t.orientation,u=e.height,l=e.width;return{x:"left"===s||"right"===s?n+("left"===s?-1:1)*(a+l/2+i):n+i,y:"top"===s||"bottom"===s?r-("bottom"===s?-1:1)*(a+u/2+o):r-o}}},{key:"getLabelPadding",value:function(t){if(!t)return 0;var e=Array.isArray(t)?t.map(function(t){return t.padding}):[t.padding];return Math.max.apply(Math,Im(e).concat([0]))}},{key:"getDimensions",value:function(t,e,n){var r=t.orientation,i=t.cornerRadius,o=t.pointerLength,a=t.pointerWidth,s=this.getLabelPadding(n);return{height:t.height||function(){var t=e.height+s,n="top"===r||"bottom"===r?2*i:2*i+a;return Math.max(n,t)}()+s/2,width:t.width||function(){var t=e.width+s,n="left"===r||"right"===r?2*i+o:2*i;return Math.max(n,t)}()+s}}},{key:"getLabelProps",value:function(t,e){var n=e.flyoutCenter,r=e.labelStyle,i=e.labelSize,o=e.dy,a=e.dx,s=t.text,u=t.datum,l=t.labelComponent,c=t.index,f=(Array.isArray(r)&&r.length?r[0].textAnchor:r.textAnchor)||"middle";return un()({},l.props,{key:"".concat(this.id,"-label-").concat(c),text:s,datum:u,textAnchor:f,dy:o,dx:a,style:r,x:f&&"middle"!==f?function(){var t="end"===f?-1:1;return n.x-t*(i.width/2)}():n.x,y:n.y,verticalAnchor:"middle",angle:r.angle})}},{key:"getFlyoutProps",value:function(t,e){var n=e.flyoutDimensions,r=e.flyoutStyle,i=t.x,o=t.y,a=t.dx,s=t.dy,u=t.datum,l=t.index,c=t.orientation,f=t.pointerLength,p=t.pointerWidth,h=t.cornerRadius,d=t.events,y=t.flyoutComponent;return un()({},y.props,{x:i,y:o,dx:a,dy:s,datum:u,index:l,orientation:c,pointerLength:f,pointerWidth:p,cornerRadius:h,events:d,key:"".concat(this.id,"-tooltip-").concat(l),width:n.width,height:n.height,style:r})}},{key:"renderTooltip",value:function(t){var e=this.getEvaluatedProps(t),n=e.flyoutComponent,r=e.labelComponent,i=e.groupComponent,o=e.active,a=e.renderInPortal;if(!o)return a?s.a.createElement(qn,null,null):null;var u=this.getCalculatedValues(e),l=[s.a.cloneElement(n,this.getFlyoutProps(e,u)),s.a.cloneElement(r,this.getLabelProps(e,u))],c=s.a.cloneElement(i,{role:"presentation",transform:u.transform},l);return a?s.a.createElement(qn,null,c):c}},{key:"render",value:function(){var t=Ln.modifyProps(this.props,Fm,"tooltip");return this.renderTooltip(t)}}]),e}();function Bm(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(Nm,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryTooltip"}),Object.defineProperty(Nm,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{activateData:l.a.bool,active:l.a.oneOfType([l.a.bool,l.a.func]),angle:l.a.number,cornerRadius:l.a.oneOfType([xn.nonNegative,l.a.func]),data:l.a.array,datum:l.a.object,dx:l.a.oneOfType([l.a.number,l.a.func]),dy:l.a.oneOfType([l.a.number,l.a.func]),events:l.a.object,flyoutComponent:l.a.element,flyoutStyle:l.a.object,groupComponent:l.a.element,height:l.a.oneOfType([xn.nonNegative,l.a.func]),horizontal:l.a.bool,id:l.a.oneOfType([l.a.number,l.a.string]),index:l.a.oneOfType([l.a.number,l.a.string]),labelComponent:l.a.element,orientation:l.a.oneOfType([l.a.oneOf(["top","bottom","left","right"]),l.a.func]),pointerLength:l.a.oneOfType([xn.nonNegative,l.a.func]),pointerWidth:l.a.oneOfType([xn.nonNegative,l.a.func]),polar:l.a.bool,renderInPortal:l.a.bool,style:l.a.oneOfType([l.a.object,l.a.array]),text:l.a.oneOfType([l.a.string,l.a.number,l.a.func,l.a.array]),theme:l.a.object,width:l.a.oneOfType([xn.nonNegative,l.a.func]),x:l.a.number,y:l.a.number}}),Object.defineProperty(Nm,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{active:!1,renderInPortal:!0,labelComponent:s.a.createElement(dr,null),flyoutComponent:s.a.createElement(Rm,null),groupComponent:s.a.createElement("g",null)}}),Object.defineProperty(Nm,"defaultEvents",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return[{target:"data",eventHandlers:{onMouseOver:function(){return t.activateData?[{target:"labels",mutation:function(){return{active:!0}}},{target:"data",mutation:function(){return{active:!0}}}]:[{target:"labels",mutation:function(){return{active:!0}}}]},onTouchStart:function(){return t.activateData?[{target:"labels",mutation:function(){return{active:!0}}},{target:"data",mutation:function(){return{active:!0}}}]:[{target:"labels",mutation:function(){return{active:!0}}}]},onMouseOut:function(){return t.activateData?[{target:"labels",mutation:function(){return{active:void 0}}},{target:"data",mutation:function(){return{active:void 0}}}]:[{target:"labels",mutation:function(){return{active:void 0}}}]},onTouchEnd:function(){return t.activateData?[{target:"labels",mutation:function(){return{active:void 0}}},{target:"data",mutation:function(){return{active:void 0}}}]:[{target:"labels",mutation:function(){return{active:void 0}}}]}}}]}});var zm={withinBounds:function(t,e){var n=t.width,r=t.height,i=t.voronoiPadding,o=t.polar,a=t.origin,s=t.scale,u=i||0,l=e.x,c=e.y;if(o){var f=Math.pow(l-a.x,2)+Math.pow(c-a.y,2),p=Math.max.apply(Math,Bm(s.y.range()));return f<Math.pow(p,2)}return l>=u&&l<=n-u&&c>=u&&c<=r-u},getDatasets:function(t){var e=s.a.Children.toArray(t.children),n=function(e,n,r){var i=r&&r.type&&r.type.continuous,o=r?r.props&&r.props.style:t.style;return e.map(function(e,r){var a=Ln.getPoint(e),s=a.x,u=a.y,l=a.y0,c=a.x0,f=t.horizontal?(+u+ +l)/2:(+s+ +c)/2,p=t.horizontal?(+s+ +c)/2:(+u+ +l)/2;return cn()({_voronoiX:"y"===t.voronoiDimension?0:f,_voronoiY:"x"===t.voronoiDimension?0:p,eventKey:r,childName:n,continuous:i,style:o},e)})};if(t.data)return n(t.data);var r=function(t){var e=vl.getData(t);return Array.isArray(e)&&e.length>0?e:void 0};return Ln.reduceChildren(e,function(e,i){var o=(e.props||{}).name||i,a=t.voronoiBlacklist||[];if(!vl.isDataComponent(e)||Li()(a,o))return null;var s=(e.type&&dn()(e.type.getData)?e.type.getData:r)(e.props);return s?n(s,o,e):null},t)},mergeDatasets:function(t,e){var n=rc()(e,function(e){var n=Ln.scalePoint(t,e),r=n.x,i=n.y;return"".concat(r,",").concat(i)});return Ri()(n).map(function(t){var e=t.split(",");return{x:+e[0],y:+e[1],points:n[t]}})},getVoronoi:function(t,e){var n=t.width,r=t.height,i=t.voronoiPadding||0,o=Eg().x(function(t){return t.x}).y(function(t){return t.y}).extent([[i,i],[n-i,r-i]]),a=this.getDatasets(t),s=o(this.mergeDatasets(t,a)),u=t.voronoiDimension?void 0:t.radius;return s.find(e.x,e.y,u)},getActiveMutations:function(t,e){var n=e.childName,r=e.continuous,i=t.activateData,o=t.activateLabels,a=t.labels;if(!i&&!o)return[];var s=i?["data"]:[],u=a&&!o?s:s.concat("labels");return Vn()(u)?[]:u.map(function(t){var i=!0===r&&"data"===t?"all":e.eventKey;return{childName:n,eventKey:i,target:t,mutation:function(){return{active:!0}}}})},getInactiveMutations:function(t,e){var n=e.childName,r=e.continuous,i=t.activateData,o=t.activateLabels,a=t.labels;if(!i&&!o)return[];var s=i?["data"]:[],u=a&&!o?s:s.concat("labels");return Vn()(u)?[]:u.map(function(t){var i=r&&"data"===t?"all":e.eventKey;return{childName:n,eventKey:i,target:t,mutation:function(){return null}}})},getParentMutation:function(t,e,n){return[{target:"parent",eventKey:"parent",mutation:function(){return{activePoints:t,mousePosition:e,parentSVG:n}}}]},onActivated:function(t,e){dn()(t.onActivated)&&t.onActivated(e,t)},onDeactivated:function(t,e){dn()(t.onDeactivated)&&t.onDeactivated(e,t)},onMouseLeave:function(t,e){var n,r=this,i=e.activePoints||[];this.onDeactivated(e,i);var o=i.length?i.map(function(t){return r.getInactiveMutations(e,t)}):[];return(n=this.getParentMutation([])).concat.apply(n,Bm(o))},onMouseMove:function(t,e){var n=this,r=e.activePoints||[],i=e.parentSVG||Nl.getParentSVG(t),o=Nl.getSVGEventCoordinates(t,i);if(!this.withinBounds(e,o)){var a;this.onDeactivated(e,r);var s=r.length?r.map(function(t){return n.getInactiveMutations(e,t)}):[];return(a=this.getParentMutation([],o,i)).concat.apply(a,Bm(s))}var u=this.getVoronoi(e,o),l=u?u.data.points:[],c=this.getParentMutation(l,o,i);if(r.length&&nr()(l,r))return c;this.onActivated(e,l),this.onDeactivated(e,r);var f=l.length?l.map(function(t){return n.getActiveMutations(e,t)}):[],p=r.length?r.map(function(t){return n.getInactiveMutations(e,t)}):[];return c.concat.apply(c,Bm(p).concat(Bm(f)))}},Um={onMouseLeave:zm.onMouseLeave.bind(zm),onMouseMove:Jg()(zm.onMouseMove.bind(zm),32,{leading:!0,trailing:!1})};function Vm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Gm(t,e,n[e])})}return t}function Gm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wm(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hm(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Xm=function(t){var e,n;return n=e=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Hm(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),function(t,e,n){e&&qm(t.prototype,e),n&&qm(t,n)}(n,[{key:"getLabelPadding",value:function(t){if(!t)return 0;var e=Array.isArray(t)?t.map(function(t){return t.padding}):[t.padding];return Math.max.apply(Math,Wm(e).concat([0]))}},{key:"getFlyoutSize",value:function(t,e,n){var r=this.getLabelPadding(n),i=$l.approximateTextSize(e,n);return{x:t.width||i.width+r,y:t.height||i.height+r}}},{key:"getLabelCornerRadius",value:function(t,e){if(void 0!==e.cornerRadius)return e.cornerRadius;var n=t.theme||e.theme;return n.tooltip&&n.tooltip.cornerRadius||0}},{key:"getFlyoutExtent",value:function(t,e,n){var r=n.text,i=n.style,o=n.orientation,a=n.dx,s=void 0===a?0:a,u=n.dy,l=void 0===u?0:u,c=this.getFlyoutSize(e.labelComponent,r,i),f=this.getLabelCornerRadius(e,n),p=t.x+s+2*f,h=t.y+l+2*f,d="top"===o||"bottom"===o?c.x/2:c.x,y="left"===o?-1:1,v="bottom"===o?1:-1,g={};return g.x="top"===o||"bottom"===o?[p-d,p+d]:[p,p+y*d],g.y=[h,h+v*c.y],{x:[Math.min.apply(Math,Wm(g.x)),Math.max.apply(Math,Wm(g.x))],y:[Math.min.apply(Math,Wm(g.y)),Math.max.apply(Math,Wm(g.y))]}}},{key:"getPoint",value:function(t,e){return t.horizontal?{_x:e._y,_y:e._x,_x1:e._y1,_y1:e._x1,_x0:e._y0,_y0:e._x0}:Pn()(e,["_x","_x1","_x0","_y","_y1","_y0"])}},{key:"getLabelPosition",value:function(t,e,n){var r=t.mousePosition,i=t.voronoiDimension,o=t.scale,a=t.voronoiPadding,s=this.getPoint(t,e[0]),u=Ln.scalePoint(t,s);if(!i||e.length<2)return u;var l="y"===i?r.x:u.x,c="x"===i?r.y:u.y;if(t.polar)return{x:l,y:c};var f={x:o.x.range(),y:o.y.range()},p=[Math.min.apply(Math,Wm(f.x))+a,Math.max.apply(Math,Wm(f.x))-a],h=[Math.min.apply(Math,Wm(f.y))+a,Math.max.apply(Math,Wm(f.y))-a],d=this.getFlyoutExtent({x:l,y:c},t,n),y=[d.x[0]<p[0]?p[0]-d.x[0]:0,d.x[1]>p[1]?d.x[1]-p[1]:0],v=[d.y[0]<h[0]?h[0]-d.y[0]:0,d.y[1]>h[1]?d.y[1]-h[1]:0];return{x:Math.round(l+y[0]-y[1]),y:Math.round(c+v[0]-v[1])}}},{key:"getStyle",value:function(t,e,n){var r=t.labels,i=t.labelComponent,o=t.theme,a=i.props||{},s=o&&o.voronoi&&o.voronoi.style?o.voronoi.style:{},u="flyout"===n?a.flyoutStyle:a.style;return e.reduce(function(t,i,o){var a=dn()(r)?r(i,o,e):void 0,l=void 0!==a?"".concat(a).split("\n"):[],c=i.style&&i.style[n]||{},f=Array.isArray(u)?u[o]:u,p=Ln.evaluateStyle(un()({},f,c,s[n]),i,!0),h=l.length?l.map(function(){return p}):[p];return t=t.concat(h)},[])}},{key:"getDefaultLabelProps",value:function(t,e){var n=t.voronoiDimension,r=t.horizontal,i=this.getPoint(t,e[0]),o=n&&e.length>1,a=void 0!==i._y1?i._y1:i._y;return{orientation:o?"top":r?a<0?"left":"right":a<0?"bottom":"top",pointerLength:o?0:void 0}}},{key:"getLabelProps",value:function(t,e){var n=t.labels,r=t.scale,i=t.labelComponent,o=t.theme,a=e.reduce(function(t,r,i){var o=dn()(n)?n(r,i,e):null;return null===o||void 0===o?t:t=t.concat("".concat(o).split("\n"))},[]),s=i.props||{},u=e[0],l=u.childName,c=u.eventKey,f=(u.style,u.continuous,function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(u,["childName","eventKey","style","continuous"])),p=t.name===l?l:"".concat(t.name,"-").concat(l),h=un()({key:"".concat(p,"-").concat(c,"-voronoi-tooltip"),id:"".concat(p,"-").concat(c,"-voronoi-tooltip"),active:!0,flyoutStyle:this.getStyle(t,e,"flyout")[0],renderInPortal:!1,style:this.getStyle(t,e,"labels"),datum:f,scale:r,theme:o,text:a},s,this.getDefaultLabelProps(t,e)),d=this.getLabelPosition(t,e,h);return un()({},d,h)}},{key:"getTooltip",value:function(t){var e=t.labels,n=t.activePoints,r=t.labelComponent;return e&&Array.isArray(n)&&n.length?s.a.cloneElement(r,this.getLabelProps(t,n)):null}},{key:"getChildren",value:function(t){return Wm(s.a.Children.toArray(t.children)).concat([this.getTooltip(t)])}}]),n}(),Object.defineProperty(e,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryVoronoiContainer"}),Object.defineProperty(e,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:Vm({},zn.propTypes,{activateData:l.a.bool,activateLabels:l.a.bool,disable:l.a.bool,labelComponent:l.a.element,labels:l.a.func,onActivated:l.a.func,onDeactivated:l.a.func,radius:l.a.number,voronoiBlacklist:l.a.arrayOf(l.a.string),voronoiDimension:l.a.oneOf(["x","y"]),voronoiPadding:l.a.number})}),Object.defineProperty(e,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:Vm({},zn.defaultProps,{activateData:!0,activateLabels:!0,labelComponent:s.a.createElement(Nm,null),voronoiPadding:5})}),Object.defineProperty(e,"defaultEvents",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return[{target:"parent",eventHandlers:{onMouseLeave:function(e,n){return t.disable?{}:Um.onMouseLeave(e,n)},onTouchCancel:function(e,n){return t.disable?{}:Um.onMouseLeave(e,n)},onMouseMove:function(e,n){return t.disable?{}:Um.onMouseMove(e,n)},onTouchMove:function(e,n){return t.disable?{}:Um.onMouseMove(e,n)}}},{target:"data",eventHandlers:t.disable?{}:{onMouseOver:function(){return null},onMouseOut:function(){return null},onMouseMove:function(){return null}}}]}}),n},Zm=Xm(zn);function Ym(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Km={checkDomainEquality:function(t,e){var n=function(n){var r=t&&t[n],i=e&&e[n];return!r&&!i||!(!r||!i)&&(+r[0]==+i[0]&&+r[1]==+i[1])};return n("x")&&n("y")},scale:function(t,e,n,r){var i=Ym(t,2),o=i[0],a=i[1],s=Math.abs(a-o),u=n.minimumZoom&&n.minimumZoom[r],l=this.getScaleFactor(e);if(u&&s<=u&&l<1)return t;var c=Ym(this.getDomain(n)[r],2),f=c[0],p=c[1],h=this.getScalePercent(e,n,r),d=l*o+h*(l*s),y=this.getMinimumDomain(d,n,r),v=Ym(this.getScaledDomain(t,l,h),2),g=v[0],m=v[1],b=[g>f&&g<p?g:f,m<p&&m>f?m:p],_=Math.abs(y[1]-y[0])>Math.abs(b[1]-b[0])?y:b;return mr.containsDates([f,p])?[new Date(_[0]),new Date(_[1])]:_},getScaledDomain:function(t,e,n){var r=Ym(t,2),i=r[0],o=r[1],a=Math.abs(o-i),s=a-a*e,u=+i+s*n,l=+o-s*(1-n);return[Math.min(u,l),Math.max(u,l)]},getMinimumDomain:function(t,e,n){var r=e.minimumZoom,i=Ym(this.getDomain(e)[n],2),o=i[0],a=i[1],s=Math.abs(o-a)/1e3,u=r&&r[n]||s,l=t-u/2,c=t+u/2;return[l>o&&l<a?l:o,c<a&&c>o?c:+o+u/2]},zoommingOut:function(t){return t.deltaY>0},getScaleFactor:function(t){var e=this.zoommingOut(t)?1:-1,n=Math.min(Math.abs(t.deltaY/300),.5);return Math.abs(1+e*n)},getScalePercent:function(t,e,n){var r=this.getDomain(e),i=Ym(r[n],2),o=i[0],a=i[1];return(this.getPosition(t,e,r)[n]-o)/Math.abs(a-o)},getPosition:function(t,e,n){var r=Nl.getSVGEventCoordinates(t),i=r.x,o=r.y,a={x:e.scale.x.domain(n.x),y:e.scale.y.domain(n.y)};return Nl.getDataCoordinates(e,a,i,o)},pan:function(t,e,n){var r,i=Ym(t.map(function(t){return+t}),2),o=i[0],a=i[1],s=Ym(e.map(function(t){return+t}),2),u=s[0],l=s[1],c=o+n,f=a+n;if(c>u&&f<l)r=[c,f];else if(c<u){r=[u,u+(a-o)]}else if(f>l){r=[l-(a-o),l]}else r=t;return mr.containsDates(t)||mr.containsDates(e)?r.map(function(t){return new Date(t)}):r},getDomainScale:function(t,e,n){var r=Ym(Array.isArray(t)?t:t[n],2),i=r[0],o=r[1],a=e[n].range();return Math.abs(a[0]-a[1])/(o-i)},handleAnimation:function(t){var e=dn()(t.getTimer)&&t.getTimer.bind(t);if(e&&dn()(e().bypassAnimation))return e().bypassAnimation(),dn()(e().resumeAnimation)?function(){return e().resumeAnimation()}:void 0},getLastDomain:function(t,e){var n=t.zoomDomain,r=t.cachedZoomDomain,i=t.currentDomain,o=t.domain;return n&&!this.checkDomainEquality(n,r)?un()({},n,o):un()({},i||n||e,o)},getDomain:function(t){var e=t.originalDomain,n=t.domain,r=t.children,i=t.zoomDimension,o=t.horizontal,s=o?"y":"x",u=o?"x":"y",l=a.Children.toArray(r),c={};return l.length&&(c=i?function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},i,mc.getDomainFromChildren(t,i,l)):{x:mc.getDomainFromChildren(t,s,l),y:mc.getDomainFromChildren(t,u,l)}),un()({},c,e,n)},onMouseDown:function(t,e){if(t.preventDefault(),e.allowPan){var n=e.parentSVG||Nl.getParentSVG(t),r=Nl.getSVGEventCoordinates(t,n),i=r.x,o=r.y;return[{target:"parent",mutation:function(){return{startX:i,startY:o,panning:!0,parentSVG:n,parentControlledProps:["domain"]}}}]}},onMouseUp:function(t,e){if(e.allowPan)return[{target:"parent",mutation:function(){return{panning:!1}}}]},onMouseLeave:function(t,e){if(e.allowPan)return[{target:"parent",mutation:function(){return{panning:!1}}}]},onMouseMove:function(t,e,n,r){if(e.panning&&e.allowPan){var i=e.scale,o=e.startX,a=e.startY,s=e.onZoomDomainChange,u=e.zoomDimension,l=e.zoomDomain,c=e.parentSVG||Nl.getParentSVG(t),f=Nl.getSVGEventCoordinates(t,c),p=f.x,h=f.y,d=this.getDomain(e),y=this.getLastDomain(e,d),v=(o-p)/this.getDomainScale(y,i,"x"),g=(h-a)/this.getDomainScale(y,i,"y"),m={x:"y"===u?d.x:this.pan(y.x,d.x,v),y:"x"===u?d.y:this.pan(y.y,d.y,g)},b=this.handleAnimation(r),_={parentControlledProps:["domain"],startX:p,startY:h,parentSVG:c,domain:m,currentDomain:m,originalDomain:d,cachedZoomDomain:l,zoomActive:!this.checkDomainEquality(d,y)};return dn()(s)&&s(m,un()({},_,e)),[{target:"parent",callback:b,mutation:function(){return _}}]}},onWheel:function(t,e,n,r){if(e.allowZoom){var i=e.onZoomDomainChange,o=e.zoomDimension,a=e.zoomDomain,s=this.getDomain(e),u=this.getLastDomain(e,s),l=u.x,c=u.y,f={x:"y"===o?u.x:this.scale(l,t,e,"x"),y:"x"===o?u.y:this.scale(c,t,e,"y")},p=this.handleAnimation(r),h={domain:f,currentDomain:f,originalDomain:s,cachedZoomDomain:a,parentControlledProps:["domain"],panning:!1,zoomActive:!this.zoommingOut(t)||e.zoomActive&&!this.checkDomainEquality(s,u)};return dn()(i)&&i(f,un()({},h,e)),[{target:"parent",callback:p,mutation:function(){return h}}]}}},Jm={checkDomainEquality:Km.checkDomainEquality.bind(Km),onMouseDown:Km.onMouseDown.bind(Km),onMouseUp:Km.onMouseUp.bind(Km),onMouseLeave:Km.onMouseLeave.bind(Km),onMouseMove:Jg()(Km.onMouseMove.bind(Km),16,{leading:!0,trailing:!1}),onWheel:Jg()(Km.onWheel.bind(Km),16,{leading:!0,trailing:!1})};function Qm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){$m(t,e,n[e])})}return t}function $m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tb(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function eb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nb(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var rb=function(t){var e,n;return n=e=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),nb(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),function(t,e,n){e&&eb(t.prototype,e),n&&eb(t,n)}(n,[{key:"clipDataComponents",value:function(t,e){var n=e.scale,r=e.clipContainerComponent,i=e.polar,o=e.origin,a=n.x.range(),u=n.y.range(),l=Math.abs(a[0]-a[1]),c=Math.abs(u[0]-u[1]),f=Math.max.apply(Math,tb(u)),p=s.a.cloneElement(r,Qm({clipWidth:l,clipHeight:c,translateX:Math.min.apply(Math,tb(a)),translateY:Math.min.apply(Math,tb(u)),polar:i,origin:i?o:void 0,radius:i?f:void 0},r.props));return s.a.Children.toArray(t).map(function(t){return vl.isDataComponent(t)?s.a.cloneElement(t,{groupComponent:p}):t})}},{key:"modifyPolarDomain",value:function(t,e){return{x:e.x,y:[0,t.y[1]]}}},{key:"downsampleZoomData",value:function(t,e,n){var r=t.downsample,i=function(t){var n=t.data,r=t.x,i=t.y,o=e.type&&dn()(e.type.getData)?e.type.getData:function(){};return!Array.isArray(n)||r||i?o(t):n}(e.props);if(r&&n&&i){var o=!0===r?150:r,a=t.zoomDimension||"x",s=i.findIndex(function(t){return t[a]>=n[a][0]}),u=i.findIndex(function(t){return t[a]>n[a][1]});0!==s&&(s-=1),-1!==u&&(u+=1);var l=i.slice(s,u);return vl.downsample(l,o,s)}}},{key:"modifyChildren",value:function(t){var e=this;return s.a.Children.toArray(t.children).map(function(n){var r,i=n.type&&n.type.role,o=vl.isDataComponent(n),a=t.currentDomain,u=t.zoomActive,l=t.allowZoom,c=un()({},t.originalDomain,t.domain),f=un()({},t.zoomDomain,t.domain),p=un()({},t.cachedZoomDomain,t.domain);r=Jm.checkDomainEquality(f,p)?l&&!u?n.props.domain:un()({},a,c):f;var h=t.polar?e.modifyPolarDomain(r,c):r;h&&t.zoomDimension&&(h=Qm({},f,$m({},t.zoomDimension,h[t.zoomDimension])));var d=o&&"stack"!==i?{domain:h,data:e.downsampleZoomData(t,n,h)}:{domain:h};return s.a.cloneElement(n,un()(d,n.props))})}},{key:"getChildren",value:function(t){var e=this.modifyChildren(t);return this.clipDataComponents(e,t)}}]),n}(),Object.defineProperty(e,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryZoomContainer"}),Object.defineProperty(e,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:Qm({},zn.propTypes,{allowPan:l.a.bool,allowZoom:l.a.bool,clipContainerComponent:l.a.element.isRequired,disable:l.a.bool,downsample:l.a.oneOfType([l.a.bool,l.a.number]),minimumZoom:l.a.shape({x:l.a.number,y:l.a.number}),onZoomDomainChange:l.a.func,zoomDimension:l.a.oneOf(["x","y"]),zoomDomain:l.a.shape({x:xn.domain,y:xn.domain})})}),Object.defineProperty(e,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:Qm({},zn.defaultProps,{clipContainerComponent:s.a.createElement(Wr,null),allowPan:!0,allowZoom:!0,zoomActive:!1})}),Object.defineProperty(e,"defaultEvents",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return[{target:"parent",eventHandlers:{onMouseDown:function(e,n){return t.disable?{}:Jm.onMouseDown(e,n)},onTouchStart:function(e,n){return t.disable?{}:Jm.onMouseDown(e,n)},onMouseUp:function(e,n){return t.disable?{}:Jm.onMouseUp(e,n)},onTouchEnd:function(e,n){return t.disable?{}:Jm.onMouseUp(e,n)},onMouseLeave:function(e,n){return t.disable?{}:Jm.onMouseLeave(e,n)},onTouchCancel:function(e,n){return t.disable?{}:Jm.onMouseLeave(e,n)},onMouseMove:function(e,n,r,i){return t.disable?{}:Jm.onMouseMove(e,n,r,i)},onTouchMove:function(e,n,r,i){return t.disable?{}:(e.preventDefault(),Jm.onMouseMove(e,n,r,i))},onWheel:function(e,n,r,i){return n.allowZoom&&!t.disable&&e.preventDefault(),t.disable?{}:Jm.onWheel(e,n,r,i)}}}]}}),n},ib=rb(zn),ob=n(242),ab=n.n(ob),sb=n(243),ub=n.n(sb),lb=n(244),cb=n.n(lb);function fb(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){hb(t,e,n[e])})}return t}function hb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function db(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yb(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gb=function(t){return t?Array.isArray(t)?t:[t]:[]},mb=function(t){var e=rc()(t,"target");return cb()(e).map(function(t){var e=vb(t,2),n=e[0],r=e[1];return r=r.filter(Boolean),Vn()(r)?null:{target:n,eventHandlers:function(t){return t.reduce(function(t,e){return ub()(t,function(t,n){var r=e[n];e[n]=r?function(){var e=gb(r.apply(void 0,arguments)),n=gb(t.apply(void 0,arguments));return e.concat(n)}:t}),e})}(r.map(function(t){return t.eventHandlers}))}}).filter(Boolean)},bb=function(t,e){var n,r,i=t.map(function(t){return t(e)}),o=i.map(function(t){return new t}),a=ab()(t)(e),s=i.map(function(t){return t.displayName.match(/Victory(.*)Container/)[1]||""}).join("");return r=n=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),yb(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a),function(t,e,n){e&&db(t.prototype,e),n&&db(t,n)}(e,[{key:"getChildren",value:function(t){return o.reduce(function(e,n){return n.getChildren(pb({},t,{children:e}))},t.children)}}]),e}(),Object.defineProperty(n,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"Victory".concat(s,"Container")}),Object.defineProperty(n,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:i.reduce(function(t,e){return pb({},t,e.propTypes)},{})}),Object.defineProperty(n,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:i.reduce(function(t,e){return pb({},t,e.defaultProps)},{})}),Object.defineProperty(n,"defaultEvents",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return mb(i.reduce(function(e,n){var r=dn()(n.defaultEvents)?n.defaultEvents(t):n.defaultEvents;return fb(e).concat(fb(r))},[]))}}),r},_b=function(t,e){t&&!Li()(e,t)&&yn.warn('"'.concat(t,'" is not a valid behavior. Choose from [').concat(e.join(", "),"]."))},xb=function(t,e){return function(n,r){var i=Object.keys(t);_b(n,i),_b(r,i),!(arguments.length<=2)&&arguments.length-2&&yn.warn("too many arguments given to createContainer (maximum accepted: 2).");var o=t[n],a=t[r]||[];return o?bb(fb(o).concat(fb(a)),e):e}},wb=xb({zoom:[rb],voronoi:[Xm],selection:[Tm],cursor:[gm],brush:[um]},zn),Eb=n(112),Ob=n.n(Eb);function Sb(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cb=function(t){var e=t.data,n=t.style;return e.map(function(t){var e=un()({},t.labels,n.labels);return Ln.evaluateStyle(e,t)})},Tb=function(t){var e=t.orientation,n=t.theme,r=function(t,e){var n=t.style||{};e=e||{};return{parent:un()(n.parent,e.parent,{height:"100%",width:"100%"}),data:un()({},n.data,e.data),labels:un()({},n.labels,e.labels),border:un()({},n.border,e.border),title:un()({},n.title,e.title)}}(t,n&&n.legend&&n.legend.style?n.legend.style:{}),i=function(t){var e=t.colorScale;return"string"==typeof e?tr.getColorScale(e):e||[]}(t),o="horizontal"===e,a=Ln.getPadding({padding:t.borderPadding});return cn()({},t,{style:r,isHorizontal:o,colorScale:i,borderPadding:a})},kb=function(t){var e=t.data,n=t.style&&t.style.data||{},r=Cb(t);return e.map(function(e,i){var o=e.symbol||{},a=r[i].fontSize,s=o.size||n.size||a/2.5;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Pb(t,e,n[e])})}return t}({},e,{size:s,symbolSpacer:t.symbolSpacer||Math.max(s,a),fontSize:a,textSize:$l.approximateTextSize(e.name,r[i]),column:function(t,e){var n=t.itemsPerRow,r=t.isHorizontal;return n?r?e%n:Math.floor(e/n):r?e:0}(t,i),row:function(t,e){var n=t.itemsPerRow,r=t.isHorizontal;return n?r?Math.floor(e/n):e%n:r?0:e}(t,i)})})},Ab=function(t,e){var n=t.gutter||{},r="object"==typeof n?(n.left||0)+(n.right||0):n||0,i=rc()(e,"column");return Ri()(i).reduce(function(t,e,n){var o=i[e].map(function(t){return t.textSize.width+t.size+t.symbolSpacer+r});return t[n]=Math.max.apply(Math,Sb(o)),t},[])},Mb=function(t,e){var n=t.rowGutter||{},r="object"==typeof n?(n.top||0)+(n.bottom||0):n||0,i=rc()(e,"row");return Ri()(i).reduce(function(t,e,n){var o=i[e].map(function(t){return t.textSize.height+t.symbolSpacer+r});return t[n]=Math.max.apply(Math,Sb(o)),t},[])},jb=function(t){var e=t.style&&t.style.title||{},n=$l.approximateTextSize(t.title,e),r=e.padding||0;return{height:n.height+2*r||0,width:n.width+2*r||0}},Rb=function(t,e){var n=t.title,r=t.titleOrientation,i=t.centerTitle,o=t.borderPadding,a=e.height,s=e.width,u=function(t){var e=t.titleOrientation,n=t.centerTitle,r=t.titleComponent,i=t.style&&t.style.title||{},o=r.props&&r.props.style||{},a=function(t,e){var n={textAnchor:"right"===t?"end":"start",verticalAnchor:"bottom"===t?"end":"start"};if(e){var r="top"===t||"bottom"===t;return{textAnchor:r?"middle":n.textAnchor,verticalAnchor:r?n.verticalAnchor:"middle"}}return n}(e,n);return Array.isArray(o)?o.map(function(t){return un()({},t,i,a)}):un()({},o,i,a)}(t),l=Array.isArray(u)?u[0].padding:u.padding,c="top"===r||"bottom"===r,f="right"===r?"right":"left",p={x:i?s/2:o["bottom"===r?"bottom":"top"]+(l||0),y:i?a/2:o[f]+(l||0)},h=function(){return o[r]+(l||0)},d=c?p.x:h(),y=c?h():p.y;return{x:"right"===r?t.x+s-d:t.x+d,y:"bottom"===r?t.y+a-y:t.y+y,style:u,text:n}},Ib=function(t,e){var n=Ln.modifyProps(t,e,"legend"),r=t=cn()({},n,Tb(n)),i=r.title,o=r.titleOrientation,a=kb(t),s=Ab(t,a),u=Mb(t,a),l=i?jb(t):{height:0,width:0};return{height:"left"===o||"right"===o?Math.max(Ob()(u),l.height):Ob()(u)+l.height,width:"left"===o||"right"===o?Ob()(s)+l.width:Math.max(Ob()(s),l.width)}},Lb=function(t,e){var n=Ln.modifyProps(t,e,"legend"),r=t=cn()({},n,Tb(n)),i=r.data,o=r.standalone,a=r.theme,s=r.padding,u=r.style,l=r.colorScale,c=r.gutter,f=r.rowGutter,p=r.borderPadding,h=r.title,d=r.titleOrientation,y=r.name,v=r.x,g=void 0===v?0:v,m=r.y,b=void 0===m?0:m,_=kb(t),x=Ab(t,_),w=Mb(t,_),E=Cb(t),O=h?jb(t):{height:0,width:0},S="left"===d?O.width:0,P="top"===d?O.height:0,C=c&&"object"==typeof c&&c.left||0,T=f&&"object"==typeof f&&f.top||0,k=Ib(t,e),A=function(t,e,n){var r=t.x,i=t.y,o=t.borderPadding,a=t.style;return{x:r,y:i,height:(e||0)+o.top+o.bottom,width:(n||0)+o.left+o.right,style:cn()({fill:"none"},a.border)}}(t,k.height,k.width),M=Rb(t,A),j={parent:{data:i,standalone:o,theme:a,padding:s,name:y,height:t.height,width:t.width,style:u.parent},all:{border:A,title:M}};return _.reduce(function(t,e,n){var r=l[n%l.length],o=un()({},e.symbol,u.data,{fill:r}),a=e.eventKey||n,s=function(t,e,n){var r=t.column,i=t.row;return{x:vi()(r).reduce(function(t,e){return t+=n[e]},0),y:vi()(i).reduce(function(t,n){return t+=e[n]},0)}}(e,w,x),c=b+p.top+e.symbolSpacer,f=g+p.left+e.symbolSpacer,h={index:n,data:i,datum:e,symbol:o.type||o.symbol||"circle",size:e.size,style:o,y:c+s.y+P+T,x:f+s.x+S+C},d={datum:e,data:i,text:e.name,style:E[n],y:h.y,x:h.x+e.symbolSpacer+e.size/2};return t[a]={data:h,labels:d},t},j)};function Db(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nb(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Bb={orientation:"vertical",titleOrientation:"top",width:450,height:300,x:0,y:0},zb=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Nb(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.a.Component),function(t,e,n){e&&Fb(t.prototype,e),n&&Fb(t,n)}(e,[{key:"renderChildren",value:function(t){var e=this,n=t.dataComponent,r=t.labelComponent,i=t.title,o=this.dataKeys.map(function(t,r){if("all"!==t){var i=e.getComponentProps(n,"data",r);return s.a.cloneElement(n,i)}}).filter(Boolean),a=this.dataKeys.map(function(t,n){var i=e.getComponentProps(r,"labels",n);if(void 0!==i.text&&null!==i.text)return s.a.cloneElement(r,i)}).filter(Boolean),u=this.getComponentProps(t.borderComponent,"border","all"),l=s.a.cloneElement(t.borderComponent,u);if(i){var c=this.getComponentProps(t.title,"title","all"),f=s.a.cloneElement(t.titleComponent,c);return[l].concat(Db(o),[f],Db(a))}return[l].concat(Db(o),Db(a))}},{key:"render",value:function(){var t=this.constructor.role,e=Ln.modifyProps(this.props,Bb,t),n=[this.renderChildren(e)];return e.standalone?this.renderContainer(e.containerComponent,n):s.a.cloneElement(e.groupComponent,{},n)}}]),e}();Object.defineProperty(zb,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"VictoryLegend"}),Object.defineProperty(zb,"role",{configurable:!0,enumerable:!0,writable:!0,value:"legend"}),Object.defineProperty(zb,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{borderComponent:l.a.element,borderPadding:l.a.oneOfType([l.a.number,l.a.shape({top:l.a.number,bottom:l.a.number,left:l.a.number,right:l.a.number})]),centerTitle:l.a.bool,colorScale:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.oneOf(["grayscale","qualitative","heatmap","warm","cool","red","green","blue"])]),containerComponent:l.a.element,data:l.a.arrayOf(l.a.shape({name:l.a.string.isRequired,label:l.a.object,symbol:l.a.object})),dataComponent:l.a.element,eventKey:l.a.oneOfType([l.a.func,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),events:l.a.arrayOf(l.a.shape({target:l.a.oneOf(["data","labels","parent"]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),eventHandlers:l.a.object})),externalEventMutations:l.a.arrayOf(l.a.shape({callback:l.a.function,childName:l.a.oneOfType([l.a.string,l.a.array]),eventKey:l.a.oneOfType([l.a.array,xn.allOfType([xn.integer,xn.nonNegative]),l.a.string]),mutation:l.a.function,target:l.a.oneOfType([l.a.string,l.a.array])})),groupComponent:l.a.element,gutter:l.a.oneOfType([l.a.number,l.a.shape({left:l.a.number,right:l.a.number})]),height:xn.nonNegative,itemsPerRow:xn.nonNegative,labelComponent:l.a.element,name:l.a.string,orientation:l.a.oneOf(["horizontal","vertical"]),padding:l.a.oneOfType([l.a.number,l.a.shape({top:l.a.number,bottom:l.a.number,left:l.a.number,right:l.a.number})]),rowGutter:l.a.oneOfType([l.a.number,l.a.shape({top:l.a.number,bottom:l.a.number})]),sharedEvents:l.a.shape({events:l.a.array,getEventState:l.a.func}),standalone:l.a.bool,style:l.a.shape({border:l.a.object,data:l.a.object,labels:l.a.object,parent:l.a.object,title:l.a.object}),symbolSpacer:l.a.number,theme:l.a.object,title:l.a.oneOfType([l.a.string,l.a.array]),titleComponent:l.a.element,titleOrientation:l.a.oneOf(["top","bottom","left","right"]),width:xn.nonNegative,x:xn.nonNegative,y:xn.nonNegative}}),Object.defineProperty(zb,"defaultProps",{configurable:!0,enumerable:!0,writable:!0,value:{borderComponent:s.a.createElement(ai,null),data:[{name:"Series 1"},{name:"Series 2"}],containerComponent:s.a.createElement(zn,null),dataComponent:s.a.createElement(Si,null),groupComponent:s.a.createElement("g",null),labelComponent:s.a.createElement(dr,null),standalone:!0,theme:ti.grayscale,titleComponent:s.a.createElement(dr,null)}}),Object.defineProperty(zb,"getBaseProps",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Lb(t,Bb)}}),Object.defineProperty(zb,"getDimensions",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return Ib(t,Bb)}}),Object.defineProperty(zb,"expectedComponents",{configurable:!0,enumerable:!0,writable:!0,value:["borderComponent","containerComponent","dataComponent","groupComponent","labelComponent","titleComponent"]});var Ub=Xi(zb);n.d(e,"Area",function(){return Fd}),n.d(e,"Bar",function(){return ly}),n.d(e,"Border",function(){return ai}),n.d(e,"Box",function(){return ai}),n.d(e,"Candle",function(){return _y}),n.d(e,"ClipPath",function(){return jr}),n.d(e,"Curve",function(){return nv}),n.d(e,"ErrorBar",function(){return Fy}),n.d(e,"LineSegment",function(){return di}),n.d(e,"Point",function(){return Si}),n.d(e,"Slice",function(){return Qf}),n.d(e,"Voronoi",function(){return Bv}),n.d(e,"Flyout",function(){return Rm}),n.d(e,"Whisker",function(){return ki}),n.d(e,"Circle",function(){return Dr}),n.d(e,"Rect",function(){return zr}),n.d(e,"Line",function(){return ci}),n.d(e,"Path",function(){return xi}),n.d(e,"TSpan",function(){return ar}),n.d(e,"Text",function(){return cr}),n.d(e,"VictoryAnimation",function(){return en}),n.d(e,"VictoryArea",function(){return Wd}),n.d(e,"VictoryAxis",function(){return Vc}),n.d(e,"VictoryPolarAxis",function(){return yf}),n.d(e,"VictoryBar",function(){return vy}),n.d(e,"VictoryBoxPlot",function(){return Lv}),n.d(e,"VictoryCandlestick",function(){return Ry}),n.d(e,"VictoryChart",function(){return Cf}),n.d(e,"VictoryErrorBar",function(){return Yy}),n.d(e,"VictoryGroup",function(){return Nf}),n.d(e,"VictoryLine",function(){return lv}),n.d(e,"VictoryLabel",function(){return dr}),n.d(e,"VictoryLegend",function(){return Ub}),n.d(e,"VictoryPie",function(){return Pd}),n.d(e,"VictoryScatter",function(){return bv}),n.d(e,"VictoryStack",function(){return Zf}),n.d(e,"VictoryTheme",function(){return ti}),n.d(e,"VictoryTransition",function(){return kr}),n.d(e,"VictorySharedEvents",function(){return Oc}),n.d(e,"VictoryTooltip",function(){return Nm}),n.d(e,"VictoryVoronoi",function(){return Rg}),n.d(e,"VictoryPortal",function(){return qn}),n.d(e,"Portal",function(){return On}),n.d(e,"VictoryContainer",function(){return zn}),n.d(e,"VictoryClipContainer",function(){return Wr}),n.d(e,"VictoryZoomContainer",function(){return ib}),n.d(e,"ZoomHelpers",function(){return Jm}),n.d(e,"zoomContainerMixin",function(){return rb}),n.d(e,"RawZoomHelpers",function(){return Km}),n.d(e,"VictorySelectionContainer",function(){return km}),n.d(e,"SelectionHelpers",function(){return wm}),n.d(e,"selectionContainerMixin",function(){return Tm}),n.d(e,"VictoryBrushContainer",function(){return lm}),n.d(e,"BrushHelpers",function(){return nm}),n.d(e,"brushContainerMixin",function(){return um}),n.d(e,"VictoryCursorContainer",function(){return mm}),n.d(e,"CursorHelpers",function(){return fm}),n.d(e,"cursorContainerMixin",function(){return gm}),n.d(e,"VictoryVoronoiContainer",function(){return Zm}),n.d(e,"VoronoiHelpers",function(){return Um}),n.d(e,"voronoiContainerMixin",function(){return Xm}),n.d(e,"combineContainerMixins",function(){return bb}),n.d(e,"makeCreateContainerFunction",function(){return xb}),n.d(e,"createContainer",function(){return wb}),n.d(e,"VictoryBrushLine",function(){return Xg}),n.d(e,"addEvents",function(){return Xi}),n.d(e,"Collection",function(){return mr}),n.d(e,"Data",function(){return vl}),n.d(e,"DefaultTransitions",function(){return gl}),n.d(e,"Domain",function(){return Il}),n.d(e,"Events",function(){return Vi}),n.d(e,"Helpers",function(){return Ln}),n.d(e,"Log",function(){return yn}),n.d(e,"PropTypes",function(){return xn}),n.d(e,"Scale",function(){return el}),n.d(e,"Style",function(){return tr}),n.d(e,"TextSize",function(){return $l}),n.d(e,"Transitions",function(){return Sr}),n.d(e,"Selection",function(){return Nl}),n.d(e,"LabelHelpers",function(){return Qn}),n.d(e,"Axis",function(){return vc}),n.d(e,"Wrapper",function(){return mc})},function(t,e,n){"use strict";n.r(e);var r=n(12),i=n(16),o=n.n(i),a=n(9),s="#define SHADER_NAME arc-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=a.t.fp64LowPart,y=[0,0,0,255],v={fp64:!1,getSourcePosition:function(t){return t.sourcePosition},getTargetPosition:function(t){return t.targetPosition},getSourceColor:y,getTargetColor:y,getStrokeWidth:1,widthScale:1},g=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=null;return Number.isFinite(t.strokeWidth)&&(r.log.deprecated("ArcLayer: `strokeWidth`","`getStrokeWidth`")(),n={getStrokeWidth:t.strokeWidth}),c(this,p(e).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,r["Layer"]),function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(e,[{key:"getShaders",value:function(){return this.use64bitProjection()?{vs:"#define SHADER_NAME arc-layer-vertex-shader-64\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\n\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\n\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths * widthScale / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvoid get_pos_fp64(vec2 source[2], vec2 target[2], float segmentRatio, out vec2 position[4]) {\n\n  vec2 vertex_height = paraboloid_fp64(source, target, segmentRatio);\n\n  vec2 position_temp[2];\n\n  vec2_mix_fp64(source, target, segmentRatio, position_temp);\n\n  position[0] = position_temp[0];\n  position[1] = position_temp[1];\n\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) {\n    vertex_height = vec2(0.0, 0.0);\n  }\n\n  position[2] = sqrt_fp64(vertex_height);\n  position[3] = vec2(1.0, 0.0);\n}\n\nvoid main(void) {\n  vec2 projected_source_coord[2];\n  vec2 projected_target_coord[2];\n\n  project_position_fp64(instancePositions.xy, instancePositions64Low.xy, projected_source_coord);\n  project_position_fp64(instancePositions.zw, instancePositions64Low.zw, projected_target_coord);\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 curr_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, segmentRatio,\n    curr_pos_modelspace);\n\n  vec2 next_pos_modelspace[4];\n\n  get_pos_fp64(projected_source_coord, projected_target_coord, nextSegmentRatio,\n    next_pos_modelspace);\n\n  vec4 curr_pos_clipspace = project_to_clipspace_fp64(curr_pos_modelspace);\n  vec4 next_pos_clipspace = project_to_clipspace_fp64(next_pos_modelspace);\n\n  vec2 offset = getExtrusionOffset(next_pos_clipspace.xy - curr_pos_clipspace.xy, positions.y);\n\n  gl_Position = curr_pos_clipspace + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:s,modules:["project64","picking"]}:{vs:"#define SHADER_NAME arc-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec4 instancePositions64Low;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float numSegments;\nuniform float opacity;\nuniform float widthScale;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths * widthScale / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\n\nvoid main(void) {\n  vec2 source = project_position(vec3(instancePositions.xy, 0.0), instancePositions64Low.xy).xy;\n  vec2 target = project_position(vec3(instancePositions.zw, 0.0), instancePositions64Low.zw).xy;\n\n  float segmentIndex = positions.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  // if it's the first point, use next - current as direction\n  // otherwise use current - prev\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec3 currPos = getPos(source, target, segmentRatio);\n  vec3 nextPos = getPos(source, target, nextSegmentRatio);\n  vec4 curr = project_to_clipspace(vec4(currPos, 1.0));\n  vec4 next = project_to_clipspace(vec4(nextPos, 1.0));\n\n  // extrude\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y);\n  gl_Position = curr + vec4(offset, 0.0, 0.0);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:s,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:4,transition:!0,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions},instancePositions64Low:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstancePositions64Low},instanceSourceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getSourceColor",defaultValue:y},instanceTargetColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getTargetColor",defaultValue:y},instanceWidths:{size:1,transition:!0,accessor:"getStrokeWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var n=t.props,r=t.oldProps,i=t.changeFlags;if(f(p(e.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}this.state.model.setUniforms({widthScale:n.widthScale})}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<50;n++)e=e.concat([n,-1,0,n,1,0]);var r=new a.h(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_STRIP,attributes:{positions:new Float32Array(e)}}),isInstanced:!0,shaderCache:this.context.shaderCache}));return r.setUniforms({numSegments:50}),r}},{key:"calculateInstancePositions",value:function(t){var e=this.props,n=e.data,r=e.getSourcePosition,i=e.getTargetPosition,o=t.value,a=t.size,s=0,u=!0,l=!1,c=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,d=r(h),y=i(h);o[s+0]=d[0],o[s+1]=d[1],o[s+2]=y[0],o[s+3]=y[1],s+=a}}catch(t){l=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}}},{key:"calculateInstancePositions64Low",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.props,r=n.data,i=n.getSourcePosition,o=n.getTargetPosition,a=t.value,s=t.size,u=0,l=!0,c=!1,f=void 0;try{for(var p,h=r[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var y=p.value,v=i(y),g=o(y);a[u+0]=d(v[0]),a[u+1]=d(v[1]),a[u+2]=d(g[0]),a[u+3]=d(g[1]),u+=s}}catch(t){c=!0,f=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}else t.value=new Float32Array(4)}}]),e}();g.layerName="ArcLayer",g.defaultProps=v;function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t,e,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=a.t.fp64LowPart,C=[0,0,0,255],T=o.a.LINEAR_MIPMAP_LINEAR,k=o.a.LINEAR,A={iconAtlas:null,iconMapping:{type:"object",value:{},async:!0},sizeScale:1,fp64:!1,getPosition:function(t){return t.position},getIcon:function(t){return t.icon},getColor:C,getSize:1,getAngle:0},M=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,O(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(e,r["Layer"]),function(t,e,n){e&&x(t.prototype,e),n&&x(t,n)}(e,[{key:"getShaders",value:function(){return{vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset.y *= -1.0;\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n\n  vColorMode = instanceColorModes;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nconst float MIN_ALPHA = 0.05;\n\nvoid main(void) {\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < MIN_ALPHA) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",update:this.calculateInstanceOffsets},instanceIconFrames:{size:4,accessor:"getIcon",update:this.calculateInstanceIconFrames},instanceColorModes:{size:1,type:o.a.UNSIGNED_BYTE,accessor:"getIcon",update:this.calculateInstanceColorMode},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:C},instanceAngles:{size:1,transition:!0,accessor:"getAngle",defaultValue:0}})}},{key:"updateState",value:function(t){var n=this,r=t.oldProps,i=t.props,s=t.changeFlags;E(O(e.prototype),"updateState",this).call(this,{props:i,oldProps:r,changeFlags:s});var u,l=i.iconAtlas,c=i.iconMapping;if(r.iconMapping!==c){var f=this.getAttributeManager();f.invalidate("instanceOffsets"),f.invalidate("instanceIconFrames"),f.invalidate("instanceColorModes")}r.iconAtlas!==l&&(l instanceof a.i?(l.setParameters((_(u={},o.a.TEXTURE_MIN_FILTER,T),_(u,o.a.TEXTURE_MAG_FILTER,k),u)),this.setState({iconsTexture:l})):"string"==typeof l&&Object(a.x)(this.context.gl,{urls:[l]}).then(function(t){var e,r=b(t,1)[0];r.setParameters((_(e={},o.a.TEXTURE_MIN_FILTER,T),_(e,o.a.TEXTURE_MAG_FILTER,k),e)),n.setState({iconsTexture:r})}));if(i.fp64!==r.fp64){var p=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(p)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props.sizeScale,r=this.state.iconsTexture;r&&this.state.model.render(Object.assign({},e,{iconsTexture:r,iconsTextureDim:[r.width,r.height],sizeScale:n}))}},{key:"_getModel",value:function(t){return new a.h(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.props,r=n.data,i=n.getPosition,o=t.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=r[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=i(c.value);o[a++]=P(p[0]),o[a++]=P(p[1])}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}else t.value=new Float32Array(2)}},{key:"calculateInstanceOffsets",value:function(t){var e=this.props,n=e.data,r=e.iconMapping,i=e.getIcon,o=t.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=r[i(c.value)]||{};o[a++]=p.width/2-p.anchorX||0,o[a++]=p.height/2-p.anchorY||0}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceColorMode",value:function(t){var e=this.props,n=e.data,r=e.iconMapping,i=e.getIcon,o=t.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=i(c.value),h=r[p]&&r[p].mask;o[a++]=h?1:0}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}},{key:"calculateInstanceIconFrames",value:function(t){var e=this.props,n=e.data,r=e.iconMapping,i=e.getIcon,o=t.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=r[i(c.value)]||{};o[a++]=p.x||0,o[a++]=p.y||0,o[a++]=p.width||0,o[a++]=p.height||0}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}}]),e}();M.layerName="IconLayer",M.defaultProps=A;function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t,e,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=a.t.fp64LowPart,B={fp64:!1,getSourcePosition:function(t){return t.sourcePosition},getTargetPosition:function(t){return t.targetPosition},getColor:[0,0,0,255],getStrokeWidth:1},z=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=null;return Number.isFinite(t.strokeWidth)&&(r.log.deprecated("LineLayer: `strokeWidth`","`getStrokeWidth`")(),n={getStrokeWidth:t.strokeWidth}),I(this,D(e).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(e,r["Layer"]),function(t,e,n){e&&R(t.prototype,e),n&&R(t,n)}(e,[{key:"getShaders",value:function(){return{vs:"#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceSourceTargetPositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute float instanceWidths;\n\nuniform float opacity;\n\nvarying vec4 vColor;\n\n// offset vector by strokeWidth pixels\n// offset_direction is -1 (left) or 1 (right)\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset_screenspace = dir_screenspace * offset_direction * instanceWidths / 2.0;\n  vec2 offset_clipspace = project_pixel_to_clipspace(offset_screenspace).xy;\n\n  return offset_clipspace;\n}\n\nvoid main(void) {\n  // Position\n  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourceTargetPositions64xyLow.xy, vec3(0.));\n  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceSourceTargetPositions64xyLow.zw, vec3(0.));\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec4 p = mix(source, target, segmentIndex);\n\n  // extrude\n  vec2 offset = getExtrusionOffset(target.xy - source.xy, positions.y);\n  gl_Position = p + vec4(offset, 0.0, 0.0);\n\n  // Color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME line-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,transition:!0,accessor:"getTargetPosition"},instanceSourceTargetPositions64xyLow:{size:4,accessor:["getSourcePosition","getTargetPosition"],update:this.calculateInstanceSourceTargetPositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getStrokeWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var n=t.props,r=t.oldProps,i=t.changeFlags;if(L(D(e.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"_getModel",value:function(t){return new a.h(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_STRIP,attributes:{positions:new Float32Array([0,-1,0,0,1,0,1,-1,0,1,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstanceSourceTargetPositions64xyLow",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.props,r=n.data,i=n.getSourcePosition,o=n.getTargetPosition,a=t.value,s=t.size,u=0,l=!0,c=!1,f=void 0;try{for(var p,h=r[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var d=p.value,y=i(d),v=o(d);a[u+0]=N(y[0]),a[u+1]=N(y[1]),a[u+2]=N(v[0]),a[u+3]=N(v[1]),u+=s}}catch(t){c=!0,f=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}else t.value=new Float32Array(4)}}]),e}();z.layerName="LineLayer",z.defaultProps=B;function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G(t,e){return!e||"object"!==U(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t,e,n){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var X=a.t.fp64LowPart,Z=[0,0,0,255],Y=[0,0,1],K={radiusPixels:10,fp64:!1,getPosition:function(t){return t.position},getNormal:Y,getColor:Z,lightSettings:{}},J=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),G(this,q(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,r["Layer"]),function(t,e,n){e&&V(t.prototype,e),n&&V(t,n)}(e,[{key:"getShaders",value:function(t){return{vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n\n  // Find the center of the point and add the current vertex\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.), position_worldspace);\n  gl_Position += project_pixel_to_clipspace(positions.xy * radiusPixels);\n\n  // Apply lighting\n  float lightWeight = lighting_getLightWeight(position_worldspace.xyz, // the w component is always 1.0\n    project_normal(instanceNormals));\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(lightWeight * instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:Y},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:Z}})}},{key:"updateState",value:function(t){var n=t.props,r=t.oldProps,i=t.changeFlags;if(W(q(e.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props.radiusPixels;this.state.model.render(Object.assign({},e,{radiusPixels:n}))}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<3;n++){var r=n/3*Math.PI*2;e.push(2*Math.cos(r),2*Math.sin(r),0)}return new a.h(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{positions:new Float32Array(e)}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.props,r=n.data,i=n.getPosition,o=t.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=r[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=i(c.value);o[a++]=X(p[0]),o[a++]=X(p[1])}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}else t.value=new Float32Array(2)}}]),e}();J.layerName="PointCloudLayer",J.defaultProps=K;function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function et(t,e,n){return(et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=a.t.fp64LowPart,ot={radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1,fp64:!1,getPosition:function(t){return t.position},getRadius:1,getColor:[0,0,0,255]},at=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tt(this,nt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(e,r["Layer"]),function(t,e,n){e&&$(t.prototype,e),n&&$(t,n)}(e,[{key:"getShaders",value:function(t){return{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float outline;\nuniform float strokeWidth;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n  // Multiply out radius and clamp to limits\n  float outerRadiusPixels = clamp(\n    project_scale(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n\n  // outline is centered at the radius\n  // outer radius needs to offset by half stroke width\n  outerRadiusPixels += outline * strokeWidth / 2.0;\n\n  // position on the containing square in [-1, 1] space\n  unitPosition = positions.xy;\n  // 0 - solid circle, 1 - stroke with lineWidth=0\n  innerUnitRadius = outline * (1.0 - strokeWidth / outerRadiusPixels);\n\n  vec3 offset = positions * outerRadiusPixels;\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, offset);\n\n  // Apply opacity to instance color, or return instance picking color\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\n\nvoid main(void) {\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0 || distToCenter < innerUnitRadius) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceColors:{size:4,transition:!0,type:o.a.UNSIGNED_BYTE,accessor:"getColor",defaultValue:[0,0,0,255]}})}},{key:"updateState",value:function(t){var n=t.props,r=t.oldProps,i=t.changeFlags;if(et(nt(e.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.radiusScale,i=n.radiusMinPixels,o=n.radiusMaxPixels,a=n.outline,s=n.strokeWidth;this.state.model.render(Object.assign({},e,{outline:a?1:0,strokeWidth:s,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o}))}},{key:"_getModel",value:function(t){return new a.h(t,Object.assign(this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{positions:new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.props,r=n.data,i=n.getPosition,o=t.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=r[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=i(c.value);o[a++]=it(p[0]),o[a++]=it(p[1])}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}else t.value=new Float32Array(2)}}]),e}();at.layerName="ScatterplotLayer",at.defaultProps=ot;var st=n(37),ut=n.n(st);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ft(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pt(t,e,n){return(pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ht(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yt=[0,0,0,0],vt=[0,255,0,255],gt=["minColor","maxColor","colorRange","colorDomain"],mt={cellSizePixels:{value:100,min:1},cellMarginPixels:{value:2,min:0,max:5},colorDomain:null,colorRange:r.experimental.defaultColorRange,getPosition:function(t){return t.position},getWeight:function(t){return 1},gpuAggregation:!0},bt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ft(this,ht(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(e,r["Layer"]),function(t,e,n){e&&ct(t.prototype,e),n&&ct(t,n)}(e,[{key:"getShaders",value:function(){var t=Object(a.w)(this.context.gl)?{vs:"#version 300 es\n#define SHADER_NAME screen-grid-layer-vertex-shader\n#define RANGE_COUNT 6\n\nin vec3 vertices;\nin vec3 instancePositions;\nin vec4 instanceCounts;\nin vec3 instancePickingColors;\n\nlayout(std140) uniform;\nuniform float opacity;\nuniform vec3 cellScale;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform AggregationData\n{\n  vec4 maxCount;\n} aggregationData;\n\nuniform vec4 colorRange[RANGE_COUNT];\nuniform vec2 colorDomain;\nuniform bool shouldUseMinMax;\n\nout vec4 vColor;\n\nvec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {\n  vec4 outColor = vec4(0., 0., 0., 0.);\n  if (value >= domain.x && value <= domain.y) {\n    float domainRange = domain.y - domain.x;\n    if (domainRange <= 0.) {\n      outColor = colorRange[0];\n    } else {\n      float rangeCount = float(RANGE_COUNT);\n      float rangeStep = domainRange / rangeCount;\n      float idx = floor((value - domain.x) / rangeStep);\n      idx = clamp(idx, 0., rangeCount - 1.);\n      int intIdx = int(idx);\n      outColor = colorRange[intIdx];\n    }\n  }\n  outColor = outColor / 255.;\n  return outColor;\n}\n\nvoid main(void) {\n  float weight = instanceCounts.g ;\n  float maxWeight = aggregationData.maxCount.w;\n  float step = weight / maxWeight;\n  vec4 minMaxColor = mix(minColor, maxColor, step) / 255.;\n\n  vec2 domain = colorDomain;\n  float domainMaxValid = float(colorDomain.y != 0.);\n  domain.y = mix(maxWeight, colorDomain.y, domainMaxValid);\n  vec4 rangeColor = quantizeScale(domain, colorRange, weight);\n\n  float rangeMinMax = float(shouldUseMinMax);\n  vec4 color = mix(rangeColor, minMaxColor, rangeMinMax);\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n",fs:"#version 300 es\n#define SHADER_NAME screen-grid-layer-fragment-shader\n\nprecision highp float;\n\nin vec4 vColor;\nout vec4 fragColor;\n\nvoid main(void) {\n  fragColor = vColor;\n\n  fragColor = picking_filterColor(fragColor);\n}\n"}:{vs:"#define SHADER_NAME screen-grid-layer-vertex-shader-webgl1\n#define RANGE_COUNT 6\n\nattribute vec3 vertices;\nattribute vec3 instancePositions;\nattribute vec4 instanceCounts;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform vec3 cellScale;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float maxWeight;\nuniform vec4 colorRange[RANGE_COUNT];\nuniform vec2 colorDomain;\nuniform bool shouldUseMinMax;\n\nvarying vec4 vColor;\n\nvec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {\n  vec4 outColor = vec4(0., 0., 0., 0.);\n  if (value >= domain.x && value <= domain.y) {\n    float domainRange = domain.y - domain.x;\n    if (domainRange <= 0.) {\n      outColor = colorRange[0];\n    } else {\n      float rangeCount = float(RANGE_COUNT);\n      float rangeStep = domainRange / rangeCount;\n      float idx = floor((value - domain.x) / rangeStep);\n      idx = clamp(idx, 0., rangeCount - 1.);\n      int intIdx = int(idx);\n      outColor = colorRange[intIdx];\n    }\n  }\n  outColor = outColor / 255.;\n  return outColor;\n}\n\nvoid main(void) {\n  float weight = instanceCounts.g ;\n  float step = weight / maxWeight;\n  vec4 minMaxColor = mix(minColor, maxColor, step) / 255.;\n\n  vec2 domain = colorDomain;\n  float domainMaxValid = float(colorDomain.y != 0.);\n  domain.y = mix(maxWeight, colorDomain.y, domainMaxValid);\n  vec4 rangeColor = quantizeScale(domain, colorRange, weight);\n\n  float rangeMinMax = float(shouldUseMinMax);\n  vec4 color = mix(rangeColor, minMaxColor, rangeMinMax);\n  vColor = vec4(color.rgb, color.a * opacity);\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n",fs:"#define SHADER_NAME screen-grid-layer-fragment-shader-webgl1\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  gl_FragColor = picking_filterColor(gl_FragColor);\n}\n"};return t.modules=["picking"],t}},{key:"initializeState",value:function(){var t=this.getAttributeManager(),e=this.context.gl;t.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceCounts:{size:4,transition:!0,accessor:["getPosition","getWeight"],update:this.calculateInstanceCounts,noAlloc:!0}});var n={id:"".concat(this.id,"-aggregator"),shaderCache:this.context.shaderCache};this.setState({model:this._getModel(e),gpuGridAggregator:new r._GPUGridAggregator(e,n),maxCountBuffer:this._getMaxCountBuffer(e),aggregationData:null}),this._setupUniformBuffer()}},{key:"shouldUpdateState",value:function(t){return t.changeFlags.somethingChanged}},{key:"updateState",value:function(t){pt(ht(e.prototype),"updateState",this).call(this,t),this._updateUniforms(t),t.changeFlags.dataChanged&&this._processData();var n=this._getAggregationChangeFlags(t);n&&this._updateAggregation(n)}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.gl,r=this.props.parameters,i=void 0===r?{}:r,s=this.props.minColor||yt,u=this.props.maxColor||vt,l=this.props.colorDomain||[1,0],c=this.state,f=c.model,p=c.maxCountBuffer,h=c.cellScale,d=c.shouldUseMinMax,y=c.colorRange,v=c.maxWeight,g={minColor:s,maxColor:u,cellScale:h,colorRange:y,colorDomain:l,shouldUseMinMax:d};Object(a.w)(n)?p.bind({target:o.a.UNIFORM_BUFFER}):g.maxWeight=v,e=Object.assign(g,e),f.draw({uniforms:e,parameters:Object.assign({depthTest:!1,depthMask:!1},i)}),Object(a.w)(n)&&p.unbind()}},{key:"calculateInstancePositions",value:function(t,e){for(var n=e.numInstances,r=this.context.viewport,i=r.width,o=r.height,a=this.props.cellSizePixels,s=this.state.numCol,u=t.value,l=t.size,c=0;c<n;c++){var f=c%s,p=Math.floor(c/s);u[c*l+0]=f*a/i*2-1,u[c*l+1]=1-p*a/o*2,u[c*l+2]=0}}},{key:"calculateInstanceCounts",value:function(t,e){e.numInstances;var n=this.state.countsBuffer;t.update({buffer:n})}},{key:"getPickingInfo",value:function(t){var e=t.info,n=(t.mode,e.index);if(n>=0){var i=this.state.aggregationData;i||(i={countsData:this.state.countsBuffer.getData(),maxCountData:this.state.maxCountBuffer.getData()},this.setState({aggregationData:i}));var o=i,a=o.countsData,s=o.maxCountData;e.object=r._GPUGridAggregator.getAggregationData({countsData:a,maxCountData:s,pixelIndex:n})}return e}},{key:"_getAggregationChangeFlags",value:function(t){var e=t.oldProps,n=t.props,r=t.changeFlags,i=n.cellSizePixels!==e.cellSizePixels||n.cellMarginPixels!==e.cellMarginPixels,o=r.dataChanged,a=r.viewportChanged;return i||o||a?{cellSizeChanged:i,dataChanged:o,viewportChanged:a}:null}},{key:"_getModel",value:function(t){return new a.h(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLE_FAN,attributes:{vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_getMaxCountBuffer",value:function(t){return new a.b(t,{bytes:16,size:4,index:0})}},{key:"_processData",value:function(){var t=this.props,e=t.data,n=t.getPosition,r=t.getWeight,i=[],o=[],a=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,p=n(f);i.push(p[0]),i.push(p[1]),o.push(r(f))}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}this.setState({positions:i,weights:o})}},{key:"_setupUniformBuffer",value:function(){var t=this.context.gl;if(Object(a.w)(t)){var e=this.state.model.program.handle,n=t.getUniformBlockIndex(e,"AggregationData");t.uniformBlockBinding(e,n,0)}}},{key:"_shouldUseMinMax",value:function(){var t=this.props,e=t.minColor,n=t.maxColor,i=t.colorDomain,o=t.colorRange;return e||n?(r.log.deprecated("ScreenGridLayer props: minColor and maxColor","colorRange, colorDomain")(),!0):!i&&!o}},{key:"_updateAggregation",value:function(t){var e=this.getAttributeManager();(t.cellSizeChanged||t.viewportChanged)&&(this._updateGridParams(),e.invalidateAll());var n=this.props,i=n.cellSizePixels,o=n.gpuAggregation,a=this.state,s=a.positions,u=a.weights,l=a.maxCountBuffer,c=a.countsBuffer,f=this.context.viewport,p=!1,h=null;this.context.viewport instanceof r.WebMercatorViewport?p=!0:(p=!1,h=f.pixelProjectionMatrix);var d=this.state.gpuGridAggregator.run({positions:s,weights:u,cellSize:[i,i],viewport:f,countsBuffer:c,maxCountBuffer:l,changeFlags:t,useGPU:o,projectPoints:p,gridTransformMatrix:h}).maxWeight,y=void 0===d?0:d;this.setState({aggregationData:null,maxWeight:y}),e.invalidate("instanceCounts")}},{key:"_updateUniforms",value:function(t){var e=t.oldProps,n=t.props,r=t.changeFlags,i={};if(gt.some(function(t){return e[t]!==n[t]})&&(i.shouldUseMinMax=this._shouldUseMinMax()),e.colorRange!==n.colorRange){var o=[];ut()(n.colorRange&&6===n.colorRange.length),n.colorRange.forEach(function(t){o.push(t[0],t[1],t[2],t[3]||255)}),i.colorRange=o}if(e.cellMarginPixels!==n.cellMarginPixels||e.cellSizePixels!==n.cellSizePixels||r.viewportChanged){var a=this.context.viewport,s=a.width,u=a.height,l=this.props,c=l.cellSizePixels,f=l.cellMarginPixels,p=c>f?f:0;i.cellScale=new Float32Array([(c-p)/s*2,-(c-p)/u*2,1])}this.setState(i)}},{key:"_updateGridParams",value:function(){var t=this.context.viewport,e=t.width,n=t.height,r=this.props.cellSizePixels,i=this.context.gl,s=Math.ceil(e/r),u=Math.ceil(n/r),l=s*u,c=4*l*4,f=this.state.countsBuffer;f&&f.delete(),f=new a.b(i,{size:4,bytes:c,type:o.a.FLOAT,instanced:1}),this.setState({numCol:s,numRow:u,numInstances:l,countsBuffer:f})}}]),e}();bt.layerName="ScreenGridLayer",bt.defaultProps=mt;function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Et(t,e,n){return(Et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ot(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pt=a.t.fp64LowPart,Ct=[255,0,255,255],Tt={cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getPosition:function(t){return t.position},getElevation:1e3,getColor:Ct,lightSettings:{}},kt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wt(this,Ot(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(e,r["Layer"]),function(t,e,n){e&&xt(t.prototype,e),n&&xt(t,n)}(e,[{key:"getShaders",value:function(){return{vs:"#define SHADER_NAME grid-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceElevations;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float extruded;\nuniform float cellSize;\nuniform float coverage;\nuniform float opacity;\nuniform float elevationScale;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter\n#define ELEVATION_SCALE 0.8\n\n// Result\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instanceElevations < 0.0);\n  float finalCellSize = project_scale(cellSize) * mix(1.0, 0.0, noRender);\n\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = instanceElevations  * (positions.z + 1.0) *\n      ELEVATION_SCALE * elevationScale;\n  }\n\n  // cube geometry vertics are between -1 to 1, scale and transform it to between 0, 1\n  vec3 extrudedPosition = vec3(instancePositions.xy, elevation);\n  vec2 extrudedPosition64xyLow = instancePositions64xyLow;\n  vec3 offset = vec3(\n    (positions.x * coverage + 1.0) / 2.0 * finalCellSize,\n    (positions.y * coverage - 1.0) / 2.0 * finalCellSize,\n    1.0);\n\n  // extrude positions\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(extrudedPosition, extrudedPosition64xyLow, offset, position_worldspace);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = lighting_getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n  vec4 color = vec4(lightWeightedColor, instanceColors.a * opacity) / 255.0;\n  vColor = color;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME grid-cell-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:Ct}})}},{key:"updateState",value:function(t){var n=t.props,r=t.oldProps,i=t.changeFlags;if(Et(Ot(e.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}}},{key:"_getModel",value:function(t){return new a.h(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.c,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.cellSize,i=n.extruded,o=n.elevationScale,a=n.coverage;this.state.model.render(Object.assign({},e,{cellSize:r,extruded:i,elevationScale:o,coverage:a}))}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.props,r=n.data,i=n.getPosition,o=t.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=r[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=i(c.value);o[a++]=Pt(p[0]),o[a++]=Pt(p[1])}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}else t.value=new Float32Array(2)}}]),e}();kt.layerName="GridCellLayer",kt.defaultProps=Tt;var At=6378e3;function Mt(t,e,n){var r=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=1/0,o=-1/0,a=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;t=r(f)[1],Number.isFinite(t)&&(i=t<i?t:i,o=t>o?t:o)}}catch(t){s=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}var p=function(t,e){var n=function(t){return t/At*(180/Math.PI)}(t),r=function(t,e){return e/At*(180/Math.PI)/Math.cos(t*Math.PI/180)}(e,t);return{yOffset:n,xOffset:r}}(n,(i+o)/2);if(p.xOffset<=0||p.yOffset<=0)return{gridHash:{},gridOffset:p};var h={},d=!0,y=!1,v=void 0;try{for(var g,m=e[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var b=g.value,_=r(b)[1],x=r(b)[0];if(Number.isFinite(_)&&Number.isFinite(x)){var w=Math.floor((_+90)/p.yOffset),E=Math.floor((x+180)/p.xOffset),O="".concat(w,"-").concat(E);h[O]=h[O]||{count:0,points:[]},h[O].count+=1,h[O].points.push(b)}}}catch(t){y=!0,v=t}finally{try{d||null==m.return||m.return()}finally{if(y)throw v}}return{gridHash:h,gridOffset:p}}(t,e,n),i=r.gridHash,o=r.gridOffset;return{gridOffset:o,layerData:function(t,e){return Object.keys(t).reduce(function(n,r,i){var o=r.split("-"),a=parseInt(o[0],10),s=parseInt(o[1],10);return n.push(Object.assign({index:i,position:[e.xOffset*s-180,e.yOffset*a-90]},t[r])),n},[])}(i,o)}}function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function It(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lt(t,e,n){return(Lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nt=r.experimental.BinSorter,Bt=r.experimental.defaultColorRange,zt=r.experimental.getQuantizeScale,Ut=r.experimental.getLinearScale;function Vt(){}var Gt={colorDomain:null,colorRange:Bt,getColorValue:function(t){return t.length},lowerPercentile:{type:"number",min:0,max:100,value:0},upperPercentile:{type:"number",min:0,max:100,value:100},onSetColorDomain:Vt,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:function(t){return t.length},elevationLowerPercentile:{type:"number",min:0,max:100,value:0},elevationUpperPercentile:{type:"number",min:0,max:100,value:100},elevationScale:1,onSetElevationDomain:Vt,cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:function(t){return t.position},extruded:!1,fp64:!1,lightSettings:{}},Wt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),It(this,Dt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(e,r["CompositeLayer"]),function(t,e,n){e&&Rt(t.prototype,e),n&&Rt(t,n)}(e,[{key:"initializeState",value:function(){this.state={layerData:[],sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:Vt,elevationScaleFunc:Vt,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function(t){var e=this,n=t.oldProps,r=t.props,i=t.changeFlags,o=this.needsReProjectPoints(n,r);i.dataChanged||o?this.getLayerData():(this.getDimensionChanges(n,r)||[]).forEach(function(t){return"function"==typeof t&&t.apply(e)})}},{key:"needsReProjectPoints",value:function(t,e){return t.cellSize!==e.cellSize||t.getPosition!==e.getPosition}},{key:"getDimensionUpdaters",value:function(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(t,e){var n=this.state.dimensionUpdaters,r=[];for(var i in n){var o=n[i].find(function(n){return n.triggers.some(function(n){return t[n]!==e[n]})});o&&r.push(o.updater)}return r.length?r:null}},{key:"getPickingInfo",value:function(t){var e=t.info,n=this.state,r=n.sortedColorBins,i=n.sortedElevationBins,o=null;if(e.picked&&e.index>-1){var a=this.state.layerData[e.index],s=r.binMap[a.index]&&r.binMap[a.index].value,u=i.binMap[a.index]&&i.binMap[a.index].value;o=Object.assign({colorValue:s,elevationValue:u},a)}return Object.assign(e,{picked:Boolean(o),object:o})}},{key:"getUpdateTriggers",value:function(){var t=this,e=this.state.dimensionUpdaters,n={},r=function(r){n[r]={};var i=!0,o=!1,a=void 0;try{for(var s,u=e[r][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.triggers.forEach(function(e){n[r][e]=t.props[e]})}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}};for(var i in e)r(i);return n}},{key:"getLayerData",value:function(){var t=this.props,e=Mt(t.data,t.cellSize,t.getPosition).layerData;this.setState({layerData:e}),this.getSortedBins()}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var t=this.props.getColorValue,e=new Nt(this.state.layerData||[],t);this.setState({sortedColorBins:e}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var t=this.props.getElevationValue,e=new Nt(this.state.layerData||[],t);this.setState({sortedElevationBins:e}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var t=this.props,e=t.lowerPercentile,n=t.upperPercentile,r=t.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([e,n]),"function"==typeof r&&r(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var t=this.props,e=t.elevationLowerPercentile,n=t.elevationUpperPercentile,r=t.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([e,n]),"function"==typeof r&&r(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var t=this.props.colorRange,e=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=zt(e,t)}},{key:"getElevationScale",value:function(){var t=this.props.elevationRange,e=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=Ut(e,t)}},{key:"_onGetSublayerColor",value:function(t){var e=this.state,n=e.sortedColorBins,r=e.colorScaleFunc,i=e.colorValueDomain,o=n.binMap[t.index]&&n.binMap[t.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1]?r(o):[0,0,0,0];return s[3]=Number.isFinite(s[3])?s[3]:255,s}},{key:"_onGetSublayerElevation",value:function(t){var e=this.state,n=e.sortedElevationBins,r=e.elevationScaleFunc,i=e.elevationValueDomain,o=n.binMap[t.index]&&n.binMap[t.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?r(o):-1}},{key:"getSubLayerProps",value:function(){var t=this.props,n=t.elevationScale,r=t.fp64,i=t.extruded,o=t.cellSize,a=t.coverage,s=t.lightSettings,u=t.transitions;return Lt(Dt(e.prototype),"getSubLayerProps",this).call(this,{id:"grid-cell",data:this.state.layerData,fp64:r,cellSize:o,coverage:a,lightSettings:s,elevationScale:n,extruded:i,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:u&&{getColor:u.getColorValue,getElevation:u.getElevationValue},updateTriggers:this.getUpdateTriggers()})}},{key:"getSubLayerClass",value:function(){return kt}},{key:"renderLayers",value:function(){return new(this.getSubLayerClass())(this.getSubLayerProps())}}]),e}();Wt.layerName="GridLayer",Wt.defaultProps=Gt;function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xt(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zt(t,e,n){return(Zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jt=a.t.fp64LowPart,Qt=[255,0,255,255],$t={hexagonVertices:null,radius:null,angle:null,coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},extruded:!0,fp64:!1,getCentroid:function(t){return t.centroid},getColor:Qt,getElevation:1e3,lightSettings:{}},te=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=!1;return t.hexagonVertices||t.radius&&Number.isFinite(t.angle)?t.hexagonVertices&&(!Array.isArray(t.hexagonVertices)||t.hexagonVertices.length<6)&&(r.log.once(0,"HexagonCellLayer: hexagonVertices needs to be an array of 6 points")(),n=!0):(r.log.once(0,"HexagonCellLayer: Either hexagonVertices or radius and angle are needed to calculate primitive hexagon.")(),n=!0),n&&(r.log.once(0,"Now using 1000 meter as default radius, 0 as default angle")(),t.radius=1e3,t.angle=0),Xt(this,Yt(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kt(t,e)}(e,r["Layer"]),function(t,e,n){e&&Ht(t.prototype,e),n&&Ht(t,n)}(e,[{key:"getShaders",value:function(){return{vs:"\n#define SHADER_NAME hexagon-cell-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec2 instancePositions;\nattribute float instanceElevations;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Custom uniforms\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded;\nuniform float coverage;\nuniform float elevationScale;\n\n// Result\nvarying vec4 vColor;\n\n// A magic number to scale elevation so that 1 unit approximate to 1 meter.\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n\n  // rotate primitive position and normal\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n\n  // calculate elevation, if 3d not enabled set to 0\n  // cylindar gemoetry height are between -0.5 to 0.5, transform it to between 0, 1\n  float elevation = 0.0;\n\n  if (extruded > 0.5) {\n    elevation = instanceElevations * (positions.z + 0.5) *\n      ELEVATION_SCALE * elevationScale;\n  }\n\n  // if ahpha == 0.0 or z < 0.0, do not render element\n  float noRender = float(instanceColors.a == 0.0 || instanceElevations < 0.0);\n  float dotRadius = project_scale(radius) * mix(coverage, 0.0, noRender);\n\n  // project center of hexagon\n  vec3 centroidPosition = vec3(instancePositions, elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 offset = vec3(rotationMatrix * positions.xy * dotRadius, 0.);\n\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, offset, position_worldspace);\n\n  // Light calculations\n  // Worldspace is the linear space after Mercator projection\n\n  vec3 normals_worldspace = vec3(rotationMatrix * normals.xy, normals.z);\n\n  float lightWeight = 1.0;\n\n  if (extruded > 0.5) {\n    lightWeight = lighting_getLightWeight(\n      position_worldspace.xyz, // the w component is always 1.0\n      normals_worldspace\n    );\n  }\n\n  vec3 lightWeightedColor = lightWeight * instanceColors.rgb;\n\n  // opacity-multiplied instance color\n  vColor = vec4(lightWeightedColor, opacity * instanceColors.a) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME hexagon-cell-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:2,transition:!0,accessor:"getCentroid"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getCentroid",update:this.calculateInstancePositions64xyLow},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:Qt}})}},{key:"updateState",value:function(t){var n=t.props,r=t.oldProps,i=t.changeFlags;if(Zt(Yt(e.prototype),"updateState",this).call(this,{props:n,oldProps:r,changeFlags:i}),n.fp64!==r.fp64){var o=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(o)}),this.getAttributeManager().invalidateAll()}n.hexagonVertices===r.hexagonVertices&&n.radius===r.radius&&n.angle===r.angle||this.updateRadiusAngle()}},{key:"updateRadiusAngle",value:function(){var t=this.props,e=t.angle,n=t.radius,r=this.props.hexagonVertices;if(Array.isArray(r)&&r.length>=6){var i=this.props.hexagonVertices,o=i[0],a=i[3],s=this.context.viewport.getDistanceScales().pixelsPerMeter,u=this.projectFlat(o),l=this.projectFlat(a),c=u[0]-l[0],f=u[1]-l[1],p=Math.sqrt(c*c+f*f);e=Math.acos(c/p)*-Math.sign(f)+Math.PI/2,n=p/2/s[0]}this.setState({angle:e,radius:n})}},{key:"getCylinderGeometry",value:function(t){return new a.d({radius:t,topRadius:t,bottomRadius:t,topCap:!0,bottomCap:!0,height:1,verticalAxis:"z",nradial:6,nvertical:1})}},{key:"_getModel",value:function(t){return new a.h(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:this.getCylinderGeometry(1),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.elevationScale,i=n.extruded,o=n.coverage,a=this.state,s=a.radius,u=a.angle;this.state.model.render(Object.assign({},e,{radius:s,angle:u,extruded:i,coverage:o,elevationScale:r}))}},{key:"calculateInstancePositions64xyLow",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.props,r=n.data,i=n.getCentroid,o=t.value,a=0,s=!0,u=!1,l=void 0;try{for(var c,f=r[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=i(c.value);o[a++]=Jt(p[0]),o[a++]=Jt(p[1])}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}else t.value=new Float32Array(2)}}]),e}();te.layerName="HexagonCellLayer",te.defaultProps=$t;var ee=Math.PI/3,ne=[0,ee,2*ee,3*ee,4*ee,5*ee];function re(t){return t[0]}function ie(t){return t[1]}var oe=function(){var t,e,n,r=0,i=0,o=1,a=1,s=re,u=ie;function l(t){var r,i={},o=[],a=t.length;for(r=0;r<a;++r)if(!isNaN(c=+s.call(null,l=t[r],r,t))&&!isNaN(f=+u.call(null,l,r,t))){var l,c,f,p=Math.round(f/=n),h=Math.round(c=c/e-(1&p)/2),d=f-p;if(3*Math.abs(d)>1){var y=c-h,v=h+(c<h?-1:1)/2,g=p+(f<p?-1:1),m=c-v,b=f-g;y*y+d*d>m*m+b*b&&(h=v+(1&p?1:-1)/2,p=g)}var _=h+"-"+p,x=i[_];x?x.push(l):(o.push(x=i[_]=[l]),x.x=(h+(1&p)/2)*e,x.y=p*n)}return o}function c(t){var e=0,n=0;return ne.map(function(r){var i=Math.sin(r)*t,o=-Math.cos(r)*t,a=i-e,s=o-n;return e=i,n=o,[a,s]})}return l.hexagon=function(e){return"m"+c(null==e?t:+e).join("l")+"z"},l.centers=function(){for(var s=[],u=Math.round(i/n),l=Math.round(r/e),c=u*n;c<a+t;c+=n,++u)for(var f=l*e+(1&u)*e/2;f<o+e/2;f+=e)s.push([f,c]);return s},l.mesh=function(){var e=c(t).slice(0,4).join("l");return l.centers().map(function(t){return"M"+t+"m"+e}).join("")},l.x=function(t){return arguments.length?(s=t,l):s},l.y=function(t){return arguments.length?(u=t,l):u},l.radius=function(r){return arguments.length?(e=2*(t=+r)*Math.sin(ee),n=1.5*t,l):t},l.size=function(t){return arguments.length?(r=i=0,o=+t[0],a=+t[1],l):[o-r,a-i]},l.extent=function(t){return arguments.length?(r=+t[0][0],i=+t[0][1],o=+t[1][0],a=+t[1][1],l):[[r,i],[o,a]]},l.radius(1)};function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t,e,n){return(le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ce(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=r.experimental.BinSorter,he=r.experimental.getQuantizeScale,de=r.experimental.getLinearScale;function ye(){}var ve={colorDomain:null,colorRange:r.experimental.defaultColorRange,getColorValue:function(t){return t.length},lowerPercentile:0,upperPercentile:100,onSetColorDomain:ye,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:function(t){return t.length},elevationLowerPercentile:0,elevationUpperPercentile:100,elevationScale:{type:"number",min:0,value:1},onSetElevationDomain:ye,radius:1e3,coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function(t,e){var n=t.data,r=t.radius,i=t.getPosition,o=function(t,e){var n=e.getDistanceScales().pixelsPerMeter;return t*n[0]}(r,e),a=[],s=!0,u=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var p=c.value;a.push(Object.assign({screenCoord:e.projectFlat(i(p))},p))}}catch(t){u=!0,l=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return{hexagons:oe().radius(o).x(function(t){return t.screenCoord[0]}).y(function(t){return t.screenCoord[1]})(a).map(function(t,n){return{centroid:e.unprojectFlat([t.x,t.y]),points:t,index:n}})}},getPosition:function(t){return t.position},fp64:!1,lightSettings:{}},ge=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.hexagonAggregator||t.radius||(r.log.once(0,"HexagonLayer: Default hexagonAggregator requires radius prop to be set, Now using 1000 meter as default")(),t.radius=ve.radius),Number.isFinite(t.upperPercentile)&&(t.upperPercentile>100||t.upperPercentile<0)&&(r.log.once(0,"HexagonLayer: upperPercentile should be between 0 and 100. Assign to 100 by default")(),t.upperPercentile=ve.upperPercentile),Number.isFinite(t.lowerPercentile)&&(t.lowerPercentile>100||t.lowerPercentile<0)&&(r.log.once(0,"HexagonLayer: lowerPercentile should be between 0 and 100. Assign to 0 by default")(),t.lowerPercentile=ve.upperPercentile),t.lowerPercentile>=t.upperPercentile&&(r.log.once(0,"HexagonLayer: lowerPercentile should not be bigger than upperPercentile. Assign to 0 by default")(),t.lowerPercentile=ve.lowerPercentile),ue(this,ce(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(e,r["CompositeLayer"]),function(t,e,n){e&&se(t.prototype,e),n&&se(t,n)}(e,[{key:"initializeState",value:function(){this.state={hexagons:[],hexagonVertices:null,sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:ye,elevationScaleFunc:ye,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function(t){var e=this,n=t.oldProps,r=t.props,i=t.changeFlags,o=this.getDimensionChanges(n,r);i.dataChanged||this.needsReProjectPoints(n,r)?this.getHexagons():o&&o.forEach(function(t){return"function"==typeof t&&t.apply(e)})}},{key:"needsReProjectPoints",value:function(t,e){return t.radius!==e.radius||t.hexagonAggregator!==e.hexagonAggregator}},{key:"getDimensionUpdaters",value:function(){return{getColor:[{id:"value",triggers:["getColorValue"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(t,e){var n=this.state.dimensionUpdaters,r=[];for(var i in n){var o=n[i].find(function(n){return n.triggers.some(function(n){return t[n]!==e[n]})});o&&r.push(o.updater)}return r.length?r:null}},{key:"getHexagons",value:function(){var t=this.props.hexagonAggregator,e=this.context.viewport,n=t(this.props,e),r=n.hexagons,i=n.hexagonVertices;this.setState({hexagons:r,hexagonVertices:i}),this.getSortedBins()}},{key:"getPickingInfo",value:function(t){var e=t.info,n=this.state,r=n.sortedColorBins,i=n.sortedElevationBins,o=null;if(e.picked&&e.index>-1){var a=this.state.hexagons[e.index],s=r.binMap[a.index]&&r.binMap[a.index].value,u=i.binMap[a.index]&&i.binMap[a.index].value;o=Object.assign({colorValue:s,elevationValue:u},a)}return Object.assign(e,{picked:Boolean(o),object:o})}},{key:"getUpdateTriggers",value:function(){var t=this,e=this.state.dimensionUpdaters,n={},r=function(r){n[r]={};var i=!0,o=!1,a=void 0;try{for(var s,u=e[r][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.triggers.forEach(function(e){n[r][e]=t.props[e]})}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}};for(var i in e)r(i);return n}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var t=this.props.getColorValue,e=new pe(this.state.hexagons||[],t);this.setState({sortedColorBins:e}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var t=this.props.getElevationValue,e=new pe(this.state.hexagons||[],t);this.setState({sortedElevationBins:e}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var t=this.props,e=t.lowerPercentile,n=t.upperPercentile,r=t.onSetColorDomain;this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([e,n]),"function"==typeof r&&r(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var t=this.props,e=t.elevationLowerPercentile,n=t.elevationUpperPercentile,r=t.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([e,n]),"function"==typeof r&&r(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var t=this.props.colorRange,e=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=he(e,t)}},{key:"getElevationScale",value:function(){var t=this.props.elevationRange,e=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=de(e,t)}},{key:"_onGetSublayerColor",value:function(t){var e=this.state,n=e.sortedColorBins,r=e.colorScaleFunc,i=e.colorValueDomain,o=n.binMap[t.index]&&n.binMap[t.index].value,a=this.props.colorDomain||i,s=o>=a[0]&&o<=a[a.length-1]?r(o):[0,0,0,0];return s[3]=Number.isFinite(s[3])?s[3]:255,s}},{key:"_onGetSublayerElevation",value:function(t){var e=this.state,n=e.sortedElevationBins,r=e.elevationScaleFunc,i=e.elevationValueDomain,o=n.binMap[t.index]&&n.binMap[t.index].value,a=this.props.elevationDomain||i;return o>=a[0]&&o<=a[a.length-1]?r(o):-1}},{key:"getSubLayerProps",value:function(){var t=this.props,n=t.radius,r=t.elevationScale,i=t.extruded,o=t.coverage,a=t.lightSettings,s=t.fp64,u=t.transitions;return le(ce(e.prototype),"getSubLayerProps",this).call(this,{id:"hexagon-cell",data:this.state.hexagons,fp64:s,hexagonVertices:this.state.hexagonVertices,radius:n,elevationScale:r,angle:Math.PI/2,extruded:i,coverage:o,lightSettings:a,getColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:u&&{getColor:u.getColorValue,getElevation:u.getElevationValue},updateTriggers:this.getUpdateTriggers()})}},{key:"getSubLayerClass",value:function(){return te}},{key:"renderLayers",value:function(){return new(this.getSubLayerClass())(this.getSubLayerProps())}}]),e}();ge.layerName="HexagonLayer",ge.defaultProps=ve;var me="#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\nuniform float alignMode;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\n// mod doesn't work correctly for negative numbers\nfloat mod2(float a, float b) {\n  return a - floor(a / b) * b;\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n\n// if given position is in the gap part of the dashed line\n// dashArray.x: solid stroke length, relative to width\n// dashArray.y: gap length, relative to width\n// alignMode:\n// 0 - no adjustment\n// o----     ----     ----     ---- o----     -o----     ----     o\n// 1 - stretch to fit, draw half dash at each end for nicer joints\n// o--    ----    ----    ----    --o--      --o--     ----     --o\nbool dash_isFragInGap() {\n  float solidLength = vDashArray.x;\n  float gapLength = vDashArray.y;\n\n  float unitLength = solidLength + gapLength;\n\n  if (unitLength == 0.0) {\n    return false;\n  }\n\n  unitLength = mix(\n    unitLength,\n    vPathLength / round(vPathLength / unitLength),\n    alignMode\n  );\n\n  float offset = alignMode * solidLength / 2.0;\n\n  return gapLength > 0.0 &&\n    vPathPosition >= 0.0 &&\n    vPathPosition <= vPathLength &&\n    mod2(vPathPosition + offset, unitLength) > solidLength;\n}\n\nvoid main(void) {\n  // if joint is rounded, test distance from the corner\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 0., 1.);\n    // return;\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 0., 1., 1.);\n    // return;\n    discard;\n  }\n  if (vColor.a == 0.0 || dash_isFragInGap()) {\n    // Enable to debug joints\n    // gl_FragColor = vec4(0., 1., 1., 1.);\n    // return;\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n";function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xe(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function we(t,e,n){return(we="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ee(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Se=a.t.fp64LowPart,Pe=[0,0,0,255],Ce={widthScale:1,widthMinPixels:0,widthMaxPixels:Number.MAX_SAFE_INTEGER,rounded:!1,miterLimit:4,fp64:!1,dashJustified:!1,getPath:function(t){return t.path},getColor:Pe,getWidth:1,getDashArray:null},Te=function(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]},ke={enter:function(t,e){return e.length?e.subarray(e.length-t.length):t}},Ae=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,Ee(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(e,r["Layer"]),function(t,e,n){e&&_e(t.prototype,e),n&&_e(t,n)}(e,[{key:"getShaders",value:function(){return this.use64bitProjection()?{vs:"\n#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\nvec3 lineJoin(vec2 prevPoint64[2], vec2 currPoint64[2], vec2 nextPoint64[2]) {\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  vec2 deltaA64[2];\n  vec2 deltaB64[2];\n\n  vec2_sub_fp64(currPoint64, prevPoint64, deltaA64);\n  vec2_sub_fp64(nextPoint64, currPoint64, deltaB64);\n\n  vec2 lengthA64 = vec2_length_fp64(deltaA64);\n  vec2 lengthB64 = vec2_length_fp64(deltaB64);\n\n  vec2 deltaA = vec2(deltaA64[0].x, deltaA64[1].x);\n  vec2 deltaB = vec2(deltaB64[0].x, deltaB64[1].x);\n\n  float lenA = lengthA64.x;\n  float lenB = lengthB64.x;\n\n  vec2 offsetVec;\n  float offsetScale;\n  float offsetDirection;\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA > PIXEL_EPSILON ? lenA : 0.0;\n  lenB = lenB > PIXEL_EPSILON ? lenB : 0.0;\n  vec2 dirA = lenA > 0. ? deltaA / lenA : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? deltaB / lenB : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = mix(perpB, perpA, positions.x);\n  float L = mix(lenB, lenA, positions.x);\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n  float cornerPosition = mix(\n    flipIfTrue(turnsRight == (positions.y > 0.0)),\n    0.0,\n    positions.z\n  );\n\n  offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  // do not bevel if line segment is too short\n  cornerPosition *= float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n  // trim if inside corner extends further than the line segment\n  offsetScale = mix(\n    offsetScale,\n    min(offsetScale, L / width / max(cosHalfA, EPSILON)),\n    float(cornerPosition < 0.0)\n  );\n\n  vMiterLength = mix(\n    offsetScale * cornerPosition,\n    mix(offsetScale, 0.0, cornerPosition),\n    step(0.0, cornerPosition)\n  ) - sinHalfA * jointType;\n  offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n  offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // using a small number as the limit for determining if the lenA or lenB is 0\n  float isStartCap = step(lenA, 1.0e-5);\n  float isEndCap = step(lenB, 1.0e-5);\n  float isCap = max(isStartCap, isEndCap);\n\n  // 0: center, 1: side\n  cornerPosition = isCap * (1.0 - positions.z);\n\n  // start of path: use next - curr\n  offsetVec = mix(offsetVec, mix(dirB, perpB, cornerPosition), isStartCap);\n  // end of path: use curr - prev\n  offsetVec = mix(offsetVec, mix(dirA, perpA, cornerPosition), isEndCap);\n\n  // extend out a triangle to envelope the round cap\n  offsetScale = mix(\n    offsetScale,\n    mix(4.0 * jointType, 1.0, cornerPosition),\n    isCap\n  );\n  vMiterLength = mix(vMiterLength, 1.0 - cornerPosition, isCap);\n\n  offsetDirection = mix(\n    offsetDirection,\n    mix(flipIfTrue(isStartCap > 0.), positions.y, cornerPosition),\n    isCap\n  );\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  float isEnd = positions.x;\n  vec2 offsetFromStartOfPath = mix(vCornerOffset, vCornerOffset + deltaA / width, isEnd);\n  vec2 dir = mix(dirB, dirA, isEnd);\n  vPathPosition = dot(offsetFromStartOfPath, dir);\n\n  return vec3(vCornerOffset * width, 0.0);\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  // Calculate current position 64bit\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  vec2 projected_curr_position[2];\n  project_position_fp64(currPosition.xy, currPosition64xyLow, projected_curr_position);\n  float projected_curr_position_z = project_scale(currPosition.z);\n\n  // Calculate previous position\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n\n  // Calculate prev position 64bit\n\n  vec2 projected_prev_position[2];\n  project_position_fp64(prevPosition.xy, instanceStartEndPositions64xyLow.xy, projected_prev_position);\n\n  // Calculate next positions\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n\n  // Calculate next position 64bit\n\n  vec2 projected_next_position[2];\n  project_position_fp64(nextPosition.xy, instanceStartEndPositions64xyLow.zw, projected_next_position);\n\n  vec3 pos = lineJoin(projected_prev_position, projected_curr_position, projected_next_position);\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vec2(pos.x, 0.0), projected_curr_position[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vec2(pos.y, 0.0), projected_curr_position[1]);\n  vertex_pos_modelspace[2] = vec2(pos.z + projected_curr_position_z, 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n}\n",fs:me,modules:["project64","picking"]}:{vs:"#define SHADER_NAME path-layer-vertex-shader-64\n\nattribute vec3 positions;\n\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec4 instanceStartEndPositions64xyLow;\nattribute vec3 instanceLeftDeltas;\nattribute vec3 instanceRightDeltas;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec2 instanceDashArrays;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vDashArray;\nvarying float vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\n\n// calculate line join positions\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  float width\n) {\n  vec2 deltaA = currPoint.xy - prevPoint.xy;\n  vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  // when two points are closer than PIXEL_EPSILON in pixels,\n  // assume they are the same point to avoid precision issue\n  lenA = lenA > PIXEL_EPSILON ? lenA : 0.0;\n  lenB = lenB > PIXEL_EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n\n  // tangent of the corner\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  // direction of the corner\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  // width offset from current position\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n\n  // cap super sharp angles\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n\n  // do not bevel if line segment is too short\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) / width * cosHalfA);\n\n  // trim if inside corner extends further than the line segment\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / width / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n\n  // special treatment for start cap and end cap\n  // TODO - This has an issue. len is always positive because it is length.\n  // Step returns zero if -lenA<0, so practically this is a comparison of\n  // lenA with zero, with lots of problems because of the -lenA. Can we use EPSILON?\n  bool isStartCap = step(0.0, -lenA) > 0.5;\n  bool isEndCap = step(0.0, -lenB) > 0.5;\n  bool isCap = isStartCap || isEndCap;\n\n  // 0: center, 1: side\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n\n  // start of path: use next - curr\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n\n  // end of path: use curr - prev\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n\n  // extend out a triangle to envelope the round cap\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n\n  // Generate variables for dash calculation\n  vDashArray = instanceDashArrays;\n  vPathLength = L / width;\n  // vec2 offsetFromStartOfPath = isEnd ? vCornerOffset + deltaA / width : vCornerOffset;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA / width;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = dot(offsetFromStartOfPath, dir);\n\n  return currPoint + vec3(vCornerOffset * width, 0.0);\n}\n\n// calculate line join positions\n// extract params from attributes and uniforms\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  // relative position to the corner:\n  // -1: inside (smaller side of the angle)\n  // 0: center\n  // 1: outside (bigger side of the angle)\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  float width = clamp(project_scale(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0;\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width\n  );\n}\n\nvoid main() {\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(instancePickingColors);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n  vec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n  prevPosition = project_position(prevPosition, prevPosition64xyLow);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec2 currPosition64xyLow = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n  currPosition = project_position(currPosition, currPosition64xyLow);\n\n  vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n  vec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n  nextPosition = project_position(nextPosition, nextPosition64xyLow);\n\n  vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);\n\n  gl_Position = project_to_clipspace(vec4(pos, 1.0));\n}\n",fs:me,modules:["picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instanceStartPositions:{size:3,transition:ke,accessor:"getPath",update:this.calculateStartPositions},instanceEndPositions:{size:3,transition:ke,accessor:"getPath",update:this.calculateEndPositions},instanceStartEndPositions64xyLow:{size:4,update:this.calculateInstanceStartEndPositions64xyLow},instanceLeftDeltas:{size:3,update:this.calculateLeftDeltas},instanceRightDeltas:{size:3,update:this.calculateRightDeltas},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ke,update:this.calculateStrokeWidths,defaultValue:1},instanceDashArrays:{size:2,accessor:"getDashArray",update:this.calculateDashArrays},instanceColors:{size:4,type:o.a.UNSIGNED_BYTE,accessor:"getColor",transition:ke,update:this.calculateColors,defaultValue:Pe},instancePickingColors:{size:3,type:o.a.UNSIGNED_BYTE,update:this.calculatePickingColors}})}},{key:"updateState",value:function(t){var n=t.oldProps,r=t.props,i=t.changeFlags;we(Ee(e.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i});var o=this.props.getPath,a=this.getAttributeManager();if(r.fp64!==n.fp64){var s=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)}),a.invalidateAll()}if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var u=r.data.map(o),l=u.map(function(t){return t.length-1}),c=l.reduce(function(t,e){return t+e},0);this.setState({paths:u,numInstances:c,bufferLayout:l}),a.invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.rounded,i=n.miterLimit,o=n.widthScale,a=n.widthMinPixels,s=n.widthMaxPixels,u=n.dashJustified;this.state.model.render(Object.assign({},e,{jointType:Number(r),alignMode:Number(u),widthScale:o,miterLimit:i,widthMinPixels:a,widthMaxPixels:s}))}},{key:"_getModel",value:function(t){return new a.h(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_getPathLength",value:function(t){return t.length}},{key:"calculateStartPositions",value:function(t){var e=this.state,n=e.paths,r=e.bufferLayout,i=t.value;t.bufferLayout=r;var o=0;n.forEach(function(t){for(var e=t.length-1,n=0;n<e;n++){var r=t[n];i[o++]=r[0],i[o++]=r[1],i[o++]=r[2]||0}})}},{key:"calculateEndPositions",value:function(t){var e=this.state,n=e.paths,r=e.bufferLayout,i=t.value;t.bufferLayout=r;var o=0;n.forEach(function(t){for(var e=1;e<t.length;e++){var n=t[e];i[o++]=n[0],i[o++]=n[1],i[o++]=n[2]||0}})}},{key:"calculateInstanceStartEndPositions64xyLow",value:function(t){var e=this.use64bitPositions();if(t.constant=!e,e){var n=this.state.paths,r=t.value,i=0;n.forEach(function(t){for(var e=t.length-1,n=0;n<e;n++){var o=t[n],a=t[n+1];r[i++]=Se(o[0]),r[i++]=Se(o[1]),r[i++]=Se(a[0]),r[i++]=Se(a[1])}})}else t.value=new Float32Array(4)}},{key:"calculateLeftDeltas",value:function(t){var e=this.state.paths,n=t.value,r=0;e.forEach(function(t){for(var e=t.length-1,i=Te(t)?t[t.length-2]:t[0],o=0;o<e;o++){var a=t[o];n[r++]=a[0]-i[0],n[r++]=a[1]-i[1],n[r++]=a[2]-i[2]||0,i=a}})}},{key:"calculateRightDeltas",value:function(t){var e=this.state.paths,n=t.value,r=0;e.forEach(function(t){for(var e=1;e<t.length;e++){var i=t[e],o=t[e+1];o||(o=Te(t)?t[1]:i),n[r++]=o[0]-i[0],n[r++]=o[1]-i[1],n[r++]=o[2]-i[2]||0}})}},{key:"calculateStrokeWidths",value:function(t){var e=this,n=this.props,r=n.data,i=n.getWidth,o=this.state,a=o.paths,s=o.bufferLayout,u=t.value;t.bufferLayout=s;var l=0;a.forEach(function(t,n){for(var o=i(r[n],n),a=e._getPathLength(t),s=1;s<a;s++)u[l++]=o})}},{key:"calculateDashArrays",value:function(t){var e=this,n=this.props,r=n.data,i=n.getDashArray;if(i){var o=this.state.paths,a=t.value,s=0;o.forEach(function(t,n){for(var o=i(r[n],n),u=e._getPathLength(t),l=1;l<u;l++)a[s++]=o[0],a[s++]=o[1]})}}},{key:"calculateColors",value:function(t){var e=this,n=this.props,r=n.data,i=n.getColor,o=this.state,a=o.paths,s=o.bufferLayout,u=t.value;t.bufferLayout=s;var l=0;a.forEach(function(t,n){var o=i(r[n],n);isNaN(o[3])&&(o[3]=255);for(var a=e._getPathLength(t),s=1;s<a;s++)u[l++]=o[0],u[l++]=o[1],u[l++]=o[2],u[l++]=o[3]})}},{key:"calculatePickingColors",value:function(t){var e=this,n=this.state.paths,r=t.value,i=0;n.forEach(function(t,n){for(var o=e.encodePickingColor(n),a=e._getPathLength(t),s=1;s<a;s++)r[i++]=o[0],r[i++]=o[1],r[i++]=o[2]})}}]),e}();Ae.layerName="PathLayer",Ae.defaultProps=Ce;var Me=n(234),je=n.n(Me),Re=r.experimental.flattenVertices;function Ie(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Le(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]?t:t.concat([e])}function De(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).dimensions;return Ie(t)?[Le(t)]:t.map(Le)}function Fe(t){return Ie(t)?t.length:t.reduce(function(t,e){return t+e.length},0)}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Be=r.experimental.fillArray,ze=a.t.fp64LowPart;var Ue=[0,0,0,255],Ve=function(){function t(e){var n=e.polygons,r=e.IndexType;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(t){return t.reduce(function(t,e){return t+Fe(e)},0)}(n=n.map(function(t){return De(t)}));if(this.polygons=n,this.pointCount=i,this.bufferLayout=n.map(function(t){return Fe(t)}),this.IndexType=r,r===Uint16Array&&i>65535)throw new Error("Vertex count exceeds browser's limit");this.attributes={pickingColors:function(t){var e=t.polygons,n=t.pointCount,r=new Uint8ClampedArray(3*n),i=0;return e.forEach(function(t,e){var n=function(t){return[255&++t,t>>8&255,t>>16&255]}(e),o=Fe(t);Be({target:r,source:n,start:i,count:o}),i+=n.length*o}),r}({polygons:n,pointCount:i})}}return function(t,e,n){e&&Ne(t.prototype,e),n&&Ne(t,n)}(t,[{key:"updatePositions",value:function(t){var e=t.fp64,n=t.extruded,r=this.attributes,i=this.polygons,o=this.pointCount;r.positions=r.positions||new Float32Array(3*o),r.vertexValid=r.vertexValid||new Uint8ClampedArray(o).fill(1),e&&(r.positions64xyLow=r.positions64xyLow||new Float32Array(2*o)),function(t){var e=t.cache,n=e.positions,r=e.positions64xyLow,i=e.vertexValid,o=t.polygons,a=(t.extruded,t.fp64),s=0;o.forEach(function(t,e){t.forEach(function(t){t.forEach(function(t,e){var i=t[0],o=t[1],u=t[2]||0;n[3*s]=i,n[3*s+1]=o,n[3*s+2]=u,a&&(r[2*s]=ze(i),r[2*s+1]=ze(o)),s++}),i[s-1]=0})})}({cache:r,polygons:i,extruded:n,fp64:e})}},{key:"indices",value:function(){return function(t){var e=t.polygons,n=t.IndexType,r=void 0===n?Uint32Array:n,i=3*function(t){return t.reduce(function(t,e){return t+function(t){var e=0,n=!0,r=!0,i=!1,o=void 0;try{for(var a,s=De(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value.length;e+=n?u>=3?u-2:0:u+1,n=!1}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return e}(e)},0)}(e),o=function(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,r){n+=Fe(t),e[r+1]=n}),e}(e),a=new r(i),s=0;return e.forEach(function(t,e){var n=!0,r=!1,i=void 0;try{for(var u,l=function(t){var e=function(t){var e=null;if(t.length>1){var n=0;e=[],t.forEach(function(t){n+=t.length,e.push(n)}),e.pop()}return e}(t),n=Re(t,{dimensions:2,result:[]});return je()(n,e,2)}(t)[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var c=u.value;a[s++]=c+o[e]}}catch(t){r=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}),a}({polygons:this.polygons,IndexType:this.IndexType})}},{key:"positions",value:function(){return this.attributes.positions}},{key:"positions64xyLow",value:function(){return this.attributes.positions64xyLow}},{key:"vertexValid",value:function(){return this.attributes.vertexValid}},{key:"elevations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"elevations":e,r=t.getElevation,i=void 0===r?function(t){return 100}:r,o=this.attributes,a=this.polygons,s=this.pointCount,u=function(t){var e=t.cache,n=t.polygons,r=t.pointCount,i=t.getElevation,o=e||new Float32Array(r),a=0;return n.forEach(function(t,e){var n=i(e),r=Fe(t);Be({target:o,source:[n],start:a,count:r}),a+=r}),o}({cache:o[n],polygons:a,pointCount:s,getElevation:i});return o[n]=u,u}},{key:"colors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"colors":e,r=t.getColor,i=void 0===r?function(t){return Ue}:r,o=this.attributes,a=this.polygons,s=this.pointCount,u=function(t){var e=t.cache,n=t.polygons,r=t.pointCount,i=t.getColor,o=e||new Uint8ClampedArray(4*r),a=0;return n.forEach(function(t,e){var n=i(e);isNaN(n[3])&&(n[3]=255);var r=Fe(t);Be({target:o,source:n,start:a,count:r}),a+=n.length*r}),o}({cache:o[n],polygons:a,pointCount:s,getColor:i});return o[n]=u,u}},{key:"pickingColors",value:function(){return this.attributes.pickingColors}}]),t}();function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qe(t,e){return!e||"object"!==Ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t,e,n){return(He="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xe(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ye=[0,0,0,255],Ke={filled:!0,extruded:!1,wireframe:!1,fp64:!1,elevationScale:1,getPolygon:function(t){return t.polygon},getElevation:1e3,getFillColor:Ye,getLineColor:Ye,lightSettings:{}},Je={enter:function(t,e){return e.length?e.subarray(e.length-t.length):t}},Qe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qe(this,Xe(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(e,r["Layer"]),function(t,e,n){e&&We(t.prototype,e),n&&We(t,n)}(e,[{key:"getShaders",value:function(){return{vs:"#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec2 vertexPositions;\nattribute float vertexValid;\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 nextPositions;\nattribute vec2 nextPositions64xyLow;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\nuniform bool isSideVertex;\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  vec3 pos;\n  vec2 pos64xyLow;\n  vec3 normal;\n  vec4 colors = isWireframe ? lineColors : fillColors;\n\n  if (isSideVertex) {\n    pos = mix(positions, nextPositions, vertexPositions.x);\n    pos64xyLow = mix(positions64xyLow, nextPositions64xyLow, vertexPositions.x);\n    isValid = vertexValid;\n  } else {\n    pos = positions;\n    pos64xyLow = positions64xyLow;\n    isValid = 1.0;\n  }\n  if (extruded) {\n    pos.z += elevations * vertexPositions.y;\n  }\n  pos.z *= elevationScale;\n\n  vec4 position_worldspace;\n  gl_Position = project_position_to_clipspace(pos, pos64xyLow, vec3(0.), position_worldspace);\n\n  float lightWeight = 1.0;\n  \n  if (extruded) {\n    if (isSideVertex) {\n      normal = vec3(positions.y - nextPositions.y, nextPositions.x - positions.x, 0.0);\n      normal = project_normal(normal);\n    } else {\n      normal = vec3(0.0, 0.0, 1.0);\n    }\n\n    lightWeight = lighting_getLightWeight(position_worldspace.xyz, normal);\n  }\n\n  vec3 lightWeightedColor = lightWeight * colors.rgb;\n  vColor = vec4(lightWeightedColor, colors.a * opacity) / 255.0;\n\n  // Set color to be rendered to picking fbo (also used to check for selection highlight).\n  picking_setPickingColor(pickingColors);\n}\n",fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying float isValid;\n\nvoid main(void) {\n  if (isValid < 0.5) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n\n  // use highlight color if this fragment belongs to the selected object.\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n\n  // use picking color if rendering to picking FBO.\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","lighting","picking"]}}},{key:"initializeState",value:function(){var t=this.context.gl;this.setState({numInstances:0,IndexType:Object(a.u)(t,a.e.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array});var e=this.getAttributeManager();e.remove(["instancePickingColors"]),e.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,transition:Je,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0},positions64xyLow:{size:2,update:this.calculatePositionsLow,noAlloc:!0},vertexValid:{size:1,type:o.a.UNSIGNED_BYTE,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:Je,accessor:"getElevation",update:this.calculateElevations,noAlloc:!0},fillColors:{alias:"colors",size:4,type:o.a.UNSIGNED_BYTE,transition:Je,accessor:"getFillColor",update:this.calculateFillColors,defaultValue:Ye,noAlloc:!0},lineColors:{alias:"colors",size:4,type:o.a.UNSIGNED_BYTE,transition:Je,accessor:"getLineColor",update:this.calculateLineColors,defaultValue:Ye,noAlloc:!0},pickingColors:{size:3,type:o.a.UNSIGNED_BYTE,update:this.calculatePickingColors,noAlloc:!0}})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.extruded,i=n.filled,a=n.wireframe,s=n.elevationScale,u=this.state,l=u.topModel,c=u.sideModel,f=Object.assign({},e,{extruded:Boolean(r),elevationScale:s});c&&(c.setUniforms(f),a&&(c.setDrawMode(o.a.LINE_STRIP),c.render({isWireframe:!0})),i&&(c.setDrawMode(o.a.TRIANGLE_FAN),c.render({isWireframe:!1}))),l&&l.render(f)}},{key:"updateState",value:function(t){He(Xe(e.prototype),"updateState",this).call(this,t),this.updateGeometry(t);var n=t.props,r=t.oldProps,i=this.getAttributeManager();(n.fp64!==r.fp64||n.filled!==r.filled||n.extruded!==r.extruded)&&(this.state.models&&this.state.models.forEach(function(t){return t.delete()}),this.setState(this._getModels(this.context.gl)),i.invalidateAll())}},{key:"updateGeometry",value:function(t){var e=t.props,n=t.oldProps,r=t.changeFlags,i=r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon);if(i){var o=e.data.map(e.getPolygon),a=this._getPolygonTesselator(o,this.state.IndexType);this.setState({polygonTesselator:a,numInstances:a.pointCount}),this.getAttributeManager().invalidateAll()}(i||e.extruded!==n.extruded||e.fp64!==n.fp64)&&this.state.polygonTesselator.updatePositions({fp64:this.use64bitPositions(),extruded:e.extruded})}},{key:"_getPolygonTesselator",value:function(t,e){return new Ve({polygons:t,IndexType:this.state.IndexType})}},{key:"updateAttributes",value:function(t){He(Xe(e.prototype),"updateAttributes",this).call(this,t);var n=this.getAttributeManager().getChangedAttributes({clearChangedFlags:!0}),r=this.state,i=r.topModel,o=r.sideModel,a=r.vertexCount,s=r.numInstances;if(i&&(i.setVertexCount(a),i.setAttributes(n)),o){o.setInstanceCount(s-1);var u={};for(var l in n){var c=n[l];"indices"!==l&&(u[l]=Object.assign({},c,{isInstanced:!0,buffer:c.getBuffer()}))}u.positions&&(u.nextPositions=Object.assign({},u.positions,{id:"nextPositions",offset:12})),u.positions64xyLow&&(u.nextPositions64xyLow=Object.assign({},u.positions64xyLow,{id:"nextPositions64xyLow",offset:8})),o.setAttributes(u)}}},{key:"_getModels",value:function(t){var e,n,r=this.props,i=r.id,s=r.filled,u=r.extruded;return s&&(e=new a.h(t,Object.assign({},this.getShaders(),{id:"".concat(i,"-top"),geometry:new a.g({drawMode:o.a.TRIANGLES,attributes:{vertexPositions:{size:2,constant:!0,value:new Float32Array([0,1])},nextPositions:{size:3,constant:!0,value:new Float32Array(3)},nextPositions64xyLow:{size:2,constant:!0,value:new Float32Array(2)}}}),uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0,shaderCache:this.context.shaderCache}))),u&&(n=new a.h(t,Object.assign({},this.getShaders(),{id:"".concat(i,"-side"),geometry:new a.g({drawMode:o.a.LINES,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,1,0,1,0,0,1,0])}}}),uniforms:{isSideVertex:!0},isInstanced:1,shaderCache:this.context.shaderCache}))),{models:[n,e].filter(Boolean),topModel:e,sideModel:n}}},{key:"calculateIndices",value:function(t){t.value=this.state.polygonTesselator.indices();var e=t.value.length/t.size;this.setState({vertexCount:e})}},{key:"calculatePositions",value:function(t){var e=this.state.polygonTesselator;t.bufferLayout=e.bufferLayout,t.value=e.positions()}},{key:"calculatePositionsLow",value:function(t){var e=this.use64bitPositions();t.constant=!e,t.value=e?this.state.polygonTesselator.positions64xyLow():new Float32Array(2)}},{key:"calculateVertexValid",value:function(t){t.value=this.state.polygonTesselator.vertexValid()}},{key:"calculateElevations",value:function(t){var e=this,n=this.state.polygonTesselator;t.bufferLayout=n.bufferLayout;var r=this.props,i=r.extruded,o=r.getElevation;if(i&&"function"==typeof o)t.constant=!1,t.value=n.elevations({getElevation:function(t){return o(e.props.data[t])}});else{var a=i?o:0;t.constant=!0,t.value=new Float32Array([a])}}},{key:"calculateFillColors",value:function(t){var e=this,n=this.state.polygonTesselator;t.bufferLayout=n.bufferLayout,t.value=n.colors({key:"fillColors",getColor:function(t){return e.props.getFillColor(e.props.data[t])}})}},{key:"calculateLineColors",value:function(t){var e=this,n=this.state.polygonTesselator;t.bufferLayout=n.bufferLayout,t.value=n.colors({key:"lineColors",getColor:function(t){return e.props.getLineColor(e.props.data[t])}})}},{key:"calculatePickingColors",value:function(t){t.value=this.state.polygonTesselator.pickingColors()}}]),e}();function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t,e){return!e||"object"!==$e(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nn(t){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rn(t,e){return(rn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Qe.layerName="SolidPolygonLayer",Qe.defaultProps=Ke;var on={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,lineDashJustified:!1,fp64:!1,getPolygon:function(t){return t.polygon},getFillColor:[0,0,0,255],getLineColor:[0,0,0,255],getLineWidth:1,getLineDashArray:null,getElevation:1e3,lightSettings:{}},an=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),en(this,nn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rn(t,e)}(e,r["CompositeLayer"]),function(t,e,n){e&&tn(t.prototype,e),n&&tn(t,n)}(e,[{key:"initializeState",value:function(){this.state={paths:[]}}},{key:"updateState",value:function(t){var e=this,n=(t.oldProps,t.props,t.changeFlags);if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var r=this.props,i=r.data,o=r.getPolygon;this.state.paths=[],i.forEach(function(t){De(o(t)).forEach(function(n){return e.state.paths.push({path:n,object:t})})})}}},{key:"getPickingInfo",value:function(t){var e=t.info;return Object.assign(e,{object:e.object&&e.object.object||e.object})}},{key:"_getAccessor",value:function(t){return"function"==typeof t?function(e){return t(e.object)}:t}},{key:"renderLayers",value:function(){var t=this.props,e=t.data,n=t.stroked,r=t.filled,i=t.extruded,o=t.wireframe,a=t.elevationScale,s=t.transitions,u=this.props,l=u.lineWidthScale,c=u.lineWidthMinPixels,f=u.lineWidthMaxPixels,p=u.lineJointRounded,h=u.lineMiterLimit,d=u.lineDashJustified,y=u.fp64,v=this.props,g=v.getFillColor,m=v.getLineColor,b=v.getLineWidth,_=v.getLineDashArray,x=v.getElevation,w=v.getPolygon,E=v.updateTriggers,O=v.lightSettings,S=this.state.paths,P=e&&e.length>0,C=P&&new Qe(this.getSubLayerProps({id:"fill",updateTriggers:{getElevation:E.getElevation,getFillColor:E.getFillColor,getLineColor:E.getLineColor}}),{data:e,extruded:i,elevationScale:a,fp64:y,filled:r,wireframe:o,getPolygon:w,getElevation:x,getFillColor:g,getLineColor:m,lightSettings:O,transitions:s}),T=!i&&n&&P&&new Ae(this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:E.getLineWidth,getColor:E.getLineColor,getDashArray:E.getLineDashArray}}),{data:S,fp64:y,widthScale:l,widthMinPixels:c,widthMaxPixels:f,rounded:p,miterLimit:h,dashJustified:d,transitions:s&&{getWidth:s.getLineWidth,getColor:s.getLineColor,getPath:s.getPolygon},getPath:function(t){return t.path},getColor:this._getAccessor(m),getWidth:this._getAccessor(b),getDashArray:this._getAccessor(_)});return[!i&&C,T,i&&C]}}]),e}();function sn(t,e){if(!t)throw new Error("deck.gl: ".concat(e))}function un(t,e,n){var r=t.type,i=t.coordinates,o=e.pointFeatures,a=e.lineFeatures,s=e.polygonFeatures,u=e.polygonOutlineFeatures;switch(function(t,e){var n=cn[t];sn(n,"Unknown GeoJSON type ".concat(t));for(;e&&--n>0;)e=e[0];sn(e&&Number.isFinite(e[0]),"".concat(t," coordinates are malformed"))}(r,i),r){case"Point":o.push({geometry:t,sourceFeature:n});break;case"MultiPoint":i.forEach(function(t){o.push({geometry:{type:"Point",coordinates:t},sourceFeature:n})});break;case"LineString":a.push({geometry:t,sourceFeature:n});break;case"MultiLineString":i.forEach(function(t){a.push({geometry:{type:"LineString",coordinates:t},sourceFeature:n})});break;case"Polygon":s.push({geometry:t,sourceFeature:n}),i.forEach(function(t){u.push({geometry:{type:"LineString",coordinates:t},sourceFeature:n})});break;case"MultiPolygon":i.forEach(function(t){s.push({geometry:{type:"Polygon",coordinates:t},sourceFeature:n}),t.forEach(function(t){u.push({geometry:{type:"LineString",coordinates:t},sourceFeature:n})})})}}function ln(t){return t.sourceFeature.feature}an.layerName="PolygonLayer",an.defaultProps=on;var cn={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yn(t,e){return(yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vn={stroked:!0,filled:!0,extruded:!1,wireframe:!1,lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,elevationScale:1,pointRadiusScale:1,pointRadiusMinPixels:0,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,lineDashJustified:!1,fp64:!1,getLineColor:[0,0,0,255],getFillColor:[0,0,0,255],getRadius:1,getLineWidth:1,getLineDashArray:null,getElevation:1e3,subLayers:{PointLayer:at,LineLayer:Ae,PolygonLayer:Qe},lightSettings:{}};function gn(t){return t.geometry.coordinates}function mn(t){return"function"!=typeof t?t:function(e){return t(ln(e))}}var bn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hn(this,dn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yn(t,e)}(e,r["CompositeLayer"]),function(t,e,n){e&&pn(t.prototype,e),n&&pn(t,n)}(e,[{key:"initializeState",value:function(){this.state={features:{}}}},{key:"updateState",value:function(t){t.oldProps;var e=t.props;if(t.changeFlags.dataChanged){var n=function(t){if(Array.isArray(t))return t;switch(sn(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return sn(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(e.data);this.state.features=function(t){for(var e={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},n=0;n<t.length;n++){var r=t[n];sn(r&&r.geometry,"GeoJSON does not have geometry");var i=r.geometry,o={feature:r,index:n};if("GeometryCollection"===i.type){sn(Array.isArray(i.geometries),"GeoJSON does not have geometries array");for(var a=i.geometries,s=0;s<a.length;s++)un(a[s],e,o)}else un(i,e,o)}return e}(n)}}},{key:"getPickingInfo",value:function(t){var e=t.info;t.sourceLayer;return Object.assign(e,{object:e.object?ln(e.object):e.object,index:e.object?function(t){return t.sourceFeature.index}(e.object):e.index})}},{key:"renderLayers",value:function(){var t=this.state.features,e=t.pointFeatures,n=t.lineFeatures,r=t.polygonFeatures,i=t.polygonOutlineFeatures,o=this.props,a=o.stroked,s=o.filled,u=o.extruded,l=o.wireframe,c=o.subLayers,f=o.lightSettings,p=o.transitions,h=this.props,d=h.lineWidthScale,y=h.lineWidthMinPixels,v=h.lineWidthMaxPixels,g=h.lineJointRounded,m=h.lineMiterLimit,b=h.pointRadiusScale,_=h.pointRadiusMinPixels,x=h.pointRadiusMaxPixels,w=h.elevationScale,E=h.lineDashJustified,O=h.fp64,S=this.props,P=S.getLineColor,C=S.getFillColor,T=S.getRadius,k=S.getLineWidth,A=S.getLineDashArray,M=S.getElevation,j=S.updateTriggers,R=e&&e.length>0,I=n&&n.length>0,L=i&&i.length>0,D=r&&r.length>0&&new c.PolygonLayer(this.getSubLayerProps({id:"polygon-fill",updateTriggers:{getElevation:j.getElevation,getFillColor:j.getFillColor,getLineColor:j.getLineColor}}),{data:r,fp64:O,extruded:u,elevationScale:w,filled:s,wireframe:l,lightSettings:f,getPolygon:gn,getElevation:mn(M),getFillColor:mn(C),getLineColor:mn(P),transitions:p&&{getPolygon:p.geometry,getElevation:p.getElevation,getFillColor:p.getFillColor,getLineColor:p.getLineColor}}),F=!u&&a&&L&&new c.LineLayer(this.getSubLayerProps({id:"polygon-outline",updateTriggers:{getColor:j.getLineColor,getWidth:j.getLineWidth,getDashArray:j.getLineDashArray}}),{data:i,fp64:O,widthScale:d,widthMinPixels:y,widthMaxPixels:v,rounded:g,miterLimit:m,dashJustified:E,getPath:gn,getColor:mn(P),getWidth:mn(k),getDashArray:mn(A),transitions:p&&{getPath:p.geometry,getColor:p.getLineColor,getWidth:p.getLineWidth}}),N=I&&new c.LineLayer(this.getSubLayerProps({id:"line-paths",updateTriggers:{getColor:j.getLineColor,getWidth:j.getLineWidth,getDashArray:j.getLineDashArray}}),{data:n,fp64:O,widthScale:d,widthMinPixels:y,widthMaxPixels:v,rounded:g,miterLimit:m,dashJustified:E,getPath:gn,getColor:mn(P),getWidth:mn(k),getDashArray:mn(A),transitions:p&&{getPath:p.geometry,getColor:p.getLineColor,getWidth:p.getLineWidth}}),B=R&&new c.PointLayer(this.getSubLayerProps({id:"points",updateTriggers:{getColor:j.getFillColor,getRadius:j.getRadius}}),{data:e,fp64:O,radiusScale:b,radiusMinPixels:_,radiusMaxPixels:x,getPosition:gn,getColor:mn(C),getRadius:mn(T),transitions:p&&{getPosition:p.geometry,getColor:p.getFillColor,getRadius:p.getRadius}});return[!u&&D,F,N,B,u&&D]}}]),e}();bn.layerName="GeoJsonLayer",bn.defaultProps=vn;function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wn(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function En(t,e,n){return(En="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=On(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function On(t){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wn(this,On(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e)}(e,M),function(t,e,n){e&&xn(t.prototype,e),n&&xn(t,n)}(e,[{key:"getShaders",value:function(){return Object.assign({},En(On(e.prototype),"getShaders",this).call(this),{vs:'#define SHADER_NAME multi-icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\n\n// the following three attributes are for the multi-icon layer\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  vec2 iconSize = instanceIconFrames.zw;\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : instanceSizes / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * sizeScale * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64xyLow, vec3(0.0));\n  gl_Position += project_pixel_to_clipspace(pixelOffset);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vTextureCoords.y = 1.0 - vTextureCoords.y;\n\n  vColor = instanceColors / 255.;\n  picking_setPickingColor(instancePickingColors);\n\n  vColorMode = instanceColorModes;\n}\n'})}},{key:"initializeState",value:function(){En(On(e.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(t){En(On(e.prototype),"updateState",this).call(this,t);var n=t.changeFlags;n.updateTriggersChanged&&(n.updateTriggersChanged.getAnchorX||n.updateTriggersChanged.getAnchorY)&&this.getAttributeManager().invalidate("instanceOffsets")}},{key:"calculateInstanceOffsets",value:function(t){var e=this.props,n=e.data,r=e.iconMapping,i=e.getIcon,o=e.getAnchorX,a=e.getAnchorY,s=e.getLengthOfQueue,u=e.getShiftInQueue,l=t.value,c=0,f=!0,p=!1,h=void 0;try{for(var d,y=n[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var v=d.value,g=r[i(v)]||{},m=s(v),b=u(v);l[c++]=(o(v)-1)*m/2+g.width/2+b||0,l[c++]=g.height/2*a(v)||0}}catch(t){p=!0,h=t}finally{try{f||null==y.return||y.return()}finally{if(p)throw h}}}}]),e}();function Cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Pn.layerName="MultiIconLayer",Pn.defaultProps={getShiftInQueue:function(t){return t.shift||0},getLengthOfQueue:function(t){return t.len||1},getAnchorX:function(t){return t.anchorX||0},getAnchorY:function(t){return t.anchorY||0},getPixelOffset:[0,0]};for(var Tn=10242,kn=10243,An=33071,Mn=1024,jn=64,Rn=4,In=.9,Ln=1.2,Dn=[],Fn=32;Fn<128;Fn++)Dn.push(String.fromCharCode(Fn));function Nn(t,e,n){t.font="".concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Un(t,e){return!e||"object"!==Bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vn(t){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gn(t,e){return(Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wn={start:1,middle:0,end:-1},qn={top:1,center:0,bottom:-1},Hn={fp64:!1,sizeScale:1,fontFamily:"Monaco, monospace",characterSet:Dn,getText:function(t){return t.text},getPosition:function(t){return t.position},getColor:[0,0,0,255],getSize:32,getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"center",getPixelOffset:[0,0]},Xn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Un(this,Vn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gn(t,e)}(e,r["CompositeLayer"]),function(t,e,n){e&&zn(t.prototype,e),n&&zn(t,n)}(e,[{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,r=t.changeFlags,i=n.fontFamily!==e.fontFamily||n.characterSet!==e.characterSet;i&&this.updateFontAtlas(e.fontFamily,e.characterSet),(r.dataChanged||i||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this.transformStringToLetters()}},{key:"updateFontAtlas",value:function(t,e){var n=function(t,e){var n,r=e.fontFamily,i=e.characterSet,o=void 0===i?Dn:i,s=e.fontSize,u=void 0===s?jn:s,l=e.padding,c=void 0===l?Rn:l,f=document.createElement("canvas"),p=f.getContext("2d"),h=0,d=0,y=u*Ln;Nn(p,r,u);var v={};for(var g in Array.from(o).forEach(function(t){var e=p.measureText(t).width;d+e>Mn&&(d=0,h++),v[t]={x:d,y:h*(y+c),width:e,height:y,mask:!0},d+=e+c}),f.width=Mn,f.height=(h+1)*(y+c),Nn(p,r,u),v)p.fillText(g,v[g].x,v[g].y+u*In);return{scale:Ln,mapping:v,texture:new a.i(t,{pixels:f,parameters:(n={},Cn(n,Tn,An),Cn(n,kn,An),n)})}}(this.context.gl,{fontFamily:t,characterSet:e}),r=n.scale,i=n.mapping,o=n.texture;this.setState({scale:r,iconAtlas:o,iconMapping:i})}},{key:"getPickingInfo",value:function(t){var e=t.info;return Object.assign(e,{object:e.object&&e.object.object})}},{key:"transformStringToLetters",value:function(){var t=this.props,e=t.data,n=t.getText,i=this.state.iconMapping;if(e&&0!==e.length){var o=[];e.forEach(function(t){var e=n(t);if(e){var a=[0],s=0;Array.from(e).forEach(function(n,u){var l={text:n,index:u,offsets:a,len:e.length,object:t},c=i[n];c?s+=c.width:(r.log.warn("Missing character: ".concat(n))(),s+=32),a.push(s),o.push(l)})}}),this.setState({data:o})}}},{key:"getLetterOffset",value:function(t){return t.offsets[t.index]}},{key:"getTextLength",value:function(t){return t.offsets[t.offsets.length-1]}},{key:"_getAccessor",value:function(t){return"function"==typeof t?function(e){return t(e.object)}:t}},{key:"getAnchorXFromTextAnchor",value:function(t){return function(e){var n="function"==typeof t?t(e.object):t;if(!Wn.hasOwnProperty(n))throw new Error("Invalid text anchor parameter: ".concat(n));return Wn[n]}}},{key:"getAnchorYFromAlignmentBaseline",value:function(t){return function(e){var n="function"==typeof t?t(e.object):t;if(!qn.hasOwnProperty(n))throw new Error("Invalid alignment baseline parameter: ".concat(n));return qn[n]}}},{key:"renderLayers",value:function(){var t=this,e=this.state,n=e.data,r=e.scale,i=e.iconAtlas,o=e.iconMapping;if(!o||!i||!n)return null;var a=this.props,s=a.getPosition,u=a.getColor,l=a.getSize,c=a.getAngle,f=a.getTextAnchor,p=a.getAlignmentBaseline,h=a.getPixelOffset,d=a.fp64,y=a.sizeScale,v=a.transitions,g=a.updateTriggers;return[new Pn(this.getSubLayerProps({id:"text-multi-icon-layer",data:n,iconAtlas:i,iconMapping:o,getIcon:function(t){return t.text},getPosition:function(t){return s(t.object)},getShiftInQueue:function(e){return t.getLetterOffset(e)},getLengthOfQueue:function(e){return t.getTextLength(e)},getColor:this._getAccessor(u),getSize:this._getAccessor(l),getAngle:this._getAccessor(c),getAnchorX:this.getAnchorXFromTextAnchor(f),getAnchorY:this.getAnchorYFromAlignmentBaseline(p),getPixelOffset:this._getAccessor(h),fp64:d,sizeScale:y*r,transitions:v&&{getPosition:v.getPosition,getAngle:v.getAngle,getColor:v.getColor,getSize:v.getSize,getPixelOffset:g.getPixelOffset},updateTriggers:{getPosition:g.getPosition,getAngle:g.getAngle,getColor:g.getColor,getSize:g.getSize,getPixelOffset:g.getPixelOffset,getAnchorX:g.getTextAnchor,getAnchorY:g.getAlignmentBaseline}}))]}}]),e}();Xn.layerName="TextLayer",Xn.defaultProps=Hn;var Zn=n(136),Yn=n.n(Zn);n.d(e,"experimental",function(){return Kn}),n.d(e,"COORDINATE_SYSTEM",function(){return r.COORDINATE_SYSTEM}),n.d(e,"Deck",function(){return r.Deck}),n.d(e,"Layer",function(){return r.Layer}),n.d(e,"CompositeLayer",function(){return r.CompositeLayer}),n.d(e,"View",function(){return r.View}),n.d(e,"MapView",function(){return r.MapView}),n.d(e,"FirstPersonView",function(){return r.FirstPersonView}),n.d(e,"ThirdPersonView",function(){return r.ThirdPersonView}),n.d(e,"OrbitView",function(){return r.OrbitView}),n.d(e,"PerspectiveView",function(){return r.PerspectiveView}),n.d(e,"OrthographicView",function(){return r.OrthographicView}),n.d(e,"Viewport",function(){return r.Viewport}),n.d(e,"WebMercatorViewport",function(){return r.WebMercatorViewport}),n.d(e,"Controller",function(){return r.Controller}),n.d(e,"MapController",function(){return r.MapController}),n.d(e,"AttributeManager",function(){return r.AttributeManager}),n.d(e,"project",function(){return r.project}),n.d(e,"project64",function(){return r.project64}),n.d(e,"lighting",function(){return r.lighting}),n.d(e,"LayerManager",function(){return r.LayerManager}),n.d(e,"log",function(){return r.log}),n.d(e,"_OrbitController",function(){return r._OrbitController}),n.d(e,"_FirstPersonController",function(){return r._FirstPersonController}),n.d(e,"TRANSITION_EVENTS",function(){return r.TRANSITION_EVENTS}),n.d(e,"LinearInterpolator",function(){return r.LinearInterpolator}),n.d(e,"FlyToInterpolator",function(){return r.FlyToInterpolator}),n.d(e,"_EffectManager",function(){return r._EffectManager}),n.d(e,"_Effect",function(){return r._Effect}),n.d(e,"_ReflectionEffect",function(){return r._ReflectionEffect}),n.d(e,"ArcLayer",function(){return g}),n.d(e,"IconLayer",function(){return M}),n.d(e,"LineLayer",function(){return z}),n.d(e,"PointCloudLayer",function(){return J}),n.d(e,"ScatterplotLayer",function(){return at}),n.d(e,"ScreenGridLayer",function(){return bt}),n.d(e,"GridLayer",function(){return Wt}),n.d(e,"GridCellLayer",function(){return kt}),n.d(e,"HexagonLayer",function(){return ge}),n.d(e,"HexagonCellLayer",function(){return te}),n.d(e,"PathLayer",function(){return Ae}),n.d(e,"PolygonLayer",function(){return an}),n.d(e,"GeoJsonLayer",function(){return bn}),n.d(e,"TextLayer",function(){return Xn}),n.d(e,"default",function(){return Yn.a}),n.d(e,"DeckGL",function(){return Zn.DeckGL});var Kn={},Jn=r.experimental.BinSorter,Qn=r.experimental.linearScale,$n=r.experimental.getLinearScale,tr=r.experimental.quantizeScale,er=r.experimental.getQuantizeScale,nr=r.experimental.defaultColorRange,rr=r.experimental.flattenVertices,ir=r.experimental.fillArray;Object.assign(Kn,{BinSorter:Jn,linearScale:Qn,getLinearScale:$n,quantizeScale:tr,getQuantizeScale:er,defaultColorRange:nr,flattenVertices:rr,fillArray:ir})},function(t,e,n){"use strict";n.r(e);var r=n(36),i=n.n(r),o=n(1),a=n.n(o),s=n(0),u=n.n(s),l=n(44),c=n.n(l),f=n(42),p=n.n(f);function h(t){return"/"===t.charAt(0)}function d(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}var y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],r=e&&e.split("/")||[],i=t&&h(t),o=e&&h(e),a=i||o;if(t&&h(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var u=r[r.length-1];s="."===u||".."===u||""===u}else s=!1;for(var l=0,c=r.length;c>=0;c--){var f=r[c];"."===f?d(r,c):".."===f?(d(r,c),l++):l&&(d(r,c),l--)}if(!a)for(;l--;l)r.unshift("..");!a||""===r[0]||r[0]&&h(r[0])||r.unshift("");var p=r.join("/");return s&&"/"!==p.substr(-1)&&(p+="/"),p},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var g=function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(e,r){return t(e,n[r])});var r=void 0===e?"undefined":v(e);if(r!==(void 0===n?"undefined":v(n)))return!1;if("object"===r){var i=e.valueOf(),o=n.valueOf();if(i!==e||o!==n)return t(i,o);var a=Object.keys(e),s=Object.keys(n);return a.length===s.length&&a.every(function(r){return t(e[r],n[r])})}return!1},m=function(t){return"/"===t.charAt(0)?t:"/"+t},b=function(t){return"/"===t.charAt(0)?t.substr(1):t},_=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)},x=function(t,e){return _(t,e)?t.substr(e.length):t},w=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},E=function(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i},O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S=function(t,e,n,r){var i=void 0;"string"==typeof t?(i=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(i=O({},t)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==e&&void 0===i.state&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=y(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},P=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&g(t.state,e.state)},C=function(){var t=null,e=[];return{setPrompt:function(e){return c()(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var o="function"==typeof t?t(e,n):t;"string"==typeof o?"function"==typeof r?r(o,i):(c()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==o)}else i(!0)},appendListener:function(t){var n=!0,r=function(){n&&t.apply(void 0,arguments)};return e.push(r),function(){n=!1,e=e.filter(function(t){return t!==r})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}},T=!("undefined"==typeof window||!window.document||!window.document.createElement),k=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},A=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},M=function(t,e){return e(window.confirm(t))},j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I=function(){try{return window.history.state||{}}catch(t){return{}}},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(T,"Browser history needs a DOM");var e=window.history,n=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=t.forceRefresh,o=void 0!==i&&i,a=t.getUserConfirmation,s=void 0===a?M:a,u=t.keyLength,l=void 0===u?6:u,f=t.basename?w(m(t.basename)):"",h=function(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname+i.search+i.hash;return c()(!f||_(o,f),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+o+'" to begin with "'+f+'".'),f&&(o=x(o,f)),S(o,r,n)},d=function(){return Math.random().toString(36).substr(2,l)},y=C(),v=function(t){R(G,t),G.length=e.length,y.notifyListeners(G.location,G.action)},g=function(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||P(h(t.state))},b=function(){P(h(I()))},O=!1,P=function(t){O?(O=!1,v()):y.confirmTransitionTo(t,"POP",s,function(e){e?v({action:"POP",location:t}):L(t)})},L=function(t){var e=G.location,n=F.indexOf(e.key);-1===n&&(n=0);var r=F.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(O=!0,B(i))},D=h(I()),F=[D.key],N=function(t){return f+E(t)},B=function(t){e.go(t)},z=0,U=function(t){1===(z+=t)?(k(window,"popstate",g),r&&k(window,"hashchange",b)):0===z&&(A(window,"popstate",g),r&&A(window,"hashchange",b))},V=!1,G={length:e.length,action:"POP",location:D,createHref:N,push:function(t,r){c()(!("object"===(void 0===t?"undefined":j(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=S(t,r,d(),G.location);y.confirmTransitionTo(i,"PUSH",s,function(t){if(t){var r=N(i),a=i.key,s=i.state;if(n)if(e.pushState({key:a,state:s},null,r),o)window.location.href=r;else{var u=F.indexOf(G.location.key),l=F.slice(0,-1===u?0:u+1);l.push(i.key),F=l,v({action:"PUSH",location:i})}else c()(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},replace:function(t,r){c()(!("object"===(void 0===t?"undefined":j(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=S(t,r,d(),G.location);y.confirmTransitionTo(i,"REPLACE",s,function(t){if(t){var r=N(i),a=i.key,s=i.state;if(n)if(e.replaceState({key:a,state:s},null,r),o)window.location.replace(r);else{var u=F.indexOf(G.location.key);-1!==u&&(F[u]=i.key),v({action:"REPLACE",location:i})}else c()(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},go:B,goBack:function(){return B(-1)},goForward:function(){return B(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=y.setPrompt(t);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),e()}},listen:function(t){var e=y.appendListener(t);return U(1),function(){U(-1),e()}}};return G},D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+b(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:b,decodePath:m},slash:{encodePath:m,decodePath:m}},N=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},B=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(T,"Hash history needs a DOM");var e=window.history,n=-1===window.navigator.userAgent.indexOf("Firefox"),r=t.getUserConfirmation,i=void 0===r?M:r,o=t.hashType,a=void 0===o?"slash":o,s=t.basename?w(m(t.basename)):"",u=F[a],l=u.encodePath,f=u.decodePath,h=function(){var t=f(N());return c()(!s||_(t,s),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+s+'".'),s&&(t=x(t,s)),S(t)},d=C(),y=function(t){D(q,t),q.length=e.length,d.notifyListeners(q.location,q.action)},v=!1,g=null,b=function(){var t=N(),e=l(t);if(t!==e)B(e);else{var n=h(),r=q.location;if(!v&&P(r,n))return;if(g===E(n))return;g=null,O(n)}},O=function(t){v?(v=!1,y()):d.confirmTransitionTo(t,"POP",i,function(e){e?y({action:"POP",location:t}):j(t)})},j=function(t){var e=q.location,n=z.lastIndexOf(E(e));-1===n&&(n=0);var r=z.lastIndexOf(E(t));-1===r&&(r=0);var i=n-r;i&&(v=!0,U(i))},R=N(),I=l(R);R!==I&&B(I);var L=h(),z=[E(L)],U=function(t){c()(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},V=0,G=function(t){1===(V+=t)?k(window,"hashchange",b):0===V&&A(window,"hashchange",b)},W=!1,q={length:e.length,action:"POP",location:L,createHref:function(t){return"#"+l(s+E(t))},push:function(t,e){c()(void 0===e,"Hash history cannot push state; it is ignored");var n=S(t,void 0,void 0,q.location);d.confirmTransitionTo(n,"PUSH",i,function(t){if(t){var e=E(n),r=l(s+e);if(N()!==r){g=e,function(t){window.location.hash=t}(r);var i=z.lastIndexOf(E(q.location)),o=z.slice(0,-1===i?0:i+1);o.push(e),z=o,y({action:"PUSH",location:n})}else c()(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),y()}})},replace:function(t,e){c()(void 0===e,"Hash history cannot replace state; it is ignored");var n=S(t,void 0,void 0,q.location);d.confirmTransitionTo(n,"REPLACE",i,function(t){if(t){var e=E(n),r=l(s+e);N()!==r&&(g=e,B(r));var i=z.indexOf(E(q.location));-1!==i&&(z[i]=e),y({action:"REPLACE",location:n})}})},go:U,goBack:function(){return U(-1)},goForward:function(){return U(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=d.setPrompt(t);return W||(G(1),W=!0),function(){return W&&(W=!1,G(-1)),e()}},listen:function(t){var e=d.appendListener(t);return G(1),function(){G(-1),e()}}};return q},U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G=function(t,e,n){return Math.min(Math.max(t,e),n)},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,n=t.initialEntries,r=void 0===n?["/"]:n,i=t.initialIndex,o=void 0===i?0:i,a=t.keyLength,s=void 0===a?6:a,u=C(),l=function(t){V(v,t),v.length=v.entries.length,u.notifyListeners(v.location,v.action)},f=function(){return Math.random().toString(36).substr(2,s)},p=G(o,0,r.length-1),h=r.map(function(t){return S(t,void 0,"string"==typeof t?f():t.key||f())}),d=E,y=function(t){var n=G(v.index+t,0,v.entries.length-1),r=v.entries[n];u.confirmTransitionTo(r,"POP",e,function(t){t?l({action:"POP",location:r,index:n}):l()})},v={length:h.length,action:"POP",location:h[p],index:p,entries:h,createHref:d,push:function(t,n){c()(!("object"===(void 0===t?"undefined":U(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=S(t,n,f(),v.location);u.confirmTransitionTo(r,"PUSH",e,function(t){if(t){var e=v.index+1,n=v.entries.slice(0);n.length>e?n.splice(e,n.length-e,r):n.push(r),l({action:"PUSH",location:r,index:e,entries:n})}})},replace:function(t,n){c()(!("object"===(void 0===t?"undefined":U(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=S(t,n,f(),v.location);u.confirmTransitionTo(r,"REPLACE",e,function(t){t&&(v.entries[v.index]=r,l({action:"REPLACE",location:r}))})},go:y,goBack:function(){return y(-1)},goForward:function(){return y(1)},canGo:function(t){var e=v.index+t;return e>=0&&e<v.entries.length},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.setPrompt(t)},listen:function(t){return u.appendListener(t)}};return v},q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function H(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var X=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=H(this,t.call.apply(t,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},H(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getChildContext=function(){return{router:q({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},e.prototype.computeMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}},e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.children,r=e.history;p()(null==n||1===a.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){t.setState({match:t.computeMatch(r.location.pathname)})})},e.prototype.componentWillReceiveProps=function(t){i()(this.props.history===t.history,"You cannot change <Router history>")},e.prototype.componentWillUnmount=function(){this.unlisten()},e.prototype.render=function(){var t=this.props.children;return t?a.a.Children.only(t):null},e}(a.a.Component);X.propTypes={history:u.a.object.isRequired,children:u.a.node},X.contextTypes={router:u.a.object},X.childContextTypes={router:u.a.object.isRequired};var Z=X,Y=Z;function K(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var J=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=K(this,t.call.apply(t,[this].concat(o))),r.history=L(r.props),K(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){i()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},e.prototype.render=function(){return a.a.createElement(Y,{history:this.history,children:this.props.children})},e}(a.a.Component);J.propTypes={basename:u.a.string,forceRefresh:u.a.bool,getUserConfirmation:u.a.func,keyLength:u.a.number,children:u.a.node};var Q=J;function $(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var tt=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=$(this,t.call.apply(t,[this].concat(o))),r.history=z(r.props),$(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){i()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},e.prototype.render=function(){return a.a.createElement(Y,{history:this.history,children:this.props.children})},e}(a.a.Component);tt.propTypes={basename:u.a.string,getUserConfirmation:u.a.func,hashType:u.a.oneOf(["hashbang","noslash","slash"]),children:u.a.node};var et=tt,nt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function rt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var it=function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},ot=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=rt(this,t.call.apply(t,[this].concat(o))),r.handleClick=function(t){if(r.props.onClick&&r.props.onClick(t),!t.defaultPrevented&&0===t.button&&!r.props.target&&!it(t)){t.preventDefault();var e=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?e.replace(o):e.push(o)}},rt(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(){var t=this.props,e=(t.replace,t.to),n=t.innerRef,r=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["replace","to","innerRef"]);p()(this.context.router,"You should not use <Link> outside a <Router>"),p()(void 0!==e,'You must specify the "to" property');var i=this.context.router.history,o="string"==typeof e?S(e,null,null,i.location):e,s=i.createHref(o);return a.a.createElement("a",nt({},r,{onClick:this.handleClick,href:s,ref:n}))},e}(a.a.Component);ot.propTypes={onClick:u.a.func,target:u.a.string,replace:u.a.bool,to:u.a.oneOfType([u.a.string,u.a.object]).isRequired,innerRef:u.a.oneOfType([u.a.string,u.a.func])},ot.defaultProps={replace:!1},ot.contextTypes={router:u.a.shape({history:u.a.shape({push:u.a.func.isRequired,replace:u.a.func.isRequired,createHref:u.a.func.isRequired}).isRequired}).isRequired};var at=ot;function st(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var ut=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=st(this,t.call.apply(t,[this].concat(o))),r.history=W(r.props),st(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){i()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},e.prototype.render=function(){return a.a.createElement(Z,{history:this.history,children:this.props.children})},e}(a.a.Component);ut.propTypes={initialEntries:u.a.array,initialIndex:u.a.number,getUserConfirmation:u.a.func,keyLength:u.a.number,children:u.a.node};var lt=ut,ct=n(125),ft=n.n(ct),pt={},ht=0,dt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof e&&(e={path:e});var r=e,i=r.path,o=r.exact,a=void 0!==o&&o,s=r.strict,u=void 0!==s&&s,l=r.sensitive,c=void 0!==l&&l;if(null==i)return n;var f=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=pt[n]||(pt[n]={});if(r[t])return r[t];var i=[],o={re:ft()(t,i,e),keys:i};return ht<1e4&&(r[t]=o,ht++),o}(i,{end:a,strict:u,sensitive:c}),p=f.re,h=f.keys,d=p.exec(t);if(!d)return null;var y=d[0],v=d.slice(1),g=t===y;return a&&!g?null:{path:i,url:"/"===i&&""===y?"/":y,isExact:g,params:h.reduce(function(t,e,n){return t[e.name]=v[n],t},{})}},yt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function vt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var gt=function(t){return 0===a.a.Children.count(t)},mt=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=vt(this,t.call.apply(t,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},vt(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getChildContext=function(){return{router:yt({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},e.prototype.computeMatch=function(t,e){var n=t.computedMatch,r=t.location,i=t.path,o=t.strict,a=t.exact,s=t.sensitive;if(n)return n;p()(e,"You should not use <Route> or withRouter() outside a <Router>");var u=e.route,l=(r||u.location).pathname;return dt(l,{path:i,strict:o,exact:a,sensitive:s},u.match)},e.prototype.componentWillMount=function(){i()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),i()(!(this.props.component&&this.props.children&&!gt(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),i()(!(this.props.render&&this.props.children&&!gt(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},e.prototype.componentWillReceiveProps=function(t,e){i()(!(t.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!t.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(t,e.router)})},e.prototype.render=function(){var t=this.state.match,e=this.props,n=e.children,r=e.component,i=e.render,o=this.context.router,s=o.history,u=o.route,l=o.staticContext,c={match:t,location:this.props.location||u.location,history:s,staticContext:l};return r?t?a.a.createElement(r,c):null:i?t?i(c):null:"function"==typeof n?n(c):n&&!gt(n)?a.a.Children.only(n):null},e}(a.a.Component);mt.propTypes={computedMatch:u.a.object,path:u.a.string,exact:u.a.bool,strict:u.a.bool,sensitive:u.a.bool,component:u.a.func,render:u.a.func,children:u.a.oneOfType([u.a.func,u.a.node]),location:u.a.object},mt.contextTypes={router:u.a.shape({history:u.a.object.isRequired,route:u.a.object.isRequired,staticContext:u.a.object})},mt.childContextTypes={router:u.a.object.isRequired};var bt=mt,_t=bt,xt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Et=function(t){var e=t.to,n=t.exact,r=t.strict,i=t.location,o=t.activeClassName,s=t.className,u=t.activeStyle,l=t.style,c=t.isActive,f=t["aria-current"],p=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),h="object"===(void 0===e?"undefined":wt(e))?e.pathname:e,d=h&&h.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return a.a.createElement(_t,{path:d,exact:n,strict:r,location:i,children:function(t){var n=t.location,r=t.match,i=!!(c?c(r,n):r);return a.a.createElement(at,xt({to:e,className:i?[s,o].filter(function(t){return t}).join(" "):s,style:i?xt({},l,u):l,"aria-current":i&&f||null},p))}})};Et.propTypes={to:at.propTypes.to,exact:u.a.bool,strict:u.a.bool,location:u.a.object,activeClassName:u.a.string,className:u.a.string,activeStyle:u.a.object,style:u.a.object,isActive:u.a.func,"aria-current":u.a.oneOf(["page","step","location","date","time","true"])},Et.defaultProps={activeClassName:"active","aria-current":"page"};var Ot=Et;var St=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(a.a.Component);St.propTypes={when:u.a.bool,message:u.a.oneOfType([u.a.func,u.a.string]).isRequired},St.defaultProps={when:!0},St.contextTypes={router:u.a.shape({history:u.a.shape({block:u.a.func.isRequired}).isRequired}).isRequired};var Pt=St,Ct={},Tt=0,kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===t?t:function(t){var e=t,n=Ct[e]||(Ct[e]={});if(n[t])return n[t];var r=ft.a.compile(t);return Tt<1e4&&(n[t]=r,Tt++),r}(t)(e,{pretty:!0})},At=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var Mt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=S(t.to),n=S(this.props.to);P(e,n)?i()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},e.prototype.computeTo=function(t){var e=t.computedMatch,n=t.to;return e?"string"==typeof n?kt(n,e.params):At({},n,{pathname:kt(n.pathname,e.params)}):n},e.prototype.perform=function(){var t=this.context.router.history,e=this.props.push,n=this.computeTo(this.props);e?t.push(n):t.replace(n)},e.prototype.render=function(){return null},e}(a.a.Component);Mt.propTypes={computedMatch:u.a.object,push:u.a.bool,from:u.a.string,to:u.a.oneOfType([u.a.string,u.a.object]).isRequired},Mt.defaultProps={push:!1},Mt.contextTypes={router:u.a.shape({history:u.a.shape({push:u.a.func.isRequired,replace:u.a.func.isRequired}).isRequired,staticContext:u.a.object}).isRequired};var jt=Mt,Rt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function It(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var Lt=function(t){return"/"===t.charAt(0)?t:"/"+t},Dt=function(t,e){return t?Rt({},e,{pathname:Lt(t)+e.pathname}):e},Ft=function(t){return"string"==typeof t?t:E(t)},Nt=function(t){return function(){p()(!1,"You cannot %s with <StaticRouter>",t)}},Bt=function(){},zt=function(t){function e(){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=It(this,t.call.apply(t,[this].concat(o))),r.createHref=function(t){return Lt(r.props.basename+Ft(t))},r.handlePush=function(t){var e=r.props,n=e.basename,i=e.context;i.action="PUSH",i.location=Dt(n,S(t)),i.url=Ft(i.location)},r.handleReplace=function(t){var e=r.props,n=e.basename,i=e.context;i.action="REPLACE",i.location=Dt(n,S(t)),i.url=Ft(i.location)},r.handleListen=function(){return Bt},r.handleBlock=function(){return Bt},It(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},e.prototype.componentWillMount=function(){i()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},e.prototype.render=function(){var t=this.props,e=t.basename,n=(t.context,t.location),r=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:function(t,e){if(!t)return e;var n=Lt(t);return 0!==e.pathname.indexOf(n)?e:Rt({},e,{pathname:e.pathname.substr(n.length)})}(e,S(n)),push:this.handlePush,replace:this.handleReplace,go:Nt("go"),goBack:Nt("goBack"),goForward:Nt("goForward"),listen:this.handleListen,block:this.handleBlock};return a.a.createElement(Z,Rt({},r,{history:i}))},e}(a.a.Component);zt.propTypes={basename:u.a.string,context:u.a.object.isRequired,location:u.a.oneOfType([u.a.string,u.a.object])},zt.defaultProps={basename:"",location:"/"},zt.childContextTypes={router:u.a.object.isRequired};var Ut=zt;var Vt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Switch> outside a <Router>")},e.prototype.componentWillReceiveProps=function(t){i()(!(t.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!t.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},e.prototype.render=function(){var t=this.context.router.route,e=this.props.children,n=this.props.location||t.location,r=void 0,i=void 0;return a.a.Children.forEach(e,function(e){if(null==r&&a.a.isValidElement(e)){var o=e.props,s=o.path,u=o.exact,l=o.strict,c=o.sensitive,f=o.from,p=s||f;i=e,r=dt(n.pathname,{path:p,exact:u,strict:l,sensitive:c},t.match)}}),r?a.a.cloneElement(i,{location:n,computedMatch:r}):null},e}(a.a.Component);Vt.contextTypes={router:u.a.shape({route:u.a.object.isRequired}).isRequired},Vt.propTypes={children:u.a.node,location:u.a.object};var Gt=Vt,Wt=kt,qt=dt,Ht=n(207),Xt=n.n(Ht),Zt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var Yt=function(t){var e=function(e){var n=e.wrappedComponentRef,r=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(e,["wrappedComponentRef"]);return a.a.createElement(bt,{children:function(e){return a.a.createElement(t,Zt({},r,e,{ref:n}))}})};return e.displayName="withRouter("+(t.displayName||t.name)+")",e.WrappedComponent=t,e.propTypes={wrappedComponentRef:u.a.func},Xt()(e,t)};n.d(e,"BrowserRouter",function(){return Q}),n.d(e,"HashRouter",function(){return et}),n.d(e,"Link",function(){return at}),n.d(e,"MemoryRouter",function(){return lt}),n.d(e,"NavLink",function(){return Ot}),n.d(e,"Prompt",function(){return Pt}),n.d(e,"Redirect",function(){return jt}),n.d(e,"Route",function(){return _t}),n.d(e,"Router",function(){return Y}),n.d(e,"StaticRouter",function(){return Ut}),n.d(e,"Switch",function(){return Gt}),n.d(e,"generatePath",function(){return Wt}),n.d(e,"matchPath",function(){return qt}),n.d(e,"withRouter",function(){return Yt})},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(0),o=n.n(i),a="@@__IMMUTABLE_MAP__@@";function s(t){return!(!t||!t[a])}function u(t,e){return{sourcesDiff:function(t,e){var n=t.get("sources"),r=e.get("sources"),i=[],o=[],a=[],s=n.keySeq().toArray(),u=r.keySeq().toArray(),l=!0,c=!1,f=void 0;try{for(var p,h=s[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var d=p.value,y=r.get(d);y?!y.equals(n.get(d))&&o.push({id:d,source:r.get(d)}):a.push({id:d,source:n.get(d)})}}catch(t){c=!0,f=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}var v=!0,g=!1,m=void 0;try{for(var b,_=u[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var x=b.value;n.get(x)||i.push({id:x,source:r.get(x)})}}catch(t){g=!0,m=t}finally{try{v||null==_.return||_.return()}finally{if(g)throw m}}return{enter:i,update:o,exit:a}}(t,e),layersDiff:function(t,e){var n=t.get("layers"),r=e.get("layers"),i=[],o=[],a={},s={};r.forEach(function(t,e){var n=t.get("id"),i=r.get(e+1);s[n]={layer:t,id:n,before:i?i.get("id"):null,enter:!0}}),n.forEach(function(t,e){var r=t.get("id"),i=n.get(e+1);a[r]={layer:t,id:r,before:i?i.get("id"):null},s[r]?s[r].enter=!1:o.push(a[r])});var u=!0,l=!1,c=void 0;try{for(var f,p=r.reverse()[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value.get("id");a[h]&&a[h].layer.equals(s[h].layer)&&a[h].before===s[h].before||i.push(s[h])}}catch(t){l=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}return{updates:i,exiting:o}}(t,e)}}function l(t,e,n){function r(t){return t.map(function(){return!0}).delete("layers").delete("sources").toJS()}var i=t&&r(t)||{},o=r(e);if(t&&!function(){var n=Object.keys(i),r=Object.keys(o);return n.length!==r.length||!!r.some(function(n){return t.get(n)!==e.get(n)})}()){var a=u(t,e),s=a.sourcesDiff,l=a.layersDiff;(function(t,e){var n=t.map(function(t){return t.id}),r=e.filter(function(t){return n.includes(t.get("source"))});if(r.size)throw new Error("You must remove any layers associated with sources you are removing: ".concat(r.map(function(t){return t.get("id")}).toJS().join("")))})(s.exit,e.get("layers")),function(t,e,n,r){if(r.updates.some(function(t){return t.layer.get("ref")}))return void t.setStyle(e.toJS());var i=!0,o=!1,a=void 0;try{for(var s,u,l=n.enter[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u=s.value,t.addSource(u.id,u.source.toJS())}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}var f=!0,p=!1,h=void 0;try{for(var d,y,v=n.update[Symbol.iterator]();!(f=(d=v.next()).done);f=!0)y=d.value,c(t,y)}catch(t){p=!0,h=t}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}var g=!0,m=!1,b=void 0;try{for(var _,x,w=r.exiting[Symbol.iterator]();!(g=(_=w.next()).done);g=!0)x=_.value,t.style.getLayer(x.id)&&t.removeLayer(x.id)}catch(t){m=!0,b=t}finally{try{g||null==w.return||w.return()}finally{if(m)throw b}}var E=!0,O=!1,S=void 0;try{for(var P,C,T=r.updates[Symbol.iterator]();!(E=(P=T.next()).done);E=!0)(C=P.value).enter||t.removeLayer(C.id),t.addLayer(C.layer.toJS(),C.before)}catch(t){O=!0,S=t}finally{try{E||null==T.return||T.return()}finally{if(O)throw S}}var k=!0,A=!1,M=void 0;try{for(var j,R,I=n.exit[Symbol.iterator]();!(k=(j=I.next()).done);k=!0)R=j.value,t.removeSource(R.id)}catch(t){A=!0,M=t}finally{try{k||null==I.return||I.return()}finally{if(A)throw M}}}(n,e,s,l)}else n.setStyle(e.toJS())}function c(t,e){var n=e.source.toJS();if("geojson"===n.type){var r=t.getSource(e.id);if("geojson"===r.type){var i=r.workerOptions,o=i.geojsonVtOptions.extent/512;if(!(void 0!==n.maxzoom&&n.maxzoom!==i.geojsonVtOptions.maxZoom||void 0!==n.buffer&&n.buffer!==i.geojsonVtOptions.buffer/o||void 0!==n.tolerance&&n.tolerance!==i.geojsonVtOptions.tolerance/o||void 0!==n.cluster&&n.cluster!==i.cluster||void 0!==n.clusterRadius&&n.clusterRadius!==i.superclusterOptions.radius/o||void 0!==n.clusterMaxZoom&&n.clusterMaxZoom!==i.superclusterOptions.maxZoom))return void r.setData(n.data)}}t.removeSource(e.id),t.addSource(e.id,n)}var f=n(110),p=n(134),h=n(235),d=n(402);function y(t,e){if(!t)throw new Error(e||"react-map-gl: assertion failed.")}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}var b={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},_={pitch:0,bearing:0,altitude:1.5};function x(t,e,n){return t<e?e:t>n?n:t}var w=function(){function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,a=n.longitude,s=n.zoom,u=n.bearing,l=void 0===u?_.bearing:u,c=n.pitch,f=void 0===c?_.pitch:c,p=n.altitude,h=void 0===p?_.altitude:p,d=n.maxZoom,v=void 0===d?b.maxZoom:d,m=n.minZoom,x=void 0===m?b.minZoom:m,w=n.maxPitch,E=void 0===w?b.maxPitch:w,O=n.minPitch,S=void 0===O?b.minPitch:O,P=n.transitionDuration,C=n.transitionEasing,T=n.transitionInterpolator,k=n.transitionInterruption,A=n.startPanLngLat,M=n.startZoomLngLat,j=n.startBearing,R=n.startPitch,I=n.startZoom;g(this,t),y(e(r),"`width` must be supplied"),y(e(i),"`height` must be supplied"),y(e(a),"`longitude` must be supplied"),y(e(o),"`latitude` must be supplied"),y(e(s),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:r,height:i,latitude:o,longitude:a,zoom:s,bearing:l,pitch:f,altitude:h,maxZoom:v,minZoom:x,maxPitch:E,minPitch:S,transitionDuration:P,transitionEasing:C,transitionInterpolator:T,transitionInterruption:k}),this._interactiveState={startPanLngLat:A,startZoomLngLat:M,startBearing:j,startPitch:R,startZoom:I}}var e=Number.isFinite;return function(t,e,n){e&&m(t.prototype,e),n&&m(t,n)}(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=v(this._calculateNewLngLat({startPanLngLat:r,pos:e}),2),o=i[0],a=i[1];return this._getUpdatedMapState({longitude:o,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){return t.pos,this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var n=t.deltaScaleX,r=void 0===n?0:n,i=t.deltaScaleY,o=void 0===i?0:i,a=this._interactiveState,s=a.startBearing,u=a.startPitch;if(!e(s)||!e(u))return this;var l=this._calculateNewPitchAndBearing({deltaScaleX:r,deltaScaleY:o,startBearing:s,startPitch:u}),c=l.pitch,f=l.bearing;return this._getUpdatedMapState({bearing:f,pitch:c})}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var n=t.pos,r=t.startPos,i=t.scale;y(0<i,"`scale` must be a positive number");var o=this._interactiveState,a=o.startZoom,s=o.startZoomLngLat;e(a)||(a=this._viewportProps.zoom,s=this._unproject(r)||this._unproject(n)),y(s,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var u=this._calculateNewZoom({scale:i,startZoom:a}),l=v(new f.a(Object.assign({},this._viewportProps,{zoom:u})).getLocationAtPoint({lngLat:s,pos:n}),2),c=l[0],p=l[1];return this._getUpdatedMapState({zoom:u,longitude:c,latitude:p})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=x(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;return t.pitch=x(a,o,i),Object.assign(t,Object(d.a)(t)),t}},{key:"_unproject",value:function(t){var e=new f.a(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new f.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return x(n+Math.log2(e),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=x(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=i;return 0<n?u=i+n*(s-i):0>n&&(u=i-n*(a-i)),{pitch:u,bearing:r+180*e}}}]),t}();function E(t){return t[0].toLowerCase()+t.slice(1)}function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function C(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),t}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var A=h.a?n(279):null,M="A valid API access token is required to use Mapbox data";function j(){}var R=Object.assign({},p.a.propTypes,{mapStyle:o.a.oneOfType([o.a.string,o.a.object]),preventStyleDiffing:o.a.bool,disableTokenWarning:o.a.bool,visible:o.a.bool,visibilityConstraints:o.a.object}),I=Object.assign({},p.a.defaultProps,{mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0}),L={viewport:o.a.instanceOf(f.a)},D=function(t){function e(t){var n;return S(this,e),(n=function(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?k(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._queryParams={},e.supported()||(n.componentDidMount=j,n.componentWillReceiveProps=j,n.componentDidUpdate=j,n.componentWillUnmount=j),n.state={accessTokenInvalid:!1},n.getMap=n.getMap.bind(k(n)),n.queryRenderedFeatures=n.queryRenderedFeatures.bind(k(n)),n._updateMapSize=n._updateMapSize.bind(k(n)),n._updateMapStyle=n._updateMapStyle.bind(k(n)),n._mapboxMapLoaded=n._mapboxMapLoaded.bind(k(n)),n._mapboxMapError=n._mapboxMapError.bind(k(n)),n._renderNoTokenWarning=n._renderNoTokenWarning.bind(k(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,r["PureComponent"]),C(e,null,[{key:"supported",value:function(){return A&&A.supported()}}]),C(e,[{key:"getChildContext",value:function(){return{viewport:new f.a(this.props)}}},{key:"componentDidMount",value:function(){var t=this.props.mapStyle;this._mapbox=new p.a(Object.assign({},this.props,{mapboxgl:A,container:this._mapboxMap,onError:this._mapboxMapError,mapStyle:s(t)?t.toJS():t})),this._map=this._mapbox.getMap()}},{key:"componentWillReceiveProps",value:function(t){this._mapbox.setProps(t),this._updateMapStyle(this.props,t),this.setState({width:this.props.width,height:this.props.height})}},{key:"componentDidUpdate",value:function(){this._updateMapSize(this.state,this.props)}},{key:"componentWillUnmount",value:function(){this._mapbox.finalize(),this._mapbox=null,this._map=null}},{key:"getMap",value:function(){return this._map}},{key:"queryRenderedFeatures",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._map.queryRenderedFeatures(t,e)}},{key:"_updateMapSize",value:function(t,e){(t.width!==e.width||t.height!==e.height)&&this._map.resize()}},{key:"_updateMapStyle",value:function(t,e){var n=e.mapStyle,r=t.mapStyle;n!==r&&(s(n)?this.props.preventStyleDiffing?this._map.setStyle(n.toJS()):l(r,n,this._map):this._map.setStyle(n))}},{key:"_mapboxMapLoaded",value:function(t){this._mapboxMap=t}},{key:"_mapboxMapError",value:function(t){401!==(t.error&&t.error.status||t.status)||this.state.accessTokenInvalid||(console.error(M),this.setState({accessTokenInvalid:!0}))}},{key:"_renderNoTokenWarning",value:function(){return this.state.accessTokenInvalid&&!this.props.disableTokenWarning?Object(r.createElement)("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},[Object(r.createElement)("h3",{key:"header"},M),Object(r.createElement)("div",{key:"text"},"For information on setting up your basemap, read"),Object(r.createElement)("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens")]):null}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.width,i=t.height,o=t.style,a=t.visibilityConstraints,s=Object.assign({},o,{width:n,height:i,position:"relative"}),u=this.props.visible&&function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:b;for(var n in e){var r=n.slice(0,3),i=E(n.slice(3));if("min"===r&&t[i]<e[n])return!1;if("max"===r&&t[i]>e[n])return!1}return!0}(this.props.viewState||this.props,a),l=Object.assign({},o,{width:n,height:i,visibility:u?"visible":"hidden"});return Object(r.createElement)("div",{key:"map-container",style:s,children:[Object(r.createElement)("div",{key:"map-mapbox",ref:this._mapboxMapLoaded,style:l,className:e}),Object(r.createElement)("div",{key:"map-overlays",className:"overlays",style:{position:"absolute",left:0,top:0,width:n,height:i,overflow:"hidden"},children:this.props.children}),this._renderNoTokenWarning()]})}}]),e}();D.displayName="StaticMap",D.propTypes=R,D.defaultProps=I,D.childContextTypes=L;var F=n(22);function N(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}var z=function(){function t(){N(this,t)}return function(t,e,n){e&&B(t.prototype,e),n&&B(t,n)}(t,[{key:"arePropsEqual",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a,s=(this.propNames||[])[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(a=o.value,!Object(F.e)(t[a],e[a]))return!1}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(t,e){return{start:t,end:e}}},{key:"interpolateProps",value:function(){y(!1,"interpolateProps is not implemented")}}]),t}(),U=n(403),V={longitude:1,bearing:1};function G(t,e,n){return Array.isArray(t)?t.map(function(t,r){return G(t,e[r],n)}):n*e+(1-n)*t}function W(t){return Number.isFinite(t)||Array.isArray(t)}function q(t,e,n){return function(t){return V[t]}(t)&&180<Math.abs(n-e)&&(n=0>n?n+360:n-360),n}function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function Y(t,e){return!e||"object"!==H(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var J=["longitude","latitude","zoom","bearing","pitch"],Q=["latitude","longitude","zoom","width","height"],$=["bearing","pitch"],tt=function(t){function e(){var t;return X(this,e),(t=Y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))).propNames=J,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,z),function(t,e,n){e&&Z(t.prototype,e),n&&Z(t,n)}(e,[{key:"initializeProps",value:function(t,e){for(var n={},r={},i=0;i<Q.length;i++){var o=Q[i],a=t[o],s=e[o];y(W(a)&&W(s),"".concat(o," must be supplied for transition")),n[o]=a,r[o]=q(o,a,s)}for(var u=0;u<$.length;u++){var l=$[u],c=t[l]||0,f=e[l]||0;n[l]=c,r[l]=q(l,c,f)}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){for(var r,i=Object(U.a)(t,e,n),o=0;o<$.length;o++)i[r=$[o]]=G(t[r],e[r],n);return i}}]),e}();function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function rt(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function ot(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var st=["longitude","latitude","zoom","bearing","pitch"],ut=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return rt(this,e),t=ot(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&(n={transitionProps:n}),t.propNames=n.transitionProps||st,t.around=n.around,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,z),function(t,e,n){e&&it(t.prototype,e),n&&it(t,n)}(e,[{key:"initializeProps",value:function(t,e){var n={},r={};this.around&&Object.assign(r,e,{around:this.around,aroundLngLat:new f.a(e).unproject(this.around)});var i=!0,o=!1,a=void 0;try{for(var s,u=this.propNames[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=t[l],p=e[l];y(W(c)&&W(p),"".concat(l," must be supplied for transition")),n[l]=c,r[l]=q(l,c,p)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){var r={},i=!0,o=!1,a=void 0;try{for(var s,u,l=this.propNames[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)r[u=s.value]=G(t[u],e[u],n)}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}if(e.around){var c=nt(new f.a(Object.assign({},e,r)).getMapCenterByLngLatPosition({lngLat:e.aroundLngLat,pos:e.around}),2),p=c[0],h=c[1];r.longitude=p,r.latitude=h}return r}}]),e}();function lt(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}var ft=function(){},pt={BREAK:1,SNAP_TO_END:2,IGNORE:3},ht={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new ut,transitionInterruption:pt.BREAK,onTransitionStart:ft,onTransitionInterrupt:ft,onTransitionEnd:ft},dt={animation:null,propsInTransition:null,startProps:null,endProps:null},yt=function(){function t(e){lt(this,t),this.props=e,this.state=dt,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return function(t,e,n){e&&ct(t.prototype,e),n&&ct(t,n)}(t,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(t){var e=!1,n=this.props;if(this.props=t,this._shouldIgnoreViewportChange(n,t))return e;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(t)){var i=Object.assign({},n,this.state.interruption===pt.SNAP_TO_END?this.state.endProps:this.state.propsInTransition);r&&n.onTransitionInterrupt(),t.onTransitionStart(),this._triggerTransition(i,t),e=!0}else r&&(n.onTransitionInterrupt(),this._endTransition());return e}},{key:"_isTransitionInProgress",value:function(){return!!this.state.propsInTransition}},{key:"_isTransitionEnabled",value:function(t){return 0<t.transitionDuration&&!!t.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this._isTransitionInProgress()?this.state.interruption===pt.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){y(this._isTransitionEnabled(e),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var n=e.transitionInterpolator.initializeProps(t,e);this.state={duration:e.transitionDuration,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startTime:Date.now(),startProps:n.start,endProps:n.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=dt}},{key:"_updateViewport",value:function(){var t=Date.now(),e=this.state,n=e.startTime,r=e.duration,i=e.easing,o=e.interpolator,a=e.startProps,s=e.endProps,u=!1,l=(t-n)/r;1<=l&&(l=1,u=!0),l=i(l);var c=o.interpolateProps(a,s,l),f=new w(Object.assign({},this.props,c));this.state.propsInTransition=f.getViewportProps();var p=this.props.onViewportChange||this.props.onChangeViewport;p&&p(this.state.propsInTransition),this.props.onViewStateChange&&this.props.onViewStateChange({viewState:this.state.propsInTransition}),u&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();yt.defaultProps=ht;var vt=n(132);function gt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function mt(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}var _t={transitionDuration:0},xt={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new ut,transitionInterruption:pt.BREAK},wt=["wheel"],Et=["panstart","panmove","panend"],Ot=["pinchstart","pinchmove","pinchend"],St=["doubletap"],Pt=["keydown"],Ct=function(){function t(){mt(this,t),this._state={isDragging:!1},this.events=[],this.handleEvent=this.handleEvent.bind(this)}var e=Math.abs;return function(t,e,n){e&&bt(t.prototype,e),n&&bt(t,n)}(t,[{key:"handleEvent",value:function(t){switch(this.mapState=this.getMapState(),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"setState",value:function(t){Object.assign(this._state,t),this.onStateChange&&this.onStateChange(this._state)}},{key:"updateViewport",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=this.mapState?this.mapState.getViewportProps():{},i=Object.assign({},t.getViewportProps(),e),o=Object.keys(i).some(function(t){return r[t]!==i[t]});o&&this.onViewStateChange&&this.onViewStateChange({viewState:i}),o&&this.onViewportChange&&this.onViewportChange(i),this.setState(Object.assign({},t.getInteractiveState(),n))}},{key:"getMapState",value:function(t){return new w(Object.assign({},this.mapStateProps,this._state,t))}},{key:"setOptions",value:function(t){var e=t.onChangeViewport,n=t.touchZoomRotate,r=void 0===n||n,i=t.onViewStateChange,o=t.onViewportChange,a=t.onStateChange,s=void 0===a?this.onStateChange:a,u=t.eventManager,l=void 0===u?this.eventManager:u,c=t.scrollZoom,f=void 0===c||c,p=t.dragPan,h=void 0===p||p,d=t.dragRotate,y=void 0===d||d,v=t.doubleClickZoom,g=void 0===v||v,m=t.touchZoom,b=t.touchRotate,_=t.keyboard,x=void 0===_||_;this.onViewStateChange=i,this.onViewportChange=o||e,this.onStateChange=s,this.mapStateProps&&this.mapStateProps.height!==t.height&&this.updateViewport(new w(t)),this.mapStateProps=t,this.eventManager!==l&&(this.eventManager=l,this._events={},this.toggleEvents(this.events,!0));var E=!(!this.onViewStateChange&&!this.onViewportChange);this.toggleEvents(wt,E&&f),this.toggleEvents(Et,E&&(h||y)),this.toggleEvents(Ot,E&&r),this.toggleEvents(St,E&&g),this.toggleEvents(Pt,E&&x),this.scrollZoom=f,this.dragPan=h,this.dragRotate=y,this.doubleClickZoom=g,this.touchZoom=r&&(void 0===m||m),this.touchRotate=r&&void 0!==b&&b,this.keyboard=x}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t),n=this.mapState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,_t,{isDragging:!0})}},{key:"_onPan",value:function(t){return this.isFunctionKeyPressed(t)||t.rightButton?this._onPanRotate(t):this._onPanMove(t)}},{key:"_onPanEnd",value:function(){var t=this.mapState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.mapState.pan({pos:e});return this.updateViewport(n,_t,{isDragging:!0})}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var n=t.deltaX,r=t.deltaY,i=gt(this.getCenter(t),2)[1],o=i-r,a=this.mapState.getViewportProps(),s=a.width,u=a.height,l=0;0<r?e(u-o)>5&&(l=r/(o-u)*1.2):0>r&&o>5&&(l=1-i/o),l=Math.min(1,Math.max(-1,l));var c=this.mapState.rotate({deltaScaleX:n/s,deltaScaleY:l});return this.updateViewport(c,_t,{isDragging:!0})}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();var n=this.getCenter(t),r=t.delta,i=2/(1+Math.exp(-e(.01*r)));0>r&&0!==i&&(i=1/i);var o=this.mapState.zoom({pos:n,scale:i});return this.updateViewport(o,_t)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),n=this.mapState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,_t,{isDragging:!0})}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.mapState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(e,_t,{isDragging:!0})}},{key:"_onPinchEnd",value:function(){var t=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),n=this.isFunctionKeyPressed(t),r=this.mapState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,Object.assign({},xt,{transitionInterpolator:new ut({around:e})}))}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.mapStateProps;switch(t.srcEvent.keyCode){case 189:e=n?this.getMapState({zoom:r.zoom-2}):this.getMapState({zoom:r.zoom-1});break;case 187:e=n?this.getMapState({zoom:r.zoom+2}):this.getMapState({zoom:r.zoom+1});break;case 37:e=n?this.getMapState({bearing:r.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:e=n?this.getMapState({bearing:r.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:e=n?this.getMapState({pitch:r.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:e=n?this.getMapState({pitch:r.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(e,xt)}}]),t}(),Tt={GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer"},kt=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"}];function At(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};kt.forEach(function(e){if(t.hasOwnProperty(e.old)){var n=function(t){return"react-map-gl: `".concat(t,"` is deprecated and will be removed in a later version.")}(e.old);e.new&&(n="".concat(n," ").concat(function(t){return"Use `".concat(t,"` instead.")}(e.new))),console.warn(n)}})}function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function Rt(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function It(t,e,n){return e&&Rt(t.prototype,e),n&&Rt(t,n),t}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ft=Object.assign({},D.propTypes,{maxZoom:o.a.number,minZoom:o.a.number,maxPitch:o.a.number,minPitch:o.a.number,onViewStateChange:o.a.func,onViewportChange:o.a.func,transitionDuration:o.a.number,transitionInterpolator:o.a.object,transitionInterruption:o.a.number,transitionEasing:o.a.func,onTransitionStart:o.a.func,onTransitionInterrupt:o.a.func,onTransitionEnd:o.a.func,scrollZoom:o.a.bool,dragPan:o.a.bool,dragRotate:o.a.bool,doubleClickZoom:o.a.bool,touchZoom:o.a.bool,touchRotate:o.a.bool,keyboard:o.a.bool,onHover:o.a.func,onClick:o.a.func,onContextMenu:o.a.func,touchAction:o.a.string,clickRadius:o.a.number,getCursor:o.a.func,mapControls:o.a.shape({events:o.a.arrayOf(o.a.string),handleEvent:o.a.func})}),Nt=Object.assign({},D.defaultProps,b,yt.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onHover:null,onContextMenu:function(t){return t.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchAction:"none",clickRadius:0,getCursor:function(t){var e=t.isDragging,n=t.isHovering;return e?Tt.GRABBING:n?Tt.POINTER:Tt.GRAB}}),Bt={viewport:o.a.instanceOf(f.a),isDragging:o.a.bool,eventManager:o.a.object},zt=function(t){function e(t){var n;return jt(this,e),n=function(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?Dt(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),At(t),n.state={isDragging:!1,isHovering:!1},n._mapControls=t.mapControls||new Ct,n._eventManager=new vt.a(null,{legacyBlockScroll:!1,touchAction:t.touchAction}),n._updateQueryParams(t.mapStyle),n.getMap=n.getMap.bind(Dt(n)),n.queryRenderedFeatures=n.queryRenderedFeatures.bind(Dt(n)),n._getFeatures=n._getFeatures.bind(Dt(n)),n._updateQueryParams=n._updateQueryParams.bind(Dt(n)),n._onInteractiveStateChange=n._onInteractiveStateChange.bind(Dt(n)),n._getPos=n._getPos.bind(Dt(n)),n._eventCanvasLoaded=n._eventCanvasLoaded.bind(Dt(n)),n._staticMapLoaded=n._staticMapLoaded.bind(Dt(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(e,r["PureComponent"]),It(e,null,[{key:"supported",value:function(){return D.supported()}}]),It(e,[{key:"getChildContext",value:function(){return{viewport:new f.a(this.props),isDragging:this.state.isDragging,eventManager:this._eventManager}}},{key:"componentDidMount",value:function(){var t=this._eventManager;t.on({mousemove:this._onMouseMove.bind(this),click:this._onMouseClick.bind(this),contextmenu:this._onContextMenu.bind(this)}),this._mapControls.setOptions(Object.assign({},this.props,this.props.viewState,{onStateChange:this._onInteractiveStateChange,eventManager:t})),this._transitionManager=new yt(this.props)}},{key:"componentWillUpdate",value:function(t){this.props.mapStyle!==t.mapStyle&&this._updateQueryParams(t.mapStyle);var e=Object.assign({},t,t.viewState);this._mapControls.setOptions(e),this._transitionManager.processViewportChange(e)}},{key:"getMap",value:function(){return this._map?this._map.getMap():null}},{key:"queryRenderedFeatures",value:function(t,e){return this._map.queryRenderedFeatures(t,e)}},{key:"_getFeatures",value:function(t){var e,n=t.pos,r=t.radius;if(r){var i=r,o=[[n[0]-i,n[1]+i],[n[0]+i,n[1]-i]];e=this._map.queryRenderedFeatures(o,this._queryParams)}else e=this._map.queryRenderedFeatures(n,this._queryParams);return e}},{key:"_updateQueryParams",value:function(t){var e=function(t){var e=null;return s(t)&&t.has("layers")?e=t.get("layers").filter(function(t){return t.get("interactive")}).map(function(t){return t.get("id")}).toJS():Array.isArray(t.layers)&&(e=t.layers.filter(function(t){return t.interactive}).map(function(t){return t.id})),e}(t);this._queryParams={layers:e}}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"_getPos",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"_onMouseMove",value:function(t){if(!this.state.isDragging){var e=this._getPos(t),n=this._getFeatures({pos:e,radius:this.props.clickRadius}),r=n&&0<n.length;if(r!==this.state.isHovering&&this.setState({isHovering:r}),this.props.onHover){var i=new f.a(this.props);t.lngLat=i.unproject(e),t.features=n,this.props.onHover(t)}}}},{key:"_onMouseClick",value:function(t){if(this.props.onClick){var e=this._getPos(t),n=new f.a(this.props);t.lngLat=n.unproject(e),t.features=this._getFeatures({pos:e,radius:this.props.clickRadius}),this.props.onClick(t)}}},{key:"_onContextMenu",value:function(t){this.props.onContextMenu&&this.props.onContextMenu(t)}},{key:"_eventCanvasLoaded",value:function(t){this._eventManager.setElement(t)}},{key:"_staticMapLoaded",value:function(t){this._map=t}},{key:"render",value:function(){var t=this.props,e={width:t.width,height:t.height,position:"relative",cursor:(0,t.getCursor)(this.state)};return Object(r.createElement)("div",{key:"map-controls",ref:this._eventCanvasLoaded,style:e},Object(r.createElement)(D,Object.assign({},this.props,this._transitionManager&&this._transitionManager.getViewportInTransition(),{ref:this._staticMapLoaded,children:this.props.children})))}}]),e}();function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function Wt(t,e){return(Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}zt.displayName="InteractiveMap",zt.propTypes=Ft,zt.defaultProps=Nt,zt.childContextTypes=Bt;var Ht={captureScroll:o.a.bool,captureDrag:o.a.bool,captureClick:o.a.bool,captureDoubleClick:o.a.bool},Xt={viewport:o.a.instanceOf(f.a),isDragging:o.a.bool,eventManager:o.a.object},Zt=function(t){function e(t){var n;return Vt(this,e),(n=function(t,e){return!e||"object"!==Ut(e)&&"function"!=typeof e?qt(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._events=null,n._onContainerLoad=n._onContainerLoad.bind(qt(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}(e,r["Component"]),function(t,e,n){e&&Gt(t.prototype,e),n&&Gt(t,n)}(e,[{key:"_onContainerLoad",value:function(t){var e=this.context.eventManager;if(e){var n=this._events;n&&(e.off(n),n=null),t&&(n={wheel:this._onScroll.bind(this),panstart:this._onDrag.bind(this),click:this._onClick.bind(this),dblclick:this._onDoubleClick.bind(this)},e.on(n,t)),this._events=n}}},{key:"_onScroll",value:function(t){this.props.captureScroll&&t.stopPropagation()}},{key:"_onDrag",value:function(t){this.props.captureDrag&&t.stopPropagation()}},{key:"_onClick",value:function(t){this.props.captureClick&&t.stopPropagation()}},{key:"_onDoubleClick",value:function(t){this.props.captureDoubleClick&&t.stopPropagation()}},{key:"render",value:function(){return null}}]),e}();function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Jt(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function $t(t,e){return!e||"object"!==Yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Zt.propTypes=Ht,Zt.defaultProps={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0},Zt.contextTypes=Xt;var ee=Object.assign({},Zt.propTypes,{className:o.a.string,longitude:o.a.number.isRequired,latitude:o.a.number.isRequired,offsetLeft:o.a.number,offsetTop:o.a.number}),ne=Object.assign({},Zt.defaultProps,{className:"",offsetLeft:0,offsetTop:0}),re=function(t){function e(){return Jt(this,e),$t(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(e,Zt),function(t,e,n){e&&Qt(t.prototype,e),n&&Qt(t,n)}(e,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.longitude,i=t.latitude,o=t.offsetLeft,a=t.offsetTop,s=Kt(this.context.viewport.project([n,i]),2),u=s[0],l=s[1];return Object(r.createElement)("div",{className:"mapboxgl-marker ".concat(e),ref:this._onContainerLoad,style:{position:"absolute",left:u+o,top:l+a},children:this.props.children})}}]),e}();re.displayName="Marker",re.propTypes=ee,re.defaultProps=ne;var ie={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}};function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function se(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function ue(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function le(t,e){return(le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var fe=Object.assign({},Zt.propTypes,{className:o.a.string,longitude:o.a.number.isRequired,latitude:o.a.number.isRequired,offsetLeft:o.a.number,offsetTop:o.a.number,tipSize:o.a.number,closeButton:o.a.bool,closeOnClick:o.a.bool,anchor:o.a.oneOf(Object.keys(ie)),dynamicPosition:o.a.bool,onClose:o.a.func}),pe=Object.assign({},Zt.defaultProps,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,closeButton:!0,closeOnClick:!0,onClose:function(){}}),he=function(t){function e(t){var n;return se(this,e),(n=function(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?ce(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._getPosition=n._getPosition.bind(ce(n)),n._onClose=n._onClose.bind(ce(n)),n._contentLoaded=n._contentLoaded.bind(ce(n)),n._renderTip=n._renderTip.bind(ce(n)),n._renderContent=n._renderContent.bind(ce(n)),n._closeOnClick=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&le(t,e)}(e,Zt),function(t,e,n){e&&ue(t.prototype,e),n&&ue(t,n)}(e,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"_getPosition",value:function(t,e){var n=this.context.viewport,r=this.props,i=r.anchor,o=r.dynamicPosition,a=r.tipSize;return this._content&&o?function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.selfWidth,a=t.selfHeight,s=t.anchor,u=t.padding,l=void 0===u?0:u,c=ie[s],f=c.x,p=c.y,h=n-p*a,d=h+a;if(h<l)for(;h<l&&p>=.5;)p-=.5,h+=.5*a;else if(d>i-l)for(;d>i-l&&p<=.5;)p+=.5,d-=.5*a;var y=e-f*o,v=y+o,g=.5;if(.5===p&&(f=Math.floor(f),g=1),y<l)for(;y<l&&f>=g;)f-=g,y+=g*o;else if(v>r-l)for(;v>r-l&&f<=1-g;)f+=g,v-=g*o;return Object.keys(ie).find(function(t){var e=ie[t];return e.x===f&&e.y===p})}({x:t,y:e,anchor:i,padding:a,width:n.width,height:n.height,selfWidth:this._content.clientWidth,selfHeight:this._content.clientHeight}):i}},{key:"_onClick",value:function(t){this.props.captureClick&&t.stopPropagation(),(this.props.closeOnClick||this._closeOnClick)&&this.props.onClose()}},{key:"_onClose",value:function(){this._closeOnClick=!0}},{key:"_contentLoaded",value:function(t){this._content=t}},{key:"_renderTip",value:function(){var t=this.props.tipSize;return Object(r.createElement)("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:t}})}},{key:"_renderContent",value:function(){var t=this.props,e=t.closeButton,n=t.children;return Object(r.createElement)("div",{key:"content",ref:this._contentLoaded,className:"mapboxgl-popup-content"},[e&&Object(r.createElement)("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:this._onClose},"×"),n])}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.longitude,i=t.latitude,o=t.offsetLeft,a=t.offsetTop,s=ae(this.context.viewport.project([n,i]),2),u=s[0],l=s[1],c=this._getPosition(u,l),f=ie[c],p={position:"absolute",left:u+o,top:l+a,transform:"translate(".concat(100*-f.x,"%, ").concat(100*-f.y,"%)")};return Object(r.createElement)("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(c," ").concat(e),style:p,ref:this._onContainerLoad},[this._renderTip(),this._renderContent()])}}]),e}();function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}he.displayName="Popup",he.propTypes=fe,he.defaultProps=pe;var be=Object.assign({},yt.defaultProps,{transitionDuration:300}),_e=Object.assign({},Zt.propTypes,{className:o.a.string,onViewStateChange:o.a.func,onViewportChange:o.a.func,showCompass:o.a.bool,showZoom:o.a.bool}),xe=Object.assign({},Zt.defaultProps,{className:"",onViewStateChange:function(){},onViewportChange:function(){},showCompass:!0,showZoom:!0}),we=function(t){function e(t){var n;return ye(this,e),n=function(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?me(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),At(t),n._updateViewport=n._updateViewport.bind(me(n)),n._onZoomIn=n._onZoomIn.bind(me(n)),n._onZoomOut=n._onZoomOut.bind(me(n)),n._onResetNorth=n._onResetNorth.bind(me(n)),n._renderCompass=n._renderCompass.bind(me(n)),n._renderButton=n._renderButton.bind(me(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(e,Zt),function(t,e,n){e&&ve(t.prototype,e),n&&ve(t,n)}(e,[{key:"shouldComponentUpdate",value:function(t,e,n){return this.context.viewport.bearing!==n.viewport.bearing}},{key:"_updateViewport",value:function(t){var e=this.context.viewport,n=new w(Object.assign({},e,t)),r=Object.assign({},n.getViewportProps(),be);this.props.onViewStateChange({viewState:r}),(this.props.onChangeViewport||this.props.onViewportChange)(r)}},{key:"_onZoomIn",value:function(){this._updateViewport({zoom:this.context.viewport.zoom+1})}},{key:"_onZoomOut",value:function(){this._updateViewport({zoom:this.context.viewport.zoom-1})}},{key:"_onResetNorth",value:function(){this._updateViewport({bearing:0,pitch:0})}},{key:"_renderCompass",value:function(){var t=this.context.viewport.bearing;return Object(r.createElement)("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate(".concat(t,"deg)")}})}},{key:"_renderButton",value:function(t,e,n,i){return Object(r.createElement)("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(t),type:"button",title:e,onClick:n,children:i})}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.showCompass,i=t.showZoom;return Object(r.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(e),ref:this._onContainerLoad},[i&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),i&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),n&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass())])}}]),e}();we.displayName="NavigationControl",we.propTypes=_e,we.defaultProps=xe;var Ee=n(156);function Oe(t){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function Pe(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Te(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ke=Object.assign({},Zt.propTypes,{redraw:o.a.func.isRequired}),Ae=function(t){function e(t){var n;return Se(this,e),(n=function(t,e){return!e||"object"!==Oe(e)&&"function"!=typeof e?Te(t):e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)))._redraw=n._redraw.bind(Te(n)),n._canvasLoaded=n._canvasLoaded.bind(Te(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(e,Zt),function(t,e,n){e&&Pe(t.prototype,e),n&&Pe(t,n)}(e,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t=Ee.window.devicePixelRatio||1,e=this._canvas.getContext("2d");e.save(),e.scale(t,t);var n=this.context,r=n.viewport,i=n.isDragging;this.props.redraw({width:r.width,height:r.height,ctx:e,isDragging:i,project:r.project.bind(r),unproject:r.unproject.bind(r)}),e.restore()}},{key:"_canvasLoaded",value:function(t){this._canvas=t,this._onContainerLoad(t)}},{key:"render",value:function(){var t=Ee.window.devicePixelRatio||1,e=this.context.viewport,n=e.width,i=e.height;return Object(r.createElement)("canvas",{ref:this._canvasLoaded,width:n*t,height:i*t,style:{width:"".concat(n,"px"),height:"".concat(i,"px"),position:"absolute",left:0,top:0}})}}]),e}();function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function Re(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function Ie(t,e){return!e||"object"!==Me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t,e){return(Le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ae.displayName="CanvasOverlay",Ae.propTypes=ke,Ae.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1};var De=Object.assign({},Zt.propTypes,{redraw:o.a.func.isRequired,style:o.a.object}),Fe=function(t){function e(){return je(this,e),Ie(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Le(t,e)}(e,Zt),function(t,e,n){e&&Re(t.prototype,e),n&&Re(t,n)}(e,[{key:"render",value:function(){var t=this.context,e=t.viewport,n=t.isDragging,i=Object.assign({position:"absolute",left:0,top:0,width:e.width,height:e.height},this.props.style);return Object(r.createElement)("div",{ref:this._onContainerLoad,style:i},this.props.redraw({width:e.width,height:e.height,isDragging:n,project:e.project.bind(e),unproject:e.unproject.bind(e)}))}}]),e}();function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function ze(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function Ue(t,e){return!e||"object"!==Ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Fe.displayName="HTMLOverlay",Fe.propTypes=De,Fe.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1};var Ge=Object.assign({},Zt.propTypes,{redraw:o.a.func.isRequired,style:o.a.object}),We=function(t){function e(){return Be(this,e),Ue(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(e,Zt),function(t,e,n){e&&ze(t.prototype,e),n&&ze(t,n)}(e,[{key:"render",value:function(){var t=this.context,e=t.viewport,n=t.isDragging,i=Object.assign({position:"absolute",left:0,top:0},this.props.style);return Object(r.createElement)("svg",{width:e.width,height:e.height,ref:this._onContainerLoad,style:i},this.props.redraw({width:e.width,height:e.height,isDragging:n,project:e.project.bind(e),unproject:e.unproject.bind(e)}))}}]),e}();We.displayName="SVGOverlay",We.propTypes=Ge,We.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},n.d(e,"experimental",function(){return qe}),n.d(e,"default",function(){return zt}),n.d(e,"InteractiveMap",function(){return zt}),n.d(e,"StaticMap",function(){return D}),n.d(e,"BaseControl",function(){return Zt}),n.d(e,"Marker",function(){return re}),n.d(e,"Popup",function(){return he}),n.d(e,"NavigationControl",function(){return we}),n.d(e,"CanvasOverlay",function(){return Ae}),n.d(e,"HTMLOverlay",function(){return Fe}),n.d(e,"SVGOverlay",function(){return We}),n.d(e,"TRANSITION_EVENTS",function(){return pt}),n.d(e,"TransitionInterpolator",function(){return z}),n.d(e,"LinearInterpolator",function(){return ut}),n.d(e,"FlyToInterpolator",function(){return tt});var qe={MapControls:Ct}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(110),i=n(50),o=85.05113,a=-85.05113;function s(t){var e=t.width,n=t.height,s=t.longitude,u=t.latitude,l=t.zoom,c=t.pitch,f=void 0===c?0:c,p=t.bearing,h=void 0===p?0:p;(s<-180||s>180)&&(s=Object(i.c)(s+180,360)-180),(h<-180||h>180)&&(h=Object(i.c)(h+180,360)-180);var d=new r.a({width:e,height:n,longitude:s,latitude:u,zoom:l}),y=d.project([s,o])[1],v=d.project([s,a])[1],g=0;return v-y<n&&(l+=Math.log2(n/(v-y)),y=(d=new r.a({width:e,height:n,longitude:s,latitude:u,zoom:l})).project([s,o])[1],v=d.project([s,a])[1]),y>0?g=y:v<n&&(g=v-n),g&&(u=d.unproject([e/2,n/2+g])[1]),{width:e,height:n,longitude:s,latitude:u,zoom:l,pitch:f,bearing:h}}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(111),i=n(50),o=n(31),a=.01,s=["longitude","latitude","zoom"];function u(t,e,n){var u={},l=t.zoom,c=[t.longitude,t.latitude],f=Object(o.l)(l),p=e.zoom,h=[e.longitude,e.latitude],d=Object(o.l)(p-l),y=new r.a(Object(o.g)(c,f)),v=new r.a(Object(o.g)(h,f)).subtract(y),g=Math.max(t.width,t.height),m=g/d,b=Math.sqrt(v.x*v.x+v.y*v.y);if(Math.abs(b)<a){for(var _=0;_<s.length;_++){var x=s[_],w=t[x],E=e[x];u[x]=Object(i.b)(w,E,n)}return u}var O=1.414*1.414,S=(m*m-g*g+O*O*b*b)/(2*g*O*b),P=(m*m-g*g-O*O*b*b)/(2*m*O*b),C=Math.log(Math.sqrt(S*S+1)-S),T=n*((Math.log(Math.sqrt(P*P+1)-P)-C)/1.414),k=Math.cosh(C)/Math.cosh(C+1.414*T),A=g*((Math.cosh(C)*Math.tanh(C+1.414*T)-Math.sinh(C))/O)/b,M=1/k,j=l+Object(o.i)(M),R=Object(o.j)(y.add(v.scale(A)).scale(M),Object(o.l)(j));return u.longitude=R[0],u.latitude=R[1],u.zoom=j,u}},function(t,e,n){"use strict";var r=n(20),i=n(21),o=n(4),a=n(7),s=n(13),u=n(11),l=n(14),c=n(129),f=n(22),p=n(111),h=n(100),d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(o.a)(this,e),t=Object(s.a)(this,Object(u.a)(e).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,a),t}return Object(l.a)(e,t),Object(a.a)(e,[{key:"applyMatrix4",value:function(t){return t.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(f.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(f.a)(t)}}]),e}(n(97).a),y=n(217),v=n.n(y),g=n(218),m=n.n(g),b=n(219),_=n.n(b),x=n(83),w=n.n(x),E=n(220),O=n.n(E),S=n(71),P=n.n(S),C=n(221),T=n.n(C),k=n(87),A=n.n(k),M=n(33),j=n.n(M),R=n(222),I=n.n(R),L=n(53),D=n.n(L),F=n(57),N=n.n(F),B=n(223),z=n.n(B),U=n(224),V=n.n(U),G=n(58),W=n.n(G),q=n(84),H=n.n(q),X=n(98),Z=n.n(X),Y=n(85),K=n.n(Y);n.d(e,"a",function(){return $});var J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function Q(t,e){return t.length===e&&t.every(Number.isFinite)}var $=function(t){function e(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Object(o.a)(this,e),t=Object(s.a)(this,Object(u.a)(e).call(this)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return Object(l.a)(e,t),Object(a.a)(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=i,this[2]=u,this[3]=p,this[4]=e,this[5]=o,this[6]=l,this[7]=h,this[8]=n,this[9]=a,this[10]=c,this[11]=d,this[12]=r,this[13]=s,this[14]=f,this[15]=y,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=f,this[12]=p,this[13]=h,this[14]=d,this[15]=y,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,Object(i.a)(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,n){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[t][e]=Object(f.a)(n):this[e][t]=Object(f.a)(n),this}},{key:"determinant",value:function(){return v()(this)}},{key:"identity",value:function(){return this.copy(J)}},{key:"fromQuaternion",value:function(t){return m()(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=t.far;return _()(this,e,n,r,i,o,a),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,n=t.center,r=void 0===n?[0,0,0]:n,i=t.up,o=void 0===i?[0,1,0]:i;return w()(this,e,r,o),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far,u=void 0===s?500:s;return O()(this,e,n,r,i,a,u),this.check()}},{key:"orthographic",value:function(t){var n=t.fovy,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.focalDistance,s=void 0===a?1:a,u=t.near,l=void 0===u?.1:u,c=t.far,f=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var p=r/2,h=s*Math.tan(p),d=h*o;return(new e).ortho({left:-d,right:d,bottom:-h,top:h,near:l,far:f})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.near,s=void 0===a?.1:a,u=t.far,l=void 0===u?500:u;if((e=e||r)>2*Math.PI)throw Error("radians");return P()(this,e,o,s,l),this.check()}},{key:"transpose",value:function(){return T()(this,this),this.check()}},{key:"invert",value:function(){return A()(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return j()(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return j()(this,this,t),this.check()}},{key:"rotateX",value:function(t){return H()(this,this,t),this.check()}},{key:"rotateY",value:function(t){return Z()(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return K()(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],o=e[2];return this.rotateX(n).rotateY(i).rotateZ(o)}},{key:"rotateAxis",value:function(t,e){return I()(this,this,t,e),this.check()}},{key:"scale",value:function(t){return D()(this,this,t),this.check()}},{key:"translate",value:function(t){return N()(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new p.a,z()(e,t,this),Q(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new h.a,V()(e,t,this),Q(e,3),e}},{key:"transformVector4",value:function(t,e){return e=e||new d,W()(e,t,this),Q(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,n){switch(t.length){case 2:e=e||new p.a,W()(e,[t[0],t[1],0,n],this),e.length=2,Q(e,2);break;case 3:e=e||new h.a,W()(e,[t[0],t[1],t[2],n],this),e.length=3,Q(e,3);break;case 4:if(Boolean(n)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");e=e||new d,W()(e,t,this),Q(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"ELEMENTS",get:function(){return 16}}]),e}(c.a)}]);